const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BDhZalkK.js","assets/vendor-BOyKkbPs.js","assets/router-CsmlJ8KC.js","assets/supabase-CaJtKSvx.js","assets/icons-JtzwHstV.js"])))=>i.map(i=>d[i]);
var Oq=Object.defineProperty;var Tq=(e,t,n)=>t in e?Oq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gw=(e,t,n)=>Tq(e,typeof t!="symbol"?t+"":t,n);import{r as M,a as R_,b as ms,d as gb,g as Mq,c as Kw}from"./vendor-BOyKkbPs.js";import{u as Za,a as B_,L as Lq,B as Iq,R as Rq,b as Ya,N as rr}from"./router-CsmlJ8KC.js";import{c as Bq,_ as HN}from"./supabase-CaJtKSvx.js";import{I as Fq,B as UT,C as Rd,M as u1,L as Ag,E as zq,a as $N,b as ln,U as WT,c as qa,S as Qm,d as Bd,e as gc,f as Uq,g as zn,h as Uo,i as Jd,j as hs,k as Ol,X as al,l as Fd,F as vc,T as Qn,A as qT,R as F_,D as mv,m as Wq,n as Zm,o as HT,p as Cg,q as qq,r as Hq,s as $q,t as z_,u as cs,P as Vq,v as eg,w as ba,x as tg,y as Gh,z as Gq,G as $T,H as MC,J as c1,K as Sp,N as VT,O as d1,Q as GT,V as Kq}from"./icons-JtzwHstV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var KT={exports:{}},f1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yq=Symbol.for("react.transitional.element"),Xq=Symbol.for("react.fragment");function YT(e,t,n){var r=null;if(n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:Yq,type:e,key:r,ref:t!==void 0?t:null,props:n}}f1.Fragment=Xq;f1.jsx=YT;f1.jsxs=YT;KT.exports=f1;var d=KT.exports,XT={exports:{}},h1={},JT={exports:{}},QT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,U){var W=B.length;B.push(U);e:for(;0<W;){var z=W-1>>>1,J=B[z];if(0<a(J,U))B[z]=U,B[W]=J,W=z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],W=B.pop();if(W!==U){B[0]=W;e:for(var z=0,J=B.length,ee=J>>>1;z<ee;){var L=2*(z+1)-1,q=B[L],Y=L+1,te=B[Y];if(0>a(q,W))Y<J&&0>a(te,q)?(B[z]=te,B[Y]=W,z=Y):(B[z]=q,B[L]=W,z=L);else if(Y<J&&0>a(te,W))B[z]=te,B[Y]=W,z=Y;else break e}}return U}function a(B,U){var W=B.sortIndex-U.sortIndex;return W!==0?W:B.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,h=3,p=!1,m=!1,v=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function N(B){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=B)r(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(u)}}function k(B){if(v=!1,N(B),!m)if(n(l)!==null)m=!0,j||(j=!0,D());else{var U=n(u);U!==null&&H(k,U.startTime-B)}}var j=!1,S=-1,A=5,P=-1;function T(){return y?!0:!(e.unstable_now()-P<A)}function E(){if(y=!1,j){var B=e.unstable_now();P=B;var U=!0;try{e:{m=!1,v&&(v=!1,b(S),S=-1),p=!0;var W=h;try{t:{for(N(B),f=n(l);f!==null&&!(f.expirationTime>B&&T());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var J=z(f.expirationTime<=B);if(B=e.unstable_now(),typeof J=="function"){f.callback=J,N(B),U=!0;break t}f===n(l)&&r(l),N(B)}else r(l);f=n(l)}if(f!==null)U=!0;else{var ee=n(u);ee!==null&&H(k,ee.startTime-B),U=!1}}break e}finally{f=null,h=W,p=!1}U=void 0}}finally{U?D():j=!1}}}var D;if(typeof x=="function")D=function(){x(E)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=E,D=function(){F.postMessage(null)}}else D=function(){g(E,0)};function H(B,U){S=g(function(){B(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var W=h;h=U;try{return B()}finally{h=W}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=h;h=B;try{return U()}finally{h=W}},e.unstable_scheduleCallback=function(B,U,W){var z=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?z+W:z):W=z,B){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=W+J,B={id:c++,callback:U,priorityLevel:B,startTime:W,expirationTime:J,sortIndex:-1},W>z?(B.sortIndex=W,t(u,B),n(l)===null&&B===n(u)&&(v?(b(S),S=-1):v=!0,H(k,W-z))):(B.sortIndex=J,t(l,B),m||p||(m=!0,j||(j=!0,D()))),B},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(B){var U=h;return function(){var W=h;h=U;try{return B.apply(this,arguments)}finally{h=W}}}})(QT);JT.exports=QT;var Jq=JT.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr=Jq,ZT=M,Qq=R_;function We(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function eM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gv(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LC(e){if(gv(e)!==e)throw Error(We(188))}function Zq(e){var t=e.alternate;if(!t){if(t=gv(e),t===null)throw Error(We(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return LC(a),e;if(i===r)return LC(a),t;i=i.sibling}throw Error(We(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(We(189))}}if(n.alternate!==r)throw Error(We(190))}if(n.tag!==3)throw Error(We(188));return n.stateNode.current===n?e:t}function nM(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=nM(e),t!==null)return t;e=e.sibling}return null}var Un=Object.assign,eH=Symbol.for("react.element"),ty=Symbol.for("react.transitional.element"),$m=Symbol.for("react.portal"),dh=Symbol.for("react.fragment"),rM=Symbol.for("react.strict_mode"),VN=Symbol.for("react.profiler"),tH=Symbol.for("react.provider"),aM=Symbol.for("react.consumer"),Tl=Symbol.for("react.context"),U_=Symbol.for("react.forward_ref"),GN=Symbol.for("react.suspense"),KN=Symbol.for("react.suspense_list"),W_=Symbol.for("react.memo"),Bu=Symbol.for("react.lazy"),YN=Symbol.for("react.activity"),nH=Symbol.for("react.memo_cache_sentinel"),IC=Symbol.iterator;function Sm(e){return e===null||typeof e!="object"?null:(e=IC&&e[IC]||e["@@iterator"],typeof e=="function"?e:null)}var rH=Symbol.for("react.client.reference");function XN(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===rH?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dh:return"Fragment";case VN:return"Profiler";case rM:return"StrictMode";case GN:return"Suspense";case KN:return"SuspenseList";case YN:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case $m:return"Portal";case Tl:return(e.displayName||"Context")+".Provider";case aM:return(e._context.displayName||"Context")+".Consumer";case U_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W_:return t=e.displayName||null,t!==null?t:XN(e.type)||"Memo";case Bu:t=e._payload,e=e._init;try{return XN(e(t))}catch{}}return null}var Vm=Array.isArray,kt=ZT.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,un=Qq.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vd={pending:!1,data:null,method:null,action:null},JN=[],fh=-1;function il(e){return{current:e}}function ta(e){0>fh||(e.current=JN[fh],JN[fh]=null,fh--)}function $n(e,t){fh++,JN[fh]=e.current,e.current=t}var Hs=il(null),Eg=il(null),rc=il(null),vb=il(null);function yb(e,t){switch($n(rc,t),$n(Eg,e),$n(Hs,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?UE(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=UE(t),e=wI(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ta(Hs),$n(Hs,e)}function Kh(){ta(Hs),ta(Eg),ta(rc)}function QN(e){e.memoizedState!==null&&$n(vb,e);var t=Hs.current,n=wI(t,e.type);t!==n&&($n(Eg,e),$n(Hs,n))}function bb(e){Eg.current===e&&(ta(Hs),ta(Eg)),vb.current===e&&(ta(vb),Fg._currentValue=vd)}var ZN=Object.prototype.hasOwnProperty,q_=zr.unstable_scheduleCallback,Yw=zr.unstable_cancelCallback,aH=zr.unstable_shouldYield,iH=zr.unstable_requestPaint,$s=zr.unstable_now,oH=zr.unstable_getCurrentPriorityLevel,iM=zr.unstable_ImmediatePriority,oM=zr.unstable_UserBlockingPriority,xb=zr.unstable_NormalPriority,sH=zr.unstable_LowPriority,sM=zr.unstable_IdlePriority,lH=zr.log,uH=zr.unstable_setDisableYieldValue,vv=null,Zi=null;function Gu(e){if(typeof lH=="function"&&uH(e),Zi&&typeof Zi.setStrictMode=="function")try{Zi.setStrictMode(vv,e)}catch{}}var eo=Math.clz32?Math.clz32:fH,cH=Math.log,dH=Math.LN2;function fH(e){return e>>>=0,e===0?32:31-(cH(e)/dH|0)|0}var ny=256,ry=4194304;function Qc(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function p1(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s!==0?(r=s&~i,r!==0?a=Qc(r):(o&=s,o!==0?a=Qc(o):n||(n=s&~e,n!==0&&(a=Qc(n))))):(s=r&~i,s!==0?a=Qc(s):o!==0?a=Qc(o):n||(n=r&~e,n!==0&&(a=Qc(n)))),a===0?0:t!==0&&t!==a&&!(t&i)&&(i=a&-a,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:a}function yv(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function hH(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lM(){var e=ny;return ny<<=1,!(ny&4194048)&&(ny=256),e}function uM(){var e=ry;return ry<<=1,!(ry&62914560)&&(ry=4194304),e}function Xw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bv(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pH(e,t,n,r,a,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-eo(n),f=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(h!==null)for(u[c]=null,c=0;c<h.length;c++){var p=h[c];p!==null&&(p.lane&=-536870913)}n&=~f}r!==0&&cM(e,r,0),i!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=i&~(o&~t))}function cM(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-eo(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194090}function dM(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-eo(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function H_(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $_(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function fM(){var e=un.p;return e!==0?e:(e=window.event,e===void 0?32:PI(e.type))}function mH(e,t){var n=un.p;try{return un.p=e,t()}finally{un.p=n}}var jc=Math.random().toString(36).slice(2),Fa="__reactFiber$"+jc,wi="__reactProps$"+jc,kp="__reactContainer$"+jc,eS="__reactEvents$"+jc,gH="__reactListeners$"+jc,vH="__reactHandles$"+jc,RC="__reactResources$"+jc,xv="__reactMarker$"+jc;function V_(e){delete e[Fa],delete e[wi],delete e[eS],delete e[gH],delete e[vH]}function hh(e){var t=e[Fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kp]||n[Fa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=HE(e);e!==null;){if(n=e[Fa])return n;e=HE(e)}return t}e=n,n=e.parentNode}return null}function _p(e){if(e=e[Fa]||e[kp]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Gm(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(We(33))}function Ah(e){var t=e[RC];return t||(t=e[RC]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Zr(e){e[xv]=!0}var hM=new Set,pM={};function Qd(e,t){Yh(e,t),Yh(e+"Capture",t)}function Yh(e,t){for(pM[e]=t,e=0;e<t.length;e++)hM.add(t[e])}var yH=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),BC={},FC={};function bH(e){return ZN.call(FC,e)?!0:ZN.call(BC,e)?!1:yH.test(e)?FC[e]=!0:(BC[e]=!0,!1)}function eb(e,t,n){if(bH(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ay(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function wl(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}var Jw,zC;function nh(e){if(Jw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jw=t&&t[1]||"",zC=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jw+e+zC}var Qw=!1;function Zw(e,t){if(!e||Qw)return"";Qw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(p){var h=p}Reflect.construct(e,[],f)}else{try{f.call()}catch(p){h=p}e.call(f.prototype)}}else{try{throw Error()}catch(p){h=p}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(p){if(p&&h&&typeof p.stack=="string")return[p.stack,h.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],s=i[1];if(o&&s){var l=o.split(`
`),u=s.split(`
`);for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===u.length)for(r=l.length-1,a=u.length-1;1<=r&&0<=a&&l[r]!==u[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==u[a]){if(r!==1||a!==1)do if(r--,a--,0>a||l[r]!==u[a]){var c=`
`+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=r&&0<=a);break}}}finally{Qw=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?nh(n):""}function xH(e){switch(e.tag){case 26:case 27:case 5:return nh(e.type);case 16:return nh("Lazy");case 13:return nh("Suspense");case 19:return nh("SuspenseList");case 0:case 15:return Zw(e.type,!1);case 11:return Zw(e.type.render,!1);case 1:return Zw(e.type,!0);case 31:return nh("Activity");default:return""}}function UC(e){try{var t="";do t+=xH(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Do(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wH(e){var t=mM(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wb(e){e._valueTracker||(e._valueTracker=wH(e))}function gM(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mM(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Nb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var NH=/[\n"\\]/g;function Lo(e){return e.replace(NH,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function tS(e,t,n,r,a,i,o,s){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Do(t)):e.value!==""+Do(t)&&(e.value=""+Do(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?nS(e,o,Do(t)):n!=null?nS(e,o,Do(n)):r!=null&&e.removeAttribute("value"),a==null&&i!=null&&(e.defaultChecked=!!i),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.name=""+Do(s):e.removeAttribute("name")}function vM(e,t,n,r,a,i,o,s){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;n=n!=null?""+Do(n):"",t=t!=null?""+Do(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r=r??a,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function nS(e,t,n){t==="number"&&Nb(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ch(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Do(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function yM(e,t,n){if(t!=null&&(t=""+Do(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Do(n):""}function bM(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(We(92));if(Vm(r)){if(1<r.length)throw Error(We(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=Do(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r)}function Xh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var SH=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function WC(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||SH.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xM(e,t,n){if(t!=null&&typeof t!="object")throw Error(We(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&WC(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&WC(e,i,t[i])}function G_(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kH=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_H=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tb(e){return _H.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var rS=null;function K_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ph=null,Eh=null;function qC(e){var t=_p(e);if(t&&(e=t.stateNode)){var n=e[wi]||null;e:switch(e=t.stateNode,t.type){case"input":if(tS(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Lo(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[wi]||null;if(!a)throw Error(We(90));tS(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&gM(r)}break e;case"textarea":yM(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ch(e,!!n.multiple,t,!1)}}}var e5=!1;function wM(e,t,n){if(e5)return e(t,n);e5=!0;try{var r=e(t);return r}finally{if(e5=!1,(ph!==null||Eh!==null)&&(k1(),ph&&(t=ph,e=Eh,Eh=ph=null,qC(t),e)))for(t=0;t<e.length;t++)qC(e[t])}}function Dg(e,t){var n=e.stateNode;if(n===null)return null;var r=n[wi]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(We(231,t,typeof n));return n}var $l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aS=!1;if($l)try{var km={};Object.defineProperty(km,"passive",{get:function(){aS=!0}}),window.addEventListener("test",km,km),window.removeEventListener("test",km,km)}catch{aS=!1}var Ku=null,Y_=null,nb=null;function NM(){if(nb)return nb;var e,t=Y_,n=t.length,r,a="value"in Ku?Ku.value:Ku.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return nb=a.slice(e,1<r?1-r:void 0)}function rb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iy(){return!0}function HC(){return!1}function ki(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?iy:HC,this.isPropagationStopped=HC,this}return Un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iy)},persist:function(){},isPersistent:iy}),t}var Zd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m1=ki(Zd),wv=Un({},Zd,{view:0,detail:0}),jH=ki(wv),t5,n5,_m,g1=Un({},wv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_m&&(_m&&e.type==="mousemove"?(t5=e.screenX-_m.screenX,n5=e.screenY-_m.screenY):n5=t5=0,_m=e),t5)},movementY:function(e){return"movementY"in e?e.movementY:n5}}),$C=ki(g1),AH=Un({},g1,{dataTransfer:0}),CH=ki(AH),EH=Un({},wv,{relatedTarget:0}),r5=ki(EH),DH=Un({},Zd,{animationName:0,elapsedTime:0,pseudoElement:0}),PH=ki(DH),OH=Un({},Zd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TH=ki(OH),MH=Un({},Zd,{data:0}),VC=ki(MH),LH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RH[e])?!!t[e]:!1}function X_(){return BH}var FH=Un({},wv,{key:function(e){if(e.key){var t=LH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X_,charCode:function(e){return e.type==="keypress"?rb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zH=ki(FH),UH=Un({},g1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GC=ki(UH),WH=Un({},wv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X_}),qH=ki(WH),HH=Un({},Zd,{propertyName:0,elapsedTime:0,pseudoElement:0}),$H=ki(HH),VH=Un({},g1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GH=ki(VH),KH=Un({},Zd,{newState:0,oldState:0}),YH=ki(KH),XH=[9,13,27,32],J_=$l&&"CompositionEvent"in window,ng=null;$l&&"documentMode"in document&&(ng=document.documentMode);var JH=$l&&"TextEvent"in window&&!ng,SM=$l&&(!J_||ng&&8<ng&&11>=ng),KC=" ",YC=!1;function kM(e,t){switch(e){case"keyup":return XH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _M(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mh=!1;function QH(e,t){switch(e){case"compositionend":return _M(t);case"keypress":return t.which!==32?null:(YC=!0,KC);case"textInput":return e=t.data,e===KC&&YC?null:e;default:return null}}function ZH(e,t){if(mh)return e==="compositionend"||!J_&&kM(e,t)?(e=NM(),nb=Y_=Ku=null,mh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SM&&t.locale!=="ko"?null:t.data;default:return null}}var e$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!e$[e.type]:t==="textarea"}function jM(e,t,n,r){ph?Eh?Eh.push(r):Eh=[r]:ph=r,t=zb(t,"onChange"),0<t.length&&(n=new m1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var rg=null,Pg=null;function t$(e){yI(e,0)}function v1(e){var t=Gm(e);if(gM(t))return e}function JC(e,t){if(e==="change")return t}var AM=!1;if($l){var a5;if($l){var i5="oninput"in document;if(!i5){var QC=document.createElement("div");QC.setAttribute("oninput","return;"),i5=typeof QC.oninput=="function"}a5=i5}else a5=!1;AM=a5&&(!document.documentMode||9<document.documentMode)}function ZC(){rg&&(rg.detachEvent("onpropertychange",CM),Pg=rg=null)}function CM(e){if(e.propertyName==="value"&&v1(Pg)){var t=[];jM(t,Pg,e,K_(e)),wM(t$,t)}}function n$(e,t,n){e==="focusin"?(ZC(),rg=t,Pg=n,rg.attachEvent("onpropertychange",CM)):e==="focusout"&&ZC()}function r$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return v1(Pg)}function a$(e,t){if(e==="click")return v1(t)}function i$(e,t){if(e==="input"||e==="change")return v1(t)}function o$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oo=typeof Object.is=="function"?Object.is:o$;function Og(e,t){if(oo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!ZN.call(t,a)||!oo(e[a],t[a]))return!1}return!0}function eE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tE(e,t){var n=eE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eE(n)}}function EM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DM(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Nb(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nb(e.document)}return t}function Q_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var s$=$l&&"documentMode"in document&&11>=document.documentMode,gh=null,iS=null,ag=null,oS=!1;function nE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oS||gh==null||gh!==Nb(r)||(r=gh,"selectionStart"in r&&Q_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ag&&Og(ag,r)||(ag=r,r=zb(iS,"onSelect"),0<r.length&&(t=new m1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gh)))}function Yc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vh={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionrun:Yc("Transition","TransitionRun"),transitionstart:Yc("Transition","TransitionStart"),transitioncancel:Yc("Transition","TransitionCancel"),transitionend:Yc("Transition","TransitionEnd")},o5={},PM={};$l&&(PM=document.createElement("div").style,"AnimationEvent"in window||(delete vh.animationend.animation,delete vh.animationiteration.animation,delete vh.animationstart.animation),"TransitionEvent"in window||delete vh.transitionend.transition);function ef(e){if(o5[e])return o5[e];if(!vh[e])return e;var t=vh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in PM)return o5[e]=t[n];return e}var OM=ef("animationend"),TM=ef("animationiteration"),MM=ef("animationstart"),l$=ef("transitionrun"),u$=ef("transitionstart"),c$=ef("transitioncancel"),LM=ef("transitionend"),IM=new Map,sS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sS.push("scrollEnd");function gs(e,t){IM.set(e,t),Qd(t,[e])}var rE=new WeakMap;function Io(e,t){if(typeof e=="object"&&e!==null){var n=rE.get(e);return n!==void 0?n:(t={value:e,source:t,stack:UC(t)},rE.set(e,t),t)}return{value:e,source:t,stack:UC(t)}}var Eo=[],yh=0,Z_=0;function y1(){for(var e=yh,t=Z_=yh=0;t<e;){var n=Eo[t];Eo[t++]=null;var r=Eo[t];Eo[t++]=null;var a=Eo[t];Eo[t++]=null;var i=Eo[t];if(Eo[t++]=null,r!==null&&a!==null){var o=r.pending;o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a}i!==0&&RM(n,a,i)}}function b1(e,t,n,r){Eo[yh++]=e,Eo[yh++]=t,Eo[yh++]=n,Eo[yh++]=r,Z_|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function e3(e,t,n,r){return b1(e,t,n,r),Sb(e)}function jp(e,t){return b1(e,null,null,t),Sb(e)}function RM(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var a=!1,i=e.return;i!==null;)i.childLanes|=n,r=i.alternate,r!==null&&(r.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(a=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,a&&t!==null&&(a=31-eo(n),e=i.hiddenUpdates,r=e[a],r===null?e[a]=[t]:r.push(t),t.lane=n|536870912),i):null}function Sb(e){if(50<pg)throw pg=0,CS=null,Error(We(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var bh={};function d$(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(e,t,n,r){return new d$(e,t,n,r)}function t3(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zl(e,t){var n=e.alternate;return n===null?(n=Gi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function BM(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ab(e,t,n,r,a,i){var o=0;if(r=e,typeof e=="function")t3(e)&&(o=1);else if(typeof e=="string")o=hV(e,n,Hs.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case YN:return e=Gi(31,n,t,a),e.elementType=YN,e.lanes=i,e;case dh:return yd(n.children,a,i,t);case rM:o=8,a|=24;break;case VN:return e=Gi(12,n,t,a|2),e.elementType=VN,e.lanes=i,e;case GN:return e=Gi(13,n,t,a),e.elementType=GN,e.lanes=i,e;case KN:return e=Gi(19,n,t,a),e.elementType=KN,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tH:case Tl:o=10;break e;case aM:o=9;break e;case U_:o=11;break e;case W_:o=14;break e;case Bu:o=16,r=null;break e}o=29,n=Error(We(130,e===null?"null":typeof e,"")),r=null}return t=Gi(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function yd(e,t,n,r){return e=Gi(7,e,r,t),e.lanes=n,e}function s5(e,t,n){return e=Gi(6,e,null,t),e.lanes=n,e}function l5(e,t,n){return t=Gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var xh=[],wh=0,kb=null,_b=0,Po=[],Oo=0,bd=null,Ml=1,Ll="";function Zc(e,t){xh[wh++]=_b,xh[wh++]=kb,kb=e,_b=t}function FM(e,t,n){Po[Oo++]=Ml,Po[Oo++]=Ll,Po[Oo++]=bd,bd=e;var r=Ml;e=Ll;var a=32-eo(r)-1;r&=~(1<<a),n+=1;var i=32-eo(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ml=1<<32-eo(t)+a|n<<a|r,Ll=i+e}else Ml=1<<i|n<<a|r,Ll=e}function n3(e){e.return!==null&&(Zc(e,1),FM(e,1,0))}function r3(e){for(;e===kb;)kb=xh[--wh],xh[wh]=null,_b=xh[--wh],xh[wh]=null;for(;e===bd;)bd=Po[--Oo],Po[Oo]=null,Ll=Po[--Oo],Po[Oo]=null,Ml=Po[--Oo],Po[Oo]=null}var Xa=null,or=null,an=!1,xd=null,Ls=!1,lS=Error(We(519));function zd(e){var t=Error(We(418,""));throw Tg(Io(t,e)),lS}function aE(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Fa]=e,t[wi]=r,n){case"dialog":zt("cancel",t),zt("close",t);break;case"iframe":case"object":case"embed":zt("load",t);break;case"video":case"audio":for(n=0;n<Ig.length;n++)zt(Ig[n],t);break;case"source":zt("error",t);break;case"img":case"image":case"link":zt("error",t),zt("load",t);break;case"details":zt("toggle",t);break;case"input":zt("invalid",t),vM(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),wb(t);break;case"select":zt("invalid",t);break;case"textarea":zt("invalid",t),bM(t,r.value,r.defaultValue,r.children),wb(t)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||xI(t.textContent,n)?(r.popover!=null&&(zt("beforetoggle",t),zt("toggle",t)),r.onScroll!=null&&zt("scroll",t),r.onScrollEnd!=null&&zt("scrollend",t),r.onClick!=null&&(t.onclick=A1),t=!0):t=!1,t||zd(e)}function iE(e){for(Xa=e.return;Xa;)switch(Xa.tag){case 5:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:Xa=Xa.return}}function jm(e){if(e!==Xa)return!1;if(!an)return iE(e),an=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||MS(e.type,e.memoizedProps)),n=!n),n&&or&&zd(e),iE(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(We(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){or=ds(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}or=null}}else t===27?(t=or,Ac(e.type)?(e=RS,RS=null,or=e):or=t):or=Xa?ds(e.stateNode.nextSibling):null;return!0}function Nv(){or=Xa=null,an=!1}function oE(){var e=xd;return e!==null&&(hi===null?hi=e:hi.push.apply(hi,e),xd=null),e}function Tg(e){xd===null?xd=[e]:xd.push(e)}var uS=il(null),tf=null,Il=null;function Uu(e,t,n){$n(uS,t._currentValue),t._currentValue=n}function Ul(e){e._currentValue=uS.current,ta(uS)}function cS(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dS(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var i=a.dependencies;if(i!==null){var o=a.child;i=i.firstContext;e:for(;i!==null;){var s=i;i=a;for(var l=0;l<t.length;l++)if(s.context===t[l]){i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),cS(i.return,n,e),r||(o=null);break e}i=s.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(We(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),cS(o,n,e),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Sv(e,t,n,r){e=null;for(var a=t,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(We(387));if(o=o.memoizedProps,o!==null){var s=a.type;oo(a.pendingProps.value,o.value)||(e!==null?e.push(s):e=[s])}}else if(a===vb.current){if(o=a.alternate,o===null)throw Error(We(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Fg):e=[Fg])}a=a.return}e!==null&&dS(t,e,n,r),t.flags|=262144}function jb(e){for(e=e.firstContext;e!==null;){if(!oo(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ud(e){tf=e,Il=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function za(e){return zM(tf,e)}function oy(e,t){return tf===null&&Ud(e),zM(e,t)}function zM(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Il===null){if(e===null)throw Error(We(308));Il=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Il=Il.next=t;return n}var f$=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},h$=zr.unstable_scheduleCallback,p$=zr.unstable_NormalPriority,Ir={$$typeof:Tl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function a3(){return{controller:new f$,data:new Map,refCount:0}}function kv(e){e.refCount--,e.refCount===0&&h$(p$,function(){e.controller.abort()})}var ig=null,fS=0,Jh=0,Dh=null;function m$(e,t){if(ig===null){var n=ig=[];fS=0,Jh=A3(),Dh={status:"pending",value:void 0,then:function(r){n.push(r)}}}return fS++,t.then(sE,sE),t}function sE(){if(--fS===0&&ig!==null){Dh!==null&&(Dh.status="fulfilled");var e=ig;ig=null,Jh=0,Dh=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function g$(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(r.status="rejected",r.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),r}var lE=kt.S;kt.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&m$(e,t),lE!==null&&lE(e,t)};var wd=il(null);function i3(){var e=wd.current;return e!==null?e:Tn.pooledCache}function ib(e,t){t===null?$n(wd,wd.current):$n(wd,t.pool)}function UM(){var e=i3();return e===null?null:{parent:Ir._currentValue,pool:e}}var _v=Error(We(460)),WM=Error(We(474)),x1=Error(We(542)),hS={then:function(){}};function uE(e){return e=e.status,e==="fulfilled"||e==="rejected"}function sy(){}function qM(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(sy,sy),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dE(e),e;default:if(typeof t.status=="string")t.then(sy,sy);else{if(e=Tn,e!==null&&100<e.shellSuspendCounter)throw Error(We(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=r}},function(r){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dE(e),e}throw og=t,_v}}var og=null;function cE(){if(og===null)throw Error(We(459));var e=og;return og=null,e}function dE(e){if(e===_v||e===x1)throw Error(We(483))}var Fu=!1;function o3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ac(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ic(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,vn&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Sb(e),RM(e,null,n),t}return b1(e,r,t,n),Sb(e)}function sg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dM(e,n)}}function u5(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var mS=!1;function lg(){if(mS){var e=Dh;if(e!==null)throw e}}function ug(e,t,n,r){mS=!1;var a=e.updateQueue;Fu=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=a.baseState;o=0,c=u=l=null,s=i;do{var h=s.lane&-536870913,p=h!==s.lane;if(p?(Yt&h)===h:(r&h)===h){h!==0&&h===Jh&&(mS=!0),c!==null&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,v=s;h=t;var y=n;switch(v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(y,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(y,f,h):m,h==null)break e;f=Un({},f,h);break e;case 2:Fu=!0}}h=s.callback,h!==null&&(e.flags|=64,p&&(e.flags|=8192),p=a.callbacks,p===null?a.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);c===null&&(l=f),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,i===null&&(a.shared.lanes=0),xc|=o,e.lanes=o,e.memoizedState=f}}function HM(e,t){if(typeof e!="function")throw Error(We(191,e));e.call(t)}function $M(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)HM(n[e],t)}var Qh=il(null),Ab=il(0);function fE(e,t){e=Kl,$n(Ab,e),$n(Qh,t),Kl=e|t.baseLanes}function gS(){$n(Ab,Kl),$n(Qh,Qh.current)}function s3(){Kl=Ab.current,ta(Qh),ta(Ab)}var yc=0,Rt=null,Sn=null,_r=null,Cb=!1,Ph=!1,Wd=!1,Eb=0,Mg=0,Oh=null,v$=0;function dr(){throw Error(We(321))}function l3(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oo(e[n],t[n]))return!1;return!0}function u3(e,t,n,r,a,i){return yc=i,Rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kt.H=e===null||e.memoizedState===null?NL:SL,Wd=!1,i=n(r,a),Wd=!1,Ph&&(i=GM(t,n,r,a)),VM(e),i}function VM(e){kt.H=Db;var t=Sn!==null&&Sn.next!==null;if(yc=0,_r=Sn=Rt=null,Cb=!1,Mg=0,Oh=null,t)throw Error(We(300));e===null||ea||(e=e.dependencies,e!==null&&jb(e)&&(ea=!0))}function GM(e,t,n,r){Rt=e;var a=0;do{if(Ph&&(Oh=null),Mg=0,Ph=!1,25<=a)throw Error(We(301));if(a+=1,_r=Sn=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}kt.H=k$,i=t(n,r)}while(Ph);return i}function y$(){var e=kt.H,t=e.useState()[0];return t=typeof t.then=="function"?jv(t):t,e=e.useState()[0],(Sn!==null?Sn.memoizedState:null)!==e&&(Rt.flags|=1024),t}function c3(){var e=Eb!==0;return Eb=0,e}function d3(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function f3(e){if(Cb){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Cb=!1}yc=0,_r=Sn=Rt=null,Ph=!1,Mg=Eb=0,Oh=null}function di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Rt.memoizedState=_r=e:_r=_r.next=e,_r}function Ar(){if(Sn===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Sn.next;var t=_r===null?Rt.memoizedState:_r.next;if(t!==null)_r=t,Sn=e;else{if(e===null)throw Rt.alternate===null?Error(We(467)):Error(We(310));Sn=e,e={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},_r===null?Rt.memoizedState=_r=e:_r=_r.next=e}return _r}function h3(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jv(e){var t=Mg;return Mg+=1,Oh===null&&(Oh=[]),e=qM(Oh,e,t),t=Rt,(_r===null?t.memoizedState:_r.next)===null&&(t=t.alternate,kt.H=t===null||t.memoizedState===null?NL:SL),e}function w1(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jv(e);if(e.$$typeof===Tl)return za(e)}throw Error(We(438,String(e)))}function p3(e){var t=null,n=Rt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=Rt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=h3(),Rt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=nH;return t.index++,n}function Vl(e,t){return typeof t=="function"?t(e):t}function ob(e){var t=Ar();return m3(t,Sn,e)}function m3(e,t,n){var r=e.queue;if(r===null)throw Error(We(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,a===null)e.memoizedState=i;else{t=a.next;var s=o=null,l=null,u=t,c=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Yt&f)===f:(yc&f)===f){var h=u.revertLane;if(h===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Jh&&(c=!0);else if((yc&h)===h){u=u.next,h===Jh&&(c=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(s=l=f,o=i):l=l.next=f,Rt.lanes|=h,xc|=h;f=u.action,Wd&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else h={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(s=l=h,o=i):l=l.next=h,Rt.lanes|=f,xc|=f;u=u.next}while(u!==null&&u!==t);if(l===null?o=i:l.next=s,!oo(i,e.memoizedState)&&(ea=!0,c&&(n=Dh,n!==null)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=l,r.lastRenderedState=i}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function c5(e){var t=Ar(),n=t.queue;if(n===null)throw Error(We(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);oo(i,t.memoizedState)||(ea=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function KM(e,t,n){var r=Rt,a=Ar(),i=an;if(i){if(n===void 0)throw Error(We(407));n=n()}else n=t();var o=!oo((Sn||a).memoizedState,n);o&&(a.memoizedState=n,ea=!0),a=a.queue;var s=JM.bind(null,r,a,e);if(Av(2048,8,s,[e]),a.getSnapshot!==t||o||_r!==null&&_r.memoizedState.tag&1){if(r.flags|=2048,Zh(9,N1(),XM.bind(null,r,a,n,t),null),Tn===null)throw Error(We(349));i||yc&124||YM(r,t,n)}return n}function YM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rt.updateQueue,t===null?(t=h3(),Rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function XM(e,t,n,r){t.value=n,t.getSnapshot=r,QM(t)&&ZM(e)}function JM(e,t,n){return n(function(){QM(t)&&ZM(e)})}function QM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oo(e,n)}catch{return!0}}function ZM(e){var t=jp(e,2);t!==null&&no(t,e,2)}function vS(e){var t=di();if(typeof e=="function"){var n=e;if(e=n(),Wd){Gu(!0);try{n()}finally{Gu(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e},t}function eL(e,t,n,r){return e.baseState=n,m3(e,Sn,typeof r=="function"?r:Vl)}function b$(e,t,n,r,a){if(S1(e))throw Error(We(485));if(e=t.action,e!==null){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};kt.T!==null?n(!0):i.isTransition=!1,r(i),n=t.pending,n===null?(i.next=t.pending=i,tL(t,i)):(i.next=n.next,t.pending=n.next=i)}}function tL(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=kt.T,o={};kt.T=o;try{var s=n(a,r),l=kt.S;l!==null&&l(o,s),hE(e,t,s)}catch(u){yS(e,t,u)}finally{kt.T=i}}else try{i=n(a,r),hE(e,t,i)}catch(u){yS(e,t,u)}}function hE(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){pE(e,t,r)},function(r){return yS(e,t,r)}):pE(e,t,n)}function pE(e,t,n){t.status="fulfilled",t.value=n,nL(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,tL(e,n)))}function yS(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,nL(t),t=t.next;while(t!==r)}e.action=null}function nL(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function rL(e,t){return t}function mE(e,t){if(an){var n=Tn.formState;if(n!==null){e:{var r=Rt;if(an){if(or){t:{for(var a=or,i=Ls;a.nodeType!==8;){if(!i){a=null;break t}if(a=ds(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){or=ds(a.nextSibling),r=a.data==="F!";break e}}zd(r)}r=!1}r&&(t=n[0])}}return n=di(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rL,lastRenderedState:t},n.queue=r,n=bL.bind(null,Rt,r),r.dispatch=n,r=vS(!1),i=b3.bind(null,Rt,!1,r.queue),r=di(),a={state:t,dispatch:null,action:e,pending:null},r.queue=a,n=b$.bind(null,Rt,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function gE(e){var t=Ar();return aL(t,Sn,e)}function aL(e,t,n){if(t=m3(e,t,rL)[0],e=ob(Vl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=jv(t)}catch(o){throw o===_v?x1:o}else r=t;t=Ar();var a=t.queue,i=a.dispatch;return n!==t.memoizedState&&(Rt.flags|=2048,Zh(9,N1(),x$.bind(null,a,n),null)),[r,i,e]}function x$(e,t){e.action=t}function vE(e){var t=Ar(),n=Sn;if(n!==null)return aL(t,n,e);Ar(),t=t.memoizedState,n=Ar();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Zh(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=Rt.updateQueue,t===null&&(t=h3(),Rt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function N1(){return{destroy:void 0,resource:void 0}}function iL(){return Ar().memoizedState}function sb(e,t,n,r){var a=di();r=r===void 0?null:r,Rt.flags|=e,a.memoizedState=Zh(1|t,N1(),n,r)}function Av(e,t,n,r){var a=Ar();r=r===void 0?null:r;var i=a.memoizedState.inst;Sn!==null&&r!==null&&l3(r,Sn.memoizedState.deps)?a.memoizedState=Zh(t,i,n,r):(Rt.flags|=e,a.memoizedState=Zh(1|t,i,n,r))}function yE(e,t){sb(8390656,8,e,t)}function oL(e,t){Av(2048,8,e,t)}function sL(e,t){return Av(4,2,e,t)}function lL(e,t){return Av(4,4,e,t)}function uL(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cL(e,t,n){n=n!=null?n.concat([e]):null,Av(4,4,uL.bind(null,t,e),n)}function g3(){}function dL(e,t){var n=Ar();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&l3(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fL(e,t){var n=Ar();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&l3(t,r[1]))return r[0];if(r=e(),Wd){Gu(!0);try{e()}finally{Gu(!1)}}return n.memoizedState=[r,t],r}function v3(e,t,n){return n===void 0||yc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=nI(),Rt.lanes|=e,xc|=e,n)}function hL(e,t,n,r){return oo(n,t)?n:Qh.current!==null?(e=v3(e,n,r),oo(e,t)||(ea=!0),e):yc&42?(e=nI(),Rt.lanes|=e,xc|=e,t):(ea=!0,e.memoizedState=n)}function pL(e,t,n,r,a){var i=un.p;un.p=i!==0&&8>i?i:8;var o=kt.T,s={};kt.T=s,b3(e,!1,t,n);try{var l=a(),u=kt.S;if(u!==null&&u(s,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=g$(l,r);cg(e,t,c,to(e))}else cg(e,t,r,to(e))}catch(f){cg(e,t,{then:function(){},status:"rejected",reason:f},to())}finally{un.p=i,kt.T=o}}function w$(){}function bS(e,t,n,r){if(e.tag!==5)throw Error(We(476));var a=mL(e).queue;pL(e,a,t,vd,n===null?w$:function(){return gL(e),n(r)})}function mL(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:vd,baseState:vd,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:vd},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function gL(e){var t=mL(e).next.queue;cg(e,t,{},to())}function y3(){return za(Fg)}function vL(){return Ar().memoizedState}function yL(){return Ar().memoizedState}function N$(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=to();e=ac(n);var r=ic(t,e,n);r!==null&&(no(r,t,n),sg(r,t,n)),t={cache:a3()},e.payload=t;return}t=t.return}}function S$(e,t,n){var r=to();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},S1(e)?xL(t,n):(n=e3(e,t,n,r),n!==null&&(no(n,e,r),wL(n,t,r)))}function bL(e,t,n){var r=to();cg(e,t,n,r)}function cg(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(S1(e))xL(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,oo(s,o))return b1(e,t,a,0),Tn===null&&y1(),!1}catch{}finally{}if(n=e3(e,t,a,r),n!==null)return no(n,e,r),wL(n,t,r),!0}return!1}function b3(e,t,n,r){if(r={lane:2,revertLane:A3(),action:r,hasEagerState:!1,eagerState:null,next:null},S1(e)){if(t)throw Error(We(479))}else t=e3(e,n,r,2),t!==null&&no(t,e,2)}function S1(e){var t=e.alternate;return e===Rt||t!==null&&t===Rt}function xL(e,t){Ph=Cb=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wL(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dM(e,n)}}var Db={readContext:za,use:w1,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useLayoutEffect:dr,useInsertionEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useSyncExternalStore:dr,useId:dr,useHostTransitionStatus:dr,useFormState:dr,useActionState:dr,useOptimistic:dr,useMemoCache:dr,useCacheRefresh:dr},NL={readContext:za,use:w1,useCallback:function(e,t){return di().memoizedState=[e,t===void 0?null:t],e},useContext:za,useEffect:yE,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,sb(4194308,4,uL.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sb(4194308,4,e,t)},useInsertionEffect:function(e,t){sb(4,2,e,t)},useMemo:function(e,t){var n=di();t=t===void 0?null:t;var r=e();if(Wd){Gu(!0);try{e()}finally{Gu(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=di();if(n!==void 0){var a=n(t);if(Wd){Gu(!0);try{n(t)}finally{Gu(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=S$.bind(null,Rt,e),[r.memoizedState,e]},useRef:function(e){var t=di();return e={current:e},t.memoizedState=e},useState:function(e){e=vS(e);var t=e.queue,n=bL.bind(null,Rt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:g3,useDeferredValue:function(e,t){var n=di();return v3(n,e,t)},useTransition:function(){var e=vS(!1);return e=pL.bind(null,Rt,e.queue,!0,!1),di().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Rt,a=di();if(an){if(n===void 0)throw Error(We(407));n=n()}else{if(n=t(),Tn===null)throw Error(We(349));Yt&124||YM(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,yE(JM.bind(null,r,i,e),[e]),r.flags|=2048,Zh(9,N1(),XM.bind(null,r,i,n,t),null),n},useId:function(){var e=di(),t=Tn.identifierPrefix;if(an){var n=Ll,r=Ml;n=(r&~(1<<32-eo(r)-1)).toString(32)+n,t=""+t+"R"+n,n=Eb++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=v$++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:y3,useFormState:mE,useActionState:mE,useOptimistic:function(e){var t=di();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=b3.bind(null,Rt,!0,n),n.dispatch=t,[e,t]},useMemoCache:p3,useCacheRefresh:function(){return di().memoizedState=N$.bind(null,Rt)}},SL={readContext:za,use:w1,useCallback:dL,useContext:za,useEffect:oL,useImperativeHandle:cL,useInsertionEffect:sL,useLayoutEffect:lL,useMemo:fL,useReducer:ob,useRef:iL,useState:function(){return ob(Vl)},useDebugValue:g3,useDeferredValue:function(e,t){var n=Ar();return hL(n,Sn.memoizedState,e,t)},useTransition:function(){var e=ob(Vl)[0],t=Ar().memoizedState;return[typeof e=="boolean"?e:jv(e),t]},useSyncExternalStore:KM,useId:vL,useHostTransitionStatus:y3,useFormState:gE,useActionState:gE,useOptimistic:function(e,t){var n=Ar();return eL(n,Sn,e,t)},useMemoCache:p3,useCacheRefresh:yL},k$={readContext:za,use:w1,useCallback:dL,useContext:za,useEffect:oL,useImperativeHandle:cL,useInsertionEffect:sL,useLayoutEffect:lL,useMemo:fL,useReducer:c5,useRef:iL,useState:function(){return c5(Vl)},useDebugValue:g3,useDeferredValue:function(e,t){var n=Ar();return Sn===null?v3(n,e,t):hL(n,Sn.memoizedState,e,t)},useTransition:function(){var e=c5(Vl)[0],t=Ar().memoizedState;return[typeof e=="boolean"?e:jv(e),t]},useSyncExternalStore:KM,useId:vL,useHostTransitionStatus:y3,useFormState:vE,useActionState:vE,useOptimistic:function(e,t){var n=Ar();return Sn!==null?eL(n,Sn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:p3,useCacheRefresh:yL},Th=null,Lg=0;function ly(e){var t=Lg;return Lg+=1,Th===null&&(Th=[]),qM(Th,e,t)}function Am(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function uy(e,t){throw t.$$typeof===eH?Error(We(525)):(e=Object.prototype.toString.call(t),Error(We(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function bE(e){var t=e._init;return t(e._payload)}function kL(e){function t(g,b){if(e){var x=g.deletions;x===null?(g.deletions=[b],g.flags|=16):x.push(b)}}function n(g,b){if(!e)return null;for(;b!==null;)t(g,b),b=b.sibling;return null}function r(g){for(var b=new Map;g!==null;)g.key!==null?b.set(g.key,g):b.set(g.index,g),g=g.sibling;return b}function a(g,b){return g=zl(g,b),g.index=0,g.sibling=null,g}function i(g,b,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<b?(g.flags|=67108866,b):x):(g.flags|=67108866,b)):(g.flags|=1048576,b)}function o(g){return e&&g.alternate===null&&(g.flags|=67108866),g}function s(g,b,x,N){return b===null||b.tag!==6?(b=s5(x,g.mode,N),b.return=g,b):(b=a(b,x),b.return=g,b)}function l(g,b,x,N){var k=x.type;return k===dh?c(g,b,x.props.children,N,x.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Bu&&bE(k)===b.type)?(b=a(b,x.props),Am(b,x),b.return=g,b):(b=ab(x.type,x.key,x.props,null,g.mode,N),Am(b,x),b.return=g,b)}function u(g,b,x,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=l5(x,g.mode,N),b.return=g,b):(b=a(b,x.children||[]),b.return=g,b)}function c(g,b,x,N,k){return b===null||b.tag!==7?(b=yd(x,g.mode,N,k),b.return=g,b):(b=a(b,x),b.return=g,b)}function f(g,b,x){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=s5(""+b,g.mode,x),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ty:return x=ab(b.type,b.key,b.props,null,g.mode,x),Am(x,b),x.return=g,x;case $m:return b=l5(b,g.mode,x),b.return=g,b;case Bu:var N=b._init;return b=N(b._payload),f(g,b,x)}if(Vm(b)||Sm(b))return b=yd(b,g.mode,x,null),b.return=g,b;if(typeof b.then=="function")return f(g,ly(b),x);if(b.$$typeof===Tl)return f(g,oy(g,b),x);uy(g,b)}return null}function h(g,b,x,N){var k=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return k!==null?null:s(g,b,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ty:return x.key===k?l(g,b,x,N):null;case $m:return x.key===k?u(g,b,x,N):null;case Bu:return k=x._init,x=k(x._payload),h(g,b,x,N)}if(Vm(x)||Sm(x))return k!==null?null:c(g,b,x,N,null);if(typeof x.then=="function")return h(g,b,ly(x),N);if(x.$$typeof===Tl)return h(g,b,oy(g,x),N);uy(g,x)}return null}function p(g,b,x,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return g=g.get(x)||null,s(b,g,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ty:return g=g.get(N.key===null?x:N.key)||null,l(b,g,N,k);case $m:return g=g.get(N.key===null?x:N.key)||null,u(b,g,N,k);case Bu:var j=N._init;return N=j(N._payload),p(g,b,x,N,k)}if(Vm(N)||Sm(N))return g=g.get(x)||null,c(b,g,N,k,null);if(typeof N.then=="function")return p(g,b,x,ly(N),k);if(N.$$typeof===Tl)return p(g,b,x,oy(b,N),k);uy(b,N)}return null}function m(g,b,x,N){for(var k=null,j=null,S=b,A=b=0,P=null;S!==null&&A<x.length;A++){S.index>A?(P=S,S=null):P=S.sibling;var T=h(g,S,x[A],N);if(T===null){S===null&&(S=P);break}e&&S&&T.alternate===null&&t(g,S),b=i(T,b,A),j===null?k=T:j.sibling=T,j=T,S=P}if(A===x.length)return n(g,S),an&&Zc(g,A),k;if(S===null){for(;A<x.length;A++)S=f(g,x[A],N),S!==null&&(b=i(S,b,A),j===null?k=S:j.sibling=S,j=S);return an&&Zc(g,A),k}for(S=r(S);A<x.length;A++)P=p(S,g,A,x[A],N),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?A:P.key),b=i(P,b,A),j===null?k=P:j.sibling=P,j=P);return e&&S.forEach(function(E){return t(g,E)}),an&&Zc(g,A),k}function v(g,b,x,N){if(x==null)throw Error(We(151));for(var k=null,j=null,S=b,A=b=0,P=null,T=x.next();S!==null&&!T.done;A++,T=x.next()){S.index>A?(P=S,S=null):P=S.sibling;var E=h(g,S,T.value,N);if(E===null){S===null&&(S=P);break}e&&S&&E.alternate===null&&t(g,S),b=i(E,b,A),j===null?k=E:j.sibling=E,j=E,S=P}if(T.done)return n(g,S),an&&Zc(g,A),k;if(S===null){for(;!T.done;A++,T=x.next())T=f(g,T.value,N),T!==null&&(b=i(T,b,A),j===null?k=T:j.sibling=T,j=T);return an&&Zc(g,A),k}for(S=r(S);!T.done;A++,T=x.next())T=p(S,g,A,T.value,N),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?A:T.key),b=i(T,b,A),j===null?k=T:j.sibling=T,j=T);return e&&S.forEach(function(D){return t(g,D)}),an&&Zc(g,A),k}function y(g,b,x,N){if(typeof x=="object"&&x!==null&&x.type===dh&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ty:e:{for(var k=x.key;b!==null;){if(b.key===k){if(k=x.type,k===dh){if(b.tag===7){n(g,b.sibling),N=a(b,x.props.children),N.return=g,g=N;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Bu&&bE(k)===b.type){n(g,b.sibling),N=a(b,x.props),Am(N,x),N.return=g,g=N;break e}n(g,b);break}else t(g,b);b=b.sibling}x.type===dh?(N=yd(x.props.children,g.mode,N,x.key),N.return=g,g=N):(N=ab(x.type,x.key,x.props,null,g.mode,N),Am(N,x),N.return=g,g=N)}return o(g);case $m:e:{for(k=x.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(g,b.sibling),N=a(b,x.children||[]),N.return=g,g=N;break e}else{n(g,b);break}else t(g,b);b=b.sibling}N=l5(x,g.mode,N),N.return=g,g=N}return o(g);case Bu:return k=x._init,x=k(x._payload),y(g,b,x,N)}if(Vm(x))return m(g,b,x,N);if(Sm(x)){if(k=Sm(x),typeof k!="function")throw Error(We(150));return x=k.call(x),v(g,b,x,N)}if(typeof x.then=="function")return y(g,b,ly(x),N);if(x.$$typeof===Tl)return y(g,b,oy(g,x),N);uy(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,b!==null&&b.tag===6?(n(g,b.sibling),N=a(b,x),N.return=g,g=N):(n(g,b),N=s5(x,g.mode,N),N.return=g,g=N),o(g)):n(g,b)}return function(g,b,x,N){try{Lg=0;var k=y(g,b,x,N);return Th=null,k}catch(S){if(S===_v||S===x1)throw S;var j=Gi(29,S,null,g.mode);return j.lanes=N,j.return=g,j}finally{}}}var ep=kL(!0),_L=kL(!1),Wo=il(null),Vs=null;function Wu(e){var t=e.alternate;$n(Rr,Rr.current&1),$n(Wo,e),Vs===null&&(t===null||Qh.current!==null||t.memoizedState!==null)&&(Vs=e)}function jL(e){if(e.tag===22){if($n(Rr,Rr.current),$n(Wo,e),Vs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vs=e)}}else qu()}function qu(){$n(Rr,Rr.current),$n(Wo,Wo.current)}function Rl(e){ta(Wo),Vs===e&&(Vs=null),ta(Rr)}var Rr=il(0);function Pb(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||IS(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function d5(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Un({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xS={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=to(),a=ac(r);a.payload=t,n!=null&&(a.callback=n),t=ic(e,a,r),t!==null&&(no(t,e,r),sg(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=to(),a=ac(r);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ic(e,a,r),t!==null&&(no(t,e,r),sg(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=to(),r=ac(n);r.tag=2,t!=null&&(r.callback=t),t=ic(e,r,n),t!==null&&(no(t,e,n),sg(t,e,n))}};function xE(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Og(n,r)||!Og(a,i):!0}function wE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xS.enqueueReplaceState(t,t.state,null)}function qd(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=Un({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}var Ob=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function AL(e){Ob(e)}function CL(e){console.error(e)}function EL(e){Ob(e)}function Tb(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function NE(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function wS(e,t,n){return n=ac(n),n.tag=3,n.payload={element:null},n.callback=function(){Tb(e,t)},n}function DL(e){return e=ac(e),e.tag=3,e}function PL(e,t,n,r){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){NE(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){NE(t,n,r),typeof a!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var s=r.stack;this.componentDidCatch(r.value,{componentStack:s!==null?s:""})})}function _$(e,t,n,r,a){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Sv(t,n,a,!0),n=Wo.current,n!==null){switch(n.tag){case 13:return Vs===null?ES():n.alternate===null&&sr===0&&(sr=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===hS?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),N5(e,r,a)),!1;case 22:return n.flags|=65536,r===hS?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),N5(e,r,a)),!1}throw Error(We(435,n.tag))}return N5(e,r,a),ES(),!1}if(an)return t=Wo.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==lS&&(e=Error(We(422),{cause:r}),Tg(Io(e,n)))):(r!==lS&&(t=Error(We(423),{cause:r}),Tg(Io(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Io(r,n),a=wS(e.stateNode,r,a),u5(e,a),sr!==4&&(sr=2)),!1;var i=Error(We(520),{cause:r});if(i=Io(i,n),hg===null?hg=[i]:hg.push(i),sr!==4&&(sr=2),t===null)return!0;r=Io(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=wS(n.stateNode,r,e),u5(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(oc===null||!oc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=DL(a),PL(a,e,n,r),u5(n,a),!1}n=n.return}while(n!==null);return!1}var OL=Error(We(461)),ea=!1;function pa(e,t,n,r){t.child=e===null?_L(t,null,n,r):ep(t,e.child,n,r)}function SE(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var s in r)s!=="ref"&&(o[s]=r[s])}else o=r;return Ud(t),r=u3(e,t,n,o,i,a),s=c3(),e!==null&&!ea?(d3(e,t,a),Gl(e,t,a)):(an&&s&&n3(t),t.flags|=1,pa(e,t,r,a),t.child)}function kE(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!t3(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,TL(e,t,i,r,a)):(e=ab(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!x3(e,a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Og,n(o,r)&&e.ref===t.ref)return Gl(e,t,a)}return t.flags|=1,e=zl(i,r),e.ref=t.ref,e.return=t,t.child=e}function TL(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Og(i,r)&&e.ref===t.ref)if(ea=!1,t.pendingProps=r=i,x3(e,a))e.flags&131072&&(ea=!0);else return t.lanes=e.lanes,Gl(e,t,a)}return NS(e,t,n,r,a)}function ML(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if(t.flags&128){if(r=i!==null?i.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return _E(e,t,r,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ib(t,i!==null?i.cachePool:null),i!==null?fE(t,i):gS(),jL(t);else return t.lanes=t.childLanes=536870912,_E(e,t,i!==null?i.baseLanes|n:n,n)}else i!==null?(ib(t,i.cachePool),fE(t,i),qu(),t.memoizedState=null):(e!==null&&ib(t,null),gS(),qu());return pa(e,t,a,n),t.child}function _E(e,t,n,r){var a=i3();return a=a===null?null:{parent:Ir._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ib(t,null),gS(),jL(t),e!==null&&Sv(e,t,r,!0),null}function lb(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(We(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function NS(e,t,n,r,a){return Ud(t),n=u3(e,t,n,r,void 0,a),r=c3(),e!==null&&!ea?(d3(e,t,a),Gl(e,t,a)):(an&&r&&n3(t),t.flags|=1,pa(e,t,n,a),t.child)}function jE(e,t,n,r,a,i){return Ud(t),t.updateQueue=null,n=GM(t,r,n,a),VM(e),r=c3(),e!==null&&!ea?(d3(e,t,i),Gl(e,t,i)):(an&&r&&n3(t),t.flags|=1,pa(e,t,n,i),t.child)}function AE(e,t,n,r,a){if(Ud(t),t.stateNode===null){var i=bh,o=n.contextType;typeof o=="object"&&o!==null&&(i=za(o)),i=new n(r,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=xS,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=r,i.state=t.memoizedState,i.refs={},o3(t),o=n.contextType,i.context=typeof o=="object"&&o!==null?za(o):bh,i.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(d5(t,n,o,r),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&xS.enqueueReplaceState(i,i.state,null),ug(t,r,i,a),lg(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){i=t.stateNode;var s=t.memoizedProps,l=qd(n,s);i.props=l;var u=i.context,c=n.contextType;o=bh,typeof c=="object"&&c!==null&&(o=za(c));var f=n.getDerivedStateFromProps;c=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",s=t.pendingProps!==s,c||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s||u!==o)&&wE(t,i,r,o),Fu=!1;var h=t.memoizedState;i.state=h,ug(t,r,i,a),lg(),u=t.memoizedState,s||h!==u||Fu?(typeof f=="function"&&(d5(t,n,f,r),u=t.memoizedState),(l=Fu||xE(t,n,l,r,h,u,o))?(c||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=o,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,pS(e,t),o=t.memoizedProps,c=qd(n,o),i.props=c,f=t.pendingProps,h=i.context,u=n.contextType,l=bh,typeof u=="object"&&u!==null&&(l=za(u)),s=n.getDerivedStateFromProps,(u=typeof s=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||h!==l)&&wE(t,i,r,l),Fu=!1,h=t.memoizedState,i.state=h,ug(t,r,i,a),lg();var p=t.memoizedState;o!==f||h!==p||Fu||e!==null&&e.dependencies!==null&&jb(e.dependencies)?(typeof s=="function"&&(d5(t,n,s,r),p=t.memoizedState),(c=Fu||xE(t,n,c,r,h,p,l)||e!==null&&e.dependencies!==null&&jb(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,lb(e,t),r=(t.flags&128)!==0,i||r?(i=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&r?(t.child=ep(t,e.child,null,a),t.child=ep(t,null,n,a)):pa(e,t,n,a),t.memoizedState=i.state,e=t.child):e=Gl(e,t,a),e}function CE(e,t,n,r){return Nv(),t.flags|=256,pa(e,t,n,r),t.child}var f5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function h5(e){return{baseLanes:e,cachePool:UM()}}function p5(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Bo),e}function LL(e,t,n){var r=t.pendingProps,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(Rr.current&2)!==0),o&&(a=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(an){if(a?Wu(t):qu(),an){var s=or,l;if(l=s){e:{for(l=s,s=Ls;l.nodeType!==8;){if(!s){s=null;break e}if(l=ds(l.nextSibling),l===null){s=null;break e}}s=l}s!==null?(t.memoizedState={dehydrated:s,treeContext:bd!==null?{id:Ml,overflow:Ll}:null,retryLane:536870912,hydrationErrors:null},l=Gi(18,null,null,0),l.stateNode=s,l.return=t,t.child=l,Xa=t,or=null,l=!0):l=!1}l||zd(t)}if(s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null))return IS(s)?t.lanes=32:t.lanes=536870912,null;Rl(t)}return s=r.children,r=r.fallback,a?(qu(),a=t.mode,s=Mb({mode:"hidden",children:s},a),r=yd(r,a,n,null),s.return=t,r.return=t,s.sibling=r,t.child=s,a=t.child,a.memoizedState=h5(n),a.childLanes=p5(e,o,n),t.memoizedState=f5,r):(Wu(t),SS(t,s))}if(l=e.memoizedState,l!==null&&(s=l.dehydrated,s!==null)){if(i)t.flags&256?(Wu(t),t.flags&=-257,t=m5(e,t,n)):t.memoizedState!==null?(qu(),t.child=e.child,t.flags|=128,t=null):(qu(),a=r.fallback,s=t.mode,r=Mb({mode:"visible",children:r.children},s),a=yd(a,s,n,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,ep(t,e.child,null,n),r=t.child,r.memoizedState=h5(n),r.childLanes=p5(e,o,n),t.memoizedState=f5,t=a);else if(Wu(t),IS(s)){if(o=s.nextSibling&&s.nextSibling.dataset,o)var u=o.dgst;o=u,r=Error(We(419)),r.stack="",r.digest=o,Tg({value:r,source:null,stack:null}),t=m5(e,t,n)}else if(ea||Sv(e,t,n,!1),o=(n&e.childLanes)!==0,ea||o){if(o=Tn,o!==null&&(r=n&-n,r=r&42?1:H_(r),r=r&(o.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,jp(e,r),no(o,e,r),OL;s.data==="$?"||ES(),t=m5(e,t,n)}else s.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,or=ds(s.nextSibling),Xa=t,an=!0,xd=null,Ls=!1,e!==null&&(Po[Oo++]=Ml,Po[Oo++]=Ll,Po[Oo++]=bd,Ml=e.id,Ll=e.overflow,bd=t),t=SS(t,r.children),t.flags|=4096);return t}return a?(qu(),a=r.fallback,s=t.mode,l=e.child,u=l.sibling,r=zl(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u!==null?a=zl(u,a):(a=yd(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s===null?s=h5(n):(l=s.cachePool,l!==null?(u=Ir._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=UM(),s={baseLanes:s.baseLanes|n,cachePool:l}),a.memoizedState=s,a.childLanes=p5(e,o,n),t.memoizedState=f5,r):(Wu(t),n=e.child,e=n.sibling,n=zl(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function SS(e,t){return t=Mb({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mb(e,t){return e=Gi(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function m5(e,t,n){return ep(t,e.child,null,n),e=SS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cS(e.return,t,n)}function g5(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function IL(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(pa(e,t,r.children,n),r=Rr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&EE(e,n,t);else if(e.tag===19)EE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch($n(Rr,r),a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Pb(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),g5(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Pb(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}g5(t,!0,n,null,i);break;case"together":g5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xc|=t.lanes,!(n&t.childLanes))if(e!==null){if(Sv(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(We(153));if(t.child!==null){for(e=t.child,n=zl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function x3(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&jb(e)))}function j$(e,t,n){switch(t.tag){case 3:yb(t,t.stateNode.containerInfo),Uu(t,Ir,e.memoizedState.cache),Nv();break;case 27:case 5:QN(t);break;case 4:yb(t,t.stateNode.containerInfo);break;case 10:Uu(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Wu(t),t.flags|=128,null):n&t.child.childLanes?LL(e,t,n):(Wu(t),e=Gl(e,t,n),e!==null?e.sibling:null);Wu(t);break;case 19:var a=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Sv(e,t,n,!1),r=(n&t.childLanes)!==0),a){if(r)return IL(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$n(Rr,Rr.current),r)break;return null;case 22:case 23:return t.lanes=0,ML(e,t,n);case 24:Uu(t,Ir,e.memoizedState.cache)}return Gl(e,t,n)}function RL(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ea=!0;else{if(!x3(e,n)&&!(t.flags&128))return ea=!1,j$(e,t,n);ea=!!(e.flags&131072)}else ea=!1,an&&t.flags&1048576&&FM(t,_b,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,typeof r=="function")t3(r)?(e=qd(r,e),t.tag=1,t=AE(null,t,r,e,n)):(t.tag=0,t=NS(null,t,r,e,n));else{if(r!=null){if(a=r.$$typeof,a===U_){t.tag=11,t=SE(null,t,r,e,n);break e}else if(a===W_){t.tag=14,t=kE(null,t,r,e,n);break e}}throw t=XN(r)||r,Error(We(306,t,""))}}return t;case 0:return NS(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=qd(r,t.pendingProps),AE(e,t,r,a,n);case 3:e:{if(yb(t,t.stateNode.containerInfo),e===null)throw Error(We(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,pS(e,t),ug(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Uu(t,Ir,r),r!==i.cache&&dS(t,[Ir],n,!0),lg(),r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=CE(e,t,r,n);break e}else if(r!==a){a=Io(Error(We(424)),t),Tg(a),t=CE(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(or=ds(e.firstChild),Xa=t,an=!0,xd=null,Ls=!0,n=_L(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Nv(),r===a){t=Gl(e,t,n);break e}pa(e,t,r,n)}t=t.child}return t;case 26:return lb(e,t),e===null?(n=VE(t.type,null,t.pendingProps,null))?t.memoizedState=n:an||(n=t.type,e=t.pendingProps,r=Ub(rc.current).createElement(n),r[Fa]=t,r[wi]=e,Sa(r,n,e),Zr(r),t.stateNode=r):t.memoizedState=VE(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return QN(t),e===null&&an&&(r=t.stateNode=SI(t.type,t.pendingProps,rc.current),Xa=t,Ls=!0,a=or,Ac(t.type)?(RS=a,or=ds(r.firstChild)):or=a),pa(e,t,t.pendingProps.children,n),lb(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&an&&((a=r=or)&&(r=eV(r,t.type,t.pendingProps,Ls),r!==null?(t.stateNode=r,Xa=t,or=ds(r.firstChild),Ls=!1,a=!0):a=!1),a||zd(t)),QN(t),a=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,r=i.children,MS(a,i)?r=null:o!==null&&MS(a,o)&&(t.flags|=32),t.memoizedState!==null&&(a=u3(e,t,y$,null,null,n),Fg._currentValue=a),lb(e,t),pa(e,t,r,n),t.child;case 6:return e===null&&an&&((e=n=or)&&(n=tV(n,t.pendingProps,Ls),n!==null?(t.stateNode=n,Xa=t,or=null,e=!0):e=!1),e||zd(t)),null;case 13:return LL(e,t,n);case 4:return yb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ep(t,null,r,n):pa(e,t,r,n),t.child;case 11:return SE(e,t,t.type,t.pendingProps,n);case 7:return pa(e,t,t.pendingProps,n),t.child;case 8:return pa(e,t,t.pendingProps.children,n),t.child;case 12:return pa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Uu(t,t.type,r.value),pa(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ud(t),a=za(a),r=r(a),t.flags|=1,pa(e,t,r,n),t.child;case 14:return kE(e,t,t.type,t.pendingProps,n);case 15:return TL(e,t,t.type,t.pendingProps,n);case 19:return IL(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},e===null?(n=Mb(r,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=zl(e.child,r),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ML(e,t,n);case 24:return Ud(t),r=za(Ir),e===null?(a=i3(),a===null&&(a=Tn,i=a3(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},o3(t),Uu(t,Ir,a)):(e.lanes&n&&(pS(e,t),ug(t,null,null,n),lg()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Uu(t,Ir,r)):(r=i.cache,Uu(t,Ir,r),r!==a.cache&&dS(t,[Ir],n,!0))),pa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(We(156,t.tag))}function Nl(e){e.flags|=4}function DE(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!jI(t)){if(t=Wo.current,t!==null&&((Yt&4194048)===Yt?Vs!==null:(Yt&62914560)!==Yt&&!(Yt&536870912)||t!==Vs))throw og=hS,WM;e.flags|=8192}}function cy(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?uM():536870912,e.lanes|=t,tp|=t)}function Cm(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&65011712,r|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function A$(e,t,n){var r=t.pendingProps;switch(r3(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(t),null;case 1:return Xn(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ul(Ir),Kh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(jm(t)?Nl(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oE())),Xn(t),null;case 26:return n=t.memoizedState,e===null?(Nl(t),n!==null?(Xn(t),DE(t,n)):(Xn(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Nl(t),Xn(t),DE(t,n)):(Xn(t),t.flags&=-16777217):(e.memoizedProps!==r&&Nl(t),Xn(t),t.flags&=-16777217),null;case 27:bb(t),n=rc.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Nl(t);else{if(!r){if(t.stateNode===null)throw Error(We(166));return Xn(t),null}e=Hs.current,jm(t)?aE(t):(e=SI(a,r,n),t.stateNode=e,Nl(t))}return Xn(t),null;case 5:if(bb(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Nl(t);else{if(!r){if(t.stateNode===null)throw Error(We(166));return Xn(t),null}if(e=Hs.current,jm(t))aE(t);else{switch(a=Ub(rc.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Fa]=t,e[wi]=r;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(Sa(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Nl(t)}}return Xn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Nl(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(We(166));if(e=rc.current,jm(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Xa,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Fa]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||xI(e.nodeValue,n)),e||zd(t)}else e=Ub(e).createTextNode(r),e[Fa]=t,t.stateNode=e}return Xn(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=jm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(We(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(We(317));a[Fa]=t}else Nv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xn(t),a=!1}else a=oE(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(Rl(t),t):(Rl(t),null)}if(Rl(t),t.flags&128)return t.lanes=n,t;if(n=r!==null,e=e!==null&&e.memoizedState!==null,n){r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool);var i=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),cy(t,t.updateQueue),Xn(t),null;case 4:return Kh(),e===null&&C3(t.stateNode.containerInfo),Xn(t),null;case 10:return Ul(t.type),Xn(t),null;case 19:if(ta(Rr),a=t.memoizedState,a===null)return Xn(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)Cm(a,!1);else{if(sr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Pb(e),i!==null){for(t.flags|=128,Cm(a,!1),e=i.updateQueue,t.updateQueue=e,cy(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)BM(n,e),n=n.sibling;return $n(Rr,Rr.current&1|2),t.child}e=e.sibling}a.tail!==null&&$s()>Ib&&(t.flags|=128,r=!0,Cm(a,!1),t.lanes=4194304)}else{if(!r)if(e=Pb(i),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,cy(t,e),Cm(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!an)return Xn(t),null}else 2*$s()-a.renderingStartTime>Ib&&n!==536870912&&(t.flags|=128,r=!0,Cm(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(e=a.last,e!==null?e.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$s(),t.sibling=null,e=Rr.current,$n(Rr,r?e&1|2:e&1),t):(Xn(t),null);case 22:case 23:return Rl(t),s3(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Xn(t),t.subtreeFlags&6&&(t.flags|=8192)):Xn(t),n=t.updateQueue,n!==null&&cy(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ta(wd),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ul(Ir),Xn(t),null;case 25:return null;case 30:return null}throw Error(We(156,t.tag))}function C$(e,t){switch(r3(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ul(Ir),Kh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return bb(t),null;case 13:if(Rl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(We(340));Nv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ta(Rr),null;case 4:return Kh(),null;case 10:return Ul(t.type),null;case 22:case 23:return Rl(t),s3(),e!==null&&ta(wd),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ul(Ir),null;case 25:return null;default:return null}}function BL(e,t){switch(r3(t),t.tag){case 3:Ul(Ir),Kh();break;case 26:case 27:case 5:bb(t);break;case 4:Kh();break;case 13:Rl(t);break;case 19:ta(Rr);break;case 10:Ul(t.type);break;case 22:case 23:Rl(t),s3(),e!==null&&ta(wd);break;case 24:Ul(Ir)}}function Cv(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==a)}}catch(s){An(t,t.return,s)}}function bc(e,t,n){try{var r=t.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var i=a.next;r=i;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,a=t;var l=n,u=s;try{u()}catch(c){An(a,l,c)}}}r=r.next}while(r!==i)}}catch(c){An(t,t.return,c)}}function FL(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{$M(t,n)}catch(r){An(e,e.return,r)}}}function zL(e,t,n){n.props=qd(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){An(e,t,r)}}function dg(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(a){An(e,t,a)}}function zs(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(a){An(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){An(e,t,a)}else n.current=null}function UL(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){An(e,e.return,a)}}function v5(e,t,n){try{var r=e.stateNode;Y$(r,e.type,n,t),r[wi]=t}catch(a){An(e,e.return,a)}}function WL(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ac(e.type)||e.tag===4}function y5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||WL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ac(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kS(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=A1));else if(r!==4&&(r===27&&Ac(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(kS(e,t,n),e=e.sibling;e!==null;)kS(e,t,n),e=e.sibling}function Lb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Ac(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Lb(e,t,n),e=e.sibling;e!==null;)Lb(e,t,n),e=e.sibling}function qL(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Sa(t,r,n),t[Fa]=e,t[wi]=n}catch(i){An(e,e.return,i)}}var Al=!1,hr=!1,b5=!1,PE=typeof WeakSet=="function"?WeakSet:Set,Qr=null;function E$(e,t){if(e=e.containerInfo,OS=$b,e=DM(e),Q_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var p;f!==n||a!==0&&f.nodeType!==3||(s=o+a),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===a&&(s=o),h===i&&++c===r&&(l=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(TS={focusedElem:e,selectionRange:n},$b=!1,Qr=t;Qr!==null;)if(t=Qr,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Qr=e;else for(;Qr!==null;){switch(t=Qr,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=qd(n.type,a,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){An(n,n.return,v)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)LS(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":LS(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(We(163))}if(e=t.sibling,e!==null){e.return=t.return,Qr=e;break}Qr=t.return}}function HL(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Eu(e,n),r&4&&Cv(5,n);break;case 1:if(Eu(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(o){An(n,n.return,o)}else{var a=qd(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){An(n,n.return,o)}}r&64&&FL(n),r&512&&dg(n,n.return);break;case 3:if(Eu(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{$M(e,t)}catch(o){An(n,n.return,o)}}break;case 27:t===null&&r&4&&qL(n);case 26:case 5:Eu(e,n),t===null&&r&4&&UL(n),r&512&&dg(n,n.return);break;case 12:Eu(e,n);break;case 13:Eu(e,n),r&4&&GL(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=B$.bind(null,n),nV(e,n))));break;case 22:if(r=n.memoizedState!==null||Al,!r){t=t!==null&&t.memoizedState!==null||hr,a=Al;var i=hr;Al=r,(hr=t)&&!i?Ru(e,n,(n.subtreeFlags&8772)!==0):Eu(e,n),Al=a,hr=i}break;case 30:break;default:Eu(e,n)}}function $L(e){var t=e.alternate;t!==null&&(e.alternate=null,$L(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&V_(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qn=null,fi=!1;function Sl(e,t,n){for(n=n.child;n!==null;)VL(e,t,n),n=n.sibling}function VL(e,t,n){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(vv,n)}catch{}switch(n.tag){case 26:hr||zs(n,t),Sl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:hr||zs(n,t);var r=qn,a=fi;Ac(n.type)&&(qn=n.stateNode,fi=!1),Sl(e,t,n),mg(n.stateNode),qn=r,fi=a;break;case 5:hr||zs(n,t);case 6:if(r=qn,a=fi,qn=null,Sl(e,t,n),qn=r,fi=a,qn!==null)if(fi)try{(qn.nodeType===9?qn.body:qn.nodeName==="HTML"?qn.ownerDocument.body:qn).removeChild(n.stateNode)}catch(i){An(n,t,i)}else try{qn.removeChild(n.stateNode)}catch(i){An(n,t,i)}break;case 18:qn!==null&&(fi?(e=qn,qE(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Wg(e)):qE(qn,n.stateNode));break;case 4:r=qn,a=fi,qn=n.stateNode.containerInfo,fi=!0,Sl(e,t,n),qn=r,fi=a;break;case 0:case 11:case 14:case 15:hr||bc(2,n,t),hr||bc(4,n,t),Sl(e,t,n);break;case 1:hr||(zs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&zL(n,t,r)),Sl(e,t,n);break;case 21:Sl(e,t,n);break;case 22:hr=(r=hr)||n.memoizedState!==null,Sl(e,t,n),hr=r;break;default:Sl(e,t,n)}}function GL(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wg(e)}catch(n){An(t,t.return,n)}}function D$(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new PE),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new PE),t;default:throw Error(We(435,e.tag))}}function x5(e,t){var n=D$(e);t.forEach(function(r){var a=F$.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}function Bi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 27:if(Ac(s.type)){qn=s.stateNode,fi=!1;break e}break;case 5:qn=s.stateNode,fi=!1;break e;case 3:case 4:qn=s.stateNode.containerInfo,fi=!0;break e}s=s.return}if(qn===null)throw Error(We(160));VL(i,o,a),qn=null,fi=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)KL(t,e),t=t.sibling}var is=null;function KL(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bi(t,e),Fi(e),r&4&&(bc(3,e,e.return),Cv(3,e),bc(5,e,e.return));break;case 1:Bi(t,e),Fi(e),r&512&&(hr||n===null||zs(n,n.return)),r&64&&Al&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=is;if(Bi(t,e),Fi(e),r&512&&(hr||n===null||zs(n,n.return)),r&4){var i=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":i=a.getElementsByTagName("title")[0],(!i||i[xv]||i[Fa]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),Sa(i,r,n),i[Fa]=e,Zr(i),r=i;break e;case"link":var o=KE("link","href",a).get(r+(n.href||""));if(o){for(var s=0;s<o.length;s++)if(i=o[s],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(s,1);break t}}i=a.createElement(r),Sa(i,r,n),a.head.appendChild(i);break;case"meta":if(o=KE("meta","content",a).get(r+(n.content||""))){for(s=0;s<o.length;s++)if(i=o[s],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(s,1);break t}}i=a.createElement(r),Sa(i,r,n),a.head.appendChild(i);break;default:throw Error(We(468,r))}i[Fa]=e,Zr(i),r=i}e.stateNode=r}else YE(a,e.type,e.stateNode);else e.stateNode=GE(a,r,e.memoizedProps);else i!==r?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,r===null?YE(a,e.type,e.stateNode):GE(a,r,e.memoizedProps)):r===null&&e.stateNode!==null&&v5(e,e.memoizedProps,n.memoizedProps)}break;case 27:Bi(t,e),Fi(e),r&512&&(hr||n===null||zs(n,n.return)),n!==null&&r&4&&v5(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Bi(t,e),Fi(e),r&512&&(hr||n===null||zs(n,n.return)),e.flags&32){a=e.stateNode;try{Xh(a,"")}catch(p){An(e,e.return,p)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,v5(e,a,n!==null?n.memoizedProps:a)),r&1024&&(b5=!0);break;case 6:if(Bi(t,e),Fi(e),r&4){if(e.stateNode===null)throw Error(We(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){An(e,e.return,p)}}break;case 3:if(db=null,a=is,is=Wb(t.containerInfo),Bi(t,e),is=a,Fi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wg(t.containerInfo)}catch(p){An(e,e.return,p)}b5&&(b5=!1,YL(e));break;case 4:r=is,is=Wb(e.stateNode.containerInfo),Bi(t,e),Fi(e),is=r;break;case 12:Bi(t,e),Fi(e);break;case 13:Bi(t,e),Fi(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_3=$s()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,x5(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=Al,c=hr;if(Al=u||a,hr=c||l,Bi(t,e),hr=c,Al=u,Fi(e),r&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||Al||hr||ed(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(i=l.stateNode,a)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{s=l.stateNode;var f=l.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;s.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(p){An(l,l.return,p)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?"":l.memoizedProps}catch(p){An(l,l.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,x5(e,n))));break;case 19:Bi(t,e),Fi(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,x5(e,r)));break;case 30:break;case 21:break;default:Bi(t,e),Fi(e)}}function Fi(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(WL(r)){n=r;break}r=r.return}if(n==null)throw Error(We(160));switch(n.tag){case 27:var a=n.stateNode,i=y5(e);Lb(e,i,a);break;case 5:var o=n.stateNode;n.flags&32&&(Xh(o,""),n.flags&=-33);var s=y5(e);Lb(e,s,o);break;case 3:case 4:var l=n.stateNode.containerInfo,u=y5(e);kS(e,u,l);break;default:throw Error(We(161))}}catch(c){An(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YL(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;YL(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Eu(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)HL(e,t.alternate,t),t=t.sibling}function ed(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:bc(4,t,t.return),ed(t);break;case 1:zs(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&zL(t,t.return,n),ed(t);break;case 27:mg(t.stateNode);case 26:case 5:zs(t,t.return),ed(t);break;case 22:t.memoizedState===null&&ed(t);break;case 30:ed(t);break;default:ed(t)}e=e.sibling}}function Ru(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Ru(a,i,n),Cv(4,i);break;case 1:if(Ru(a,i,n),r=i,a=r.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){An(r,r.return,u)}if(r=i,a=r.updateQueue,a!==null){var s=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(l!==null)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)HM(l[a],s)}catch(u){An(r,r.return,u)}}n&&o&64&&FL(i),dg(i,i.return);break;case 27:qL(i);case 26:case 5:Ru(a,i,n),n&&r===null&&o&4&&UL(i),dg(i,i.return);break;case 12:Ru(a,i,n);break;case 13:Ru(a,i,n),n&&o&4&&GL(a,i);break;case 22:i.memoizedState===null&&Ru(a,i,n),dg(i,i.return);break;case 30:break;default:Ru(a,i,n)}t=t.sibling}}function w3(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&kv(n))}function N3(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&kv(e))}function Cs(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)XL(e,t,n,r),t=t.sibling}function XL(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Cs(e,t,n,r),a&2048&&Cv(9,t);break;case 1:Cs(e,t,n,r);break;case 3:Cs(e,t,n,r),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&kv(e)));break;case 12:if(a&2048){Cs(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,s=i.onPostCommit;typeof s=="function"&&s(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){An(t,t.return,l)}}else Cs(e,t,n,r);break;case 13:Cs(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,t.memoizedState!==null?i._visibility&2?Cs(e,t,n,r):fg(e,t):i._visibility&2?Cs(e,t,n,r):(i._visibility|=2,rh(e,t,n,r,(t.subtreeFlags&10256)!==0)),a&2048&&w3(o,t);break;case 24:Cs(e,t,n,r),a&2048&&N3(t.alternate,t);break;default:Cs(e,t,n,r)}}function rh(e,t,n,r,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,o=t,s=n,l=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:rh(i,o,s,l,a),Cv(8,o);break;case 23:break;case 22:var c=o.stateNode;o.memoizedState!==null?c._visibility&2?rh(i,o,s,l,a):fg(i,o):(c._visibility|=2,rh(i,o,s,l,a)),a&&u&2048&&w3(o.alternate,o);break;case 24:rh(i,o,s,l,a),a&&u&2048&&N3(o.alternate,o);break;default:rh(i,o,s,l,a)}t=t.sibling}}function fg(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:fg(n,r),a&2048&&w3(r.alternate,r);break;case 24:fg(n,r),a&2048&&N3(r.alternate,r);break;default:fg(n,r)}t=t.sibling}}var Km=8192;function qf(e){if(e.subtreeFlags&Km)for(e=e.child;e!==null;)JL(e),e=e.sibling}function JL(e){switch(e.tag){case 26:qf(e),e.flags&Km&&e.memoizedState!==null&&mV(is,e.memoizedState,e.memoizedProps);break;case 5:qf(e);break;case 3:case 4:var t=is;is=Wb(e.stateNode.containerInfo),qf(e),is=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Km,Km=16777216,qf(e),Km=t):qf(e));break;default:qf(e)}}function QL(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Em(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Qr=r,eI(r,e)}QL(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ZL(e),e=e.sibling}function ZL(e){switch(e.tag){case 0:case 11:case 15:Em(e),e.flags&2048&&bc(9,e,e.return);break;case 3:Em(e);break;case 12:Em(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ub(e)):Em(e);break;default:Em(e)}}function ub(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Qr=r,eI(r,e)}QL(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:bc(8,t,t.return),ub(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ub(t));break;default:ub(t)}e=e.sibling}}function eI(e,t){for(;Qr!==null;){var n=Qr;switch(n.tag){case 0:case 11:case 15:bc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:kv(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Qr=r;else e:for(n=e;Qr!==null;){r=Qr;var a=r.sibling,i=r.return;if($L(r),r===n){Qr=null;break e}if(a!==null){a.return=i,Qr=a;break e}Qr=i}}}var P$={getCacheForType:function(e){var t=za(Ir),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},O$=typeof WeakMap=="function"?WeakMap:Map,vn=0,Tn=null,Ut=null,Yt=0,mn=0,Wi=null,Yu=!1,Ap=!1,S3=!1,Kl=0,sr=0,xc=0,Nd=0,k3=0,Bo=0,tp=0,hg=null,hi=null,_S=!1,_3=0,Ib=1/0,Rb=null,oc=null,xa=0,sc=null,np=null,Mh=0,jS=0,AS=null,tI=null,pg=0,CS=null;function to(){if(vn&2&&Yt!==0)return Yt&-Yt;if(kt.T!==null){var e=Jh;return e!==0?e:A3()}return fM()}function nI(){Bo===0&&(Bo=!(Yt&536870912)||an?lM():536870912);var e=Wo.current;return e!==null&&(e.flags|=32),Bo}function no(e,t,n){(e===Tn&&(mn===2||mn===9)||e.cancelPendingCommit!==null)&&(rp(e,0),Xu(e,Yt,Bo,!1)),bv(e,n),(!(vn&2)||e!==Tn)&&(e===Tn&&(!(vn&2)&&(Nd|=n),sr===4&&Xu(e,Yt,Bo,!1)),ol(e))}function rI(e,t,n){if(vn&6)throw Error(We(327));var r=!n&&(t&124)===0&&(t&e.expiredLanes)===0||yv(e,t),a=r?L$(e,t):w5(e,t,!0),i=r;do{if(a===0){Ap&&!r&&Xu(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!T$(n)){a=w5(e,t,!1),i=!1;continue}if(a===2){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var s=e;a=hg;var l=s.current.memoizedState.isDehydrated;if(l&&(rp(s,o).flags|=256),o=w5(s,o,!1),o!==2){if(S3&&!l){s.errorRecoveryDisabledLanes|=i,Nd|=i,a=4;break e}i=hi,hi=a,i!==null&&(hi===null?hi=i:hi.push.apply(hi,i))}a=o}if(i=!1,a!==2)continue}}if(a===1){rp(e,0),Xu(e,t,0,!0);break}e:{switch(r=e,i=a,i){case 0:case 1:throw Error(We(345));case 4:if((t&4194048)!==t)break;case 6:Xu(r,t,Bo,!Yu);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(We(329))}if((t&62914560)===t&&(a=_3+300-$s(),10<a)){if(Xu(r,t,Bo,!Yu),p1(r,0,!0)!==0)break e;r.timeoutHandle=NI(OE.bind(null,r,n,hi,Rb,_S,t,Bo,Nd,tp,Yu,i,2,-0,0),a);break e}OE(r,n,hi,Rb,_S,t,Bo,Nd,tp,Yu,i,0,-0,0)}}break}while(!0);ol(e)}function OE(e,t,n,r,a,i,o,s,l,u,c,f,h,p){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Bg={stylesheets:null,count:0,unsuspend:pV},JL(t),f=gV(),f!==null)){e.cancelPendingCommit=f(ME.bind(null,e,t,i,n,r,a,o,s,l,c,1,h,p)),Xu(e,i,o,!u);return}ME(e,t,i,n,r,a,o,s,l)}function T$(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!oo(i(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xu(e,t,n,r){t&=~k3,t&=~Nd,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-eo(a),o=1<<i;r[i]=-1,a&=~o}n!==0&&cM(e,n,t)}function k1(){return vn&6?!0:(Ev(0),!1)}function j3(){if(Ut!==null){if(mn===0)var e=Ut.return;else e=Ut,Il=tf=null,f3(e),Th=null,Lg=0,e=Ut;for(;e!==null;)BL(e.alternate,e),e=e.return;Ut=null}}function rp(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,J$(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),j3(),Tn=e,Ut=n=zl(e.current,null),Yt=t,mn=0,Wi=null,Yu=!1,Ap=yv(e,t),S3=!1,tp=Bo=k3=Nd=xc=sr=0,hi=hg=null,_S=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var a=31-eo(r),i=1<<a;t|=e[a],r&=~i}return Kl=t,y1(),n}function aI(e,t){Rt=null,kt.H=Db,t===_v||t===x1?(t=cE(),mn=3):t===WM?(t=cE(),mn=4):mn=t===OL?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Wi=t,Ut===null&&(sr=1,Tb(e,Io(t,e.current)))}function iI(){var e=kt.H;return kt.H=Db,e===null?Db:e}function oI(){var e=kt.A;return kt.A=P$,e}function ES(){sr=4,Yu||(Yt&4194048)!==Yt&&Wo.current!==null||(Ap=!0),!(xc&134217727)&&!(Nd&134217727)||Tn===null||Xu(Tn,Yt,Bo,!1)}function w5(e,t,n){var r=vn;vn|=2;var a=iI(),i=oI();(Tn!==e||Yt!==t)&&(Rb=null,rp(e,t)),t=!1;var o=sr;e:do try{if(mn!==0&&Ut!==null){var s=Ut,l=Wi;switch(mn){case 8:j3(),o=6;break e;case 3:case 2:case 9:case 6:Wo.current===null&&(t=!0);var u=mn;if(mn=0,Wi=null,Nh(e,s,l,u),n&&Ap){o=0;break e}break;default:u=mn,mn=0,Wi=null,Nh(e,s,l,u)}}M$(),o=sr;break}catch(c){aI(e,c)}while(!0);return t&&e.shellSuspendCounter++,Il=tf=null,vn=r,kt.H=a,kt.A=i,Ut===null&&(Tn=null,Yt=0,y1()),o}function M$(){for(;Ut!==null;)sI(Ut)}function L$(e,t){var n=vn;vn|=2;var r=iI(),a=oI();Tn!==e||Yt!==t?(Rb=null,Ib=$s()+500,rp(e,t)):Ap=yv(e,t);e:do try{if(mn!==0&&Ut!==null){t=Ut;var i=Wi;t:switch(mn){case 1:mn=0,Wi=null,Nh(e,t,i,1);break;case 2:case 9:if(uE(i)){mn=0,Wi=null,TE(t);break}t=function(){mn!==2&&mn!==9||Tn!==e||(mn=7),ol(e)},i.then(t,t);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:uE(i)?(mn=0,Wi=null,TE(t)):(mn=0,Wi=null,Nh(e,t,i,7));break;case 5:var o=null;switch(Ut.tag){case 26:o=Ut.memoizedState;case 5:case 27:var s=Ut;if(!o||jI(o)){mn=0,Wi=null;var l=s.sibling;if(l!==null)Ut=l;else{var u=s.return;u!==null?(Ut=u,_1(u)):Ut=null}break t}}mn=0,Wi=null,Nh(e,t,i,5);break;case 6:mn=0,Wi=null,Nh(e,t,i,6);break;case 8:j3(),sr=6;break e;default:throw Error(We(462))}}I$();break}catch(c){aI(e,c)}while(!0);return Il=tf=null,kt.H=r,kt.A=a,vn=n,Ut!==null?0:(Tn=null,Yt=0,y1(),sr)}function I$(){for(;Ut!==null&&!aH();)sI(Ut)}function sI(e){var t=RL(e.alternate,e,Kl);e.memoizedProps=e.pendingProps,t===null?_1(e):Ut=t}function TE(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=jE(n,t,t.pendingProps,t.type,void 0,Yt);break;case 11:t=jE(n,t,t.pendingProps,t.type.render,t.ref,Yt);break;case 5:f3(t);default:BL(n,t),t=Ut=BM(t,Kl),t=RL(n,t,Kl)}e.memoizedProps=e.pendingProps,t===null?_1(e):Ut=t}function Nh(e,t,n,r){Il=tf=null,f3(t),Th=null,Lg=0;var a=t.return;try{if(_$(e,a,t,n,Yt)){sr=1,Tb(e,Io(n,e.current)),Ut=null;return}}catch(i){if(a!==null)throw Ut=a,i;sr=1,Tb(e,Io(n,e.current)),Ut=null;return}t.flags&32768?(an||r===1?e=!0:Ap||Yt&536870912?e=!1:(Yu=e=!0,(r===2||r===9||r===3||r===6)&&(r=Wo.current,r!==null&&r.tag===13&&(r.flags|=16384))),lI(t,e)):_1(t)}function _1(e){var t=e;do{if(t.flags&32768){lI(t,Yu);return}e=t.return;var n=A$(t.alternate,t,Kl);if(n!==null){Ut=n;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);sr===0&&(sr=5)}function lI(e,t){do{var n=C$(e.alternate,e);if(n!==null){n.flags&=32767,Ut=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ut=e;return}Ut=e=n}while(e!==null);sr=6,Ut=null}function ME(e,t,n,r,a,i,o,s,l){e.cancelPendingCommit=null;do j1();while(xa!==0);if(vn&6)throw Error(We(327));if(t!==null){if(t===e.current)throw Error(We(177));if(i=t.lanes|t.childLanes,i|=Z_,pH(e,n,i,o,s,l),e===Tn&&(Ut=Tn=null,Yt=0),np=t,sc=e,Mh=n,jS=i,AS=a,tI=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,z$(xb,function(){return hI(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=kt.T,kt.T=null,a=un.p,un.p=2,o=vn,vn|=4;try{E$(e,t,n)}finally{vn=o,un.p=a,kt.T=r}}xa=1,uI(),cI(),dI()}}function uI(){if(xa===1){xa=0;var e=sc,t=np,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=kt.T,kt.T=null;var r=un.p;un.p=2;var a=vn;vn|=4;try{KL(t,e);var i=TS,o=DM(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&EM(s.ownerDocument.documentElement,s)){if(l!==null&&Q_(s)){var u=l.start,c=l.end;if(c===void 0&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var f=s.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=s.textContent.length,v=Math.min(l.start,m),y=l.end===void 0?v:Math.min(l.end,m);!p.extend&&v>y&&(o=y,y=v,v=o);var g=tE(s,v),b=tE(s,y);if(g&&b&&(p.rangeCount!==1||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var x=f.createRange();x.setStart(g.node,g.offset),p.removeAllRanges(),v>y?(p.addRange(x),p.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),p.addRange(x))}}}}for(f=[],p=s;p=p.parentNode;)p.nodeType===1&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<f.length;s++){var N=f[s];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}$b=!!OS,TS=OS=null}finally{vn=a,un.p=r,kt.T=n}}e.current=t,xa=2}}function cI(){if(xa===2){xa=0;var e=sc,t=np,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=kt.T,kt.T=null;var r=un.p;un.p=2;var a=vn;vn|=4;try{HL(e,t.alternate,t)}finally{vn=a,un.p=r,kt.T=n}}xa=3}}function dI(){if(xa===4||xa===3){xa=0,iH();var e=sc,t=np,n=Mh,r=tI;t.subtreeFlags&10256||t.flags&10256?xa=5:(xa=0,np=sc=null,fI(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(oc=null),$_(n),t=t.stateNode,Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(vv,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=kt.T,a=un.p,un.p=2,kt.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];i(s.value,{componentStack:s.stack})}}finally{kt.T=t,un.p=a}}Mh&3&&j1(),ol(e),a=e.pendingLanes,n&4194090&&a&42?e===CS?pg++:(pg=0,CS=e):pg=0,Ev(0)}}function fI(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,kv(t)))}function j1(e){return uI(),cI(),dI(),hI()}function hI(){if(xa!==5)return!1;var e=sc,t=jS;jS=0;var n=$_(Mh),r=kt.T,a=un.p;try{un.p=32>n?32:n,kt.T=null,n=AS,AS=null;var i=sc,o=Mh;if(xa=0,np=sc=null,Mh=0,vn&6)throw Error(We(331));var s=vn;if(vn|=4,ZL(i.current),XL(i,i.current,o,n),vn=s,Ev(0,!1),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(vv,i)}catch{}return!0}finally{un.p=a,kt.T=r,fI(e,t)}}function LE(e,t,n){t=Io(n,t),t=wS(e.stateNode,t,2),e=ic(e,t,2),e!==null&&(bv(e,2),ol(e))}function An(e,t,n){if(e.tag===3)LE(e,e,n);else for(;t!==null;){if(t.tag===3){LE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oc===null||!oc.has(r))){e=Io(n,e),n=DL(2),r=ic(t,n,2),r!==null&&(PL(n,r,t,e),bv(r,2),ol(r));break}}t=t.return}}function N5(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new O$;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(S3=!0,a.add(n),e=R$.bind(null,e,t,n),t.then(e,e))}function R$(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Tn===e&&(Yt&n)===n&&(sr===4||sr===3&&(Yt&62914560)===Yt&&300>$s()-_3?!(vn&2)&&rp(e,0):k3|=n,tp===Yt&&(tp=0)),ol(e)}function pI(e,t){t===0&&(t=uM()),e=jp(e,t),e!==null&&(bv(e,t),ol(e))}function B$(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pI(e,n)}function F$(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(We(314))}r!==null&&r.delete(t),pI(e,n)}function z$(e,t){return q_(e,t)}var Bb=null,ah=null,DS=!1,Fb=!1,S5=!1,Sd=0;function ol(e){e!==ah&&e.next===null&&(ah===null?Bb=ah=e:ah=ah.next=e),Fb=!0,DS||(DS=!0,W$())}function Ev(e,t){if(!S5&&Fb){S5=!0;do for(var n=!1,r=Bb;r!==null;){if(e!==0){var a=r.pendingLanes;if(a===0)var i=0;else{var o=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-eo(42|e)+1)-1,i&=a&~(o&~s),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,IE(r,i))}else i=Yt,i=p1(r,r===Tn?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(i&3)||yv(r,i)||(n=!0,IE(r,i));r=r.next}while(n);S5=!1}}function U$(){mI()}function mI(){Fb=DS=!1;var e=0;Sd!==0&&(X$()&&(e=Sd),Sd=0);for(var t=$s(),n=null,r=Bb;r!==null;){var a=r.next,i=gI(r,t);i===0?(r.next=null,n===null?Bb=a:n.next=a,a===null&&(ah=n)):(n=r,(e!==0||i&3)&&(Fb=!0)),r=a}Ev(e)}function gI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var o=31-eo(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=hH(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(t=Tn,n=Yt,n=p1(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(mn===2||mn===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Yw(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||yv(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Yw(r),$_(n)){case 2:case 8:n=oM;break;case 32:n=xb;break;case 268435456:n=sM;break;default:n=xb}return r=vI.bind(null,e),n=q_(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Yw(r),e.callbackPriority=2,e.callbackNode=null,2}function vI(e,t){if(xa!==0&&xa!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(j1()&&e.callbackNode!==n)return null;var r=Yt;return r=p1(e,e===Tn?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(rI(e,r,t),gI(e,$s()),e.callbackNode!=null&&e.callbackNode===n?vI.bind(null,e):null)}function IE(e,t){if(j1())return null;rI(e,t,!0)}function W$(){Q$(function(){vn&6?q_(iM,U$):mI()})}function A3(){return Sd===0&&(Sd=lM()),Sd}function RE(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:tb(""+e)}function BE(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function q$(e,t,n,r,a){if(t==="submit"&&n&&n.stateNode===a){var i=RE((a[wi]||null).action),o=r.submitter;o&&(t=(t=o[wi]||null)?RE(t.formAction):o.getAttribute("formAction"),t!==null&&(i=t,o=null));var s=new m1("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Sd!==0){var l=o?BE(a,o):new FormData(a);bS(n,{pending:!0,data:l,method:a.method,action:i},null,l)}}else typeof i=="function"&&(s.preventDefault(),l=o?BE(a,o):new FormData(a),bS(n,{pending:!0,data:l,method:a.method,action:i},i,l))},currentTarget:a}]})}}for(var k5=0;k5<sS.length;k5++){var _5=sS[k5],H$=_5.toLowerCase(),$$=_5[0].toUpperCase()+_5.slice(1);gs(H$,"on"+$$)}gs(OM,"onAnimationEnd");gs(TM,"onAnimationIteration");gs(MM,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(l$,"onTransitionRun");gs(u$,"onTransitionStart");gs(c$,"onTransitionCancel");gs(LM,"onTransitionEnd");Yh("onMouseEnter",["mouseout","mouseover"]);Yh("onMouseLeave",["mouseout","mouseover"]);Yh("onPointerEnter",["pointerout","pointerover"]);Yh("onPointerLeave",["pointerout","pointerover"]);Qd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ig="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ig));function yI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=u;try{i(a)}catch(c){Ob(c)}a.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=u;try{i(a)}catch(c){Ob(c)}a.currentTarget=null,i=l}}}}function zt(e,t){var n=t[eS];n===void 0&&(n=t[eS]=new Set);var r=e+"__bubble";n.has(r)||(bI(t,e,2,!1),n.add(r))}function j5(e,t,n){var r=0;t&&(r|=4),bI(n,e,r,t)}var dy="_reactListening"+Math.random().toString(36).slice(2);function C3(e){if(!e[dy]){e[dy]=!0,hM.forEach(function(n){n!=="selectionchange"&&(V$.has(n)||j5(n,!1,e),j5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dy]||(t[dy]=!0,j5("selectionchange",!1,t))}}function bI(e,t,n,r){switch(PI(t)){case 2:var a=bV;break;case 8:a=xV;break;default:a=O3}n=a.bind(null,t,n,e),a=void 0,!aS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function A5(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;s!==null;){if(o=hh(s),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){r=i=o;continue e}s=s.parentNode}}r=r.return}wM(function(){var u=i,c=K_(n),f=[];e:{var h=IM.get(e);if(h!==void 0){var p=m1,m=e;switch(e){case"keypress":if(rb(n)===0)break e;case"keydown":case"keyup":p=zH;break;case"focusin":m="focus",p=r5;break;case"focusout":m="blur",p=r5;break;case"beforeblur":case"afterblur":p=r5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$C;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=CH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=qH;break;case OM:case TM:case MM:p=PH;break;case LM:p=$H;break;case"scroll":case"scrollend":p=jH;break;case"wheel":p=GH;break;case"copy":case"cut":case"paste":p=TH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=GC;break;case"toggle":case"beforetoggle":p=YH}var v=(t&4)!==0,y=!v&&(e==="scroll"||e==="scrollend"),g=v?h!==null?h+"Capture":null:h;v=[];for(var b=u,x;b!==null;){var N=b;if(x=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||x===null||g===null||(N=Dg(b,g),N!=null&&v.push(Rg(b,N,x))),y)break;b=b.return}0<v.length&&(h=new p(h,m,null,n,c),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==rS&&(m=n.relatedTarget||n.fromElement)&&(hh(m)||m[kp]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?hh(m):null,m!==null&&(y=gv(m),v=m.tag,m!==y||v!==5&&v!==27&&v!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=$C,N="onMouseLeave",g="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=GC,N="onPointerLeave",g="onPointerEnter",b="pointer"),y=p==null?h:Gm(p),x=m==null?h:Gm(m),h=new v(N,b+"leave",p,n,c),h.target=y,h.relatedTarget=x,N=null,hh(c)===u&&(v=new v(g,b+"enter",m,n,c),v.target=x,v.relatedTarget=y,N=v),y=N,p&&m)t:{for(v=p,g=m,b=0,x=v;x;x=Hf(x))b++;for(x=0,N=g;N;N=Hf(N))x++;for(;0<b-x;)v=Hf(v),b--;for(;0<x-b;)g=Hf(g),x--;for(;b--;){if(v===g||g!==null&&v===g.alternate)break t;v=Hf(v),g=Hf(g)}v=null}else v=null;p!==null&&FE(f,h,p,v,!1),m!==null&&y!==null&&FE(f,y,m,v,!0)}}e:{if(h=u?Gm(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=JC;else if(XC(h))if(AM)k=i$;else{k=r$;var j=n$}else p=h.nodeName,!p||p.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&G_(u.elementType)&&(k=JC):k=a$;if(k&&(k=k(e,u))){jM(f,k,n,c);break e}j&&j(e,h,u),e==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&nS(h,"number",h.value)}switch(j=u?Gm(u):window,e){case"focusin":(XC(j)||j.contentEditable==="true")&&(gh=j,iS=u,ag=null);break;case"focusout":ag=iS=gh=null;break;case"mousedown":oS=!0;break;case"contextmenu":case"mouseup":case"dragend":oS=!1,nE(f,n,c);break;case"selectionchange":if(s$)break;case"keydown":case"keyup":nE(f,n,c)}var S;if(J_)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else mh?kM(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(SM&&n.locale!=="ko"&&(mh||A!=="onCompositionStart"?A==="onCompositionEnd"&&mh&&(S=NM()):(Ku=c,Y_="value"in Ku?Ku.value:Ku.textContent,mh=!0)),j=zb(u,A),0<j.length&&(A=new VC(A,e,null,n,c),f.push({event:A,listeners:j}),S?A.data=S:(S=_M(n),S!==null&&(A.data=S)))),(S=JH?QH(e,n):ZH(e,n))&&(A=zb(u,"onBeforeInput"),0<A.length&&(j=new VC("onBeforeInput","beforeinput",null,n,c),f.push({event:j,listeners:A}),j.data=S)),q$(f,e,u,n,c)}yI(f,t)})}function Rg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zb(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=Dg(e,n),a!=null&&r.unshift(Rg(e,a,i)),a=Dg(e,t),a!=null&&r.push(Rg(e,a,i))),e.tag===3)return r;e=e.return}return[]}function Hf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function FE(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,l!==null&&l===r)break;s!==5&&s!==26&&s!==27||u===null||(l=u,a?(u=Dg(n,i),u!=null&&o.unshift(Rg(n,u,l))):a||(u=Dg(n,i),u!=null&&o.push(Rg(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var G$=/\r\n?/g,K$=/\u0000|\uFFFD/g;function zE(e){return(typeof e=="string"?e:""+e).replace(G$,`
`).replace(K$,"")}function xI(e,t){return t=zE(t),zE(e)===t}function A1(){}function Nn(e,t,n,r,a,i){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Xh(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Xh(e,""+r);break;case"className":ay(e,"class",r);break;case"tabIndex":ay(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ay(e,n,r);break;case"style":xM(e,r,i);break;case"data":if(t!=="object"){ay(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=tb(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Nn(e,t,"name",a.name,a,null),Nn(e,t,"formEncType",a.formEncType,a,null),Nn(e,t,"formMethod",a.formMethod,a,null),Nn(e,t,"formTarget",a.formTarget,a,null)):(Nn(e,t,"encType",a.encType,a,null),Nn(e,t,"method",a.method,a,null),Nn(e,t,"target",a.target,a,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=tb(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=A1);break;case"onScroll":r!=null&&zt("scroll",e);break;case"onScrollEnd":r!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(We(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(We(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=tb(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":zt("beforetoggle",e),zt("toggle",e),eb(e,"popover",r);break;case"xlinkActuate":wl(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":wl(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":wl(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":wl(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":wl(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":wl(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":wl(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":wl(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":wl(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":eb(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=kH.get(n)||n,eb(e,n,r))}}function PS(e,t,n,r,a,i){switch(n){case"style":xM(e,r,i);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(We(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(We(60));e.innerHTML=n}}break;case"children":typeof r=="string"?Xh(e,r):(typeof r=="number"||typeof r=="bigint")&&Xh(e,""+r);break;case"onScroll":r!=null&&zt("scroll",e);break;case"onScrollEnd":r!=null&&zt("scrollend",e);break;case"onClick":r!=null&&(e.onclick=A1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pM.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),i=e[wi]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,a),typeof r=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):eb(e,n,r)}}}function Sa(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var r=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":r=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(We(137,t));default:Nn(e,t,i,o,n,null)}}a&&Nn(e,t,"srcSet",n.srcSet,n,null),r&&Nn(e,t,"src",n.src,n,null);return;case"input":zt("invalid",e);var s=i=o=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var c=n[r];if(c!=null)switch(r){case"name":a=c;break;case"type":o=c;break;case"checked":l=c;break;case"defaultChecked":u=c;break;case"value":i=c;break;case"defaultValue":s=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(We(137,t));break;default:Nn(e,t,r,c,n,null)}}vM(e,i,s,l,u,o,a,!1),wb(e);return;case"select":zt("invalid",e),r=o=i=null;for(a in n)if(n.hasOwnProperty(a)&&(s=n[a],s!=null))switch(a){case"value":i=s;break;case"defaultValue":o=s;break;case"multiple":r=s;default:Nn(e,t,a,s,n,null)}t=i,n=o,e.multiple=!!r,t!=null?Ch(e,!!r,t,!1):n!=null&&Ch(e,!!r,n,!0);return;case"textarea":zt("invalid",e),i=a=r=null;for(o in n)if(n.hasOwnProperty(o)&&(s=n[o],s!=null))switch(o){case"value":r=s;break;case"defaultValue":a=s;break;case"children":i=s;break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(We(91));break;default:Nn(e,t,o,s,n,null)}bM(e,r,a,i),wb(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Nn(e,t,l,r,n,null)}return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(r=0;r<Ig.length;r++)zt(Ig[r],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(We(137,t));default:Nn(e,t,u,r,n,null)}return;default:if(G_(t)){for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!==void 0&&PS(e,t,c,r,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(r=n[s],r!=null&&Nn(e,t,s,r,n,null))}function Y$(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,s=null,l=null,u=null,c=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&f!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=f;default:r.hasOwnProperty(p)||Nn(e,t,p,null,r,f)}}for(var h in r){var p=r[h];if(f=n[h],r.hasOwnProperty(h)&&(p!=null||f!=null))switch(h){case"type":i=p;break;case"name":a=p;break;case"checked":u=p;break;case"defaultChecked":c=p;break;case"value":o=p;break;case"defaultValue":s=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(We(137,t));break;default:p!==f&&Nn(e,t,h,p,r,f)}}tS(e,o,s,l,u,c,i,a);return;case"select":p=o=s=h=null;for(i in n)if(l=n[i],n.hasOwnProperty(i)&&l!=null)switch(i){case"value":break;case"multiple":p=l;default:r.hasOwnProperty(i)||Nn(e,t,i,null,r,l)}for(a in r)if(i=r[a],l=n[a],r.hasOwnProperty(a)&&(i!=null||l!=null))switch(a){case"value":h=i;break;case"defaultValue":s=i;break;case"multiple":o=i;default:i!==l&&Nn(e,t,a,i,r,l)}t=s,n=o,r=p,h!=null?Ch(e,!!n,h,!1):!!r!=!!n&&(t!=null?Ch(e,!!n,t,!0):Ch(e,!!n,n?[]:"",!1));return;case"textarea":p=h=null;for(s in n)if(a=n[s],n.hasOwnProperty(s)&&a!=null&&!r.hasOwnProperty(s))switch(s){case"value":break;case"children":break;default:Nn(e,t,s,null,r,a)}for(o in r)if(a=r[o],i=n[o],r.hasOwnProperty(o)&&(a!=null||i!=null))switch(o){case"value":h=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(We(91));break;default:a!==i&&Nn(e,t,o,a,r,i)}yM(e,h,p);return;case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&h!=null&&!r.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:Nn(e,t,m,null,r,h)}for(l in r)if(h=r[l],p=n[l],r.hasOwnProperty(l)&&h!==p&&(h!=null||p!=null))switch(l){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Nn(e,t,l,h,r,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)h=n[v],n.hasOwnProperty(v)&&h!=null&&!r.hasOwnProperty(v)&&Nn(e,t,v,null,r,h);for(u in r)if(h=r[u],p=n[u],r.hasOwnProperty(u)&&h!==p&&(h!=null||p!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(We(137,t));break;default:Nn(e,t,u,h,r,p)}return;default:if(G_(t)){for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!==void 0&&!r.hasOwnProperty(y)&&PS(e,t,y,void 0,r,h);for(c in r)h=r[c],p=n[c],!r.hasOwnProperty(c)||h===p||h===void 0&&p===void 0||PS(e,t,c,h,r,p);return}}for(var g in n)h=n[g],n.hasOwnProperty(g)&&h!=null&&!r.hasOwnProperty(g)&&Nn(e,t,g,null,r,h);for(f in r)h=r[f],p=n[f],!r.hasOwnProperty(f)||h===p||h==null&&p==null||Nn(e,t,f,h,r,p)}var OS=null,TS=null;function Ub(e){return e.nodeType===9?e:e.ownerDocument}function UE(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wI(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function MS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var C5=null;function X$(){var e=window.event;return e&&e.type==="popstate"?e===C5?!1:(C5=e,!0):(C5=null,!1)}var NI=typeof setTimeout=="function"?setTimeout:void 0,J$=typeof clearTimeout=="function"?clearTimeout:void 0,WE=typeof Promise=="function"?Promise:void 0,Q$=typeof queueMicrotask=="function"?queueMicrotask:typeof WE<"u"?function(e){return WE.resolve(null).then(e).catch(Z$)}:NI;function Z$(e){setTimeout(function(){throw e})}function Ac(e){return e==="head"}function qE(e,t){var n=t,r=0,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(n&1&&mg(o.documentElement),n&2&&mg(o.body),n&4)for(n=o.head,mg(n),o=n.firstChild;o;){var s=o.nextSibling,l=o.nodeName;o[xv]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=s}}if(a===0){e.removeChild(i),Wg(t);return}a--}else n==="$"||n==="$?"||n==="$!"?a++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Wg(t)}function LS(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":LS(n),V_(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function eV(e,t,n,r){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[xv])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=ds(e.nextSibling),e===null)break}return null}function tV(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ds(e.nextSibling),e===null))return null;return e}function IS(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function nV(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var RS=null;function HE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function SI(e,t,n){switch(t=Ub(n),e){case"html":if(e=t.documentElement,!e)throw Error(We(452));return e;case"head":if(e=t.head,!e)throw Error(We(453));return e;case"body":if(e=t.body,!e)throw Error(We(454));return e;default:throw Error(We(451))}}function mg(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);V_(e)}var qo=new Map,$E=new Set;function Wb(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zl=un.d;un.d={f:rV,r:aV,D:iV,C:oV,L:sV,m:lV,X:cV,S:uV,M:dV};function rV(){var e=Zl.f(),t=k1();return e||t}function aV(e){var t=_p(e);t!==null&&t.tag===5&&t.type==="form"?gL(t):Zl.r(e)}var Cp=typeof document>"u"?null:document;function kI(e,t,n){var r=Cp;if(r&&typeof t=="string"&&t){var a=Lo(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),$E.has(a)||($E.add(a),e={rel:e,crossOrigin:n,href:t},r.querySelector(a)===null&&(t=r.createElement("link"),Sa(t,"link",e),Zr(t),r.head.appendChild(t)))}}function iV(e){Zl.D(e),kI("dns-prefetch",e,null)}function oV(e,t){Zl.C(e,t),kI("preconnect",e,t)}function sV(e,t,n){Zl.L(e,t,n);var r=Cp;if(r&&e&&t){var a='link[rel="preload"][as="'+Lo(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Lo(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Lo(n.imageSizes)+'"]')):a+='[href="'+Lo(e)+'"]';var i=a;switch(t){case"style":i=ap(e);break;case"script":i=Ep(e)}qo.has(i)||(e=Un({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),qo.set(i,e),r.querySelector(a)!==null||t==="style"&&r.querySelector(Dv(i))||t==="script"&&r.querySelector(Pv(i))||(t=r.createElement("link"),Sa(t,"link",e),Zr(t),r.head.appendChild(t)))}}function lV(e,t){Zl.m(e,t);var n=Cp;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Lo(r)+'"][href="'+Lo(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Ep(e)}if(!qo.has(i)&&(e=Un({rel:"modulepreload",href:e},t),qo.set(i,e),n.querySelector(a)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pv(i)))return}r=n.createElement("link"),Sa(r,"link",e),Zr(r),n.head.appendChild(r)}}}function uV(e,t,n){Zl.S(e,t,n);var r=Cp;if(r&&e){var a=Ah(r).hoistableStyles,i=ap(e);t=t||"default";var o=a.get(i);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Dv(i)))s.loading=5;else{e=Un({rel:"stylesheet",href:e,"data-precedence":t},n),(n=qo.get(i))&&E3(e,n);var l=o=r.createElement("link");Zr(l),Sa(l,"link",e),l._p=new Promise(function(u,c){l.onload=u,l.onerror=c}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,cb(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(i,o)}}}function cV(e,t){Zl.X(e,t);var n=Cp;if(n&&e){var r=Ah(n).hoistableScripts,a=Ep(e),i=r.get(a);i||(i=n.querySelector(Pv(a)),i||(e=Un({src:e,async:!0},t),(t=qo.get(a))&&D3(e,t),i=n.createElement("script"),Zr(i),Sa(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}function dV(e,t){Zl.M(e,t);var n=Cp;if(n&&e){var r=Ah(n).hoistableScripts,a=Ep(e),i=r.get(a);i||(i=n.querySelector(Pv(a)),i||(e=Un({src:e,async:!0,type:"module"},t),(t=qo.get(a))&&D3(e,t),i=n.createElement("script"),Zr(i),Sa(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}function VE(e,t,n,r){var a=(a=rc.current)?Wb(a):null;if(!a)throw Error(We(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ap(n.href),n=Ah(a).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ap(n.href);var i=Ah(a).hoistableStyles,o=i.get(e);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,o),(i=a.querySelector(Dv(e)))&&!i._p&&(o.instance=i,o.state.loading=5),qo.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},qo.set(e,n),i||fV(a,e,n,o.state))),t&&r===null)throw Error(We(528,""));return o}if(t&&r!==null)throw Error(We(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ep(n),n=Ah(a).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(We(444,e))}}function ap(e){return'href="'+Lo(e)+'"'}function Dv(e){return'link[rel="stylesheet"]['+e+"]"}function _I(e){return Un({},e,{"data-precedence":e.precedence,precedence:null})}function fV(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Sa(t,"link",n),Zr(t),e.head.appendChild(t))}function Ep(e){return'[src="'+Lo(e)+'"]'}function Pv(e){return"script[async]"+e}function GE(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Lo(n.href)+'"]');if(r)return t.instance=r,Zr(r),r;var a=Un({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Zr(r),Sa(r,"style",a),cb(r,n.precedence,e),t.instance=r;case"stylesheet":a=ap(n.href);var i=e.querySelector(Dv(a));if(i)return t.state.loading|=4,t.instance=i,Zr(i),i;r=_I(n),(a=qo.get(a))&&E3(r,a),i=(e.ownerDocument||e).createElement("link"),Zr(i);var o=i;return o._p=new Promise(function(s,l){o.onload=s,o.onerror=l}),Sa(i,"link",r),t.state.loading|=4,cb(i,n.precedence,e),t.instance=i;case"script":return i=Ep(n.src),(a=e.querySelector(Pv(i)))?(t.instance=a,Zr(a),a):(r=n,(a=qo.get(i))&&(r=Un({},n),D3(r,a)),e=e.ownerDocument||e,a=e.createElement("script"),Zr(a),Sa(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(We(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,cb(r,n.precedence,e));return t.instance}function cb(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)i=s;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function E3(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function D3(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var db=null;function KE(e,t,n){if(db===null){var r=new Map,a=db=new Map;a.set(n,r)}else a=db,r=a.get(n),r||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[xv]||i[Fa]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(i):r.set(o,[i])}}return r}function YE(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function hV(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function jI(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Bg=null;function pV(){}function mV(e,t,n){if(Bg===null)throw Error(We(475));var r=Bg;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=ap(n.href),i=e.querySelector(Dv(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=qb.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,Zr(i);return}i=e.ownerDocument||e,n=_I(n),(a=qo.get(a))&&E3(n,a),i=i.createElement("link"),Zr(i);var o=i;o._p=new Promise(function(s,l){o.onload=s,o.onerror=l}),Sa(i,"link",n),t.instance=i}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=qb.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function gV(){if(Bg===null)throw Error(We(475));var e=Bg;return e.stylesheets&&e.count===0&&BS(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&BS(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function qb(){if(this.count--,this.count===0){if(this.stylesheets)BS(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hb=null;function BS(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hb=new Map,t.forEach(vV,e),Hb=null,qb.call(e))}function vV(e,t){if(!(t.state.loading&4)){var n=Hb.get(e);if(n)var r=n.get(null);else{n=new Map,Hb.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}a=t.instance,o=a.getAttribute("data-precedence"),i=n.get(o)||r,i===r&&n.set(null,a),n.set(o,a),this.count++,r=qb.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Fg={$$typeof:Tl,Provider:null,Consumer:null,_currentValue:vd,_currentValue2:vd,_threadCount:0};function yV(e,t,n,r,a,i,o,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xw(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xw(0),this.hiddenUpdates=Xw(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function AI(e,t,n,r,a,i,o,s,l,u,c,f){return e=new yV(e,t,n,o,s,l,u,f),t=1,i===!0&&(t|=24),i=Gi(3,null,null,t),e.current=i,i.stateNode=e,t=a3(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},o3(i),e}function CI(e){return e?(e=bh,e):bh}function EI(e,t,n,r,a,i){a=CI(a),r.context===null?r.context=a:r.pendingContext=a,r=ac(t),r.payload={element:n},i=i===void 0?null:i,i!==null&&(r.callback=i),n=ic(e,r,t),n!==null&&(no(n,e,t),sg(n,e,t))}function XE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function P3(e,t){XE(e,t),(e=e.alternate)&&XE(e,t)}function DI(e){if(e.tag===13){var t=jp(e,67108864);t!==null&&no(t,e,67108864),P3(e,67108864)}}var $b=!0;function bV(e,t,n,r){var a=kt.T;kt.T=null;var i=un.p;try{un.p=2,O3(e,t,n,r)}finally{un.p=i,kt.T=a}}function xV(e,t,n,r){var a=kt.T;kt.T=null;var i=un.p;try{un.p=8,O3(e,t,n,r)}finally{un.p=i,kt.T=a}}function O3(e,t,n,r){if($b){var a=FS(r);if(a===null)A5(e,t,r,Vb,n),JE(e,r);else if(NV(a,e,t,n,r))r.stopPropagation();else if(JE(e,r),t&4&&-1<wV.indexOf(e)){for(;a!==null;){var i=_p(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=Qc(i.pendingLanes);if(o!==0){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-eo(o);s.entanglements[1]|=l,o&=~l}ol(i),!(vn&6)&&(Ib=$s()+500,Ev(0))}}break;case 13:s=jp(i,2),s!==null&&no(s,i,2),k1(),P3(i,2)}if(i=FS(r),i===null&&A5(e,t,r,Vb,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else A5(e,t,r,null,n)}}function FS(e){return e=K_(e),T3(e)}var Vb=null;function T3(e){if(Vb=null,e=hh(e),e!==null){var t=gv(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=tM(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Vb=e,null}function PI(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oH()){case iM:return 2;case oM:return 8;case xb:case sH:return 32;case sM:return 268435456;default:return 32}default:return 32}}var zS=!1,lc=null,uc=null,cc=null,zg=new Map,Ug=new Map,Hu=[],wV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JE(e,t){switch(e){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":zg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ug.delete(t.pointerId)}}function Dm(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=_p(t),t!==null&&DI(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function NV(e,t,n,r,a){switch(t){case"focusin":return lc=Dm(lc,e,t,n,r,a),!0;case"dragenter":return uc=Dm(uc,e,t,n,r,a),!0;case"mouseover":return cc=Dm(cc,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return zg.set(i,Dm(zg.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Ug.set(i,Dm(Ug.get(i)||null,e,t,n,r,a)),!0}return!1}function OI(e){var t=hh(e.target);if(t!==null){var n=gv(t);if(n!==null){if(t=n.tag,t===13){if(t=tM(n),t!==null){e.blockedOn=t,mH(e.priority,function(){if(n.tag===13){var r=to();r=H_(r);var a=jp(n,r);a!==null&&no(a,n,r),P3(n,r)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=FS(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rS=r,n.target.dispatchEvent(r),rS=null}else return t=_p(n),t!==null&&DI(t),e.blockedOn=n,!1;t.shift()}return!0}function QE(e,t,n){fb(e)&&n.delete(t)}function SV(){zS=!1,lc!==null&&fb(lc)&&(lc=null),uc!==null&&fb(uc)&&(uc=null),cc!==null&&fb(cc)&&(cc=null),zg.forEach(QE),Ug.forEach(QE)}function fy(e,t){e.blockedOn===t&&(e.blockedOn=null,zS||(zS=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,SV)))}var hy=null;function ZE(e){hy!==e&&(hy=e,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,function(){hy===e&&(hy=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if(typeof r!="function"){if(T3(r||n)===null)continue;break}var i=_p(n);i!==null&&(e.splice(t,3),t-=3,bS(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Wg(e){function t(l){return fy(l,e)}lc!==null&&fy(lc,e),uc!==null&&fy(uc,e),cc!==null&&fy(cc,e),zg.forEach(t),Ug.forEach(t);for(var n=0;n<Hu.length;n++){var r=Hu[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Hu.length&&(n=Hu[0],n.blockedOn===null);)OI(n),n.blockedOn===null&&Hu.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],o=a[wi]||null;if(typeof i=="function")o||ZE(n);else if(o){var s=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[wi]||null)s=o.formAction;else if(T3(a)!==null)continue}else s=o.action;typeof s=="function"?n[r+1]=s:(n.splice(r,3),r-=3),ZE(n)}}}function M3(e){this._internalRoot=e}C1.prototype.render=M3.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(We(409));var n=t.current,r=to();EI(n,r,e,t,null,null)};C1.prototype.unmount=M3.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;EI(e.current,2,null,e,null,null),k1(),t[kp]=null}};function C1(e){this._internalRoot=e}C1.prototype.unstable_scheduleHydration=function(e){if(e){var t=fM();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hu.length&&t!==0&&t<Hu[n].priority;n++);Hu.splice(n,0,e),n===0&&OI(e)}};var e6=ZT.version;if(e6!=="19.1.0")throw Error(We(527,e6,"19.1.0"));un.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(We(188)):(e=Object.keys(e).join(","),Error(We(268,e)));return e=Zq(t),e=e!==null?nM(e):null,e=e===null?null:e.stateNode,e};var kV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:kt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!py.isDisabled&&py.supportsFiber)try{vv=py.inject(kV),Zi=py}catch{}}h1.createRoot=function(e,t){if(!eM(e))throw Error(We(299));var n=!1,r="",a=AL,i=CL,o=EL,s=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(s=t.unstable_transitionCallbacks)),t=AI(e,1,!1,null,null,n,r,a,i,o,s,null),e[kp]=t.current,C3(e),new M3(t)};h1.hydrateRoot=function(e,t,n){if(!eM(e))throw Error(We(299));var r=!1,a="",i=AL,o=CL,s=EL,l=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(s=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),t=AI(e,1,!0,t,n??null,r,a,i,o,s,l,u),t.context=CI(null),n=t.current,r=to(),r=H_(r),a=ac(r),a.callback=null,ic(n,a,r),n=r,t.current.lanes=n,bv(t,n),ol(t),e[kp]=t.current,C3(e),new C1(t)};h1.version="19.1.0";function TI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TI)}catch(e){console.error(e)}}TI(),XT.exports=h1;var _V=XT.exports;const Cl="https://okltvbilvewzwyhjcfrp.supabase.co",US="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbHR2YmlsdmV3end5aGpjZnJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEwOTUwMTIsImV4cCI6MjA2NjY3MTAxMn0.6OTF3BU5qiHyQ8m7dWfnBkLOvt7BAJoFffREQl6oM_Q",Dp=!Cl.startsWith("http")||Cl.includes("placeholder")||Cl.length<10,Pp=US.includes("placeholder")||US.length<10;let Pe;if(Dp||Pp){console.warn(` Supabase not configured - using development mode.
To connect to Supabase:
1. Click "Connect to Supabase" button in the top right
2. Or manually update your .env file with actual Supabase credentials
Current URL: ${Cl}
Current Key: [REDACTED]`);const e=(n="Supabase not configured")=>({data:null,error:{message:n,code:"SUPABASE_NOT_CONFIGURED"}}),t=(n=null)=>({data:n,error:null});Pe={auth:{signUp:()=>Promise.resolve(e("Please configure Supabase to sign up")),signInWithPassword:()=>Promise.resolve(e("Please configure Supabase to sign in")),signOut:()=>Promise.resolve({error:null}),getSession:()=>Promise.resolve(t({session:null})),getUser:()=>Promise.resolve(t({user:null})),onAuthStateChange:n=>(n&&setTimeout(()=>n("SIGNED_OUT",null),0),{data:{subscription:{unsubscribe:()=>{}}}}),updateUser:()=>Promise.resolve(e("Please configure Supabase to update user")),resetPasswordForEmail:()=>Promise.resolve(e("Please configure Supabase for password reset"))},from:n=>({select:(r="*")=>({eq:(a,i)=>({single:()=>Promise.resolve(e(`Please configure Supabase to query ${n}`)),maybeSingle:()=>Promise.resolve(e(`Please configure Supabase to query ${n}`)),limit:o=>Promise.resolve(e(`Please configure Supabase to query ${n}`)),order:(o,s)=>Promise.resolve(e(`Please configure Supabase to query ${n}`))}),neq:(a,i)=>({limit:o=>Promise.resolve(e(`Please configure Supabase to query ${n}`)),order:(o,s)=>Promise.resolve(e(`Please configure Supabase to query ${n}`))}),order:(a,i)=>({limit:o=>Promise.resolve(e(`Please configure Supabase to query ${n}`))}),limit:a=>Promise.resolve(e(`Please configure Supabase to query ${n}`)),range:(a,i)=>Promise.resolve(e(`Please configure Supabase to query ${n}`))}),insert:r=>({select:()=>Promise.resolve(e(`Please configure Supabase to insert into ${n}`))}),update:r=>({eq:(a,i)=>({select:()=>Promise.resolve(e(`Please configure Supabase to update ${n}`))})}),delete:()=>({eq:(r,a)=>Promise.resolve(e(`Please configure Supabase to delete from ${n}`))}),upsert:r=>({select:()=>Promise.resolve(e(`Please configure Supabase to upsert into ${n}`))})}),storage:{from:n=>({upload:(r,a,i)=>Promise.resolve(e("Please configure Supabase for file upload")),getPublicUrl:r=>({data:{publicUrl:""}}),remove:r=>Promise.resolve(e("Please configure Supabase for file removal"))})},rpc:(n,r)=>Promise.resolve(e(`Please configure Supabase to call function ${n}`))}}else try{Pe=Bq(Cl,US,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"attendance-app"}}}),(async()=>{try{const{data:{session:t},error:n}=await Pe.auth.getSession();if(n){console.warn("Session error detected, clearing session:",n.message),await Pe.auth.signOut(),localStorage.removeItem(`sb-${Cl.split("//")[1].split(".")[0]}-auth-token`);return}if(t){const{error:r}=await Pe.auth.getUser();r&&(r.message.includes("user_not_found")||r.message.includes("JWT"))&&(console.warn("Invalid user session detected, clearing session:",r.message),await Pe.auth.signOut(),localStorage.removeItem(`sb-${Cl.split("//")[1].split(".")[0]}-auth-token`))}}catch(t){console.warn("Error during session validation, clearing session:",t.message);try{await Pe.auth.signOut(),localStorage.removeItem(`sb-${Cl.split("//")[1].split(".")[0]}-auth-token`)}catch(n){console.warn("Error during sign out:",n.message)}}})(),console.log(" Supabase client initialized successfully")}catch(e){console.error(" Failed to initialize Supabase client:",e),Pe={auth:{signUp:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}}),signInWithPassword:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}}),signOut:()=>Promise.resolve({error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),getUser:()=>Promise.resolve({data:{user:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},from:()=>({select:()=>({eq:()=>({single:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}}),maybeSingle:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}}),limit:()=>Promise.resolve({data:[],error:{message:"Supabase initialization failed"}})}),order:()=>Promise.resolve({data:[],error:{message:"Supabase initialization failed"}}),limit:()=>Promise.resolve({data:[],error:{message:"Supabase initialization failed"}})}),insert:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}}),update:()=>({eq:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}})}),delete:()=>({eq:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}})}),upsert:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}})}),storage:{from:()=>({upload:()=>Promise.resolve({data:null,error:{message:"Supabase initialization failed"}}),getPublicUrl:()=>({data:{publicUrl:""}})})}}}const ip=async e=>{var t,n,r,a;if(e&&((t=e.message)!=null&&t.includes("user_not_found")||(n=e.message)!=null&&n.includes("JWT")||(r=e.message)!=null&&r.includes("Invalid token")||e.code==="user_not_found")){console.warn("Auth error detected, clearing session:",e.message);try{await Pe.auth.signOut();const i=(a=Cl.split("//")[1])==null?void 0:a.split(".");i&&i[0]&&localStorage.removeItem(`sb-${i[0]}-auth-token`),window.location.href="/login"}catch(i){console.warn("Error during sign out:",i.message),window.location.href="/login"}}},jV=async()=>{try{if(Dp||Pp)return{latitude:-6.2,longitude:106.816666,radius:100,address:"Jakarta Office (Demo)"};const{data:e,error:t}=await Pe.from("system_settings").select("setting_value").eq("setting_key","office_location").eq("is_enabled",!0).maybeSingle();if(t&&t.code!=="PGRST116")throw await ip(t),t;return(e==null?void 0:e.setting_value)||{latitude:-6.2,longitude:106.816666,radius:100,address:"Jakarta Office"}}catch(e){return console.error("Error fetching office location:",e),await ip(e),{latitude:-6.2,longitude:106.816666,radius:100,address:"Jakarta Office"}}};let $f=null,E5=0;const MI=async(e=!1)=>{const n=Date.now();if(!e&&$f&&n-E5<12e4)return $f;try{if(Dp||Pp)return $f={enabled:!0,required_for_admin:!1},E5=n,$f;const{data:r,error:a}=await Pe.from("system_settings").select("setting_value").eq("setting_key","camera_verification").eq("is_enabled",!0).maybeSingle();if(a&&a.code!=="PGRST116")throw await ip(a),a;return $f=(r==null?void 0:r.setting_value)||{enabled:!0,required_for_admin:!1},E5=n,$f}catch(r){return console.error("Error fetching camera verification settings:",r),await ip(r),{enabled:!0,required_for_admin:!1}}},L3=async(e,t,n)=>{try{if(Dp||Pp)throw new Error("Supabase not configured - please connect to Supabase first");console.log("Uploading file:",n,"to bucket:",t);try{await Pe.storage.from(t).remove([n])}catch(i){console.log("File delete attempt (ignore if not exists):",i.message)}const{data:r,error:a}=await Pe.storage.from(t).upload(n,e,{cacheControl:"3600",upsert:!0});if(a)throw console.error("Upload error details:",a),await ip(a),new Error(`Upload failed: ${a.message}`);return console.log("Upload successful:",r),r}catch(r){throw console.error("Upload error:",r),await ip(r),r}},I3=(e,t)=>{if(Dp||Pp)return"";const{data:n}=Pe.storage.from(e).getPublicUrl(t);return n.publicUrl},Ju=()=>!Dp&&!Pp;/*!
* sweetalert2 v11.22.2
* Released under the MIT License.
*/function LI(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function AV(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t6(e,t){return e.get(LI(e,t))}function CV(e,t,n){AV(e,t),t.set(e,n)}function EV(e,t,n){return e.set(LI(e,t),n),n}const DV=100,Nt={},PV=()=>{Nt.previousActiveElement instanceof HTMLElement?(Nt.previousActiveElement.focus(),Nt.previousActiveElement=null):document.body&&document.body.focus()},OV=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;Nt.restoreFocusTimeout=setTimeout(()=>{PV(),t()},DV),window.scrollTo(n,r)}),II="swal2-",TV=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],Me=TV.reduce((e,t)=>(e[t]=II+t,e),{}),MV=["success","warning","info","question","error"],Gb=MV.reduce((e,t)=>(e[t]=II+t,e),{}),RI="SweetAlert2:",R3=e=>e.charAt(0).toUpperCase()+e.slice(1),Qa=e=>{console.warn(`${RI} ${typeof e=="object"?e.join(" "):e}`)},nf=e=>{console.error(`${RI} ${e}`)},n6=[],LV=e=>{n6.includes(e)||(n6.push(e),Qa(e))},BI=(e,t=null)=>{LV(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},E1=e=>typeof e=="function"?e():e,B3=e=>e&&typeof e.toPromise=="function",Ov=e=>B3(e)?e.toPromise():Promise.resolve(e),F3=e=>e&&Promise.resolve(e)===e,ei=()=>document.body.querySelector(`.${Me.container}`),Tv=e=>{const t=ei();return t?t.querySelector(e):null},ho=e=>Tv(`.${e}`),Zt=()=>ho(Me.popup),Op=()=>ho(Me.icon),IV=()=>ho(Me["icon-content"]),FI=()=>ho(Me.title),z3=()=>ho(Me["html-container"]),zI=()=>ho(Me.image),U3=()=>ho(Me["progress-steps"]),D1=()=>ho(Me["validation-message"]),Qs=()=>Tv(`.${Me.actions} .${Me.confirm}`),Tp=()=>Tv(`.${Me.actions} .${Me.cancel}`),rf=()=>Tv(`.${Me.actions} .${Me.deny}`),RV=()=>ho(Me["input-label"]),Mp=()=>Tv(`.${Me.loader}`),Mv=()=>ho(Me.actions),UI=()=>ho(Me.footer),P1=()=>ho(Me["timer-progress-bar"]),W3=()=>ho(Me.close),BV=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,q3=()=>{const e=Zt();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((i,o)=>{const s=parseInt(i.getAttribute("tabindex")||"0"),l=parseInt(o.getAttribute("tabindex")||"0");return s>l?1:s<l?-1:0}),r=e.querySelectorAll(BV),a=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(i=>bi(i))},H3=()=>Wl(document.body,Me.shown)&&!Wl(document.body,Me["toast-shown"])&&!Wl(document.body,Me["no-backdrop"]),O1=()=>{const e=Zt();return e?Wl(e,Me.toast):!1},FV=()=>{const e=Zt();return e?e.hasAttribute("data-loading"):!1},po=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{e.appendChild(o)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},Wl=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},zV=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(Me).includes(n)&&!Object.values(Gb).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},so=(e,t,n)=>{if(zV(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Qa(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}on(e,r)}},T1=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${Me.popup} > .${Me[t]}`);case"checkbox":return e.querySelector(`.${Me.popup} > .${Me.checkbox} input`);case"radio":return e.querySelector(`.${Me.popup} > .${Me.radio} input:checked`)||e.querySelector(`.${Me.popup} > .${Me.radio} input:first-child`);case"range":return e.querySelector(`.${Me.popup} > .${Me.range} input`);default:return e.querySelector(`.${Me.popup} > .${Me.input}`)}},WI=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},qI=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(a=>{n?a.classList.add(r):a.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},on=(e,t)=>{qI(e,t,!0)},Ho=(e,t)=>{qI(e,t,!1)},Qu=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const a=n[r];if(a instanceof HTMLElement&&Wl(a,t))return a}},kd=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},ra=(e,t="flex")=>{e&&(e.style.display=t)},Ha=e=>{e&&(e.style.display="none")},$3=(e,t="block")=>{e&&new MutationObserver(()=>{Lv(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},r6=(e,t,n,r)=>{const a=e.querySelector(t);a&&a.style.setProperty(n,r)},Lv=(e,t,n="flex")=>{t?ra(e,n):Ha(e)},bi=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),UV=()=>!bi(Qs())&&!bi(rf())&&!bi(Tp()),WS=e=>e.scrollHeight>e.clientHeight,WV=(e,t)=>{let n=e;for(;n&&n!==t;){if(WS(n))return!0;n=n.parentElement}return!1},HI=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},V3=(e,t=!1)=>{const n=P1();n&&bi(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},qV=()=>{const e=P1();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},HV=()=>typeof window>"u"||typeof document>"u",$V=`
 <div aria-labelledby="${Me.title}" aria-describedby="${Me["html-container"]}" class="${Me.popup}" tabindex="-1">
   <button type="button" class="${Me.close}"></button>
   <ul class="${Me["progress-steps"]}"></ul>
   <div class="${Me.icon}"></div>
   <img class="${Me.image}" />
   <h2 class="${Me.title}" id="${Me.title}"></h2>
   <div class="${Me["html-container"]}" id="${Me["html-container"]}"></div>
   <input class="${Me.input}" id="${Me.input}" />
   <input type="file" class="${Me.file}" />
   <div class="${Me.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Me.select}" id="${Me.select}"></select>
   <div class="${Me.radio}"></div>
   <label class="${Me.checkbox}">
     <input type="checkbox" id="${Me.checkbox}" />
     <span class="${Me.label}"></span>
   </label>
   <textarea class="${Me.textarea}" id="${Me.textarea}"></textarea>
   <div class="${Me["validation-message"]}" id="${Me["validation-message"]}"></div>
   <div class="${Me.actions}">
     <div class="${Me.loader}"></div>
     <button type="button" class="${Me.confirm}"></button>
     <button type="button" class="${Me.deny}"></button>
     <button type="button" class="${Me.cancel}"></button>
   </div>
   <div class="${Me.footer}"></div>
   <div class="${Me["timer-progress-bar-container"]}">
     <div class="${Me["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),VV=()=>{const e=ei();return e?(e.remove(),Ho([document.documentElement,document.body],[Me["no-backdrop"],Me["toast-shown"],Me["has-column"]]),!0):!1},Xc=()=>{Nt.currentInstance.resetValidationMessage()},GV=()=>{const e=Zt(),t=Qu(e,Me.input),n=Qu(e,Me.file),r=e.querySelector(`.${Me.range} input`),a=e.querySelector(`.${Me.range} output`),i=Qu(e,Me.select),o=e.querySelector(`.${Me.checkbox} input`),s=Qu(e,Me.textarea);t.oninput=Xc,n.onchange=Xc,i.onchange=Xc,o.onchange=Xc,s.oninput=Xc,r.oninput=()=>{Xc(),a.value=r.value},r.onchange=()=>{Xc(),a.value=r.value}},KV=e=>typeof e=="string"?document.querySelector(e):e,YV=e=>{const t=Zt();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},XV=e=>{window.getComputedStyle(e).direction==="rtl"&&on(ei(),Me.rtl)},JV=e=>{const t=VV();if(HV()){nf("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=Me.container,t&&on(n,Me["no-transition"]),po(n,$V),n.dataset.swal2Theme=e.theme;const r=KV(e.target);r.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),YV(e),XV(r),GV()},G3=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?QV(e,t):e&&po(t,e)},QV=(e,t)=>{e.jquery?ZV(t,e):po(t,e.toString())},ZV=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},eG=(e,t)=>{const n=Mv(),r=Mp();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Ha(n):ra(n),so(n,t,"actions"),tG(n,r,t),po(r,t.loaderHtml||""),so(r,t,"loader"))};function tG(e,t,n){const r=Qs(),a=rf(),i=Tp();!r||!a||!i||(P5(r,"confirm",n),P5(a,"deny",n),P5(i,"cancel",n),nG(r,a,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(a,r)):(e.insertBefore(i,t),e.insertBefore(a,t),e.insertBefore(r,t))))}function nG(e,t,n,r){if(!r.buttonsStyling){Ho([e,t,n],Me.styled);return}on([e,t,n],Me.styled),r.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),D5(e),D5(t),D5(n)}function D5(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function P5(e,t,n){const r=R3(t);Lv(e,n[`show${r}Button`],"inline-block"),po(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=Me[t],so(e,n,`${t}Button`)}const rG=(e,t)=>{const n=W3();n&&(po(n,t.closeButtonHtml||""),so(n,t,"closeButton"),Lv(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},aG=(e,t)=>{const n=ei();n&&(iG(n,t.backdrop),oG(n,t.position),sG(n,t.grow),so(n,t,"container"))};function iG(e,t){typeof t=="string"?e.style.background=t:t||on([document.documentElement,document.body],Me["no-backdrop"])}function oG(e,t){t&&(t in Me?on(e,Me[t]):(Qa('The "position" parameter is not valid, defaulting to "center"'),on(e,Me.center)))}function sG(e,t){t&&on(e,Me[`grow-${t}`])}var Mn={innerParams:new WeakMap,domCache:new WeakMap};const lG=["input","file","range","select","radio","checkbox","textarea"],uG=(e,t)=>{const n=Zt();if(!n)return;const r=Mn.innerParams.get(e),a=!r||t.input!==r.input;lG.forEach(i=>{const o=Qu(n,Me[i]);o&&(fG(i,t.inputAttributes),o.className=Me[i],a&&Ha(o))}),t.input&&(a&&cG(t),hG(t))},cG=e=>{if(!e.input)return;if(!fr[e.input]){nf(`Unexpected type of input! Expected ${Object.keys(fr).join(" | ")}, got "${e.input}"`);return}const t=$I(e.input);if(!t)return;const n=fr[e.input](t,e);ra(t),e.inputAutoFocus&&setTimeout(()=>{WI(n)})},dG=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},fG=(e,t)=>{const n=Zt();if(!n)return;const r=T1(n,e);if(r){dG(r);for(const a in t)r.setAttribute(a,t[a])}},hG=e=>{if(!e.input)return;const t=$I(e.input);t&&so(t,e,"input")},K3=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Iv=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),a=Me["input-label"];r.setAttribute("for",e.id),r.className=a,typeof n.customClass=="object"&&on(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},$I=e=>{const t=Zt();if(t)return Qu(t,Me[e]||Me.input)},Kb=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:F3(t)||Qa(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},fr={};fr.text=fr.email=fr.password=fr.number=fr.tel=fr.url=fr.search=fr.date=fr["datetime-local"]=fr.time=fr.week=fr.month=(e,t)=>(Kb(e,t.inputValue),Iv(e,e,t),K3(e,t),e.type=t.input,e);fr.file=(e,t)=>(Iv(e,e,t),K3(e,t),e);fr.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Kb(n,t.inputValue),n.type=t.input,Kb(r,t.inputValue),Iv(n,e,t),e};fr.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");po(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Iv(e,e,t),e};fr.radio=e=>(e.textContent="",e);fr.checkbox=(e,t)=>{const n=T1(Zt(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return po(r,t.inputPlaceholder||t.inputLabel),n};fr.textarea=(e,t)=>{Kb(e,t.inputValue),K3(e,t),Iv(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Zt()).width),a=()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?Zt().style.width=`${i}px`:kd(Zt(),"width",t.width)};new MutationObserver(a).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const pG=(e,t)=>{const n=z3();n&&($3(n),so(n,t,"htmlContainer"),t.html?(G3(t.html,n),ra(n,"block")):t.text?(n.textContent=t.text,ra(n,"block")):Ha(n),uG(e,t))},mG=(e,t)=>{const n=UI();n&&($3(n),Lv(n,t.footer,"block"),t.footer&&G3(t.footer,n),so(n,t,"footer"))},gG=(e,t)=>{const n=Mn.innerParams.get(e),r=Op();if(!r)return;if(n&&t.icon===n.icon){i6(r,t),a6(r,t);return}if(!t.icon&&!t.iconHtml){Ha(r);return}if(t.icon&&Object.keys(Gb).indexOf(t.icon)===-1){nf(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Ha(r);return}ra(r),i6(r,t),a6(r,t),on(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",VI)},a6=(e,t)=>{for(const[n,r]of Object.entries(Gb))t.icon!==n&&Ho(e,r);on(e,t.icon&&Gb[t.icon]),bG(e,t),VI(),so(e,t,"icon")},VI=()=>{const e=Zt();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},vG=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,yG=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,i6=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=o6(t.iconHtml):t.icon==="success"?(r=vG(t),n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=yG:t.icon&&(r=o6({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&po(e,r)},bG=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])r6(e,n,"background-color",t.iconColor);r6(e,".swal2-success-ring","border-color",t.iconColor)}},o6=e=>`<div class="${Me["icon-content"]}">${e}</div>`,xG=(e,t)=>{const n=zI();if(n){if(!t.imageUrl){Ha(n);return}ra(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),kd(n,"width",t.imageWidth),kd(n,"height",t.imageHeight),n.className=Me.image,so(n,t,"image")}};let Y3=!1,GI=0,KI=0,YI=0,XI=0;const wG=e=>{e.addEventListener("mousedown",Yb),document.body.addEventListener("mousemove",Xb),e.addEventListener("mouseup",Jb),e.addEventListener("touchstart",Yb),document.body.addEventListener("touchmove",Xb),e.addEventListener("touchend",Jb)},NG=e=>{e.removeEventListener("mousedown",Yb),document.body.removeEventListener("mousemove",Xb),e.removeEventListener("mouseup",Jb),e.removeEventListener("touchstart",Yb),document.body.removeEventListener("touchmove",Xb),e.removeEventListener("touchend",Jb)},Yb=e=>{const t=Zt();if(e.target===t||Op().contains(e.target)){Y3=!0;const n=JI(e);GI=n.clientX,KI=n.clientY,YI=parseInt(t.style.insetInlineStart)||0,XI=parseInt(t.style.insetBlockStart)||0,on(t,"swal2-dragging")}},Xb=e=>{const t=Zt();if(Y3){let{clientX:n,clientY:r}=JI(e);t.style.insetInlineStart=`${YI+(n-GI)}px`,t.style.insetBlockStart=`${XI+(r-KI)}px`}},Jb=()=>{const e=Zt();Y3=!1,Ho(e,"swal2-dragging")},JI=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},SG=(e,t)=>{const n=ei(),r=Zt();if(!(!n||!r)){if(t.toast){kd(n,"width",t.width),r.style.width="100%";const a=Mp();a&&r.insertBefore(a,Op())}else kd(r,"width",t.width);kd(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),Ha(D1()),kG(r,t),t.draggable&&!t.toast?(on(r,Me.draggable),wG(r)):(Ho(r,Me.draggable),NG(r))}},kG=(e,t)=>{const n=t.showClass||{};e.className=`${Me.popup} ${bi(e)?n.popup:""}`,t.toast?(on([document.documentElement,document.body],Me["toast-shown"]),on(e,Me.toast)):on(e,Me.modal),so(e,t,"popup"),typeof t.customClass=="string"&&on(e,t.customClass),t.icon&&on(e,Me[`icon-${t.icon}`])},_G=(e,t)=>{const n=U3();if(!n)return;const{progressSteps:r,currentProgressStep:a}=t;if(!r||r.length===0||a===void 0){Ha(n);return}ra(n),n.textContent="",a>=r.length&&Qa("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,o)=>{const s=jG(i);if(n.appendChild(s),o===a&&on(s,Me["active-progress-step"]),o!==r.length-1){const l=AG(t);n.appendChild(l)}})},jG=e=>{const t=document.createElement("li");return on(t,Me["progress-step"]),po(t,e),t},AG=e=>{const t=document.createElement("li");return on(t,Me["progress-step-line"]),e.progressStepsDistance&&kd(t,"width",e.progressStepsDistance),t},CG=(e,t)=>{const n=FI();n&&($3(n),Lv(n,t.title||t.titleText,"block"),t.title&&G3(t.title,n),t.titleText&&(n.innerText=t.titleText),so(n,t,"title"))},QI=(e,t)=>{SG(e,t),aG(e,t),_G(e,t),gG(e,t),xG(e,t),CG(e,t),rG(e,t),pG(e,t),eG(e,t),mG(e,t);const n=Zt();typeof t.didRender=="function"&&n&&t.didRender(n),Nt.eventEmitter.emit("didRender",n)},EG=()=>bi(Zt()),ZI=()=>{var e;return(e=Qs())===null||e===void 0?void 0:e.click()},DG=()=>{var e;return(e=rf())===null||e===void 0?void 0:e.click()},PG=()=>{var e;return(e=Tp())===null||e===void 0?void 0:e.click()},Lp=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),eR=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},OG=(e,t,n)=>{eR(e),t.toast||(e.keydownHandler=r=>MG(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:Zt(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},qS=(e,t)=>{var n;const r=q3();if(r.length){e=e+t,e===-2&&(e=r.length-1),e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=Zt())===null||n===void 0||n.focus()},tR=["ArrowRight","ArrowDown"],TG=["ArrowLeft","ArrowUp"],MG=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?LG(t,e):t.key==="Tab"?IG(t):[...tR,...TG].includes(t.key)?RG(t.key):t.key==="Escape"&&BG(t,e,n)))},LG=(e,t)=>{if(!E1(t.allowEnterKey))return;const n=T1(Zt(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;ZI(),e.preventDefault()}},IG=e=>{const t=e.target,n=q3();let r=-1;for(let a=0;a<n.length;a++)if(t===n[a]){r=a;break}e.shiftKey?qS(r,-1):qS(r,1),e.stopPropagation(),e.preventDefault()},RG=e=>{const t=Mv(),n=Qs(),r=rf(),a=Tp();if(!t||!n||!r||!a)return;const i=[n,r,a];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const o=tR.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let l=0;l<t.children.length;l++){if(s=s[o],!s)return;if(s instanceof HTMLButtonElement&&bi(s))break}s instanceof HTMLButtonElement&&s.focus()}},BG=(e,t,n)=>{e.preventDefault(),E1(t.allowEscapeKey)&&n(Lp.esc)};var op={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const FG=()=>{const e=ei();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},nR=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},rR=typeof window<"u"&&!!window.GestureEvent,zG=()=>{if(rR&&!Wl(document.body,Me.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,on(document.body,Me.iosfix),UG()}},UG=()=>{const e=ei();if(!e)return;let t;e.ontouchstart=n=>{t=WG(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},WG=e=>{const t=e.target,n=ei(),r=z3();return!n||!r||qG(e)||HG(e)?!1:t===n||!WS(n)&&t instanceof HTMLElement&&!WV(t,r)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(WS(r)&&r.contains(t))},qG=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",HG=e=>e.touches&&e.touches.length>1,$G=()=>{if(Wl(document.body,Me.iosfix)){const e=parseInt(document.body.style.top,10);Ho(document.body,Me.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},VG=()=>{const e=document.createElement("div");e.className=Me["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Lh=null;const GG=e=>{Lh===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Lh=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Lh+VG()}px`)},KG=()=>{Lh!==null&&(document.body.style.paddingRight=`${Lh}px`,Lh=null)};function aR(e,t,n,r){O1()?s6(e,r):(OV(n).then(()=>s6(e,r)),eR(Nt)),rR?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),H3()&&(KG(),$G(),nR()),YG()}function YG(){Ho([document.documentElement,document.body],[Me.shown,Me["height-auto"],Me["no-backdrop"],Me["toast-shown"]])}function Zu(e){e=JG(e);const t=op.swalPromiseResolve.get(this),n=XG(this);this.isAwaitingPromise?e.isDismissed||(Rv(this),t(e)):n&&t(e)}const XG=e=>{const t=Zt();if(!t)return!1;const n=Mn.innerParams.get(e);if(!n||Wl(t,n.hideClass.popup))return!1;Ho(t,n.showClass.popup),on(t,n.hideClass.popup);const r=ei();return Ho(r,n.showClass.backdrop),on(r,n.hideClass.backdrop),QG(e,t,n),!0};function iR(e){const t=op.swalPromiseReject.get(this);Rv(this),t&&t(e)}const Rv=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Mn.innerParams.get(e)||e._destroy())},JG=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),QG=(e,t,n)=>{var r;const a=ei(),i=HI(t);typeof n.willClose=="function"&&n.willClose(t),(r=Nt.eventEmitter)===null||r===void 0||r.emit("willClose",t),i?ZG(e,t,a,n.returnFocus,n.didClose):aR(e,a,n.returnFocus,n.didClose)},ZG=(e,t,n,r,a)=>{Nt.swalCloseEventFinishedCallback=aR.bind(null,e,n,r,a);const i=function(o){if(o.target===t){var s;(s=Nt.swalCloseEventFinishedCallback)===null||s===void 0||s.call(Nt),delete Nt.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i)}};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},s6=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=Nt.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},sp=e=>{let t=Zt();if(t||new Wt,t=Zt(),!t)return;const n=Mp();O1()?Ha(Op()):eK(t,e),ra(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},eK=(e,t)=>{const n=Mv(),r=Mp();!n||!r||(!t&&bi(Qs())&&(t=Qs()),ra(n),t&&(Ha(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),on([e,n],Me.loading))},tK=(e,t)=>{t.input==="select"||t.input==="radio"?oK(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(B3(t.inputValue)||F3(t.inputValue))&&(sp(Qs()),sK(e,t))},nK=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return rK(n);case"radio":return aK(n);case"file":return iK(n);default:return t.inputAutoTrim?n.value.trim():n.value}},rK=e=>e.checked?1:0,aK=e=>e.checked?e.value:null,iK=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,oK=(e,t)=>{const n=Zt();if(!n)return;const r=a=>{t.input==="select"?lK(n,Qb(a),t):t.input==="radio"&&uK(n,Qb(a),t)};B3(t.inputOptions)||F3(t.inputOptions)?(sp(Qs()),Ov(t.inputOptions).then(a=>{e.hideLoading(),r(a)})):typeof t.inputOptions=="object"?r(t.inputOptions):nf(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},sK=(e,t)=>{const n=e.getInput();n&&(Ha(n),Ov(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,ra(n),n.focus(),e.hideLoading()}).catch(r=>{nf(`Error in inputValue promise: ${r}`),n.value="",ra(n),n.focus(),e.hideLoading()}))};function lK(e,t,n){const r=Qu(e,Me.select);if(!r)return;const a=(i,o,s)=>{const l=document.createElement("option");l.value=s,po(l,o),l.selected=oR(s,n.inputValue),i.appendChild(l)};t.forEach(i=>{const o=i[0],s=i[1];if(Array.isArray(s)){const l=document.createElement("optgroup");l.label=o,l.disabled=!1,r.appendChild(l),s.forEach(u=>a(l,u[1],u[0]))}else a(r,s,o)}),r.focus()}function uK(e,t,n){const r=Qu(e,Me.radio);if(!r)return;t.forEach(i=>{const o=i[0],s=i[1],l=document.createElement("input"),u=document.createElement("label");l.type="radio",l.name=Me.radio,l.value=o,oR(o,n.inputValue)&&(l.checked=!0);const c=document.createElement("span");po(c,s),c.className=Me.label,u.appendChild(l),u.appendChild(c),r.appendChild(u)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const Qb=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let a=n;typeof a=="object"&&(a=Qb(a)),t.push([r,a])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=Qb(r)),t.push([n,r])}),t},oR=(e,t)=>!!t&&t.toString()===e.toString(),cK=e=>{const t=Mn.innerParams.get(e);e.disableButtons(),t.input?sR(e,"confirm"):J3(e,!0)},dK=e=>{const t=Mn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?sR(e,"deny"):X3(e,!1)},fK=(e,t)=>{e.disableButtons(),t(Lp.cancel)},sR=(e,t)=>{const n=Mn.innerParams.get(e);if(!n.input){nf(`The "input" parameter is needed to be set when using returnInputValueOn${R3(t)}`);return}const r=e.getInput(),a=nK(e,n);n.inputValidator?hK(e,a,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?X3(e,a):J3(e,a)},hK=(e,t,n)=>{const r=Mn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Ov(r.inputValidator(t,r.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):n==="deny"?X3(e,t):J3(e,t)})},X3=(e,t)=>{const n=Mn.innerParams.get(e||void 0);n.showLoaderOnDeny&&sp(rf()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Ov(n.preDeny(t,n.validationMessage))).then(a=>{a===!1?(e.hideLoading(),Rv(e)):e.close({isDenied:!0,value:typeof a>"u"?t:a})}).catch(a=>lR(e||void 0,a))):e.close({isDenied:!0,value:t})},l6=(e,t)=>{e.close({isConfirmed:!0,value:t})},lR=(e,t)=>{e.rejectPromise(t)},J3=(e,t)=>{const n=Mn.innerParams.get(e||void 0);n.showLoaderOnConfirm&&sp(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Ov(n.preConfirm(t,n.validationMessage))).then(a=>{bi(D1())||a===!1?(e.hideLoading(),Rv(e)):l6(e,typeof a>"u"?t:a)}).catch(a=>lR(e||void 0,a))):l6(e,t)};function Zb(){const e=Mn.innerParams.get(this);if(!e)return;const t=Mn.domCache.get(this);Ha(t.loader),O1()?e.icon&&ra(Op()):pK(t),Ho([t.popup,t.actions],Me.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const pK=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?ra(t[0],"inline-block"):UV()&&Ha(e.actions)};function uR(){const e=Mn.innerParams.get(this),t=Mn.domCache.get(this);return t?T1(t.popup,e.input):null}function cR(e,t,n){const r=Mn.domCache.get(e);t.forEach(a=>{r[a].disabled=n})}function dR(e,t){const n=Zt();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${Me.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=t}else e.disabled=t}function fR(){cR(this,["confirmButton","denyButton","cancelButton"],!1)}function hR(){cR(this,["confirmButton","denyButton","cancelButton"],!0)}function pR(){dR(this.getInput(),!1)}function mR(){dR(this.getInput(),!0)}function gR(e){const t=Mn.domCache.get(this),n=Mn.innerParams.get(this);po(t.validationMessage,e),t.validationMessage.className=Me["validation-message"],n.customClass&&n.customClass.validationMessage&&on(t.validationMessage,n.customClass.validationMessage),ra(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",Me["validation-message"]),WI(r),on(r,Me.inputerror))}function vR(){const e=Mn.domCache.get(this);e.validationMessage&&Ha(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ho(t,Me.inputerror))}const Ih={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},mK=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],gK={allowEnterKey:void 0},vK=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],yR=e=>Object.prototype.hasOwnProperty.call(Ih,e),bR=e=>mK.indexOf(e)!==-1,xR=e=>gK[e],yK=e=>{yR(e)||Qa(`Unknown parameter "${e}"`)},bK=e=>{vK.includes(e)&&Qa(`The parameter "${e}" is incompatible with toasts`)},xK=e=>{const t=xR(e);t&&BI(e,t)},wR=e=>{e.backdrop===!1&&e.allowOutsideClick&&Qa('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Qa(`Invalid theme "${e.theme}"`);for(const t in e)yK(t),e.toast&&bK(t),xK(t)};function NR(e){const t=ei(),n=Zt(),r=Mn.innerParams.get(this);if(!n||Wl(n,r.hideClass.popup)){Qa("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=wK(e),i=Object.assign({},r,a);wR(i),t.dataset.swal2Theme=i.theme,QI(this,i),Mn.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const wK=e=>{const t={};return Object.keys(e).forEach(n=>{bR(n)?t[n]=e[n]:Qa(`Invalid parameter to update: ${n}`)}),t};function SR(){const e=Mn.domCache.get(this),t=Mn.innerParams.get(this);if(!t){kR(this);return}e.popup&&Nt.swalCloseEventFinishedCallback&&(Nt.swalCloseEventFinishedCallback(),delete Nt.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),Nt.eventEmitter.emit("didDestroy"),NK(this)}const NK=e=>{kR(e),delete e.params,delete Nt.keydownHandler,delete Nt.keydownTarget,delete Nt.currentInstance},kR=e=>{e.isAwaitingPromise?(O5(Mn,e),e.isAwaitingPromise=!0):(O5(op,e),O5(Mn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},O5=(e,t)=>{for(const n in e)e[n].delete(t)};var SK=Object.freeze({__proto__:null,_destroy:SR,close:Zu,closeModal:Zu,closePopup:Zu,closeToast:Zu,disableButtons:hR,disableInput:mR,disableLoading:Zb,enableButtons:fR,enableInput:pR,getInput:uR,handleAwaitingPromise:Rv,hideLoading:Zb,rejectPromise:iR,resetValidationMessage:vR,showValidationMessage:gR,update:NR});const kK=(e,t,n)=>{e.toast?_K(e,t,n):(AK(t),CK(t),EK(e,t,n))},_K=(e,t,n)=>{t.popup.onclick=()=>{e&&(jK(e)||e.timer||e.input)||n(Lp.close)}},jK=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let ex=!1;const AK=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(ex=!0)}}},CK=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(ex=!0)}}},EK=(e,t,n)=>{t.container.onclick=r=>{if(ex){ex=!1;return}r.target===t.container&&E1(e.allowOutsideClick)&&n(Lp.backdrop)}},DK=e=>typeof e=="object"&&e.jquery,u6=e=>e instanceof Element||DK(e),PK=e=>{const t={};return typeof e[0]=="object"&&!u6(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const a=e[r];typeof a=="string"||u6(a)?t[n]=a:a!==void 0&&nf(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),t};function OK(...e){return new this(...e)}function TK(e){class t extends this{_main(r,a){return super._main(r,Object.assign({},e,a))}}return t}const MK=()=>Nt.timeout&&Nt.timeout.getTimerLeft(),_R=()=>{if(Nt.timeout)return qV(),Nt.timeout.stop()},jR=()=>{if(Nt.timeout){const e=Nt.timeout.start();return V3(e),e}},LK=()=>{const e=Nt.timeout;return e&&(e.running?_R():jR())},IK=e=>{if(Nt.timeout){const t=Nt.timeout.increase(e);return V3(t,!0),t}},RK=()=>!!(Nt.timeout&&Nt.timeout.isRunning());let c6=!1;const HS={};function BK(e="data-swal-template"){HS[e]=this,c6||(document.body.addEventListener("click",FK),c6=!0)}const FK=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in HS){const r=t.getAttribute(n);if(r){HS[n].fire({template:r});return}}};let zK=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){const r=(...a)=>{this.removeListener(t,r),n.apply(this,a)};this.on(t,r)}emit(t,...n){this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,n)}catch(a){console.error(a)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),a=r.indexOf(n);a>-1&&r.splice(a,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};Nt.eventEmitter=new zK;const UK=(e,t)=>{Nt.eventEmitter.on(e,t)},WK=(e,t)=>{Nt.eventEmitter.once(e,t)},qK=(e,t)=>{if(!e){Nt.eventEmitter.reset();return}t?Nt.eventEmitter.removeListener(e,t):Nt.eventEmitter.removeAllListeners(e)};var HK=Object.freeze({__proto__:null,argsToParams:PK,bindClickHandler:BK,clickCancel:PG,clickConfirm:ZI,clickDeny:DG,enableLoading:sp,fire:OK,getActions:Mv,getCancelButton:Tp,getCloseButton:W3,getConfirmButton:Qs,getContainer:ei,getDenyButton:rf,getFocusableElements:q3,getFooter:UI,getHtmlContainer:z3,getIcon:Op,getIconContent:IV,getImage:zI,getInputLabel:RV,getLoader:Mp,getPopup:Zt,getProgressSteps:U3,getTimerLeft:MK,getTimerProgressBar:P1,getTitle:FI,getValidationMessage:D1,increaseTimer:IK,isDeprecatedParameter:xR,isLoading:FV,isTimerRunning:RK,isUpdatableParameter:bR,isValidParameter:yR,isVisible:EG,mixin:TK,off:qK,on:UK,once:WK,resumeTimer:jR,showLoading:sp,stopTimer:_R,toggleTimer:LK});class $K{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const AR=["swal-title","swal-html","swal-footer"],VK=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return eY(n),Object.assign(GK(n),KK(n),YK(n),XK(n),JK(n),QK(n),ZK(n,AR))},GK=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{Hd(r,["name","value"]);const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(typeof Ih[a]=="boolean"?t[a]=i!=="false":typeof Ih[a]=="object"?t[a]=JSON.parse(i):t[a]=i)}),t},KK=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(t[a]=new Function(`return ${i}`)())}),t},YK=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{Hd(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(t[`${a}ButtonText`]=r.innerHTML,t[`show${R3(a)}Button`]=!0,r.hasAttribute("color")&&(t[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},XK=e=>{const t={},n=e.querySelector("swal-image");return n&&(Hd(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},JK=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Hd(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},QK=e=>{const t={},n=e.querySelector("swal-input");n&&(Hd(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(a=>{Hd(a,["value"]);const i=a.getAttribute("value");if(!i)return;const o=a.innerHTML;t.inputOptions[i]=o})),t},ZK=(e,t)=>{const n={};for(const r in t){const a=t[r],i=e.querySelector(a);i&&(Hd(i,[]),n[a.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},eY=e=>{const t=AR.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||Qa(`Unrecognized element <${r}>`)})},Hd=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&Qa([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},CR=10,tY=e=>{const t=ei(),n=Zt();typeof e.willOpen=="function"&&e.willOpen(n),Nt.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;aY(t,n,e),setTimeout(()=>{nY(t,n)},CR),H3()&&(rY(t,e.scrollbarPadding,a),FG()),!O1()&&!Nt.previousActiveElement&&(Nt.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),Nt.eventEmitter.emit("didOpen",n),Ho(t,Me["no-transition"])},tx=e=>{const t=Zt();if(e.target!==t)return;const n=ei();t.removeEventListener("animationend",tx),t.removeEventListener("transitionend",tx),n.style.overflowY="auto"},nY=(e,t)=>{HI(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",tx),t.addEventListener("transitionend",tx)):e.style.overflowY="auto"},rY=(e,t,n)=>{zG(),t&&n!=="hidden"&&GG(n),setTimeout(()=>{e.scrollTop=0})},aY=(e,t,n)=>{on(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),ra(t,"grid"),setTimeout(()=>{on(t,n.showClass.popup),t.style.removeProperty("opacity")},CR)):ra(t,"grid"),on([document.documentElement,document.body],Me.shown),n.heightAuto&&n.backdrop&&!n.toast&&on([document.documentElement,document.body],Me["height-auto"])};var d6={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function iY(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=d6.email),e.input==="url"&&(e.inputValidator=d6.url))}function oY(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Qa('Target parameter is not valid, defaulting to "body"'),e.target="body")}function sY(e){iY(e),e.showLoaderOnConfirm&&!e.preConfirm&&Qa(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),oY(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),JV(e)}let Ts;var my=new WeakMap;class yr{constructor(...t){if(CV(this,my,void 0),typeof window>"u")return;Ts=this;const n=Object.freeze(this.constructor.argsToParams(t));this.params=n,this.isAwaitingPromise=!1,EV(my,this,this._main(Ts.params))}_main(t,n={}){if(wR(Object.assign({},n,t)),Nt.currentInstance){const i=op.swalPromiseResolve.get(Nt.currentInstance),{isAwaitingPromise:o}=Nt.currentInstance;Nt.currentInstance._destroy(),o||i({isDismissed:!0}),H3()&&nR()}Nt.currentInstance=Ts;const r=uY(t,n);sY(r),Object.freeze(r),Nt.timeout&&(Nt.timeout.stop(),delete Nt.timeout),clearTimeout(Nt.restoreFocusTimeout);const a=cY(Ts);return QI(Ts,r),Mn.innerParams.set(Ts,r),lY(Ts,a,r)}then(t){return t6(my,this).then(t)}finally(t){return t6(my,this).finally(t)}}const lY=(e,t,n)=>new Promise((r,a)=>{const i=o=>{e.close({isDismissed:!0,dismiss:o})};op.swalPromiseResolve.set(e,r),op.swalPromiseReject.set(e,a),t.confirmButton.onclick=()=>{cK(e)},t.denyButton.onclick=()=>{dK(e)},t.cancelButton.onclick=()=>{fK(e,i)},t.closeButton.onclick=()=>{i(Lp.close)},kK(n,t,i),OG(Nt,n,i),tK(e,n),tY(n),dY(Nt,n,i),fY(t,n),setTimeout(()=>{t.container.scrollTop=0})}),uY=(e,t)=>{const n=VK(e),r=Object.assign({},Ih,t,n,e);return r.showClass=Object.assign({},Ih.showClass,r.showClass),r.hideClass=Object.assign({},Ih.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},cY=e=>{const t={popup:Zt(),container:ei(),actions:Mv(),confirmButton:Qs(),denyButton:rf(),cancelButton:Tp(),loader:Mp(),closeButton:W3(),validationMessage:D1(),progressSteps:U3()};return Mn.domCache.set(e,t),t},dY=(e,t,n)=>{const r=P1();Ha(r),t.timer&&(e.timeout=new $K(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(ra(r),so(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&V3(t.timer)})))},fY=(e,t)=>{if(!t.toast){if(!E1(t.allowEnterKey)){BI("allowEnterKey"),mY();return}hY(e)||pY(e,t)||qS(-1,1)}},hY=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&bi(n))return n.focus(),!0;return!1},pY=(e,t)=>t.focusDeny&&bi(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&bi(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&bi(e.confirmButton)?(e.confirmButton.focus(),!0):!1,mY=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}yr.prototype.disableButtons=hR;yr.prototype.enableButtons=fR;yr.prototype.getInput=uR;yr.prototype.disableInput=mR;yr.prototype.enableInput=pR;yr.prototype.hideLoading=Zb;yr.prototype.disableLoading=Zb;yr.prototype.showValidationMessage=gR;yr.prototype.resetValidationMessage=vR;yr.prototype.close=Zu;yr.prototype.closePopup=Zu;yr.prototype.closeModal=Zu;yr.prototype.closeToast=Zu;yr.prototype.rejectPromise=iR;yr.prototype.update=NR;yr.prototype._destroy=SR;Object.assign(yr,HK);Object.keys(SK).forEach(e=>{yr[e]=function(...t){return Ts&&Ts[e]?Ts[e](...t):null}});yr.DismissReason=Lp;yr.version="11.22.2";const Wt=yr;Wt.default=Wt;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');var ER={exports:{}},gY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vY=gY,yY=vY;function DR(){}function PR(){}PR.resetWarningCache=DR;var bY=function(){function e(r,a,i,o,s,l){if(l!==yY){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:PR,resetWarningCache:DR};return n.PropTypes=n,n};ER.exports=bY();var xY=ER.exports;const ci=ms(xY);var wY=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function $S(){return $S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$S.apply(this,arguments)}function NY(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function gy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SY(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,VS(e,t)}function VS(e,t){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},VS(e,t)}var M1=function(e){SY(t,e);function t(){var r;return r=e.call(this)||this,r.handleExpired=r.handleExpired.bind(gy(r)),r.handleErrored=r.handleErrored.bind(gy(r)),r.handleChange=r.handleChange.bind(gy(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(gy(r)),r}var n=t.prototype;return n.getCaptchaFunction=function(a){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[a]:this.props.grecaptcha[a]:null},n.getValue=function(){var a=this.getCaptchaFunction("getResponse");return a&&this._widgetId!==void 0?a(this._widgetId):null},n.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},n.execute=function(){var a=this.getCaptchaFunction("execute");if(a&&this._widgetId!==void 0)return a(this._widgetId);this._executeRequested=!0},n.executeAsync=function(){var a=this;return new Promise(function(i,o){a.executionResolve=i,a.executionReject=o,a.execute()})},n.reset=function(){var a=this.getCaptchaFunction("reset");a&&this._widgetId!==void 0&&a(this._widgetId)},n.forceReset=function(){var a=this.getCaptchaFunction("reset");a&&a()},n.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},n.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},n.handleChange=function(a){this.props.onChange&&this.props.onChange(a),this.executionResolve&&(this.executionResolve(a),delete this.executionReject,delete this.executionResolve)},n.explicitRender=function(){var a=this.getCaptchaFunction("render");if(a&&this._widgetId===void 0){var i=document.createElement("div");this._widgetId=a(i,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(i)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},n.componentDidMount=function(){this.explicitRender()},n.componentDidUpdate=function(){this.explicitRender()},n.handleRecaptchaRef=function(a){this.captcha=a},n.render=function(){var a=this.props;a.sitekey,a.onChange,a.theme,a.type,a.tabindex,a.onExpired,a.onErrored,a.size,a.stoken,a.grecaptcha,a.badge,a.hl,a.isolated;var i=NY(a,wY);return M.createElement("div",$S({},i,{ref:this.handleRecaptchaRef}))},t}(M.Component);M1.displayName="ReCAPTCHA";M1.propTypes={sitekey:ci.string.isRequired,onChange:ci.func,grecaptcha:ci.object,theme:ci.oneOf(["dark","light"]),type:ci.oneOf(["image","audio"]),tabindex:ci.number,onExpired:ci.func,onErrored:ci.func,size:ci.oneOf(["compact","normal","invisible"]),stoken:ci.string,hl:ci.string,badge:ci.oneOf(["bottomright","bottomleft","inline"]),isolated:ci.bool};M1.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var OR={exports:{}},bn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=typeof Symbol=="function"&&Symbol.for,Q3=ia?Symbol.for("react.element"):60103,Z3=ia?Symbol.for("react.portal"):60106,L1=ia?Symbol.for("react.fragment"):60107,I1=ia?Symbol.for("react.strict_mode"):60108,R1=ia?Symbol.for("react.profiler"):60114,B1=ia?Symbol.for("react.provider"):60109,F1=ia?Symbol.for("react.context"):60110,e4=ia?Symbol.for("react.async_mode"):60111,z1=ia?Symbol.for("react.concurrent_mode"):60111,U1=ia?Symbol.for("react.forward_ref"):60112,W1=ia?Symbol.for("react.suspense"):60113,kY=ia?Symbol.for("react.suspense_list"):60120,q1=ia?Symbol.for("react.memo"):60115,H1=ia?Symbol.for("react.lazy"):60116,_Y=ia?Symbol.for("react.block"):60121,jY=ia?Symbol.for("react.fundamental"):60117,AY=ia?Symbol.for("react.responder"):60118,CY=ia?Symbol.for("react.scope"):60119;function mo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Q3:switch(e=e.type,e){case e4:case z1:case L1:case R1:case I1:case W1:return e;default:switch(e=e&&e.$$typeof,e){case F1:case U1:case H1:case q1:case B1:return e;default:return t}}case Z3:return t}}}function TR(e){return mo(e)===z1}bn.AsyncMode=e4;bn.ConcurrentMode=z1;bn.ContextConsumer=F1;bn.ContextProvider=B1;bn.Element=Q3;bn.ForwardRef=U1;bn.Fragment=L1;bn.Lazy=H1;bn.Memo=q1;bn.Portal=Z3;bn.Profiler=R1;bn.StrictMode=I1;bn.Suspense=W1;bn.isAsyncMode=function(e){return TR(e)||mo(e)===e4};bn.isConcurrentMode=TR;bn.isContextConsumer=function(e){return mo(e)===F1};bn.isContextProvider=function(e){return mo(e)===B1};bn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q3};bn.isForwardRef=function(e){return mo(e)===U1};bn.isFragment=function(e){return mo(e)===L1};bn.isLazy=function(e){return mo(e)===H1};bn.isMemo=function(e){return mo(e)===q1};bn.isPortal=function(e){return mo(e)===Z3};bn.isProfiler=function(e){return mo(e)===R1};bn.isStrictMode=function(e){return mo(e)===I1};bn.isSuspense=function(e){return mo(e)===W1};bn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===L1||e===z1||e===R1||e===I1||e===W1||e===kY||typeof e=="object"&&e!==null&&(e.$$typeof===H1||e.$$typeof===q1||e.$$typeof===B1||e.$$typeof===F1||e.$$typeof===U1||e.$$typeof===jY||e.$$typeof===AY||e.$$typeof===CY||e.$$typeof===_Y)};bn.typeOf=mo;OR.exports=bn;var MR=OR.exports,t4=MR,EY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},DY={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},PY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},LR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n4={};n4[t4.ForwardRef]=PY;n4[t4.Memo]=LR;function f6(e){return t4.isMemo(e)?LR:n4[e.$$typeof]||EY}var OY=Object.defineProperty,TY=Object.getOwnPropertyNames,h6=Object.getOwnPropertySymbols,MY=Object.getOwnPropertyDescriptor,LY=Object.getPrototypeOf,p6=Object.prototype;function IR(e,t,n){if(typeof t!="string"){if(p6){var r=LY(t);r&&r!==p6&&IR(e,r,n)}var a=TY(t);h6&&(a=a.concat(h6(t)));for(var i=f6(e),o=f6(t),s=0;s<a.length;++s){var l=a[s];if(!DY[l]&&!(n&&n[l])&&!(o&&o[l])&&!(i&&i[l])){var u=MY(t,l);try{OY(e,l,u)}catch{}}}}return e}var IY=IR;const RY=ms(IY);function GS(){return GS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GS.apply(this,arguments)}function BY(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function FY(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ts={},zY=0;function UY(e,t){return t=t||{},function(r){var a=r.displayName||r.name||"Component",i=function(s){FY(l,s);function l(c,f){var h;return h=s.call(this,c,f)||this,h.state={},h.__scriptURL="",h}var u=l.prototype;return u.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+zY++),this.__scriptLoaderID},u.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},u.asyncScriptLoaderHandleLoad=function(f){var h=this;this.setState(f,function(){return h.props.asyncScriptOnLoad&&h.props.asyncScriptOnLoad(h.state)})},u.asyncScriptLoaderTriggerOnScriptLoaded=function(){var f=ts[this.__scriptURL];if(!f||!f.loaded)throw new Error("Script is not loaded.");for(var h in f.observers)f.observers[h](f);delete window[t.callbackName]},u.componentDidMount=function(){var f=this,h=this.setupScriptURL(),p=this.asyncScriptLoaderGetScriptLoaderID(),m=t,v=m.globalName,y=m.callbackName,g=m.scriptId;if(v&&typeof window[v]<"u"&&(ts[h]={loaded:!0,observers:{}}),ts[h]){var b=ts[h];if(b&&(b.loaded||b.errored)){this.asyncScriptLoaderHandleLoad(b);return}b.observers[p]=function(S){return f.asyncScriptLoaderHandleLoad(S)};return}var x={};x[p]=function(S){return f.asyncScriptLoaderHandleLoad(S)},ts[h]={loaded:!1,observers:x};var N=document.createElement("script");N.src=h,N.async=!0;for(var k in t.attributes)N.setAttribute(k,t.attributes[k]);g&&(N.id=g);var j=function(A){if(ts[h]){var P=ts[h],T=P.observers;for(var E in T)A(T[E])&&delete T[E]}};y&&typeof window<"u"&&(window[y]=function(){return f.asyncScriptLoaderTriggerOnScriptLoaded()}),N.onload=function(){var S=ts[h];S&&(S.loaded=!0,j(function(A){return y?!1:(A(S),!0)}))},N.onerror=function(){var S=ts[h];S&&(S.errored=!0,j(function(A){return A(S),!0}))},document.body.appendChild(N)},u.componentWillUnmount=function(){var f=this.__scriptURL;if(t.removeOnUnmount===!0)for(var h=document.getElementsByTagName("script"),p=0;p<h.length;p+=1)h[p].src.indexOf(f)>-1&&h[p].parentNode&&h[p].parentNode.removeChild(h[p]);var m=ts[f];m&&(delete m.observers[this.asyncScriptLoaderGetScriptLoaderID()],t.removeOnUnmount===!0&&delete ts[f])},u.render=function(){var f=t.globalName,h=this.props;h.asyncScriptOnLoad;var p=h.forwardedRef,m=BY(h,["asyncScriptOnLoad","forwardedRef"]);return f&&typeof window<"u"&&(m[f]=typeof window[f]<"u"?window[f]:void 0),m.ref=p,M.createElement(r,m)},l}(M.Component),o=M.forwardRef(function(s,l){return M.createElement(i,GS({},s,{forwardedRef:l}))});return o.displayName="AsyncScriptLoader("+a+")",o.propTypes={asyncScriptOnLoad:ci.func},RY(o,r)}}var KS="onloadcallback",WY="grecaptcha";function YS(){return typeof window<"u"&&window.recaptchaOptions||{}}function qY(){var e=YS(),t=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+t+"/recaptcha/enterprise.js?onload="+KS+"&render=explicit":"https://"+t+"/recaptcha/api.js?onload="+KS+"&render=explicit"}const RR=UY(qY,{callbackName:KS,globalName:WY,attributes:YS().nonce?{nonce:YS().nonce}:{}})(M1),HY=()=>d.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:d.jsx("div",{className:"flex items-start space-x-3",children:d.jsx(Fq,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"})})}),$Y=()=>{Za();const e=B_(),[t,n]=M.useState({email:"",password:""}),[r,a]=M.useState(!1),[i,o]=M.useState(null),[s,l]=M.useState(null),[u,c]=M.useState(!1),[f,h]=M.useState(null),p=gb.createRef();M.useEffect(()=>{var b,x;(b=e.state)!=null&&b.message&&(l(e.state.message),(x=e.state)!=null&&x.email&&n(N=>({...N,email:e.state.email})),window.history.replaceState({},document.title))},[e.state]);const m=b=>{n({...t,[b.target.name]:b.target.value})},v=async b=>{var x,N,k,j;if(b.preventDefault(),a(!0),o(null),l(null),!f){Wt.fire({icon:"warning",title:"Verifikasi Diperlukan",text:"Silakan verifikasi bahwa Anda bukan robot dengan mencentang reCAPTCHA"}),a(!1);return}try{if(!Ju())throw new Error("Sistem belum dikonfigurasi. Silakan hubungi administrator untuk mengatur koneksi database.");const{data:S,error:A}=await Pe.auth.signInWithPassword({email:t.email,password:t.password});if(A)throw A;if(S.user){const{data:P,error:T}=await Pe.from("profiles").select("role, name, is_face_registered, status").eq("id",S.user.id).single();if(!T){if(P.status!=="active")throw await Pe.auth.signOut(),new Error("Akun Anda tidak aktif. Silakan hubungi administrator.")}try{await Pe.from("activity_logs").insert([{user_id:S.user.id,action_type:"login",action_details:{email:S.user.email,role:(P==null?void 0:P.role)||"unknown",timestamp:new Date().toISOString()},ip_address:"unknown",user_agent:navigator.userAgent}])}catch{}try{await Pe.from("profiles").update({last_login:new Date().toISOString(),device_info:{user_agent:navigator.userAgent,timestamp:new Date().toISOString()}}).eq("id",S.user.id)}catch{}let E=(P==null?void 0:P.name)||S.user.email||"";await Wt.fire({icon:"success",title:"Login Berhasil",html:`Selamat datang, <b>${E}</b>!`})}}catch(S){let A="Terjadi kesalahan saat login";S.message==="Invalid login credentials"?A="Email atau password salah":(x=S.message)!=null&&x.includes("Email not confirmed")?A="Email belum dikonfirmasi. Silakan cek email Anda.":(N=S.message)!=null&&N.includes("Too many requests")?A="Terlalu banyak percobaan login. Silakan coba lagi nanti.":(k=S.message)!=null&&k.includes("Sistem belum dikonfigurasi")?A="Sistem belum dikonfigurasi. Silakan hubungi administrator untuk mengatur koneksi database.":(j=S.message)!=null&&j.includes("Akun Anda tidak aktif")?A=S.message:A=S.message||"Terjadi kesalahan saat login",await Wt.fire({icon:"error",title:"Login Gagal",text:A})}finally{a(!1)}},y=b=>{h(b)},g=()=>{h(null)};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-indigo-800 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-full mb-6 shadow-lg",children:d.jsx(UT,{className:"h-10 w-10 text-blue-600"})}),d.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Portal Karyawan"}),d.jsx("p",{className:"text-blue-100",children:"Masuk untuk mengakses sistem absensi"})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 backdrop-blur-sm",children:[d.jsxs("div",{className:"mb-8 text-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Masuk ke Akun Anda"}),d.jsx("p",{className:"text-gray-500 mt-1",children:"Silakan login menggunakan email dan password"})]}),!Ju()&&d.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Rd,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-yellow-800 font-medium",children:"Sistem Belum Dikonfigurasi"}),d.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Database belum terhubung. Silakan hubungi administrator untuk mengatur koneksi Supabase."})]})]}),d.jsxs("form",{onSubmit:v,className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full",children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Alamat Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(u1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors shadow-sm focus:shadow-md bg-gray-50",placeholder:"Masukkan email Anda"})]})]}),d.jsxs("div",{className:"w-full",children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ag,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:t.password,onChange:m,required:!0,className:"w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors shadow-sm focus:shadow-md bg-gray-50",placeholder:"Masukkan password Anda"}),d.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>c(!u),children:u?d.jsx(zq,{className:"h-5 w-5"}):d.jsx($N,{className:"h-5 w-5"})})]})]})]}),d.jsx("div",{className:"block md:hidden h-2"}),d.jsx("div",{className:"mt-6",children:d.jsx("div",{className:"flex justify-center",children:d.jsx(RR,{ref:p,sitekey:"6LdVU1srAAAAAHHTvpZWAe6SDWNUgXw80Gh1t8ea",onChange:y,onExpired:g,theme:"light"})})}),d.jsx("button",{type:"submit",disabled:r||!Ju()||!f,className:`w-full py-3 px-4 rounded-lg font-medium focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all 
                ${r?"bg-blue-400 text-white cursor-wait":"bg-blue-600 text-white hover:bg-blue-700"}
                ${!Ju()||!f?"opacity-50 cursor-not-allowed":""}`,"aria-busy":r,children:r?d.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),d.jsx("span",{children:"Memproses..."})]}):"Masuk"})]})]})]})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var BR=function(e,t){return(BR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])})(e,t)};function vs(e,t){function n(){this.constructor=e}BR(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function lt(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(e,[])).next())})}function ut(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(f){c=[6,f],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var VY=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+a+"."),this.set(t,a)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,a=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return GY(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),s=o[0],l=o[1];t.urlFlags[s]=function(u,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+u+".")}(s,l)})}},e}();function GY(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Ie(){return FR}var FR=null,nx=new Map,XS=new Map;function zR(e,t){var n=WR(e,t);return nx.get(n)}function KY(e){return XS.get(e)}function m6(e){for(var t=nx.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function UR(e){var t=e.kernelName,n=e.backendName,r=WR(t,n);if(nx.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");nx.set(r,e)}function YY(e){var t=e.kernelName;XS.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),XS.set(t,e)}function WR(e,t){return t+"_"+e}function JS(e,t,n){return Math.max(e,Math.min(t,n))}function qR(e){return e%2==0?e:e+1}function XY(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function ue(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function dn(e,t,n){n===void 0&&(n=""),ue(na(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function Ip(e){ue(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function lp(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||Gs(e)&&!n)for(var r=0;r<e.length;++r)lp(e[r],t,n);else t.push(e);return t}function ft(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function na(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function vr(e){return e%1==0}function JY(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function QS(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Rh(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function g6(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,a){var i=0,o=function(){if(e())r();else{i++;var s=t(i);n!=null&&i>=n?a():setTimeout(o,s)}};o()})}function QY(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function qr(e,t){var n=t.length;return ue((e=e==null?t.map(function(r,a){return a}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),ue(e.every(function(r){return vr(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function ld(e,t){for(var n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:qr(t,e).sort(),o=0,s=0;s<e.length;++s){if(i!=null){if(i[o]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(i[o]==null||i[o]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function qg(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function rx(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function ZY(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function eX(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function tX(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Gs(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function HR(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function nX(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function r4(e){return typeof e=="string"||e instanceof String}function rX(e){return typeof e=="boolean"}function aX(e){return typeof e=="number"}function Bv(e){return Array.isArray(e)?Bv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":aX(e)?"float32":r4(e)?"string":rX(e)?"bool":"float32"}function ZS(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ek(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Ks(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function $R(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=lp(e)),n&&ZY(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)Math.round(e[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function v6(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,a){return r*a});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(a,i,o){var s=new Array;if(i.length===1)for(var l=i[0],u=0;u<l;u++)s[u]=o[a+u];else{l=i[0];var c=i.slice(1),f=c.reduce(function(h,p){return h*p});for(u=0;u<l;u++)s[u]=r(a+u*f,c,o)}return s}(0,e,t)}function VR(e,t){for(var n=Fv(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Fv(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Ms(){return Ie().platform.now()}function GR(e){e.forEach(function(t){ue(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function iX(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ie().platform.encode(e,t)}function ax(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ie().platform.decode(e,t)}function y6(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function oX(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}var sX=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new lX)}return e.prototype.profileKernel=function(t,n,r){var a,i=this,o=this.backendTimer.time(function(){a=r()});return a.forEach(function(s){s.data().then(function(l){(function(u,c,f){if(c!=="float32")return!1;for(var h=0;h<u.length;h++){var p=u[h];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+f+"'"),!0}})(l,s.dtype,t),o.then(function(u){var c="";u.getExtraProfileInfo!=null&&(c=u.getExtraProfileInfo()),i.logger.logKernelProfile(t,s,l,u.kernelMs,n,c)})})}),a},e}(),lX=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,i,o){var s=typeof a=="number"?Rh(a+"ms",9):a.error,l=Rh(t,25),u=n.rank,c=n.size,f=Rh(n.shape.toString(),14),h="";for(var p in i){var m=i[p].shape||n.shape,v=m.length;h+=p+": "+v+"D "+(v>0?m:"")+" "}console.log("%c"+l+"	%c"+s+"	%c"+u+"D "+f+"	%c"+c+"	%c"+h+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),b6=20,Pm=3,T5=7;function uX(e,t,n,r){var a=Ks(t),i=function(u,c,f,h){var p=ft(c),m=h[h.length-1],v=new Array(m).fill(0),y=c.length,g=f==="complex64"?Tm(u):u;if(y>1)for(var b=0;b<p/m;b++)for(var x=b*m,N=0;N<m;N++)v[N]=Math.max(v[N],Om(g[x+N],0,f).length);return v}(e,t,n,a),o=t.length,s=function u(c,f,h,p,m,v){v===void 0&&(v=!0);var y=h==="complex64"?2:1,g=f[0],b=f.length;if(b===0)return h==="complex64"?[Om(Tm(c)[0],0,h)]:h==="bool"?[KR(c[0])]:[c[0].toString()];if(b===1){if(g>b6){var x=Pm*y,N=Array.from(c.slice(0,x)),k=Array.from(c.slice((g-Pm)*y,g*y));return h==="complex64"&&(N=Tm(N),k=Tm(k)),["["+N.map(function(H,B){return Om(H,m[B],h)}).join(", ")+", ..., "+k.map(function(H,B){return Om(H,m[g-Pm+B],h)}).join(", ")+"]"]}return["["+(h==="complex64"?Tm(c):Array.from(c)).map(function(H,B){return Om(H,m[B],h)}).join(", ")+"]"]}var j=f.slice(1),S=p.slice(1),A=p[0]*y,P=[];if(g>b6){for(var T=0;T<Pm;T++){var E=(D=T*A)+A;P.push.apply(P,u(c.slice(D,E),j,h,S,m,!1))}for(P.push("..."),T=g-Pm;T<g;T++)E=(D=T*A)+A,P.push.apply(P,u(c.slice(D,E),j,h,S,m,T===g-1))}else for(T=0;T<g;T++){var D;E=(D=T*A)+A,P.push.apply(P,u(c.slice(D,E),j,h,S,m,T===g-1))}var R=b===2?",":"";for(P[0]="["+P[0]+R,T=1;T<P.length-1;T++)P[T]=" "+P[T]+R;var F=`,
`;for(T=2;T<b;T++)F+=`
`;return P[P.length-1]=" "+P[P.length-1]+"]"+(v?"":F),P}(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(s.map(function(u){return"    "+u}).join(`
`)),l.join(`
`)}function Om(e,t,n){return Rh(Array.isArray(e)?parseFloat(e[0].toFixed(T5))+" + "+parseFloat(e[1].toFixed(T5))+"j":r4(e)?"'"+e+"'":n==="bool"?KR(e):parseFloat(e.toFixed(T5)).toString(),t)}function KR(e){return e===0?"false":"true"}function Tm(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Hg=function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=ft(t),r!=null){var i=r.length;ue(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||rx(n,this.size),this.strides=Ks(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),ue(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var l=t[t.length-1],u=0;u<t.length-1;++u)l+=this.strides[u]*t[u];return this.values[l]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Is().makeTensor(this.values,this.shape,this.dtype)},e}(),Is=null,Oe=null,YR=null,Jn=function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ft(t),this.strides=Ks(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),ue(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,a){return this.throwIfDisposed(),this.reshape([t,n,r,a])},e.prototype.as5D=function(t,n,r,a,i){return this.throwIfDisposed(),this.reshape([t,n,r,a,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),Oe.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return lt(this,void 0,void 0,function(){var t;return ut(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,Oe.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return Oe.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return lt(this,void 0,void 0,function(){var t;return ut(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,v6(this.shape,t)]}})})},e.prototype.arraySync=function(){return v6(this.shape,this.dataSync())},e.prototype.data=function(){return lt(this,void 0,void 0,function(){var t,n;return ut(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Is().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(a){return ax(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Is().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return ax(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return lt(this,void 0,void 0,function(){var t;return ut(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Is().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Is().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),Oe.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),Oe.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),Oe.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),Oe.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),Oe.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),Oe.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),Oe.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),uX(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),Oe.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),Oe.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),Oe.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),Oe.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),Oe.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),Oe.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),Oe.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Oe.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),Oe.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),Oe.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),Oe.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),Oe.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,a,i){return r===void 0&&(r=.001),YR("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,i,a,r)},e.prototype.batchNorm=function(t,n,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Oe.batchNorm(this,t,n,r,a,i)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),Oe.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Oe.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Oe.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),Oe.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),Oe.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),Oe.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),Oe.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),Oe.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),Oe.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),Oe.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),Oe.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),Oe.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),Oe.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),Oe.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),Oe.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),Oe.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),Oe.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),Oe.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Oe.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),Oe.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Oe.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),Oe.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),Oe.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Oe.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),Oe.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),Oe.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Oe.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),Oe.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),Oe.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),Oe.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),Oe.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),Oe.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Oe.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),Oe.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Oe.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Oe.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Oe.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Oe.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),Oe.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Oe.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),Oe.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),Oe.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),Oe.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Oe.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Oe.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Oe.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Oe.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Oe.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Oe.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Oe.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Oe.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Oe.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Oe.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Oe.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Oe.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Oe.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Oe.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Oe.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),Oe.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),Oe.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Oe.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Oe.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Oe.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),Oe.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),Oe.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Oe.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Oe.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Oe.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Oe.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Oe.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Oe.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Oe.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Oe.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Oe.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Oe.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Oe.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Oe.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Oe.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Oe.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Oe.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Oe.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Oe.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Oe.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Oe.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),Oe.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Oe.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Oe.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Oe.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Oe.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Oe.conv1d(this,t,n,r,a,i,o)},e.prototype.conv2d=function(t,n,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Oe.conv2d(this,t,n,r,a,i,o)},e.prototype.conv2dTranspose=function(t,n,r,a,i){return this.throwIfDisposed(),Oe.conv2dTranspose(this,t,n,r,a,i)},e.prototype.depthwiseConv2D=function(t,n,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Oe.depthwiseConv2d(this,t,n,r,a,i,o)},e.prototype.separableConv2d=function(t,n,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),Oe.separableConv2d(this,t,n,r,a,i,o)},e.prototype.avgPool=function(t,n,r,a){return this.throwIfDisposed(),Oe.avgPool(this,t,n,r,a)},e.prototype.maxPool=function(t,n,r,a){return this.throwIfDisposed(),Oe.maxPool(this,t,n,r,a)},e.prototype.localResponseNormalization=function(t,n,r,a){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5),Oe.localResponseNormalization(this,t,n,r,a)},e.prototype.pool=function(t,n,r,a,i){return this.throwIfDisposed(),Oe.pool(this,t,n,r,a,i)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Is().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),Oe.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),Oe.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),Oe.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),Oe.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,a,i,o,s,l){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),this.throwIfDisposed(),Oe.stridedSlice(this,t,n,r,a,i,o,s,l)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),Oe.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),Oe.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Oe.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Oe.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Oe.spectral.irfft(this)},e}();Object.defineProperty(Jn,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var x6,tk,nk,rk,ak,up=function(e){function t(n,r,a,i){var o=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return o.trainable=r,o.name=a,o}return vs(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!na(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Is().disposeTensor(this),this.dataId=n.dataId,Is().incRef(this,null)},t.prototype.dispose=function(){Is().disposeVariable(this),this.isDisposedInternal=!0},t}(Jn);Object.defineProperty(up,Symbol.hasInstance,{value:function(e){return e instanceof Jn&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(x6||(x6={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(tk||(tk={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(nk||(nk={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(rk||(rk={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ak||(ak={}));var cX={float32:rk,int32:tk,bool:nk,complex64:ak};function ga(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return cX[e][t]}function M5(e){return ga(e,"int32")}function er(e,t){if(e.dtype===t.dtype)return[e,t];var n=ga(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function dX(e,t){ue(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function XR(e){var t=[];return function n(r,a,i){if(r!=null){if(r instanceof Jn)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var l in s){var u=s[l];i.has(u)||(i.add(u),n(u,a,i))}}}}(e,t,new Set),t}var L5,w6=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),fX=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new w6}return e.prototype.ready=function(){return lt(this,void 0,void 0,function(){var t,n,r;return ut(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,a.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return lt(this,void 0,void 0,function(){var n,r,a;return ut(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new sX(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;m6(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;m6(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then(function(s){return!(i<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n);a.disposeData(n),r.backend=t,t.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,a=this,i=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(a){return{x:function(){return a.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,a,i){return this.runKernelFunc(null,n,null,t,r,a,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(l){i+=l.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,a,i,o,s){var l,u=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var h,p=function(b){f&&(c=b.map(function(x){return u.keep(u.clone(x))}))},m=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,g=zR(a,this.backendName);return h=g!=null?function(){var b=u.backend.numDataIds();y=g.kernelFunc({inputs:n,attrs:i,backend:u.backend});var x=Array.isArray(y)?y:[y];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(a,b,x);var N=x.map(function(j){var S=j.dataId,A=j.shape,P=j.dtype;return u.makeTensorFromDataId(S,A,P)}),k=N.filter(function(j,S){return s[S]});return p((o||[]).slice().concat(k)),N}:function(){var b=u.backend.numDataIds();y=u.tidy(function(){return t(u.backend,p)});var x=Array.isArray(y)?y:[y];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(a,b,x),x},this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){l=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(a,n,function(){return h()}):h()}),f&&this.addTapeNode(a,n,l,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-m,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(b){return n[b].shape}),outputShapes:l.map(function(b){return b.shape})}),Array.isArray(y)?l:l[0]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=t;r==="string"&&r4(t[0])&&(i=t.map(function(c){return iX(c)}));var o=a.write(i,n,r),s=new Jn(n,r,o,this.nextTensorId());if(this.incRef(s,a),r==="string"){var l=this.state.tensorInfo.get(o),u=nX(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){var i=new Jn(n,r=r||"float32",t,this.nextTensorId());return this.incRef(i,a),i},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.asType(a));var i=new up(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(a=t.size*HR(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof up||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return lt(this,void 0,void 0,function(){var n,r;return ut(this,function(a){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},l=KY(t);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=function(u){return u=u.map(function(c,f){if(c==null){var h=r[f],p=Fv(h.size,h.dtype);return o.makeTensor(p,h.shape,h.dtype)}return c}),a(u.length>1?u:u[0],i)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=XR(t),a=new Set(r.map(function(l){return l.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(l){l.kept||l.scopeId!==s.id||n.track(l)})},e.prototype.gradients=function(t,n,r,a){var i=this;if(a===void 0&&(a=!1),ue(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});ue(o instanceof Jn,function(){return"The result y returned by f() must be a tensor."});var s=function(l,u,c){for(var f={},h={},p=0;p<u.length;p++)f[u[p].id]=!0;for(p=0;p<l.length;p++){var m=(j=l[p]).inputs;for(var v in m){for(var y=m[v],g=!1,b=0;b<u.length;b++)if(f[y.id]){j.outputs.forEach(function(T){return f[T.id]=!0}),g=!0,h[j.id]=!0;break}if(g)break}}var x={};x[c.id]=!0;var N={};for(p=l.length-1;p>=0;p--)for(m=(j=l[p]).inputs,b=0;b<j.outputs.length;b++)if(x[j.outputs[b].id]){for(var v in m)x[m[v].id]=!0,N[j.id]=!0;break}var k=[];for(p=0;p<l.length;p++){var j;if(h[(j=l[p]).id]&&N[j.id]){var S={};for(var v in j.inputs){var A=j.inputs[v];f[A.id]&&(S[v]=A)}var P=Object.assign({},j);P.inputs=S,P.outputs=j.outputs,k.push(P)}}return k}(this.state.activeTape,n,o);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l,u,c={};c[o.id]=r??(l=o.shape,u=VR(ft(l),"float32"),xe.makeTensor(u,l,"float32")),function(h,p,m){for(var v=function(g){var b=p[g],x=[];if(b.outputs.forEach(function(S){var A=h[S.id];A!=null?x.push(A):x.push(null)}),b.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+b.kernelName+".");var N=b.gradient(x),k=function(S){if(!(S in N))throw new Error("Cannot backprop through input "+S+". Available gradients found: "+Object.keys(N)+".");var A=m(function(){return N[S]()});if(A.dtype!=="float32")throw new Error("Error in gradient for op "+b.kernelName+". The gradient of input "+S+" must have 'float32' dtype, but has '"+A.dtype+"'");var P=b.inputs[S];if(!na(A.shape,P.shape))throw new Error("Error in gradient for op "+b.kernelName+". The gradient of input '"+S+"' has shape '"+A.shape+"', which does not match the shape of the input '"+P.shape+"'");if(h[P.id]==null)h[P.id]=A;else{var T=h[P.id];h[P.id]=T.add(A),T.dispose()}};for(var j in b.inputs)k(j)},y=p.length-1;y>=0;y--)v(y)}(c,s,function(h){return i.tidy(h)});var f=n.map(function(h){return c[h.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(h){for(var p=0,m=h.saved;p<m.length;p++)m[p].dispose()}),i.state.activeTape=null),{value:o,grads:f}})},e.prototype.customGrad=function(t){var n=this;return ue(ZS(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];ue(a.every(function(s){return s instanceof Jn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return a.forEach(function(s,l){o[l]=s}),n.runKernelFunc(function(s,l){return ue((r=t.apply(void 0,a.concat([l]))).value instanceof Jn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ue(ZS(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,l){var u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];ue(c.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ue(c.every(function(h){return h instanceof Jn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(h,p){f[p]=function(){return h}}),f})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return lt(this,void 0,void 0,function(){var n,r;return ut(this,function(a){switch(a.label){case 0:return n=Ms(),[4,this.backend.time(t)];case 1:return(r=a.sent()).wallMs=Ms()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new w6,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),xe=function(){var e=function(){if(L5==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}L5=n}return L5}();if(e._tfengine==null){var t=new VY(e);e._tfengine=new fX(t)}return function(n){FR=n}(e._tfengine.ENV),Is=function(){return e._tfengine},e._tfengine}();function JR(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var kl=Ie();kl.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),kl.registerFlag("IS_BROWSER",function(){return JR()}),kl.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),kl.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),kl.registerFlag("PROD",function(){return!1}),kl.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return kl.getBool("DEBUG")}),kl.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),kl.registerFlag("IS_TEST",function(){return!1});var $g,Yi,$i,td={},I5={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function hX(e,t){td[e]=t}function sl(e){e in td||(td[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete td[n]},!1),n===1?r.getContext("webgl",I5)||r.getContext("experimental-webgl",I5):r.getContext("webgl2",I5)}(e));var t=td[e];return t.isContextLost()?(delete td[e],sl(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),td[e])}function $1(e,t){return[t,e]}function gg(e){var t=ft(e);return QS(Math.ceil(t/4))}function zv(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function a4(e,t){var n,r,a,i,o,s,l,u,c,f=e;return Ie().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,s=4,l=1,u=f.HALF_FLOAT,c=f.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,s=4,l=4,u=t!=null?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:c}}function ht(e,t,n){var r=n();return t&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+vX(a,i))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})($g||($g={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Yi||(Yi={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}($i||($i={}));var pX=596e-10,mX=65504;function gX(e){return!!(Ie().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||pX<Math.abs(e)&&Math.abs(e)<mX)}function vX(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function vy(e,t,n){return eu(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function yX(e,t,n){var r=eu(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ht(e,t,function(){return e.shaderSource(r,n)}),ht(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function bX(e,t,n){var r=eu(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ht(e,t,function(){return e.shaderSource(r,n)}),ht(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(a,i){var o=xX.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var s=+o[1],l=a.split(`
`),u=l.length.toString().length+2,c=l.map(function(y,g){return Rh((g+1).toString(),u)+y}),f=0,h=0;h<c.length;h++)f=Math.max(c[h].length,f);var p=c.slice(0,s-1),m=c.slice(s-1,s),v=c.slice(s);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+Rh(m[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var R5,B5,xX=/ERROR: [0-9]+:([0-9]+):/g;function wX(e,t){return eu(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function NX(e,t,n){if(ht(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function F5(e,t,n){if(ht(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function SX(e,t,n){var r=eu(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return ht(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),ht(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function kX(e,t,n){var r=eu(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return ht(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),ht(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function _X(e,t){return eu(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function jX(e,t){var n=Ie().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function AX(e,t){return eu(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function N6(e,t,n,r,a,i,o,s){var l=e.getAttribLocation(n,r);return l!==-1&&(ht(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),ht(e,t,function(){return e.vertexAttribPointer(l,i,e.FLOAT,!1,o,s)}),ht(e,t,function(){return e.enableVertexAttribArray(l)}),!0)}function CX(e,t,n,r){TX(e,r),ht(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),ht(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function EX(e,t,n,r){return eu(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function DX(e,t,n){return e.getUniformLocation(t,n)}function PX(e,t,n,r,a,i){ht(e,t,function(){return CX(e,t,r,i)}),ht(e,t,function(){return e.uniform1i(a,i)})}function z5(e,t,n,r){ht(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),ht(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function S6(e,t,n){ht(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),ht(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function yy(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+OX(e,t))}function OX(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function eu(e,t,n,r){var a=ht(e,t,function(){return n()});if(a==null)throw new Error(r);return a}function TX(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function ix(e,t){return t===void 0&&(t=2),ft(e.slice(0,e.length-t))}function ox(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function U5(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[ix(e)].concat(ox(e))),t}function MX(e,t){var n;t===void 0&&(t=!1);var r=Ie().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(u,c){return c>=e.length-2?qR(e[c]):e[c]})).length===1&&(e=[2,e[0]])),e.length!==2){var a=ld(e);e=a.newShape}var i=ft(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=ix(e),s=2,l=2;return e.length&&(s=(n=ox(e))[0],l=n[1]),QS(i=o*(s/2)*(l/2)).map(function(u){return 2*u})}return QS(i)}function by(e){return e%2==0}function xy(e,t){if(na(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||by(n)&&by(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&by(e[0])&&by(t[0])}function LX(e){if(R5==null){var t=sl(e);R5=t.getParameter(t.MAX_TEXTURE_SIZE)}return R5}function IX(e){if(B5==null){var t=sl(e);B5=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,B5)}function RX(e){if(e===0)return 0;var t=sl(e);return Fo(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Fo(t,"EXT_disjoint_timer_query")?1:0}function Fo(e,t){return e.getExtension(t)!=null}function k6(e){try{if(sl(e)!=null)return!0}catch{return!1}return!1}function BX(e){if(e===0)return!1;var t=sl(e);if(e===1){if(!Fo(t,"OES_texture_float"))return!1}else if(!Fo(t,"EXT_color_buffer_float"))return!1;return ik(t)}function FX(e){if(e===0)return!1;var t=sl(e);if(e!==1){if(Fo(t,"EXT_color_buffer_float"))return ik(t);if(Fo(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=a4(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var l=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),l}(t,n)}return!1}return!!Fo(t,"OES_texture_float")&&!!Fo(t,"WEBGL_color_buffer_float")&&ik(t)}function ik(e){var t=a4(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function zX(e){return e===2&&sl(e).fenceSync!=null}var jt=Ie();function QR(e){Ie().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function at(e,t){return xe.tidy(e,t)}function xi(e){XR(e).forEach(function(t){return t.dispose()})}function UX(e){return xe.keep(e)}function sx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ie().getBool("IS_TEST")||console.warn.apply(console,e)}function Cc(e,t){var n=e;if(Gs(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Gs(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&Ie().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,o,s){if(s=s||[],!Array.isArray(i)&&!Gs(i))return void ue(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});ue(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),ue(i.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var l=o.slice(1),u=0;u<i.length;++u)a(i[u],l,s.concat(u))}(e,r,[]),r}function _6(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function oe(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof Jn)return _6(r,e.dtype,t,n),e;var a=Bv(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),_6(r,a,t,n),e==null||!Gs(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=Cc(e,a);Gs(e)||Array.isArray(e)||(e=[e]);var s=a!=="string"?$R(e,a,Ie().getBool("DEBUG")):lp(e,[],!0);return xe.makeTensor(s,o,a)}function lx(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(a,i){return oe(a,t+"["+i+"]",n)},r)}function ZR(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function WX(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function Oa(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);return[n,t.map(function(i){return e[i]})]}function Ni(e,t){return WX(e,t.map(function(n){return 1}),t)}function qi(e,t,n){ue(ZR(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function ll(e,t){if(ZR(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(a){return n.push(a)}),n}function i4(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function ul(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function qX(e,t){var n=e[0].length;e.forEach(function(a,i){ue(a.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),ue(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(a,i){for(var o=0;o<n;o++)ue(o===t||a[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function cp(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function pe(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];xe.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),xe.endScope(s),s}catch(l){throw xe.endScope(null),l}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}jt.registerFlag("HAS_WEBGL",function(){return jt.getNumber("WEBGL_VERSION")>0}),jt.registerFlag("WEBGL_VERSION",function(){return k6(2)?2:k6(1)?1:0}),jt.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return jt.get("WEBGL_VERSION")===2}),jt.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),jt.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),jt.registerFlag("WEBGL_PACK",function(){return jt.getBool("HAS_WEBGL")}),jt.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_PACK_CLIP",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),jt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_PACK_REDUCE",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_LAZILY_UNPACK",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_CONV_IM2COL",function(){return jt.getBool("WEBGL_PACK")}),jt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return LX(jt.getNumber("WEBGL_VERSION"))}),jt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return IX(jt.getNumber("WEBGL_VERSION"))}),jt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=jt.getNumber("WEBGL_VERSION");return e===0?0:RX(e)}),jt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return jt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),jt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return BX(jt.getNumber("WEBGL_VERSION"))}),jt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!jt.getBool("WEBGL_FORCE_F16_TEXTURES")&&jt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),jt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return FX(jt.getNumber("WEBGL_VERSION"))}),jt.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return zX(jt.getNumber("WEBGL_VERSION"))}),jt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return jt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),YR=QR;var ma=pe({complex_:function(e,t){var n=oe(e,"real","complex"),r=oe(t,"imag","complex");return dn(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),xe.runKernelFunc(function(a){return a.complex(n,r)},{$real:n,$imag:r})}}),Ro=pe({real_:function(e){var t=oe(e,"input","real");return xe.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),Rs=pe({imag_:function(e){var t=oe(e,"input","imag");return xe.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function ya(e,t,n){return Ec(e,t,Cc(e,n),n)}function Ec(e,t,n,r){if(r==null&&(r=Bv(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Gs(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){GR(t);var a=ft(t),i=ft(n);ue(a===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i});for(var o=0;o<n.length;++o){var s=n[o],l=o!==n.length-1||s!==ft(t.slice(o));ue(n[o]===t[o]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return Gs(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?$R(e,r,Ie().getBool("DEBUG")):lp(e,[],!0),xe.makeTensor(e,t,r)}function et(e,t){if((Gs(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Gs(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ec(e,[],[],t)}function jr(e,t){Ip(e);var n=Cc(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ec(e,null,n,t)}function dc(e,t,n){if(Ip(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Cc(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ec(e,t,r,n)}function o4(e,t,n){if(Ip(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Cc(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ec(e,t,r,n)}function mi(e,t,n){if(Ip(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Cc(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ec(e,t,r,n)}function HX(e,t,n){if(Ip(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Cc(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ec(e,t,r,n)}function $X(e,t,n){if(Ip(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Cc(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ec(e,t=t||r,r,n)}function VX(e,t,n,r){return t===void 0&&(t=!0),xe.makeVariable(e,t,n,r)}function Rp(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Rp(e,"float32"),r=Rn(e,"float32");return ma(n,r)}var a=VR(ft(e),t);return xe.makeTensor(a,e,t)}function Rn(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Rn(e,"float32"),r=Rn(e,"float32");return ma(n,r)}var a=Fv(ft(e),t);return xe.makeTensor(a,e,t)}function Ys(e,t,n){return xe.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function GX(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return xe.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function ux(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Rn([0],r);var a=Fv(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return jr(a,r)}var e8=pe({onesLike_:function(e){var t=oe(e,"x","onesLike");if(t.dtype==="complex64"){var n=e8(Ro(t)),r=Xt(Rs(t));return ma(n,r)}return xe.runKernelFunc(function(a){return a.onesLike(t)},{$x:t},function(a,i){return{$x:function(){return Xt(a)}}})}}),Xt=pe({zerosLike_:function(e){var t=oe(e,"x","zerosLike");return xe.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return Xt(n)}}})}}),Br=pe({concat_:function(e,t){t===void 0&&(t=0),ue(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=lx(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),t=qr(t,n[0].shape)[0];var r=cp(n.map(function(s){return s.shape}),t);if(ft(r)===0)return ya([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var a=n.map(function(s){return s.shape});qX(a,t);var i=n,o={axis:t};return xe.runKernelFunc(function(s){return s.concat(n,t)},i,function(s){var l=a.map(function(u){return u[t]});return s4(s,l,t).map(function(u){return function(){return u}})},"Concat",o)}}),KX=pe({concat1d_:function(e){return Br(e,0)}}),YX=pe({concat2d_:function(e,t){return Br(e,t)}}),XX=pe({concat3d_:function(e,t){return Br(e,t)}}),JX=pe({concat4d_:function(e,t){return Br(e,t)}}),s4=pe({split_:function(e,t,n){n===void 0&&(n=0);var r,a=oe(e,"x","split");return n=qr(n,a.shape)[0],typeof t=="number"?(ue(a.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(a.shape[n]/t)):(ue(a.shape[n]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),xe.runKernelFunc(function(i){return i.split(a,r,n)},{$x:a},function(i){return{$x:function(){return Br(i,n)}}})}});function af(e,t){return e(t={exports:{}},t.exports),t.exports}var QX=af(function(e){(function(t,n,r){function a(s){var l,u=this,c=(l=4022871197,function(f){f=f.toString();for(var h=0;h<f.length;h++){var p=.02519603282416938*(l+=f.charCodeAt(h));p-=l=p>>>0,l=(p*=l)>>>0,l+=4294967296*(p-=l)}return 23283064365386963e-26*(l>>>0)});u.next=function(){var f=2091639*u.s0+23283064365386963e-26*u.c;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=0|f)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(s),u.s0<0&&(u.s0+=1),u.s1-=c(s),u.s1<0&&(u.s1+=1),u.s2-=c(s),u.s2<0&&(u.s2+=1),c=null}function i(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function o(s,l){var u=new a(s),c=l&&l.state,f=u.next;return f.int32=function(){return 4294967296*u.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.alea=o})(0,e)}),ZX=af(function(e){(function(t,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},s===(0|s)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=0|u.charCodeAt(c),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(0,e)}),eJ=af(function(e){(function(t,n,r){function a(s){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^f^f<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(0|s)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=0|u.charCodeAt(c),c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(0,e)}),tJ=af(function(e){(function(t,n,r){function a(s){var l=this;l.next=function(){var u,c,f=l.x,h=l.i;return u=f[h],c=(u^=u>>>7)^u<<24,c^=(u=f[h+1&7])^u>>>10,c^=(u=f[h+3&7])^u>>>3,c^=(u=f[h+4&7])^u<<7,u=f[h+7&7],c^=(u^=u<<13)^u<<9,f[h]=c,l.i=h+1&7,c},function(u,c){var f,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,f=0;f<c.length;++f)h[7&f]=h[7&f]<<15^c.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(0,e)}),nJ=af(function(e){(function(t,n,r){function a(s){var l=this;l.next=function(){var u,c,f=l.w,h=l.X,p=l.i;return l.w=f=f+1640531527|0,c=h[p+34&127],u=h[p=p+1&127],c^=c<<13,u^=u<<17,c^=c>>>15,u^=u>>>12,c=h[p]=c^u,l.i=p,c+(f^f>>>16)|0},function(u,c){var f,h,p,m,v,y=[],g=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,g=Math.max(g,c.length)),p=0,m=-32;m<g;++m)c&&(h^=c.charCodeAt((m+32)%c.length)),m===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(v=v+1640531527|0,p=(f=y[127&m]^=h+v)==0?p+1:0);for(p>=128&&(y[127&(c&&c.length||0)]=-1),p=127,m=512;m>0;--m)h=y[p+34&127],f=y[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,y[p]=h^f;u.w=v,u.X=y,u.i=p}(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(0,e)}),rJ=af(function(e){(function(t,n,r){function a(s){var l=this,u="";l.next=function(){var f=l.b,h=l.c,p=l.d,m=l.a;return f=f<<25^f>>>7^h,h=h-p|0,p=p<<24^p>>>8^m,m=m-f|0,l.b=f=f<<20^f>>>12^h,l.c=h=h-p|0,l.d=p<<16^h>>>16^m,l.a=m-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=0|s):u+=s;for(var c=0;c<u.length+20;c++)l.b^=0|u.charCodeAt(c),l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(0,e)}),nd=af(function(e){(function(t,n){var r,a=this,i=256,o=6,s="random",l=n.pow(i,o),u=n.pow(2,52),c=2*u,f=i-1;function h(g,b,x){var N=[],k=v(function A(P,T){var E,D=[],R=typeof P;if(T&&R=="object")for(E in P)try{D.push(A(P[E],T-1))}catch{}return D.length?D:R=="string"?P:P+"\0"}((b=b==1?{entropy:!0}:b||{}).entropy?[g,y(t)]:g??function(){try{var A;return r&&(A=r.randomBytes)?A=A(i):(A=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(A)),y(A)}catch{var P=a.navigator,T=P&&P.plugins;return[+new Date,a,T,a.screen,y(t)]}}(),3),N),j=new p(N),S=function(){for(var A=j.g(o),P=l,T=0;A<u;)A=(A+T)*i,P*=i,T=j.g(1);for(;A>=c;)A/=2,P/=2,T>>>=1;return(A+T)/P};return S.int32=function(){return 0|j.g(4)},S.quick=function(){return j.g(4)/4294967296},S.double=S,v(y(j.S),t),(b.pass||x||function(A,P,T,E){return E&&(E.S&&m(E,j),A.state=function(){return m(j,{})}),T?(n[s]=A,P):A})(S,k,"global"in b?b.global:this==n,b.state)}function p(g){var b,x=g.length,N=this,k=0,j=N.i=N.j=0,S=N.S=[];for(x||(g=[x++]);k<i;)S[k]=k++;for(k=0;k<i;k++)S[k]=S[j=f&j+g[k%x]+(b=S[k])],S[j]=b;(N.g=function(A){for(var P,T=0,E=N.i,D=N.j,R=N.S;A--;)P=R[E=f&E+1],T=T*i+R[f&(R[E]=R[D=f&D+P])+(R[D]=P)];return N.i=E,N.j=D,T})(i)}function m(g,b){return b.i=g.i,b.j=g.j,b.S=g.S.slice(),b}function v(g,b){for(var x,N=g+"",k=0;k<N.length;)b[f&k]=f&(x^=19*b[f&k])+N.charCodeAt(k++);return y(b)}function y(g){return String.fromCharCode.apply(0,g)}if(n["seed"+s]=h,v(n.random(),t),e.exports){e.exports=h;try{r=require("crypto")}catch{}}})([],Math)});nd.alea=QX,nd.xor128=ZX,nd.xorwow=eJ,nd.xorshift7=tJ,nd.xor4096=nJ,nd.tychei=rJ;var V1=nd.alea,l4=function(){function e(t,n,r,a,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=V1(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,a=!1;!a;){var i=void 0,o=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(s>=1||s===0);var l=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*l,r=this.mean+this.stdDev*o*l,this.truncated&&!this.isValidTruncated(n)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),aJ=function(){function e(t,n,r,a){this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=V1(i.toString()),this.randn=new l4(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,n=1-.331*(t=a*a)*t,r=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),iJ=function(){function e(t,n,r,a){var i=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=V1(a)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Pt(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",GR(e),new Hg(e,t,n)}function oJ(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var t8=pe({batchToSpaceND_:function(e,t,n){var r=oe(e,"x","batchToSpaceND"),a=t.reduce(function(i,o){return i*o});return ue(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),ue(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),ue(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a}),xe.runKernelFunc(function(i){return i.batchToSpaceND(r,t,n)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(t,n)}}})}}),sJ=pe({broadcastTo_:function(e,t){var n=oe(e,"broadcastTo","x"),r=n.shape;if(t.some(function(l){return!(l>0)||l%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])i[o]=1;else if(n.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map(function(l,u){return l>1?u:-1}).filter(function(l){return l>=0});return s.length===0?n.clone():xe.runKernelFunc(function(l){return l.tile(n,i)},{input:n},function(l){return{input:function(){return l.sum(s,!0)}}})}}),lJ=pe({cast_:function(e,t){var n=oe(e,"x","cast");if(!eX(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return xe.runKernelFunc(function(a){return a.cast(n,t)},{x:n},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),uJ=pe({clone_:function(e){var t=oe(e,"x","clone",null);return xe.runKernelFunc(function(){return xe.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),cJ=pe({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=oe(e,"x","cumsum"),i=ll([t|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var s=ul(1,a.rank)[0],l=xe.runKernelFunc(function(u){return u.cumsum(o,s,n,r)},{permutedX:o},function(u){return{permutedX:function(){return u.cumsum(t,n,!r)}}});return i!=null&&(l=l.transpose(i)),l}}),dJ=pe({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=oe(e,"x","depthToSpace"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];return ue(a*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),ue(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+r.shape}),ue(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape}),xe.runKernelFunc(function(s){return s.depthToSpace(r,t,n)},{$x:r})}}),To=pe({expandDims_:function(e,t){t===void 0&&(t=0);var n=oe(e,"x","expandDims",null);ue(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(ue(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),us(n,r)}}),n8=pe({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var a=Pt([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return Bh(To(s,0),[n[0],1,1]);if(n.length===2)return Bh(To(To(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Bh(To(To(To(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),fJ=pe({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var a=oe(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=o===1?a.as2D(1,-1):a,l=xe.runKernelFunc(function(u){return u.multinomial(s,r,t,n)},{logits2D:s});return o===1?l.as1D():l}}),ok=pe({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=oe(e,"indices","oneHot","int32"),i=a.shape.concat([t]);return a=a.flatten(),xe.runKernelFunc(function(o){return o.oneHot(a,t,n,r)},{$indices:a},function(o){return{$indices:function(){return Rn(a.shape,"float32")}}}).reshape(i)}}),of=pe({pad_:function(e,t,n){n===void 0&&(n=0);var r=oe(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return xe.runKernelFunc(function(i){return i.pad(r,t,n)},{x:r},function(i){var o=t.map(function(s){return s[0]});return{x:function(){return i.slice(o,r.shape)}}},"PadV2",a)}}),hJ=pe({pad1d_:function(e,t,n){return n===void 0&&(n=0),ue(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),of(e,[t],n)}}),pJ=pe({pad2d_:function(e,t,n){return n===void 0&&(n=0),ue(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),of(e,t,n)}}),mJ=pe({pad3d_:function(e,t,n){return n===void 0&&(n=0),ue(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),of(e,t,n)}}),gJ=pe({pad4d_:function(e,t,n){return n===void 0&&(n=0),ue(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),of(e,t,n)}}),vJ=pe({rand_:function(e,t,n){var r=ft(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return xe.makeTensor(a,e,n)}}),yJ=pe({randomNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new l4(t,n,r,!1,a),o=Pt(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),bJ=pe({randomGamma_:function(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new aJ(t,n,r,a),o=Pt(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),r8=pe({randomUniform_:function(e,t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=Pt(e,r),o=new iJ(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),us=pe({reshape_:function(e,t){var n=oe(e,"x","reshape",null);t=QY(t,n.size),ue(n.size===ft(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return xe.runKernelFunc(function(a){return a.reshape(n,t)},{x:n},function(a){return{x:function(){return a.reshape(n.shape)}}},"Reshape",r)}}),a8=pe({spaceToBatchND_:function(e,t,n){var r=oe(e,"x","spaceToBatchND");return ue(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),ue(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),ue(r.shape.reduce(function(a,i,o){return o>0&&o<=t.length?a&&(i+n[o-1][0]+n[o-1][1])%t[o-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),xe.runKernelFunc(function(a){return a.spaceToBatchND(r,t,n)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(t,n)}}})}}),i8=pe({squeeze_:function(e,t){var n=oe(e,"x","squeeze");return us(n,ld(n.shape,t).newShape)}}),ro=pe({stack_:function(e,t){t===void 0&&(t=0);var n=lx(e,"tensors","stack");if(ue(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;ue(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){dn(a,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){ue(i===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=n.map(function(s){return s.expandDims(t)});return Br(o,t)}}),Bh=pe({tile_:function(e,t){var n=oe(e,"x","tile",null);ue(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],a={reps:t};return xe.runKernelFunc(function(i,o){var s=i.tile(n,t);return o([n]),s},{x:n},function(i,o){var s=o[0];return{x:function(){var l=Xt(s);if(s.rank===1)for(var u=0;u<t[0];++u)l=l.add(i.slice([u*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(u=0;u<t[0];++u)for(var c=0;c<t[1];++c)l=l.add(i.slice([u*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(u=0;u<t[0];++u)for(c=0;c<t[1];++c)for(var f=0;f<t[2];++f)l=l.add(i.slice([u*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(u=0;u<t[0];++u)for(c=0;c<t[1];++c)for(f=0;f<t[2];++f)for(var h=0;h<t[3];++h)l=l.add(i.slice([u*s.shape[0],c*s.shape[1],f*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return l}}},"Tile",a,r)}}),xJ=pe({truncatedNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new l4(t,n,r,!0,a),o=Pt(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Fr=pe({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=oe(e,"x","unstack");ue(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return xe.runKernelFunc(function(a){return a.unstack(n,t)},{x:n},function(a){return{x:function(){return ro(a,t)}}},"Unpack",r)}}),wJ=function(e,t){return lt(this,void 0,void 0,function(){var n,r,a,i,o,s,l,u,c,f;return ut(this,function(h){switch(h.label){case 0:return n=oe(e,"x","setdiff1d"),r=oe(t,"y","setdiff1d"),ue(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),ue(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),ue(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return a=h.sent(),[4,r.data()];case 2:for(i=h.sent(),o=new Set(i),s=0,c=0;c<a.length;c++)o.has(a[c])||s++;for(l=new Hg([s],n.dtype),u=new Hg([s],"int32"),c=0,f=0;c<a.length;c++)o.has(a[c])||(l.values[f]=a[c],u.values[f]=c,f++);return[2,[l.toTensor(),u.toTensor()]]}})})};function cx(e,t,n,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function dx(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function fx(e,t,n,r){r===void 0&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function o8(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function s8(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function l8(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();var l=1;for(i=r;i<e.rank;++i)l*=o[i],s.push(o[i]);var u=Ks(e.shape).map(function(c){return c/l}).concat([1]).slice(0,r);return[s,a,l,u]}var u8=30;function W5(e){return e<=u8?e:ek(e,Math.floor(Math.sqrt(e)))}function NJ(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+n.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function SJ(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}NJ(n,t,e)}function hx(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var l=a<1?1:a;return{sliceRank:a,numUpdates:ft(t.shape)/l,sliceSize:o,strides:Ks(n.slice(0,a)).concat([1]),outputSize:ft(n)}}function kJ(e,t,n){ue(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),ue(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(i){ue(t[i]+n[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+n[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},a=0;a<e.rank;++a)r(a)}function j6(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function u4(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function _J(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=JS(0,i,s-1)}function jJ(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=o>0?JS(0,i,s):JS(-1,i,s-1)}function c8(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function d8(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function AJ(e,t){ue(ZS(e),function(){return"The f passed in variableGrads(f) must be a function"}),ue(t==null||Array.isArray(t)&&t.every(function(c){return c instanceof up}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],xe.registeredVariables)t.push(xe.registeredVariables[r]);var a=n?t.filter(function(c){return!c.trainable}):null,i=t.length;ue((t=t.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=xe.gradients(e,t,null,!0),s=o.value,l=o.grads;ue(l.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ue(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var u={};return t.forEach(function(c,f){l[f]!=null&&(u[c.name]=l[f])}),a!=null&&a.forEach(function(c){return u[c.name]=null}),{value:s,grads:u}}function G1(e){return xe.customGrad(e)}var tu=pe({softmax_:function(e,t){t===void 0&&(t=-1);var n=oe(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return xe.runKernelFunc(function(r,a){var i=r.softmax(n,t);return a([i]),i},{logits:n},function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),CJ=pe({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=oe(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return G1(function(r,a){var i=r.max(t,!0),o=r.sub(i),s=o.toFloat().sub(o.exp().sum(t,!0).log());return a([s]),{value:s,gradFunc:function(l,u){var c=u[0].exp();return l.sub(l.sum(t,!0).mul(c))}}})(n)}}),f8=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),h8=function(){function e(){}return e.prototype.time=function(t){return De("time")},e.prototype.read=function(t){return De("read")},e.prototype.readSync=function(t){return De("readSync")},e.prototype.numDataIds=function(){return De("numDataIds")},e.prototype.disposeData=function(t){return De("disposeData")},e.prototype.write=function(t,n,r){return De("write")},e.prototype.move=function(t,n,r,a){return De("move")},e.prototype.memory=function(){return De("memory")},e.prototype.floatPrecision=function(){return De("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,a){return De("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,De("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return De("slice")},e.prototype.stridedSlice=function(t,n,r,a){return De("stridedSlice")},e.prototype.unstack=function(t,n){return De("unstack")},e.prototype.reverse=function(t,n){return De("reverse")},e.prototype.concat=function(t,n){return De("concat")},e.prototype.neg=function(t){return De("neg")},e.prototype.add=function(t,n){return De("add")},e.prototype.addN=function(t){return De("addN")},e.prototype.subtract=function(t,n){return De("subtract")},e.prototype.multiply=function(t,n){return De("multiply")},e.prototype.realDivide=function(t,n){return De("realDivide")},e.prototype.floorDiv=function(t,n){return De("floorDiv")},e.prototype.sum=function(t,n){return De("sum")},e.prototype.prod=function(t,n){return De("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return De("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return De("argMin")},e.prototype.argMax=function(t,n){return De("argMax")},e.prototype.equal=function(t,n){return De("equal")},e.prototype.notEqual=function(t,n){return De("notEqual")},e.prototype.less=function(t,n){return De("less")},e.prototype.lessEqual=function(t,n){return De("lessEqual")},e.prototype.greater=function(t,n){return De("greater")},e.prototype.greaterEqual=function(t,n){return De("greaterEqual")},e.prototype.logicalNot=function(t){return De("logicalNot")},e.prototype.logicalAnd=function(t,n){return De("logicalAnd")},e.prototype.logicalOr=function(t,n){return De("logicalOr")},e.prototype.where=function(t){return De("where")},e.prototype.select=function(t,n,r){return De("select")},e.prototype.topk=function(t,n,r){return De("topk")},e.prototype.min=function(t,n){return De("min")},e.prototype.minimum=function(t,n){return De("minimum")},e.prototype.mod=function(t,n){return De("mod")},e.prototype.max=function(t,n){return De("max")},e.prototype.maximum=function(t,n){return De("maximum")},e.prototype.all=function(t,n){return De("all")},e.prototype.any=function(t,n){return De("any")},e.prototype.squaredDifference=function(t,n){return De("squaredDifference")},e.prototype.ceil=function(t){return De("ceil")},e.prototype.floor=function(t){return De("floor")},e.prototype.round=function(t){return De("round")},e.prototype.sign=function(t){return De("sign")},e.prototype.isNaN=function(t){return De("isNaN")},e.prototype.isInf=function(t){return De("isInf")},e.prototype.isFinite=function(t){return De("isFinite")},e.prototype.pow=function(t,n){return De("pow")},e.prototype.exp=function(t){return De("exp")},e.prototype.expm1=function(t){return De("expm1")},e.prototype.softmax=function(t,n){return De("softmax")},e.prototype.log=function(t){return De("log")},e.prototype.log1p=function(t){return De("log1p")},e.prototype.sqrt=function(t){return De("sqrt")},e.prototype.rsqrt=function(t){return De("rsqrt")},e.prototype.square=function(t){return De("square")},e.prototype.reciprocal=function(t){return De("reciprocal")},e.prototype.relu=function(t){return De("relu")},e.prototype.relu6=function(t){return De("relu6")},e.prototype.prelu=function(t,n){return De("prelu")},e.prototype.elu=function(t){return De("elu")},e.prototype.eluDer=function(t,n){return De("eluDer")},e.prototype.selu=function(t){return De("selu")},e.prototype.int=function(t){return De("int")},e.prototype.clip=function(t,n,r){return De("clip")},e.prototype.abs=function(t){return De("abs")},e.prototype.complexAbs=function(t){return De("complexAbs")},e.prototype.sigmoid=function(t){return De("sigmoid")},e.prototype.softplus=function(t){return De("softplus")},e.prototype.sin=function(t){return De("sin")},e.prototype.cos=function(t){return De("cos")},e.prototype.tan=function(t){return De("tan")},e.prototype.asin=function(t){return De("asin")},e.prototype.acos=function(t){return De("acos")},e.prototype.atan=function(t){return De("atan")},e.prototype.atan2=function(t,n){return De("atan2")},e.prototype.sinh=function(t){return De("sinh")},e.prototype.cosh=function(t){return De("cosh")},e.prototype.tanh=function(t){return De("tanh")},e.prototype.asinh=function(t){return De("asinh")},e.prototype.acosh=function(t){return De("acosh")},e.prototype.atanh=function(t){return De("atanh")},e.prototype.erf=function(t){return De("erf")},e.prototype.step=function(t,n){return De("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,De("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return De("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return De("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return De("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,De("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return De("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return De("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return De("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return De("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return De("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return De("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return De("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,a){return De("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return De("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return De("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return De("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return De("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return De("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,a){return De("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return De("reshape")},e.prototype.cast=function(t,n){return De("cast")},e.prototype.tile=function(t,n){return De("tile")},e.prototype.pad=function(t,n,r){return De("pad")},e.prototype.transpose=function(t,n){return De("transpose")},e.prototype.gather=function(t,n,r){return De("gather")},e.prototype.gatherND=function(t,n){return De("gatherND")},e.prototype.scatterND=function(t,n,r){return De("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return De("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return De("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,a){return De("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return De("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,a){return De("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return De("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,a,i,o){return De("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,a,i){return De("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,a,i,o,s){return De("LRNGrad")},e.prototype.multinomial=function(t,n,r,a){return De("multinomial")},e.prototype.oneHot=function(t,n,r,a){return De("oneHot")},e.prototype.cumsum=function(t,n,r,a){return De("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,a,i){return De("nonMaxSuppression")},e.prototype.fft=function(t){return De("fft")},e.prototype.ifft=function(t){return De("ifft")},e.prototype.complex=function(t,n){return De("complex")},e.prototype.real=function(t){return De("real")},e.prototype.imag=function(t){return De("imag")},e.prototype.cropAndResize=function(t,n,r,a,i,o){return De("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return De("depthToSpace")},e.prototype.split=function(t,n,r){return De("split")},e.prototype.sparseToDense=function(t,n,r,a){return De("sparseToDense")},e.prototype.diag=function(t){return De("diag")},e.prototype.fill=function(t,n,r){return De("fill")},e.prototype.onesLike=function(t){return De("onesLike")},e.prototype.zerosLike=function(t){return De("zerosLike")},e.prototype.linspace=function(t,n,r){return De("linspace")},e.prototype.dispose=function(){return De("dispose")},e}();function De(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ec(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function Ur(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function qt(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=t[t.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function Vg(e,t,n,r,a,i,o){o===void 0&&(o="channelsLast");var s,l=gx(t),u=l[0],c=l[1];if(o==="channelsLast")s=[u,c,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[u,c,e[1],e[1]]}return sf(e,s,n,r,a,i,!1,o)}function px(e,t,n,r,a,i,o){o===void 0&&(o="NDHWC");var s,l,u=sk(t),c=u[0],f=u[1],h=u[2];if(o==="NDHWC")l="channelsLast",s=[c,f,h,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);l="channelsFirst",s=[c,f,h,e[1],e[1]]}return mx(e,s,n,r,a,!1,l,i)}function sf(e,t,n,r,a,i,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],f=l[2],h=l[3];if(s==="channelsLast")u=e[0],c=e[1],f=e[2],h=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);u=e[0],h=e[1],c=e[2],f=e[3]}var p,m=t[0],v=t[1],y=t[3],g=gx(n),b=g[0],x=g[1],N=gx(r),k=N[0],j=N[1],S=Fh(m,k),A=Fh(v,j),P=function(F,H,B,U,W,z,J,ee){var L,q,Y;if(typeof F=="number"){L={top:F,bottom:F,left:F,right:F,type:F===0?"VALID":"NUMBER"};var te=function(ae,le,Se,Ee,me){Ee==null&&(Ee=p8(ae,le,Se));var ie=ae[0],Ve=ae[1],be=vg((ie-le+2*Ee)/Se+1,me);ue(vr(be),function(){return"The output # of rows ("+be+") must be an integer. Change the stride and/or zero pad parameters"});var fe=vg((Ve-le+2*Ee)/Se+1,me);return ue(vr(fe),function(){return"The output # of columns ("+fe+") must be an integer. Change the stride and/or zero pad parameters"}),[be,fe]}([H,B],z,U,F,ee);q=te[0],Y=te[1]}else if(F==="same"){q=Math.ceil(H/U),Y=Math.ceil(B/W);var K=Math.max(0,(q-1)*U+z-H),ce=Math.max(0,(Y-1)*W+J-B),he=Math.floor(K/2),$=K-he,X=Math.floor(ce/2);L={top:he,bottom:$,left:X,right:ce-X,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);L={top:0,bottom:0,left:0,right:0,type:"VALID"},q=Math.ceil((H-z+1)/U),Y=Math.ceil((B-J+1)/W)}return{padInfo:L,outHeight:q,outWidth:Y}}(a,c,f,b,x,S,A,i),T=P.padInfo,E=P.outHeight,D=P.outWidth,R=o?y*h:y;return s==="channelsFirst"?p=[u,R,E,D]:s==="channelsLast"&&(p=[u,E,D,R]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:f,inChannels:h,outHeight:E,outWidth:D,outChannels:R,padInfo:T,strideHeight:b,strideWidth:x,filterHeight:m,filterWidth:v,effectiveFilterHeight:S,effectiveFilterWidth:A,dilationHeight:k,dilationWidth:j,inShape:e,outShape:p,filterShape:t}}function mx(e,t,n,r,a,i,o,s){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],c=l[1],f=l[2],h=l[3],p=l[4];if(o==="channelsLast")u=e[0],c=e[1],f=e[2],h=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);u=e[0],p=e[1],c=e[2],f=e[3],h=e[4]}var m,v=t[0],y=t[1],g=t[2],b=t[4],x=sk(n),N=x[0],k=x[1],j=x[2],S=sk(r),A=S[0],P=S[1],T=S[2],E=Fh(v,A),D=Fh(y,P),R=Fh(g,T),F=function(J,ee,L,q,Y,te,K,ce,he,$,X){var ae,le,Se,Ee;if(typeof J=="number"){ae={top:J,bottom:J,left:J,right:J,front:J,back:J,type:J===0?"VALID":"NUMBER"};var me=function(Je,Ye,ct,dt,At,Qe){At==null&&(At=p8(Je,Ye,dt));var rt=Je[0],Ke=Je[1],xr=Je[2],Lt=vg((rt-Ye+2*At)/dt+1,Qe);ue(vr(Lt),function(){return"The output # of depths ("+Lt+") must be an integer. Change the stride and/or zero pad parameters"});var $r=vg((Ke-Ye+2*At)/dt+1,Qe);ue(vr($r),function(){return"The output # of rows ("+$r+") must be an integer. Change the stride and/or zero pad parameters"});var Jt=vg((xr-Ye+2*At)/dt+1,Qe);return ue(vr(Jt),function(){return"The output # of columns ("+Jt+") must be an integer. Change the stride and/or zero pad parameters"}),[Lt,$r,Jt,ct]}([ee,L,q,1],ce,1,Y,J,X);le=me[0],Se=me[1],Ee=me[2]}else if(J==="same"){le=Math.ceil(ee/Y),Se=Math.ceil(L/te),Ee=Math.ceil(q/K);var ie=(le-1)*Y+ce-ee,Ve=(Se-1)*te+he-L,be=(Ee-1)*K+$-q,fe=Math.floor(ie/2),_e=ie-fe,je=Math.floor(Ve/2),Re=Ve-je,Ge=Math.floor(be/2);ae={top:je,bottom:Re,left:Ge,right:be-Ge,front:fe,back:_e,type:"SAME"}}else{if(J!=="valid")throw Error("Unknown padding parameter: "+J);ae={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},le=Math.ceil((ee-ce+1)/Y),Se=Math.ceil((L-he+1)/te),Ee=Math.ceil((q-$+1)/K)}return{padInfo:ae,outDepth:le,outHeight:Se,outWidth:Ee}}(a,c,f,h,N,k,j,E,D,R,s),H=F.padInfo,B=F.outDepth,U=F.outHeight,W=F.outWidth,z=i?b*p:b;return o==="channelsFirst"?m=[u,z,B,U,W]:o==="channelsLast"&&(m=[u,B,U,W,z]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:f,inWidth:h,inChannels:p,outDepth:B,outHeight:U,outWidth:W,outChannels:z,padInfo:H,strideDepth:N,strideHeight:k,strideWidth:j,filterDepth:v,filterHeight:y,filterWidth:g,effectiveFilterDepth:E,effectiveFilterHeight:D,effectiveFilterWidth:R,dilationDepth:A,dilationHeight:P,dilationWidth:T,inShape:e,outShape:m,filterShape:t}}function p8(e,t,n,r){r===void 0&&(r=1);var a=Fh(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function gx(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function sk(e){return typeof e=="number"?[e,e,e]:e}function Fh(e,t){return t<=1?e:e+(e-1)*(t-1)}function vg(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function dp(e){var t=gx(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function Si(e,t){return dp(e)||dp(t)}function c4(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function m8(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Rn(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!tX(e.dtype,t))return xe.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return n.int(e);if(t==="bool"){var s=et(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function lk(e,t){return xe.makeTensorFromDataId(e.dataId,t,e.dtype)}function g8(e,t,n){var r=(t-e)/(n-1),a=Fv(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return jr(a,"float32")}function uk(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function A6(e,t){return{real:e[2*t],imag:e[2*t+1]}}function EJ(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function DJ(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function PJ(e,t,n){var r=function(i,o,s){return function(l,u,c){for(var f=0,h=l.length,p=0,m=!1;f<h;){var v=c(u,l[p=f+(h-f>>>1)]);v>0?f=p+1:(h=p,m=!v)}return m?f:-f-1}(i,o,s||OJ)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function OJ(e,t){return e>t?1:e<t?-1:0}function d4(e,t,n,r,a){return v8(e,t,n,r,a,0).selectedIndices}function f4(e,t,n,r,a,i){var o=v8(e,t,n,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function v8(e,t,n,r,a,i,o,s){s===void 0&&(s=!1);for(var l=Array.from(t).map(function(N,k){return{score:N,boxIndex:k,suppressBeginIndex:0}}).filter(function(N){return N.score>a}).sort(C6),u=i>0?-.5/i:0,c=[],f=[];c.length<n&&l.length>0;){var h=l.pop(),p=h.score,m=h.boxIndex,v=h.suppressBeginIndex;if(p<a)break;for(var y=!1,g=c.length-1;g>=v;--g){var b=TJ(e,m,c[g]);if(b>=r){y=!0;break}if(h.score=h.score*MJ(r,u,b),h.score<=a)break}h.suppressBeginIndex=c.length,y||(h.score===p?(c.push(m),f.push(h.score)):h.score>a&&PJ(l,h,C6))}var x=c.length;return s&&(c.fill(0,x),f.fill(0,x)),{selectedIndices:jr(c,"int32"),selectedScores:jr(f,"float32"),numValidOutputs:et(x,"int32")}}function TJ(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-i)*(l-o),m=(f-u)*(h-c);if(p<=0||m<=0)return 0;var v=Math.max(i,u),y=Math.max(o,c),g=Math.min(s,f),b=Math.min(l,h),x=Math.max(g-v,0)*Math.max(b-y,0);return x/(p+m-x)}function MJ(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function C6(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function y8(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map(function(i){a[n]=i;var o=e.slice(r,a);return r[n]+=i,o})}function b8(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=Pt(n,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var l=e.locToIndex(o);a.values[r]=e.values[l]}return a.toTensor()}function x8(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],l=o[1],u=qg(n,s*r),c=qg("int32",s*r),f=0;f<s;f++){for(var h=f*l,p=e.subarray(h,h+l),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});m.sort(function(N,k){return k.value-N.value});var y=f*r,g=u.subarray(y,y+r),b=c.subarray(y,y+r);for(v=0;v<r;v++)g[v]=m[v].value,b[v]=m[v].index}var x=t.slice();return x[x.length-1]=r,[ya(u,x,n),ya(c,x,"int32")]}function h4(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=Pt(e,"int32"),i=Pt([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}var LJ=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(a,i){return"T"+i});var n=[];this.variableNames.forEach(function(a){n.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},IJ=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(a,i){return"T"+i});var n=[];this.variableNames.forEach(function(a){n.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},RJ=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s=t==="max"?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function w8(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function gi(e,t){return t===1?[e]:w8(e,t)}function Ia(){var e,t,n,r,a,i,o,s,l,u;return Ie().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function ud(e,t,n){n===void 0&&(n="index");var r=Ks(t);return r.map(function(a,i){return"int "+e[i]+" = "+n+" / "+a+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+a:"index -= "+e[i]+" * "+a)+";"}).join("")}function p4(e){var t=Ks(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var N8=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function BJ(e,t,n,r){var a=[];e.forEach(function(p){var m=ft(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?a.push("uniform float "+p.name+(m>1?"["+m+"]":"")+";"):(a.push("uniform sampler2D "+p.name+";"),a.push("uniform int offset"+p.name+";"))});var i,o,s=a.join(`
`),l=e.map(function(p){return function(m,v,y){y===void 0&&(y=!1);var g="";g+=y?S8(m):ih(m);var b=m.shapeInfo.logicalShape,x=v.logicalShape;return b.length<=x.length&&(g+=y?function(N,k){var j,S=N.name,A=S.charAt(0).toUpperCase()+S.slice(1),P="get"+A+"AtOutCoords",T=N.shapeInfo.logicalShape.length,E=k.logicalShape.length,D=ec(N.shapeInfo.logicalShape,k.logicalShape),R=Ln(E),F=E-T,H=["x","y","z","w","u","v"];j=T===0?"":E<2&&D.length>=1?"coords = 0;":D.map(function(L){return"coords."+H[L+F]+" = 0;"}).join(`
`);var B="";B=E<2&&T>0?"coords":N.shapeInfo.logicalShape.map(function(L,q){return"coords."+H[q+F]}).join(", ");var U="return outputValue;",W=ft(N.shapeInfo.logicalShape)===1,z=ft(k.logicalShape)===1;if(T!==1||W||z){if(W&&!z)U=E===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(D.length){var J=T-2,ee=T-1;D.indexOf(J)>-1&&D.indexOf(ee)>-1?U="return vec4(outputValue.x);":D.indexOf(J)>-1?U="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(ee)>-1&&(U="return vec4(outputValue.xx, outputValue.zz);")}}else U=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+P+`() {
      `+R+` coords = getOutputCoords();
      `+j+`
      vec4 outputValue = get`+A+"("+B+`);
      `+U+`
    }
  `}(m,v):function(N,k){var j=N.name,S=j.charAt(0).toUpperCase()+j.slice(1),A="get"+S+"AtOutCoords",P=k.texShape,T=N.shapeInfo.texShape,E=N.shapeInfo.logicalShape.length,D=k.logicalShape.length;if(!N.shapeInfo.isUniform&&E===D&&N.shapeInfo.flatOffset==null&&na(T,P))return`
      float `+A+`() {
        return sampleTexture(`+j+`, resultUV);
      }
    `;var R,F=Ln(D),H=ec(N.shapeInfo.logicalShape,k.logicalShape),B=D-E,U=["x","y","z","w","u","v"];R=E===0?"":D<2&&H.length>=1?"coords = 0;":H.map(function(z){return"coords."+U[z+B]+" = 0;"}).join(`
`);var W="";return W=D<2&&E>0?"coords":N.shapeInfo.logicalShape.map(function(z,J){return"coords."+U[J+B]}).join(", "),`
    float `+A+`() {
      `+F+` coords = getOutputCoords();
      `+R+`
      return get`+S+"("+W+`);
    }
  `}(m,v)),g}(p,t,r)}).join(`
`),u=t.texShape,c=Ia(),f=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(c),h=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+FJ+`
    `+zJ+`
    `+UJ+`
  `}(c);return t.isPacked?(i=function(p,m){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(N,k){var j=[Math.ceil(k[0]/2),Math.ceil(k[1]/2)];return j[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+j[1]+`.0);
      }
    `:j[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+j[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+j[0]+", "+j[1]+`));
      return 2 * (resTexRC.x * `+j[1]+` + resTexRC.y);
    }
  `}(0,m);case 2:return function(N,k){var j=[Math.ceil(k[0]/2),Math.ceil(k[1]/2)];if(na(N,k))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+j[0]+", "+j[1]+`));
      }
    `;var S=Math.ceil(N[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+j[0]+", "+j[1]+`));

      int index = resTexRC.x * `+j[1]+` + resTexRC.y;
      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec2(r, c);
    }
  `}(p,m);case 3:return v=p,y=m,g=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],b=Math.ceil(v[2]/2),x=b*Math.ceil(v[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+b+`);
      int c = imod(index, `+b+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(N,k){for(var j=[Math.ceil(k[0]/2),Math.ceil(k[1]/2)],S=Math.ceil(N[N.length-1]/2),A=S*Math.ceil(N[N.length-2]/2),P=A,T="",E="b, r, c",D=2;D<N.length-1;D++)P*=N[N.length-D-1],T=`
      int b`+D+" = index / "+P+`;
      index -= b`+D+" * "+P+`;
    `+T,E="b"+D+", "+E;return`
    ivec`+N.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+j[0]+", "+j[1]+`));
      int index = resTexRC.x * `+j[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+A+`;
      index -= b * `+A+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec`+N.length+"("+E+`);
    }
  `}(p,m)}var v,y,g,b,x}(t.logicalShape,u),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(c)):(i=function(p,m){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,b){return b[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+b[1]+`.0);
      }
    `:b[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+b[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      return resTexRC.x * `+b[1]+` + resTexRC.y;
    }
  `}(0,m);case 2:return function(g,b){return na(g,b)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+b[0]+", "+b[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+b[0]+", "+b[1]+`));
        int index = resTexRC.x * `+b[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+b[0]+", "+b[1]+`));
        int index = resTexRC.x * `+b[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(p,m);case 3:return v=m,y=ud(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+y+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,b){var x=ud(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      `+x+`
      return ivec4(r, c, d, d2);
    }
  `}(p,m);case 5:return function(g,b){var x=ud(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+b[0]+`,
                             `+b[1]+`));

      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+x+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,m);case 6:return function(g,b){var x=ud(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+x+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,m);default:throw new Error(p.length+"-D output sampling is not yet supported")}var v,y}(t.logicalShape,u),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(h+=WJ),[h,f,o,s,i,l,n].join(`
`)}function ih(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=n.shapeInfo.texShape,o=i[0],s=i[1];if(o===1&&s===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=n.shapeInfo.texShape,u=l[0],c=l[1],f=Jc(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+u+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Vf(n)+`
      }
    `;var i=n.shapeInfo.texShape,o=i[0],s=i[1];if(s===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=Jc(r);return s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+l+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+l+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+l+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n.shapeInfo.texShape;if(o!=null&&na(r,o)){var s=o[0],l=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+s+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var u=ld(r),c=u.newShape,f=u.keptDims,h=c;if(h.length<r.length){var p=oh(n,h);return`
      `+ih(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+sh(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Vf(n)+`
      }
    `;var m=o[0],v=o[1],y=Jc(a);return v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+m+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:m===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+v+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+y+`;
    vec2 uv = uvFromFlat(`+m+", "+v+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],s=r[2],l=ld(r),u=l.newShape,c=l.keptDims,f=u;if(f.length<r.length){var h=oh(n,f);return`
        `+ih(h)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+sh(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+Vf(n)+`
      }
    `;var p=n.shapeInfo.texShape,m=p[0],v=p[1],y=n.shapeInfo.flatOffset;if(v===o&&y==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+v+".0, "+m+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(v===s&&y==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+".0, "+m+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var g=Jc(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+m+", "+v+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],s=r[2]*o,l=r[1]*s,u=ld(r),c=u.newShape,f=u.keptDims;if(c.length<r.length){var h=oh(n,c);return`
      `+ih(h)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+sh(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+l+", "+s+", "+o+`, 1)));
        `+Vf(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,v=m[0],y=m[1];if(y===l&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(y===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var g=Jc(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+v+", "+y+", index + "+g+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],s=r[3]*o,l=r[2]*s,u=r[1]*l,c=ld(r),f=c.newShape,h=c.keptDims;if(f.length<r.length){var p=oh(n,f);return`
      `+ih(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+sh(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+u+", "+l+", "+s+", "+o+`)) +
          depth3;
        `+Vf(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,y=v[0],g=v[1];if(g===u&&m==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+l+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+y+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(g===o&&m==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+y+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var b=Jc(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+l+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+b+`;
      vec2 uv = uvFromFlat(`+y+", "+g+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,a=n.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=ld(r),s=o.newShape,l=o.keptDims;if(s.length<r.length){var u=oh(n,s);return`
      `+ih(u)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+sh(["row","col","depth","depth2","depth3","depth4"],l)+`);
      }
    `}var c=r[5],f=r[4]*c,h=r[3]*f,p=r[2]*h,m=r[1]*p;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+m+", "+p+", "+h+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Vf(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,g=y[0],b=y[1];if(b===m&&v==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+h+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(b===c&&v==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var x=Jc(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+m+" + col * "+p+" + depth * "+h+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+b+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function S8(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Ia(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=a.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Ia();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+l[0]+", "+l[1]+`, index);
      return `+u.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,u=l[0],c=l[1],f=Ia();if(l!=null&&na(i,l))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);

        return `+f.texture2D+"("+o+`, uv);
      }
    `;var h=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+h[0]+", "+h[1]+`, row, col);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];if(i[0]===1){var c=i.slice(1),f=oh(a,c);return`
        `+S8(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+sh(["b","row","col"],[1,2])+`);
        }
      `}var h=u[0],p=u[1],m=Math.ceil(i[2]/2),v=m*Math.ceil(i[1]/2),y=Ia();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+p+", "+v+", "+m+`, b, row, col);
      return `+y.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,s=a.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),u=a.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=c[0],h=c[1],p=Math.ceil(i[o-1]/2),m=p*Math.ceil(i[o-2]/2),v="int b, int row, int col",y="b * "+m+" + (row / 2) * "+p+" + (col / 2)",g=2;g<o-1;g++)v="int b"+g+", "+v,m*=i[o-g-1],y="b"+g+" * "+m+" + "+y;var b=Ia();return`
    vec4 `+l+"("+v+`) {
      int index = `+y+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+f+`);
      return `+b.texture2D+"("+s+`, uv);
    }
  `}(e)}}var FJ=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,zJ=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,UJ=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,WJ=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Jc(e){return"offset"+e}function Vf(e){var t=e.name,n=ft(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Ln(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function oh(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function sh(e,t){return t.map(function(n){return e[n]}).join(", ")}var qJ=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ue(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,l=this.outputShape,u=l.length,c=Ln(u),f=gi("coords",u);if(i===1){var h=Ln(s=u+1);o=`
        `+h+" sourceLocR = "+h+"("+f.join()+`, 0);
        ++`+f[u-1]+`;
        `+h+" sourceLocG = "+h+"("+f.join()+`, 0);
        ++`+f[u-2]+`;
        `+h+" sourceLocA = "+h+"("+f.join()+`, 0);
        --`+f[u-1]+`;
        `+h+" sourceLocB = "+h+"("+f.join()+`, 0);
        --`+f[u-2]+";"}else s=u,o=`
        `+c+` sourceLocR = coords;
        ++`+f[u-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[u-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[u-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[u-2]+";";var p=["x","y","z","w","u","v"].slice(0,s),m="."+p[s-1],v=p.map(function(A){return"int "+A}),y=gi("sourceLocR",s-1).concat("inIdx.r"),g=gi("sourceLocG",s-1).concat("inIdx.g"),b=gi("sourceLocB",s-1).concat("inIdx.b"),x=gi("sourceLocA",s-1).concat("inIdx.a"),N=n==="max"?"greaterThan":"lessThan",k=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+x.join()+")));",j=`vec4(
            getAChannel(`+y.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+b.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+x.join()+") : 0.)",S=r?"":`
      float getBestIndicesAChannel(`+v.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+v.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+S+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[u-1]+" < "+(l[u-1]-1)+`;
        bool hasNextRow = `+f[u-2]+" < "+(l[u-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+m+", sourceLocG"+m+`,
          sourceLocB`+m+", sourceLocA"+m+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+j+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+k+`
          vec4 candidate = `+j+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+N+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},HJ=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,f=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},$J=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=c-1-e.padInfo.front,m=f-1-e.padInfo.top,v=h-1-e.padInfo.left,y=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+m+", "+v+`);
      const float avgMultiplier = float(`+y+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+l+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},VJ=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],qt(e,t),qt(e,n);var o="0.0";r!=null&&(qt(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";a!=null&&(qt(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},GJ=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],qt(e,t),qt(e,n);var o="vec4(0.0)";r!=null&&(qt(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";a!=null&&(qt(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},KJ="return areal * breal - aimag * bimag;",YJ="return areal * bimag + aimag * breal;",E6=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=qt(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},q5="return a + b;",H5="return a - b;",D6="return a * b;",k8="return (a < 0.) ? b * a : a;",ar=function(e,t,n){this.variableNames=["A","B"],this.outputShape=qt(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},_8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,jl=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=qt(t,n);var a=this.outputShape.length,i="";if(r)if(a===0||ft(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Ln(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=gi("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},XJ=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e}(),JJ=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e}(),QJ=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},ZJ=function(e){this.outputShape=[],this.outputShape=cp(e,1),this.variableNames=e.map(function(s,l){return"T"+l});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var i=t.length,o=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},eQ=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cp(e,t);var n=this.outputShape,r=n.length,a=Ln(r),i=gi("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(y,g){return"T"+g});var s=new Array(e.length-1);s[0]=e[0][t];for(var l=1;l<s.length;l++)s[l]=s[l-1]+e[l][t];var u=o[t],c=o.slice(-2),f=o.join(),h="if ("+u+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(l=1;l<s.length;l++){var p=s[l-1];h+=`
        if (`+u+" < "+s[l]+"  && "+u+" >= "+s[l-1]+`) {
          return getChannel(
            getT`+l+"("+wy(o,u,p)+`),
            vec2(`+wy(c,u,p)+`));
        }`}var m=s.length,v=s[s.length-1];h+=`
        return getChannel(
          getT`+m+"("+wy(o,u,v)+`),
          vec2(`+wy(c,u,v)+"));",this.userCode=`
      float getValue(`+o.map(function(y){return"int "+y})+`) {
        `+h+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function wy(e,t,n){var r=e.indexOf(t);return e.map(function(a,i){return i===r?a+" - "+n:a}).join()}var tQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},nQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=i?1:2,u=i?2:3,c=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+l+"], coords["+u+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},rQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+a+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},aQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+l+", "+u+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},iQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},oQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},P6=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4,m=e.dataFormat==="channelsLast",v=m?1:2,y=m?2:3,g=m?3:1,b="",x="";n&&(b=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,x="result = activation(result);");var N=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+v+"], coords["+y+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+m+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+m+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+m+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+m+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+N+`
        `+x+`
        setOutput(result);
      }
    `},sQ=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+u+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(m===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(m===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(m===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},O6=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,m=e.outChannels/e.inChannels,v="",y="";n&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+m+`;
        int q = d2 - d1 * `+m+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+y+`
        setOutput(result);
      }
    `},T6=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,m=p,v="int xR; int xC; int xCOffset;",y=0;y<h;y++)for(var g=0;g<p;g++)v+=`
          vec4 xTexelR`+y+"C"+2*g+` = vec4(0.);
          vec4 wR`+y+"C"+g+` = vec4(0.);
          vec4 xR`+y+"C"+g+" = vec4(0.);";for(y=0;y<h;y++)for(var b=0;b<m;b++){if(v+=`
          xR = xRCorner + `+y*c+`;
          xC = xCCorner + `+(g=2*b)*f+`;
        `,u===1){if(g<p&&(v+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+y+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+y+"C"+g+" = vec4(previous.zw, xTexelR"+y+"C"+g+`.xy);
                } else {
                  xR`+y+"C"+g+" = vec4(0, 0, xTexelR"+y+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xR`+y+"C"+g+" = xTexelR"+y+"C"+g+`;
              `,g+1<p)){var x=s%2==0?qR(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(v+=`
                  xCOffset = xC + `+s%2+" + "+x+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+y+"C"+g+` = vec4(0.);
                    }
                  `),v+=`
                  xR`+y+"C"+(g+1)+` = vec4(
                    xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.xy);
                `):v+=`
                  xCOffset = xC + `+x+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+y+"C"+(g+1)+" = xTexelR"+y+"C"+(g+2)+`;
                `}}else g<p&&(v+=`
              if(xR >= 0 && xR < `+a+`) {
            `,s%2==1?(v+=`
                xCOffset = xC + 1 - `+u+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+y+"C"+(g+2)+` = vec4(0.);
                }

                xR`+y+"C"+g+` = vec4(
                  xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.zw);
              `,g+1<p&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+u+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+y+"C"+(g+1)+" = vec4(xTexelR"+y+"C"+(g+2)+`.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+u+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+(g+2)+` = vec4(0.);
                }

                xR`+y+"C"+g+` = vec4(
                  xTexelR`+y+"C"+g+".xy, xTexelR"+y+"C"+(g+2)+`.xy);
              `,g+1<p&&(v+=`
                  xR`+y+"C"+(g+1)+` = vec4(
                    xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.zw);
                `)),v+="}");g<p&&(v+=`
            vec4 wTexelR`+y+"C"+g+" = getW("+y+", "+g+`, d1, q);
            wR`+y+"C"+g+" = vec4(wTexelR"+y+"C"+g+".xz, wTexelR"+y+"C"+g+`.xz);
          `,g+1<p&&(v+=`
              vec4 wTexelR`+y+"C"+(g+1)+" = getW("+y+", "+(g+1)+`, d1, q);
              wR`+y+"C"+(g+1)+` =
                vec4(wTexelR`+y+"C"+(g+1)+".xz, wTexelR"+y+"C"+(g+1)+".xz);"))}for(y=0;y<h;y++)for(g=0;g<p;g++)v+="dotProd += xR"+y+"C"+g+" * wR"+y+"C"+g+";";var N="",k="";n&&(N=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,k="result = activation(result);");var j=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+N+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+v+`

        vec4 result = dotProd;
        `+j+`
        `+k+`
        setOutput(result);
      }
    `},lQ=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],l=e[3],u=t[0],c=n[0],f=n[1];this.outputShape=[u,c,f,l];var h=r==="bilinear"?1:0,p=[o-1+".0",s-1+".0"],m=p[0],v=p[1],y=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+m+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+m],g=y[0],b=y[1],x=y[2],N=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],k=N[0],j=N[1],S=N[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+k+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+b+`;
        float width_scale = `+j+`;

        float in_y = `+x+`;
        if( in_y < 0.0 || in_y > `+m+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+S+`;
        if( in_x < 0.0 || in_x > `+v+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},uQ=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Ln(r)+` coords = getOutputCoords();
        int end = `+M6(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+M6(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function M6(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var cQ=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=$g.DENSE;var t=gg(e),n=Ia();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ud(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},dQ=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=$g.DENSE;var t=gg(e),n=Ia();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ud(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},fQ=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),hQ=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},pQ=function(e){this.variableNames=["A"],this.outTexUsage=Yi.DOWNLOAD;var t=Ia();this.outputShape=e,this.userCode=`
      `+N8+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},mQ=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Yi.DOWNLOAD;var t=Ia();this.outputShape=e,this.userCode=`
      `+N8+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},gQ=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Ia(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+p4(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},vQ=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ia(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var c=2*l+u;o+=`
          localCoords = coords;
          if(localCoords[2] + `+u+" < "+e[2]+`) {
            localCoords[2] += `+u+`;
            if(localCoords[1] + `+l+" < "+e[1]+`) {
              localCoords[1] += `+l+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+p4(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},yQ="return real * expR - imag * expI;",bQ="return real * expI + imag * expR;",L6=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},xQ=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),wQ=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=Ln(this.rank),i=function(o,s){var l=o.length;if(l>4)throw Error("Gather for rank "+l+" is not yet supported");if(l===1)return"int(getIndices(resRC))";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<o.length;f++)f===s?c.push("int(getIndices("+u[f]+"))"):c.push(""+u[f]);return c.join()}(e,n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},NQ=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Ln(t.length),a=Ln(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function SQ(e,t){var n=Ia();return yX(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function kQ(e,t){return SX(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function _Q(e,t){return kX(e,t,new Uint16Array([0,1,2,2,1,3]))}function Uv(e,t,n,r,a,i,o){jX(n,r);var s=_X(e,t),l=e.TEXTURE_2D;return ht(e,t,function(){return e.bindTexture(l,s)}),ht(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),ht(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),ht(e,t,function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)}),ht(e,t,function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)}),ht(e,t,function(){return e.texImage2D(l,0,a,n,r,0,i,o,null)}),ht(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function jQ(e,t,n,r,a){var i=$1(n,r);return Uv(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function AQ(e,t,n,r,a){var i=$1(n,r);return Uv(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function CQ(e,t,n,r,a){var i=$1(n,r);return Uv(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function EQ(e,t,n,r,a){var i=zv(n,r);return Uv(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function DQ(e,t,n,r,a){var i=zv(n,r);return Uv(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function PQ(e,t,n,r){return ht(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),N6(e,t,n,"clipSpacePos",r,3,20,0)&&N6(e,t,n,"uv",r,2,20,12)}function OQ(e,t,n,r,a,i,o){var s,l,u;ht(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),l=e.UNSIGNED_BYTE,u=e.RGBA):(s=new Float32Array(r*a*4),l=e.FLOAT,u=o.internalFormatPackedFloat),s.set(i),ht(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,u,r,a,0,e.RGBA,l,s)}),ht(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function TQ(e,t,n,r){ht(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?ht(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):ht(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),ht(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function MQ(e,t,n,r,a){var i=e.createBuffer();ht(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*n*r;return ht(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),ht(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),ht(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function LQ(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function IQ(e,t,n,r,a){var i=$1(n,r),o=i[0],s=i[1],l=new Uint8Array(n*r*4);return ht(e,t,function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function RQ(e,t,n,r,a,i,o,s){var l=e,u=new Float32Array(function(c,f){var h=zv(c,f);return h[0]*h[1]*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function BQ(e,t,n,r){var a=new Float32Array(n*r*4);return ht(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)}),a}var FQ=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Ie().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,hX(n,t)):this.gl=sl(n);var r="WEBGL_color_buffer_float";if(Ie().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=vy(this.gl,this.debug,"OES_texture_float"),Fo(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=vy(this.gl,this.debug,"OES_texture_half_float");else if(Ie().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Fo(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=vy(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ie().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Fo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Fo(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=kQ(this.gl,this.debug),this.indexBuffer=_Q(this.gl,this.debug),this.framebuffer=AX(this.gl,this.debug),this.textureConfig=a4(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Ie().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;ht(n,this.debug,function(){return n.finish()}),ht(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),ht(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),ht(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),ht(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),ht(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),jQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),AQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),CQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),TQ(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,a){this.throwIfDisposed(),OQ(this.gl,this.debug,t,n,r,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),DQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),EQ(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(S6(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ht(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,function(){return IQ(a.gl,a.debug,n,r,a.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,a,i,o){return RQ(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return LQ(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var a=MQ(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,a=this;if(Ie().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=i.clientWaitSync(o,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=o}else Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(n,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,function(){return BQ(a.gl,a.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=bX(n,this.debug,t),a=SQ(n,this.debug),i=wX(n,this.debug);return ht(n,this.debug,function(){return n.attachShader(i,a)}),ht(n,this.debug,function(){return n.attachShader(i,r)}),NX(n,this.debug,i),this.debug&&F5(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=PQ(n,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&ht(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&F5(this.gl,this.debug,this.program),ht(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?EX(this.gl,this.debug,t,n):DX(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),ht(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),PX(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var a=zv(n,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,a){this.setOutputMatrixWriteRegionDriver(r,t,a,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&F5(this.gl,this.debug,this.program),yy(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),ht(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),ht(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=vy(this.gl,this.debug,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return lt(this,void 0,void 0,function(){var n=this;return ut(this,function(r){switch(r.label){case 0:return[4,g6(function(){return n.disposed||n.isQueryAvailable(t,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(t,a.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||g6(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),z5(this.gl,this.debug,t,this.framebuffer),this.debug&&yy(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(z5(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&yy(this.gl)):S6(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var a=this.gl;z5(a,this.debug,t,this.framebuffer),this.debug&&yy(a),this.outputTexture=t,ht(a,this.debug,function(){return a.viewport(0,0,n,r)}),ht(a,this.debug,function(){return a.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,a){var i=this;this.throwIfDisposed(),ht(this.gl,this.debug,function(){return i.gl.scissor(t,n,r,a)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function I6(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var a=n.logicalShape,i=t[r],o=i.shape;if(!na(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!na(s,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+l+" must match")}})}var zQ=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,l=n.outWidth,u=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,h=s.left,p=s.top,m=a*r,v=Ia(),y=f==="channelsLast",g=y?0:1,b=y?1:2,x="",N=0;N<=1;N++)for(var k=0;k<=1;k++)x+=`
          blockIndex = rc.y + `+k+`;
          pos = rc.x + `+N+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+l+")) * "+o+" - "+p+`;
            d0 = offsetY + `+c+" * (pos / "+m+`);

            if(d0 < `+t[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+l+".) * "+i+". - "+h+`.);
              d1 = offsetX + `+u+" * (int(mod(float(pos), "+m+".) / "+a+`.));

              if(d1 < `+t[b]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+y+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*N+k)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*N+k)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+x+`

        `+v.output+` = result;
      }
    `},UQ=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";i=a===.5?"inversesqrt("+l+")":a===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},WQ=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},qQ=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";i=a===.5?"inversesqrt("+l+")":a===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},HQ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,l=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},$Q=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,f=l-1-e.padInfo.top,h=u-1-e.padInfo.left,p=s*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+l+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+u+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+l+" * "+u+` +
                  wR * `+u+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},$5=function(e,t,n,r,a,i,o){n===void 0&&(n=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],l=Math.ceil(s/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",m="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,m="result = activation(result);");var v=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+l+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+l+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+h[0]+`);
          result += (`+f[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+v+`

        `+m+`

        setOutput(result);
      }
    `},VQ=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),GQ=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},KQ=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=gi("rc",t),r=Ln(t),a=function(s,l,u){if(s===1)return"rc > "+l[0];for(var c="",f=s-2;f<s;f++)c+=u[f]+" >= "+l[f],f<s-1&&(c+="||");return c}(t,e,n),i=function(s,l,u,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+l+`;
    bool rEdge = rp1 >= `+u+`;
  `}(t,e[e.length-1],e[e.length-2],n),o=function(s,l){var u=s.length,c=function(f,h){for(var p=[],m=0;m<=1;m++)for(var v=0;v<=1;v++){for(var y=(m===0?"r":"rp1")+", "+(v===0?"c":"cp1"),g=2;g<f;g++)y=h[h.length-1-g]+","+y;p.push(y)}return p}(u,l);return u===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},YQ=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(l,u){return l[0]+e[u]+l[1]});var r=e.length,a=Ln(r),i=t.map(function(l){return l[0]}).join(","),o=t.map(function(l,u){return l[0]+e[u]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},XQ=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(y,g){return y[0]+e[g]+y[1]});for(var r=e.length,a=Ln(r),i=t.map(function(y){return y[0]}).join(","),o=t.map(function(y,g){return y[0]+e[g]}).join(","),s=gi("rc",r),l=gi("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+l.slice(-2).join()+")",f=[a+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+u+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+u+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",m=0,v=r===1?2:4;m<v;m++)p+=`
        `+f[m]+`
        if (`+h+`) {
          result[`+m+"] = float("+n+`);
        } else {
          `+a+` source = rc - start;
          result[`+m+"] = getChannel(getX("+l.join()+"), "+c+`);
        }
      `;p+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},V5=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var h=t==="avg",p="0.0";if(h||(p="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+l+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+u+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+u+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var m=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(m="avgValue / count");var v=4*Math.floor(r/4),y=r%4,g=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+l+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+v+`;
          if (`+(y===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(y===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(y===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+m+`);
      }
    `}},G5=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,m=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var y=t==="avg",g="0.0";if(y||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+m+", "+v+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+l+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+u+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var b=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(b="avgValue / count");var x=4*Math.floor(r/4),N=r%4,k=`
      if (`+y+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+m+", "+v+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+l+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+u+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+u+`, ch)
              );

              `+k+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(N===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+k+`
            } else if (`+(N===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                initializationValue,
                initializationValue
              );

              `+k+`
            } else if (`+(N===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                initializationValue
              );

              `+k+`
            }
          }
          setOutput(`+b+`);
        }
      }
    `}},JQ=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",s="min"):t==="max"&&(o="-1.0 / 1e-20",s="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");var u=4*Math.floor(n/4),c=n%4,f=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";t==="all"?(o="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):t==="any"&&(o="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var p="";a%n>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+l+`);
      }
    `},QQ=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ud(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+p4(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},ZQ=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],l=o[2],u=[n&&s>1?a-1:a,n&&l>1?i-1:i],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],f=u[0]/c[0],h=u[1]/c[1],p=1/f,m=1/h,v=2*Math.ceil(p)+2,y=2*Math.ceil(m)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+m+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},eZ=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},tZ=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`,
          `+l[1]/u[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},nZ=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],l=o[2],u=[n&&s>1?a-1:a,n&&l>1?i-1:i],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],f=u[0]/c[0],h=u[1]/c[1],p=1/f,m=1/h,v=2*Math.ceil(p)+2,y=2*Math.ceil(m)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+m+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+u[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+u[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},rZ=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},aZ=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(i,o){return function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),a=Ln(n);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},iZ=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=gi("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=Ln(n);function s(l){var u=e.map(function(c,f){return function(h,p){return t.indexOf(h)!==-1&&e[h]!==1?e[h]+" - "+p[h]+" - 1":""+p[h]}(f,l)});return"getChannel(getX("+u.join(",")+"), vec2("+u.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return s(l)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(l){return l[n-1]="("+l[n-1]+" + 1)",s(l)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(l){return l[n-2]="("+l[n-2]+" + 1)",s(l)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(l){return l[n-1]="("+l[n-1]+" + 1)",l[n-2]="("+l[n-2]+" + 1)",s(l)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},R6=function(e,t,n,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=Ln(a.length),l=Ln(i.length),u="";n===1?u="i":n===2&&(u="i, j");var c="getIndices("+u+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var h="getUpdates("+f+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+a+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},oZ=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),l=n%4,u=`
        sumValue += dot(values, segFilter);
    `,c="";a%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var f="";a%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+u+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+u+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+u+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+u+`
        }
        setOutput(sumValue);
      }
    `},sZ=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],l=0;l<t.length;l++)s.push(""+i[l]),l<e&&o.push(""+i[l]);r=o.join(),a=s.join()}var u=Ln(n);this.userCode=`
      void main() {
        `+u+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},lZ=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=Ln(this.rank),a="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return K5.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(o,s){return"sourceLoc."+K5[s]+" = start["+s+"] + coords."+K5[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),K5=["x","y","z","w","u","v"],uZ=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=Ln(this.rank),r=gi("coords",this.rank),a=gi("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(c,f){return"start["+f+"]"}).join()+");":t.map(function(c,f){return a[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+u+`
        vec4 result = vec4(0.);
        `+s+`
        `+l+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),cZ=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=Ln(n.length),i=Ln(n.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=n.map(function(l,u){return s++,n.length===1?"coords * strides["+u+"] + begin["+u+"]":"coords["+(s-1)+"] * strides["+u+"] + begin["+u+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+e+`);
      `+a+" strides = "+a+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},dZ=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var a,i=B6(n,r),o=F6(t,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),i===$i.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===$i.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===$i.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===$i.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===$i.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(a),a},e.prototype.releaseTexture=function(t,n,r,a){if(this.freeTextures!=null){var i=F6(n,B6(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],s=o.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(a){t.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function B6(e,t){if(e===Yi.UPLOAD)return $i.PACKED_2X2_FLOAT32;if(e===Yi.RENDER||e==null)return function(n){return Ie().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?$i.PACKED_2X2_FLOAT32:$i.UNPACKED_FLOAT32:n?$i.PACKED_2X2_FLOAT16:$i.UNPACKED_FLOAT16}(t);if(e===Yi.DOWNLOAD||e===Yi.PIXELS)return $i.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function F6(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var fZ=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=Ln(this.rank),i=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],u=[],c=0;c<o.length;c++)u.push("imod("+l[c]+", "+o[c]+")");return u.join()}(e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},hZ=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=Ln(this.rank),i=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],u=new Array(s),c=0;c<o.length;c++)u[o[c]]=l[c];return u.join()}(t);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},pZ=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Ln(this.rank),i=w8("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=i[r];var s="vec2("+o.slice(-2).join()+")",l="++"+i[this.rank-1]+" < "+n[this.rank-1],u="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+u+`;
      if(`+l+`) {
        result[1] = `+u+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+u+`;
        if(`+l+`) {
          result[3] = `+u+`;
        }
      }
      setOutput(result);
    }
    `},m4=1.7580993408473768,g4=1.0507009873554805,It=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},ys="if (isnan(x)) return x;",mZ="return x;",z6="return abs(x);",j8=ys+`
  return (x < 0.0) ? 0.0 : x;
`,A8=ys+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,C8="return (x >= 0.0) ? x : (exp(x) - 1.0);",gZ=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+m4+`;
  float scale = `+g4+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,U6="return -x;",W6="return ceil(x);",q6="return floor(x);",H6="return exp(x);",$6="return exp(x) - 1.0;",vZ=ys+`
  return sin(x);
`,yZ=ys+`
  return cos(x);
`,bZ=ys+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,xZ=ys+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,wZ=ys+`
  return atan(x);
`,NZ=ys+"return log(x + sqrt(x * x + 1.0));",SZ=ys+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,kZ=ys+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ny="return x;",_Z="return x;",E8=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,D8=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,P8=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Mm=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},jZ=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=gi("rc",t),r=Ln(t),a=function(s,l){if(s===1)return"rc";for(var u="",c=0;c<s;c++)u+=l[c],c<s-1&&(u+=",");return u}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Sy={};function ky(e,t){if(t===void 0&&(t=!1),e==="linear")return t?_Z:mZ;if(e==="relu")return t?E8:j8;if(e==="elu")return t?P8:C8;if(e==="relu6")return t?D8:A8;if(e==="prelu")return t?_8:k8;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var AZ=600,CZ=function(e){function t(n){var r,a=e.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!Ie().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=sl(Ie().getNumber("WEBGL_VERSION"));a.binaryCache=((r=Ie().getNumber("WEBGL_VERSION"))in Sy||(Sy[r]={}),Sy[r]),a.gpgpu=new FQ(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=n,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=n.gl.canvas;return a.textureManager=new dZ(a.gpgpu),a.numMBBeforeWarning=Ie().global.screen==null?1024:Ie().global.screen.height*Ie().global.screen.width*window.devicePixelRatio*AZ/1024/1024,a.texData=new f8(a,xe),a}return vs(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,a){if(Ie().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:n,usage:Yi.UPLOAD}),i},t.prototype.move=function(n,r,a,i){if(Ie().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:a,dtype:i,values:r,usage:Yi.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),a=r.values,i=r.dtype,o=r.complexTensors,s=r.slice,l=r.shape,u=r.isPacked;if(s!=null){var c=void 0;c=u?new Mm(l,Ny):new It(l,Ny);var f=this.runWebGLProgram(c,[{dataId:n,shape:l,dtype:i}],i),h=this.readSync(f.dataId);return this.disposeData(f.dataId),h}if(a!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return a;var p,m,v=this.activeTimers!=null;return v&&(p=Ms()),i==="complex64"?m=uk(o.real.dataSync(),o.imag.dataSync()):m=this.getValuesFromTexture(n),v&&(this.downloadWaitMs+=Ms()-p),this.convertAndCacheOnCPU(n,m)},t.prototype.read=function(n){return lt(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A;return ut(this,function(P){switch(P.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(T){return r.push(T)})];if(a=this.texData.get(n),i=a.values,o=a.shape,s=a.slice,l=a.dtype,u=a.complexTensors,c=a.isPacked,s!=null)return f=void 0,f=c?new Mm(o,Ny):new It(o,Ny),h=this.runWebGLProgram(f,[{dataId:n,shape:o,dtype:l}],l),p=this.read(h.dataId),this.disposeData(h.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!Ie().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ie().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return m=null,l!=="complex64"&&Ie().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(n),y=this.texData.get(v.dataId),m=(A=this.gpgpu).createBufferFromTexture.apply(A,[y.texture].concat(gg(o)))),this.pendingRead.set(n,[]),l==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:P.sent(),P.label=2;case 2:return l!=="complex64"?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return b=P.sent(),x=b[0],N=b[1],g=uk(x,N),[3,5];case 4:m==null?g=this.getValuesFromTexture(n):(k=ft(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(m,k)),P.label=5;case 5:return v!=null&&this.disposeData(v.dataId),j=this.convertAndCacheOnCPU(n,g),S=this.pendingRead.get(n),this.pendingRead.delete(n),S.forEach(function(T){return T(j)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,j]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var a=n[r];if(!gX(a))throw Ie().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.isPacked,l=ft(i);if(Ie().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(n),c=this.texData.get(u.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(gg(i))).subarray(0,l);return this.disposeData(u.dataId),f}var h=Ie().getBool("WEBGL_PACK")&&s===!0,p=h?U5(i):i,m=h?new mQ(p):new pQ(p),v=this.runWebGLProgram(m,[{shape:p,dtype:o,dataId:n}],"float32"),y=this.texData.get(v.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,l);return this.disposeData(v.dataId),g},t.prototype.time=function(n){return lt(this,void 0,void 0,function(){var r,a,i,o,s,l,u;return ut(this,function(c){switch(c.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,n(),o=lp(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=lp(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return u=c.sent(),l.kernelMs=XY(u),l.getExtraProfileInfo=function(){return u.map(function(f,h){return{name:s[h],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ms(),endMs:null}},t.prototype.endTimer=function(n){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Ms(),n)},t.prototype.getQueryTime=function(n){return lt(this,void 0,void 0,function(){var r;return ut(this,function(a){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),a=r.texture,i=r.dtype,o=r.texShape,s=r.usage,l=r.isPacked,u=r.slice,c=u&&u.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,s,l)));var h=this.texData.get(n);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return Ie().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=xe.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var a=this.makeOutput(n.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:xe.keep(n.clone()),imag:xe.keep(r.clone())},a},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,a);if(ft(a)===0)return ya([],a,n.dtype);var i=this.texData.get(n.dataId).isPacked,o=c8(n.shape,r,a);if(i||!o){var s=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uZ(a):new lZ(a),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,l)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,a)},t.prototype.shallowSlice=function(n,r,a){var i=this.texData.get(n.dataId),o=this.makeOutput(a,n.dtype),s=this.texData.get(o.dataId);Object.assign(s,i),s.shape=a,s.dtype=n.dtype;var l=d8(r,n.strides);i.slice&&(l+=i.slice.flatOffset),s.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||n.dataId};var u=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,u+1),o},t.prototype.stridedSlice=function(n,r,a,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,a,i);var o=u4(r,a,i);if(o.some(function(l){return l===0}))return ya([],o);var s=new cZ(r,i,o);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var a=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iZ(n.shape,r):new aZ(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var a=n.map(function(p){return Ro(p)}),i=n.map(function(p){return Rs(p)});return ma(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>Ie().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(n.length/2),s=this.concat(n.slice(0,o),r),l=this.concat(n.slice(o),r);return this.concat([s,l],r)}if(Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var u=new eQ(n.map(function(p){return p.shape}),r);return this.compileAndRun(u,n)}var c=cp(n.map(function(p){return p.shape}),r),f=n.map(function(p){return p.as2D(-1,ft(p.shape.slice(r)))}),h=new ZJ(f.map(function(p){return p.shape}));return this.compileAndRun(h,f).reshape(c)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,U6,n.dtype);var r=new It(n.shape,U6);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,a,i){var o=a?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],l=a?n.shape[1]:n.shape[2],u=n.shape[0];if((o===1||s===1)&&l>1e3){a&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(u,l,1),f=s===1?2:1,h=s===1?r.as3D(u,1,l):r;return this.multiply(c,h).sum(f,!0)}var p=ga(n.dtype,r.dtype),m=new $5(n.shape,[u,o,s],a,i);return this.compileAndRun(m,[n,r],p)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,i=n.transposeA,o=n.transposeB,s=n.bias,l=n.activation,u=n.preluActivationWeights,c=i?r.shape[2]:r.shape[1],f=o?a.shape[1]:a.shape[2],h=r.shape[0],p=ga(r.dtype,a.dtype),m=s!=null,v=u!=null,y=l?ky(l,!0):null,g=new $5(r.shape,[h,c,f],i,o,m,y,v),b=[r,a];return s&&b.push(s),u&&b.push(u),this.compileAndRun(g,b,p)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var a=this.texData.get(n.dataId),i=this.texData.get(r.dataId),o=new E6(KJ,n.shape,r.shape),s=new E6(YJ,n.shape,r.shape),l=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],u=this.compileAndRun(o,l),c=this.compileAndRun(s,l),f=this.complex(u,c);return u.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,D6,n.dtype);var h=new ar(D6,n.shape,r.shape);return this.compileAndRun(h,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,a,i,o,s){var l=[n,r,a],u=null;s!=null&&(u=s.shape,l.push(s));var c=null;if(o!=null&&(c=o.shape,l.push(o)),Ie().getBool("WEBGL_PACK_NORMALIZATION")){var f=new GJ(n.shape,r.shape,a.shape,u,c,i);return this.compileAndRun(f,l)}var h=new VJ(n.shape,r.shape,a.shape,u,c,i);return this.compileAndRun(h,l)},t.prototype.localResponseNormalization4D=function(n,r,a,i,o){var s=Ie().getBool("WEBGL_PACK_NORMALIZATION")?new qQ(n.shape,r,a,i,o):new UQ(n.shape,r,a,i,o);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,a,i,o,s,l){var u=new WQ(r.shape,i,o,s,l);return this.compileAndRun(u,[r,a,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var a=this.readSync(n.dataId).map(function(o){return ax(o)});return b8(Pt(n.shape,n.dtype,a),r)}var i=new fZ(n.shape,r);return this.compileAndRun(i,[n])},t.prototype.pad=function(n,r,a){var i=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XQ(n.shape,r,a):new YQ(n.shape,r,a);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var a=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pZ(n.shape,r):new hZ(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.gather=function(n,r,a){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,a);var i=new wQ(n.shape,r.size,a);return this.compileAndRun(i,[n,r])},t.prototype.batchToSpaceND=function(n,r,a){ue(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(f,h){return f*h}),o=cx(n.shape,r,i),s=dx(o.length,r.length),l=fx(n.shape,r,i),u=o8(a,r.length),c=s8(l,a,r.length);return n.reshape(o).transpose(s).reshape(l).slice(u,c)},t.prototype.spaceToBatchND=function(n,r,a){ue(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(h,p){return h*p}),o=[[0,0]];o.push.apply(o,a);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var l=n.pad(o),u=cx(l.shape,r,i,!1),c=dx(u.length,r.length,!1),f=fx(l.shape,r,i,!1);return l.reshape(u).transpose(c).reshape(f)},t.prototype.reduce=function(n,r,a){var i=n.shape[0],o=n.shape[1],s=W5(o),l=new JQ({windowSize:s,inSize:o,batchSize:i},r),u=this.compileAndRun(l,[n],a);return u.shape[1]===1?u:this.reduce(u,r,a)},t.prototype.argReduce=function(n,r,a){a===void 0&&(a=null);var i=n.shape[0],o=n.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var s=W5(o),l=new RJ({windowSize:s,inSize:o,batchSize:i},r,a==null),u=[n];a!=null&&u.push(a);var c=this.compileAndRun(l,u,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},t.prototype.argReducePacked=function(n,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:n.shape,o=W5(i[i.length-1]),s=new qJ(i,o,r,a==null),l=a==null?[n]:[n,a],u=this.compileAndRun(s,l,"int32");return u.rank===n.rank?this.argReducePacked(n,r,u):u},t.prototype.sum=function(n,r){qi("sum",r,n.rank);var a=Oa(n.shape,r),i=a[0],o=ft(a[1]),s=n.as2D(-1,o),l=M5(n.dtype);return this.reduce(s,"sum",l).reshape(i)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var a=Oa(n.shape,r),i=a[0],o=ft(a[1]),s=n.as2D(-1,o),l=M5(n.dtype);return this.reduce(s,"prod",l).reshape(i)},t.prototype.unsortedSegmentSum=function(n,r,a){var i=0,o=ll([i],n.rank),s=n;o!=null&&(s=n.transpose(o),i=ul(1,n.rank)[0]);var l=function(p,m,v){for(var y=[],g=p.length,b=0;b<g;b++)b!==m?y.push(p[b]):y.push(v);return y}(s.shape,i,a),u=ft([s.shape[i]]),c=s.as2D(-1,u),f=M5(n.dtype),h=this.segOpCompute(c,"unsortedSegmentSum",r,f,a).reshape(l);return o!=null&&(h=h.transpose(i4(o))),h},t.prototype.segOpCompute=function(n,r,a,i,o){var s=n.shape[0],l=n.shape[1],u=function(h,p){var m,v=!1;for(h<=u8?(m=h,v=!0):m=ek(h,Math.floor(Math.sqrt(h)));!v;)m>p||m===h?v=!0:m=ek(h,m+1);return m}(l,o),c=new oZ({windowSize:u,inSize:l,batchSize:s,numSegments:o}),f=this.compileAndRun(c,[n,a],i);return f.shape[1]===o?f:(a=ux(0,o).tile([l/u]),this.segOpCompute(f,r,a,i,o))},t.prototype.argMinMaxReduce=function(n,r,a){var i=[r];if(qi("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,n.rank),!Ie().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var o=Oa(n.shape,i),s=o[0],l=ft(o[1]),u=n.as2D(-1,l);return this.argReduce(u,a).reshape(s)}return this.argReducePacked(n,a)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,a,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var o=new uQ(n.shape,a,i);return this.compileAndRun(o,[n])},t.prototype.equal=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var a=new ar("return float(a == b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new ar("return float(a != b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new ar("return float(a < b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new ar("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new ar("return float(a > b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new ar("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new It(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new ar("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new ar("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.select=function(n,r,a){var i=new sZ(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,a],ga(r.dtype,a.dtype))},t.prototype.where=function(n){sx("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return h4(n.shape,r)},t.prototype.topk=function(n,r,a){return x8(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){qi("min",r,n.rank);var a=Oa(n.shape,r),i=a[0],o=ft(a[1]),s=n.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ar(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.mod=function(n,r){var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ar(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);qi("max",r,n.rank);var a=Oa(n.shape,r),i=a[0],o=ft(a[1]),s=n.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ar(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.all=function(n,r){qi("all",r,n.rank);var a=Oa(n.shape,r),i=a[0],o=ft(a[1]),s=n.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(n,r){qi("any",r,n.rank);var a=Oa(n.shape,r),i=a[0],o=ft(a[1]),s=n.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.realDivide=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new ar(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new ar(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,q5);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var a=ga(n.dtype,r.dtype);if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,q5,a);var i=new ar(q5,n.shape,r.shape);return this.compileAndRun(i,[n,r],a)},t.prototype.packedUnaryOp=function(n,r,a){var i=new Mm(n.shape,r);return this.compileAndRun(i,[n],a)},t.prototype.packedBinaryOp=function(n,r,a,i,o){o===void 0&&(o=!1);var s=new jl(a,n.shape,r.shape,o);return this.compileAndRun(s,[n,r],i)},t.prototype.complexSeparableBinaryOp=function(n,r,a){var i=this,o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),l=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(h){var p=h[0],m=h[1],v=i.makeComplexComponentTensorInfo(n,p),y=i.makeComplexComponentTensorInfo(r,m),g=new ar(a,n.shape,r.shape);return i.compileAndRun(g,[v,y],ga(p.dtype,m.dtype))}),u=l[0],c=l[1],f=this.complex(u,c);return u.dispose(),c.dispose(),f},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>Ie().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),a=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([a,i])}var o=n.map(function(u){return u.dtype}).reduce(function(u,c){return ga(u,c)}),s=n.map(function(u){return u.shape}),l=Ie().getBool("WEBGL_PACK")?new IJ(n[0].shape,s):new LJ(n[0].shape,s);return this.compileAndRun(l,n,o)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,H5);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var a=ga(n.dtype,r.dtype);if(Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,H5,n.dtype);var i=new ar(H5,n.shape,r.shape);return this.compileAndRun(i,[n,r],a)},t.prototype.pow=function(n,r){var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ar(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=ga(n.dtype,r.dtype);return this.compileAndRun(a,[n,r],i)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,W6,n.dtype);var r=new It(n.shape,W6);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,q6,n.dtype);var r=new It(n.shape,q6);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new It(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new It(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new It(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new It(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new It(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,H6,n.dtype);var r=new It(n.shape,H6);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,$6,n.dtype);var r=new It(n.shape,$6);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var a=qr([r],n.shape),i=this.max(n,a),o=Ni(i.shape,a),s=this.subtract(n,i.reshape(o)),l=this.exp(s),u=this.sum(l,a).reshape(o);return this.realDivide(l,u)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new It(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new It(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new It(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new It(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new It(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=Ie().getBool("WEBGL_PACK")?new Mm(n.shape,E8):new It(n.shape,j8),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=Ie().getBool("WEBGL_PACK")?new Mm(n.shape,D8):new It(n.shape,A8),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(_8,n.shape,r.shape):new ar(k8,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.elu=function(n){if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,P8,n.dtype);var r=new It(n.shape,C8);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new ar("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.selu=function(n){var r=new It(n.shape,gZ);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new It(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,a){var i,o=(i=Ie().getBool("WEBGL_PACK_CLIP")?new JJ(n.shape):new XJ(n.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[n],null,o)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,z6,n.dtype);var r=new It(n.shape,z6);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),a=new QJ(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(a,i)},t.prototype.sigmoid=function(n){var r=new It(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new It(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new It(n.shape,vZ);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new It(n.shape,yZ);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new It(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new It(n.shape,bZ);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new It(n.shape,xZ);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new It(n.shape,wZ);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ar(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.sinh=function(n){var r=new It(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new It(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new It(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new It(n.shape,NZ);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new It(n.shape,SZ);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new It(n.shape,kZ);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new It(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var a=new It(n.shape,function(i){return i===void 0&&(i=0),ys+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[n])},t.prototype.conv2dByMatMul=function(n,r,a,i,o,s){var l=n.shape,u=this.texData.get(n.dataId),c=a.inChannels,f=l[0]*l[1]*l[2],h=a.outChannels,p=a.dataFormat==="channelsLast",m=(f===1||h===1)&&c>1e3,v=l[2]%2!=0&&!!u.isPacked;if(m||!Ie().getBool("WEBGL_LAZILY_UNPACK")||!Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!v){var y=p?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],g=this.reshape(n,[1,y,a.inChannels]),b=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),a.outShape)}var x=p?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),N={dataId:n.dataId,shape:[1,x,a.inChannels],dtype:n.dtype},k=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,ue(xy(u.shape,N.shape),function(){return"packed reshape "+u.shape+" to "+N.shape+" isn't free"});var j=this.reshape(r,[1,a.inChannels,a.outChannels]),S=this.fusedBatchMatMul({a:N,b:j,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),A=this.texData.get(S.dataId);return ue(A.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=k,A.shape=a.outShape,xe.makeTensorFromDataId(S.dataId,a.outShape,S.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,a,i,o,s){var l=a.filterWidth,u=a.filterHeight,c=a.inChannels,f=a.outWidth,h=a.outHeight,p=a.dataFormat==="channelsLast",m=l*u*c,v=h*f,y=[m,v],g=n.squeeze([0]),b=r.reshape([1,m,-1]),x=new zQ(y,g.shape,a),N=this.compileAndRun(x,[g]).reshape([1,y[0],y[1]]),k=i!=null,j=s!=null,S=o?ky(o,!0):null,A=new $5(N.shape,[1,v,a.outChannels],!0,!1,k,S,j),P=[N,b];i&&P.push(i),j&&P.push(s);var T=this.compileAndRun(A,P);return p?T.reshape([1,h,f,a.outChannels]):T.reshape([1,a.outChannels,h,f])},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,l=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,s,l);if(Ie().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,s,l);var u=o!=null,c=l!=null,f=s?ky(s,!1):null,h=new P6(i,u,f,c),p=[r,a];return o&&p.push(o),l&&p.push(l),this.compileAndRun(h,p)},t.prototype.conv2d=function(n,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,a);if(Ie().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,a);var i=new P6(a);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerInput=function(n,r,a){var i=new nQ(a);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerFilter=function(n,r,a){var i=new tQ(a);return this.compileAndRun(i,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,a=n.input,i=n.filter,o=n.convInfo,s=n.bias,l=n.activation,u=n.preluActivationWeights,c=Ie().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,f=l?ky(l,c):null,h=[a,i],p=s!=null,m=u!=null;return p&&h.push(s),m&&h.push(u),c?(r=new T6(o,p,f,m),this.compileAndRun(r,h)):(r=new O6(o,p,f,m),this.compileAndRun(r,h))},t.prototype.depthwiseConv2D=function(n,r,a){var i;return Ie().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new T6(a),this.compileAndRun(i,[n,r])):(i=new O6(a),this.compileAndRun(i,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,a){var i=new oQ(a);return this.compileAndRun(i,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){var i=new iQ(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3d=function(n,r,a){var i=new sQ(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerInput=function(n,r,a){var i=new aQ(a);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerFilter=function(n,r,a){var i=new rQ(a);return this.compileAndRun(i,[n,r])},t.prototype.maxPool=function(n,r){var a=new V5(r,"max",!1);return this.compileAndRun(a,[n])},t.prototype.avgPool=function(n,r){var a=new V5(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,a,i){var o=new V5(i,"max",!0),s=this.compileAndRun(o,[r]),l=new HQ(i),u=this.compileAndRun(l,[n,s],r.dtype);return s.dispose(),u},t.prototype.avgPoolBackprop=function(n,r,a){var i=new HJ(a);return this.compileAndRun(i,[n],r.dtype)},t.prototype.cast=function(n,r){return m8(n,r,this)},t.prototype.unstack=function(n,r){for(var a=n.shape[r],i=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(i[o++]=n.shape[s]);var l=new Array(n.rank).fill(0),u=n.shape.slice();u[r]=1;var c=new Array(a);for(s=0;s<c.length;s++)l[r]=s,c[s]=this.slice(n,l,u).reshape(i);return c},t.prototype.avgPool3d=function(n,r){var a=new G5(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,a){var i=new $J(a);return this.compileAndRun(i,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var a=new G5(r,"max",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,a,i){var o=new G5(i,"max",!0),s=this.compileAndRun(o,[r]),l=new $Q(i),u=this.compileAndRun(l,[n,s],r.dtype);return s.dispose(),u},t.prototype.reshape=function(n,r){var a=this.texData.get(n.dataId);if(a.isPacked&&!xy(n.shape,r)&&(a.texture===null||!xy(a.shape,r))){var i=this.packedReshape(n,r);return xe.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return lk(n,r)},t.prototype.resizeBilinear=function(n,r,a,i){var o=Ie().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new tZ(n.shape,r,a,i):new eZ(n.shape,r,a,i);return this.compileAndRun(o,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,a){var i=new ZQ(n,r,a);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,r,a,i){var o=new rZ(n.shape,r,a,i);return this.compileAndRun(o,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){var i=new nZ(n,r,a);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,r,a,i){var o=r?n:tu(n),s=o.shape[0],l=o.shape[1],u=new VQ(s,l,a),c=u.getCustomSetupFunc(i);return this.compileAndRun(u,[o],"int32",c)},t.prototype.oneHot=function(n,r,a,i){var o=new GQ(n.size,r,a,i);return this.compileAndRun(o,[n])},t.prototype.diag=function(n){var r=new hQ(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,a,i,o){return sx("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),d4(n.dataSync(),r.dataSync(),a,i,o)},t.prototype.cropAndResize=function(n,r,a,i,o,s){var l=new lQ(n.shape,r.shape,i,o,s);return this.compileAndRun(l,[n,r,a],"float32")},t.prototype.depthToSpace=function(n,r,a){ue(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=n.shape[0],o=a==="NHWC"?n.shape[1]:n.shape[2],s=a==="NHWC"?n.shape[2]:n.shape[3],l=a==="NHWC"?n.shape[3]:n.shape[1],u=o*r,c=s*r,f=l/(r*r),h=new fQ(a==="NHWC"?[i,u,c,f]:[i,f,u,c],r,a);return this.compileAndRun(h,[n])},t.prototype.split=function(n,r,a){return y8(n,r,a)},t.prototype.scatterND=function(n,r,a){var i=hx(0,n,a),o=i.sliceRank,s=i.numUpdates,l=i.sliceSize,u=i.strides,c=i.outputSize,f=[c/l,l],h=n.reshape([s,o]),p=r.reshape([s,l]);if(c===0)return lk(ya([]),a);var m=et(0),v=new R6(s,o,h.rank,p.rank,u,f);return this.compileAndRun(v,[p,h,m]).reshape(a)},t.prototype.sparseToDense=function(n,r,a,i){var o=hx(0,n,a),s=o.sliceRank,l=o.numUpdates,u=o.strides,c=o.outputSize,f=new R6(l,s,n.rank,r.rank,u,[c,1]);return this.compileAndRun(f,[r,n,i]).reshape(a)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var a=this.texData.get(n.dataId),i=new L6(yQ,n.shape,r),o=new L6(bQ,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag)],l=this.compileAndRun(i,s),u=this.compileAndRun(o,s),c=this.complex(l,u).as2D(n.shape[0],n.shape[1]);return l.dispose(),u.dispose(),c},t.prototype.gatherND=function(n,r){var a=r.shape,i=a[a.length-1],o=l8(n,r),s=o[0],l=o[1],u=o[2],c=o[3],f=r.reshape([l,i]),h=n.reshape([n.size/u,u]),p=new NQ(i,c,[l,u]);return this.compileAndRun(p,[h,f]).reshape(s)},t.prototype.fill=function(n,r,a){if((a=a||Bv(r))==="string"){var i=rx(a,ft(n));return i.fill(r),xe.makeTensor(i,n,a,this)}var o=new xQ(n,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,a){return g8(n,r,a)},t.prototype.makeTensorInfo=function(n,r){var a=this.write(null,n,r);return this.texData.get(a).usage=null,{dataId:a,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var a=this.makeTensorInfo(n,r).dataId;return xe.makeTensorFromDataId(a,n,r,this)},t.prototype.unpackTensor=function(n){var r=new jZ(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new KQ(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var a=[ix(n.shape)].concat(ox(n.shape)),i={dtype:n.dtype,shape:a,dataId:n.dataId},o=[ix(r)].concat(ox(r)),s=new QQ(o,a),l=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:l.dataId,shape:r,dtype:l.dtype}},t.prototype.decode=function(n){var r,a=this.texData.get(n),i=a.isPacked,o=a.shape,s=a.dtype,l=U5(o);return r=i?new dQ(l):new cQ(l),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:l,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,a,i,o){var s=this;o===void 0&&(o=!1);var l=this.makeTensorInfo(n.outputShape,a),u=this.texData.get(l.dataId);if(n.packedOutput&&(u.isPacked=!0),n.outPackingScheme===$g.DENSE){var c=gg(n.outputShape);u.texShape=c.map(function(x){return 2*x})}if(n.outTexUsage!=null&&(u.usage=n.outTexUsage),ft(l.shape)===0)return u.values=qg(l.dtype,0),l;var f=[],h=r.map(function(x){if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var N=s.texData.get(x.dataId);if(N.texture==null){if(!n.packedInputs&&ft(x.shape)<=Ie().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:N.values};n.packedInputs&&(N.isPacked=!0,N.shape=x.shape)}else if(!!N.isPacked!=!!n.packedInputs)x=N.isPacked?s.unpackTensor(x):s.packTensor(x),f.push(x),N=s.texData.get(x.dataId);else if(N.isPacked&&!xy(N.shape,x.shape)){var k=x,j=x.shape;x.shape=N.shape,x=s.packedReshape(x,j),f.push(x),N=s.texData.get(x.dataId),k.shape=j}return s.uploadToGPU(x.dataId),{shape:x.shape,texData:N,isUniform:!1}});this.uploadToGPU(l.dataId);var p,m={shape:l.shape,texData:u,isUniform:!1},v=function(x,N,k){var j="";N.concat(k).forEach(function(P){var T=P.texData!=null&&P.texData.slice!=null&&P.texData.slice.flatOffset>0,E=P.isUniform?"uniform":P.texData.texShape;j+=P.shape+"_"+E+"_"+T});var S=x.userCode,A=x.constructor.name;return A+="_"+j+"_"+S}(n,h,m),y=this.getAndSaveBinary(v,function(){return function(x,N,k,j){var S=N.userCode,A=k.map(function(W,z){var J={logicalShape:W.shape,texShape:W.isUniform?null:W.texData.texShape,isUniform:W.isUniform,isPacked:!W.isUniform&&W.texData.isPacked,flatOffset:null};return W.texData!=null&&W.texData.slice!=null&&W.texData.slice.flatOffset>0&&(J.flatOffset=W.texData.slice.flatOffset),{name:N.variableNames[z],shapeInfo:J}}),P=A.map(function(W){return W.shapeInfo}),T={logicalShape:j.shape,texShape:j.texData.texShape,isUniform:!1,isPacked:j.texData.isPacked,flatOffset:null},E=BJ(A,T,S,N.packedInputs),D=x.createProgram(E),R=null,F=x.getUniformLocation(D,"NAN",!1);Ie().getNumber("WEBGL_VERSION")===1&&(R=x.getUniformLocation(D,"INFINITY",!1));for(var H={},B=0;B<N.variableNames.length;B++){var U=N.variableNames[B];H[U]=x.getUniformLocation(D,U,!1),H["offset"+U]=x.getUniformLocation(D,"offset"+U,!1)}return{program:N,source:E,webGLProgram:D,uniformLocations:H,inShapeInfos:P,outShapeInfo:T,infLoc:R,nanLoc:F}}(s.gpgpu,n,h,m)}),g=this.activeTimers!=null;if(g&&(p=this.startTimer()),function(x,N,k,j,S){I6(N.inShapeInfos,k),I6([N.outShapeInfo],[j]);var A=j.texData.texture,P=j.texData.texShape;j.texData.isPacked?x.setOutputPackedMatrixTexture(A,P[0],P[1]):x.setOutputMatrixTexture(A,P[0],P[1]),x.setProgram(N.webGLProgram),Ie().getNumber("WEBGL_VERSION")===1&&N.infLoc!==null&&x.gl.uniform1f(N.infLoc,1/0),N.nanLoc!==null&&x.gl.uniform1f(N.nanLoc,NaN),k.forEach(function(T,E){var D=N.program.variableNames[E],R=N.uniformLocations[D],F=N.uniformLocations["offset"+D];if(R!=null)if(T.isUniform)if(ft(T.shape)<2)x.gl.uniform1f(R,T.uniformValues[0]);else{var H=T.uniformValues;H instanceof Float32Array||(H=new Float32Array(H)),x.gl.uniform1fv(R,H)}else T.texData.slice!=null&&F!=null&&x.gl.uniform1i(F,T.texData.slice.flatOffset),x.setInputMatrixTexture(T.texData.texture,R,E)}),S!=null&&S(x,N.webGLProgram),x.executeProgram()}(this.gpgpu,y,h,m,i),f.forEach(function(x){return s.disposeData(x.dataId)}),g&&(p=this.endTimer(p),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(p)})),!Ie().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&o===!1){var b=this.unpackTensor(l);return this.disposeData(l.dataId),b}return l},t.prototype.compileAndRun=function(n,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var s=this.runWebGLProgram(n,r,a,i,o);return xe.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(Ie().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=at(function(){if(!Ie().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Ie().getBool("DEBUG");Ie().set("DEBUG",!1);var a=n.abs(et(1e-8)).dataSync()[0];if(Ie().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.values,l=a.texture,u=a.usage,c=a.isPacked;if(l==null){var f,h=this.activeTimers!=null;h&&(f=Ms());var p=a.texShape;if(p==null&&(p=MX(i,c),a.texShape=p),s!=null){var m=U5(i),v=void 0,y=p[1],g=p[0],b=s instanceof Uint8Array;c?(y=(r=zv(p[0],p[1]))[0],g=r[1],v=new vQ(m,[g,y],b)):v=new gQ(m,[g,y],b);var x=this.makeTensorInfo([g,y],o);this.texData.get(x.dataId).usage=b?Yi.PIXELS:Yi.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),y,g,s);var N=this.runWebGLProgram(v,[x],o,null,!0),k=this.texData.get(N.dataId);a.texture=k.texture,a.texShape=k.texShape,a.isPacked=k.isPacked,a.usage=k.usage,this.disposeData(x.dataId),this.texData.delete(N.dataId),a.values=null,h&&(this.uploadWaitMs+=Ms()-f)}else{var j=this.acquireTexture(p,u,o,c);a.texture=j}}},t.prototype.convertAndCacheOnCPU=function(n,r){var a=this.texData.get(n),i=a.dtype;return this.releaseGPUData(n),r!=null&&(a.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var l=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),u=0;u<l.length;++u)l[u]=Math.round(o[u]);return l}throw new Error("Unknown dtype "+s)}(r,i)),a.values},t.prototype.acquireTexture=function(n,r,a,i){if(this.numBytesInGPU+=this.computeBytes(n,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*HR(r)},t}(h8);JR()&&xe.registerBackend("webgl",function(){return new CZ},2);var EZ=pe({square_:function(e){var t=oe(e,"x","square"),n=[t];return xe.runKernelFunc(function(r,a){return a([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),Gg="SquaredDifference",O8=pe({squaredDifference_:function(e,t){var n,r=oe(e,"a","squaredDifference"),a=oe(t,"b","squaredDifference");n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return xe.runKernelFunc(function(s,l){var u=s.squaredDifference(r,a);return l([r,a]),u},i,function(s,l){var u=l[0],c=l[1],f=et(2);return{a:function(){return s.mul(u.sub(c).mul(f))},b:function(){return s.mul(c.sub(u).mul(f))}}},Gg,{},o,[])}}),DZ=pe({abs_:function(e){var t=oe(e,"x","abs");return t.dtype==="complex64"?xe.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):xe.runKernelFunc(function(n,r){var a=n.abs(t);return r([t]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return n.mul(a.toFloat().step(-1))}}},"Abs")}}),PZ=pe({acos_:function(e){var t=oe(e,"x","acos");return xe.runKernelFunc(function(n,r){var a=n.acos(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(et(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),OZ=pe({acosh_:function(e){var t=oe(e,"x","acosh");return xe.runKernelFunc(function(n,r){var a=n.acosh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),TZ=pe({asin_:function(e){var t=oe(e,"x","asin");return xe.runKernelFunc(function(n,r){var a=n.asin(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(et(1).sub(a.toFloat().square()).sqrt())}}})}}),MZ=pe({asinh_:function(e){var t=oe(e,"x","asinh");return xe.runKernelFunc(function(n,r){var a=n.asinh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.divStrict(et(1).add(a.toFloat().square()).sqrt())}}})}}),LZ=pe({atan_:function(e){var t=oe(e,"x","atan");return xe.runKernelFunc(function(n,r){var a=n.atan(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().square().add(1))}}})}}),IZ=pe({atanh_:function(e){var t=oe(e,"x","atanh");return xe.runKernelFunc(function(n,r){var a=n.atanh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(et(1).sub(a.toFloat().square()))}}})}}),RZ=pe({ceil_:function(e){var t=oe(e,"x","ceil");return xe.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),v4=pe({clipByValue_:function(e,t,n){var r=oe(e,"x","clipByValue");ue(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var a=[r],i={min:t,max:n};return xe.runKernelFunc(function(o,s){var l=o.clip(r,t,n);return s([r]),l},{x:r},function(o,s){var l=s[0];return{x:function(){return o.where(l.greaterEqual(t).logicalAnd(l.lessEqual(n)),Xt(o))}}},"ClipByValue",i,a)}}),BZ=pe({cos_:function(e){var t=oe(e,"x","cos"),n=[t];return xe.runKernelFunc(function(r,a){var i=r.cos(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),FZ=pe({cosh_:function(e){var t=oe(e,"x","cosh");return xe.runKernelFunc(function(n,r){var a=n.cosh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(n)}}})}}),zZ=pe({erf_:function(e){var t=oe(e,"x","erf");return ue(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),xe.runKernelFunc(function(n,r){var a=n.erf(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),ck=pe({exp_:function(e){var t=oe(e,"x","exp");return xe.runKernelFunc(function(n,r){var a=n.exp(t);return r([a]),a},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),UZ=pe({expm1_:function(e){var t=oe(e,"x","expm1");return xe.runKernelFunc(function(n,r){var a=n.expm1(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.exp())}}})}}),WZ=pe({floor_:function(e){var t=oe(e,"x","floor");return xe.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),qZ=pe({log_:function(e){var t=oe(e,"x","log"),n=[t];return xe.runKernelFunc(function(r,a){var i=r.log(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},n)}}),HZ=pe({log1p_:function(e){var t=oe(e,"x","log1p");return xe.runKernelFunc(function(n,r){var a=n.log1p(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.add(1))}}})}}),$Z=pe({logSigmoid_:function(e){var t=oe(e,"x","logSigmoid");return xe.runKernelFunc(function(n,r){var a=n.softplus(t.neg()).neg();return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.neg().sigmoid())}}})}}),vx=pe({neg_:function(e){var t=oe(e,"x","neg"),n=[t];return xe.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),VZ=pe({reciprocal_:function(e){var t=oe(e,"x","reciprocal");return xe.runKernelFunc(function(n,r){var a=n.reciprocal(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.square().neg())}}})}}),GZ=pe({round_:function(e){var t=oe(e,"x","round");return xe.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),T8=pe({rsqrt_:function(e){var t=oe(e,"x","rsqrt"),n=[t];return xe.runKernelFunc(function(r,a){var i=r.rsqrt(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),M8=pe({sigmoid_:function(e){var t=oe(e,"x","sigmoid");return xe.runKernelFunc(function(n,r){var a=n.sigmoid(t);return r([a]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return n.mul(a.mul(et(1).sub(a)))}}},"Sigmoid")}}),KZ=pe({sign_:function(e){var t=oe(e,"x","sign");return xe.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),YZ=pe({isNaN_:function(e){var t=oe(e,"x","isNaN");return xe.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),XZ=pe({isInf_:function(e){var t=oe(e,"x","isInf");return xe.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),JZ=pe({isFinite_:function(e){var t=oe(e,"x","isFinite");return xe.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return Xt(n)}}})}}),QZ=pe({sin_:function(e){var t=oe(e,"x","sin"),n=[t];return xe.runKernelFunc(function(r,a){var i=r.sin(t);return a([t]),i},{x:t},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},n)}}),ZZ=pe({sinh_:function(e){var t=oe(e,"x","sinh");return xe.runKernelFunc(function(n,r){var a=n.sinh(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(n)}}})}}),eee=pe({softplus_:function(e){var t=oe(e,"x","softplus");return xe.runKernelFunc(function(n,r){var a=n.softplus(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.mul(a.sigmoid())}}})}}),tee=pe({sqrt_:function(e){var t=oe(e,"x","sqrt");return xe.runKernelFunc(function(n,r){var a=n.sqrt(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().sqrt().mul(2))}}})}}),nee=pe({step_:function(e,t){t===void 0&&(t=0);var n=oe(e,"x","step");return xe.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return Xt(r)}}})}}),ree=pe({tan_:function(e){var t=oe(e,"x","tan");return xe.runKernelFunc(function(n,r){var a=n.tan(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return n.div(a.cos().square())}}})}}),aee=pe({tanh_:function(e){var t=oe(e,"x","tanh");return xe.runKernelFunc(function(n,r){var a=n.tanh(t);return r([a]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return et(1).sub(a.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function L8(e,t,n,r,a,i){var o,s,l=oe(e,"x","batchNorm"),u=oe(t,"mean","batchNorm"),c=oe(n,"variance","batchNorm");return a!=null&&(o=oe(a,"scale","batchNorm")),r!=null&&(s=oe(r,"offset","batchNorm")),ue(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),ue(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."}),ue(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),o!=null&&ue(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&ue(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Wv(l,u,c,s,o,i)}function I8(e,t,n,r,a,i){var o,s,l=oe(e,"x","batchNorm"),u=oe(t,"mean","batchNorm"),c=oe(n,"variance","batchNorm");return a!=null&&(o=oe(a,"scale","batchNorm")),r!=null&&(s=oe(r,"offset","batchNorm")),ue(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),ue(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."}),ue(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),o!=null&&ue(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&ue(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Wv(l,u,c,s,o,i)}function R8(e,t,n,r,a,i){var o,s,l=oe(e,"x","batchNorm"),u=oe(t,"mean","batchNorm"),c=oe(n,"variance","batchNorm");return a!=null&&(o=oe(a,"scale","batchNorm")),r!=null&&(s=oe(r,"offset","batchNorm")),ue(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),ue(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."}),ue(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),o!=null&&ue(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&ue(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Wv(l,u,c,s,o,i)}function Wv(e,t,n,r,a,i){i==null&&(i=.001);var o,s,l,u=oe(e,"x","batchNorm"),c=oe(t,"mean","batchNorm"),f=oe(n,"variance","batchNorm");a!=null&&(o=oe(a,"scale","batchNorm")),r!=null&&(s=oe(r,"offset","batchNorm")),ue(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ue(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ue(o==null||c.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=u.rank===0||u.rank===1?u.as4D(1,1,1,u.size):u.rank===2?u.as4D(1,1,u.shape[0],u.shape[1]):u.rank===3?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u;var h=[u,c,f,o];return xe.runKernelFunc(function(p,m){var v=p.batchNormalization(l,_y(c),_y(f),i,_y(o),_y(s));return m([u,c,f,o]),v},{x:u,mean:c,variance:f,scale:o,offset:s},function(p,m){var v=m,y=v[0],g=v[1],b=v[2],x=v[3],N=x??et(1),k=Ur(g.shape,l.shape),j=[];if(g.rank===1){for(var S=0;S<l.shape.length-1;++S)j.push(l.shape[S]);j.push(1)}var A=y.sub(g),P=p.mul(N),T=T8(b.add(et(i))),E=T.mul(T).mul(T).mul(et(-.5));return{x:function(){return g.rank===1?p.mul(Bh(T.as4D(1,1,1,g.shape[0]),j)).mul(N).reshape(y.shape):p.mul(T).mul(N).reshape(y.shape)},mean:function(){var D=T.mul(et(-1)).mul(P);return g.rank===1&&(D=D.sum(k)),D.reshape(g.shape)},variance:function(){var D=E.mul(A).mul(P);return g.rank===1&&(D=D.sum(k)),D.reshape(g.shape)},scale:function(){var D=A.mul(T),R=p.mul(D);return g.rank===1&&(R=R.sum(k)),R.reshape(g.shape)},offset:function(){var D=p;return g.rank===1&&(D=D.sum(k)),D.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:i},h).reshape(u.shape)}function _y(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function K1(){QR("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var iee=pe({batchNormalization2d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),K1(),L8(e,t,n,i,a,r)}}),oee=pe({batchNormalization3d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),K1(),I8(e,t,n,i,a,r)}}),see=pe({batchNormalization4d_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),K1(),R8(e,t,n,i,a,r)}}),lee=pe({batchNormalization_:function(e,t,n,r,a,i){return r===void 0&&(r=.001),K1(),Wv(e,t,n,i,a,r)}}),B8=pe({batchNorm_:Wv}),uee=pe({batchNorm2d_:L8}),cee=pe({batchNorm3d_:I8}),dee=pe({batchNorm4d_:R8}),Y1=pe({logicalAnd_:function(e,t){var n=oe(e,"a","logicalAnd","bool"),r=oe(t,"b","logicalAnd","bool");return qt(n.shape,r.shape),xe.runKernelFunc(function(a){return a.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),fee=pe({logicalNot_:function(e){var t=oe(e,"x","logicalNot","bool");return xe.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),F8=pe({logicalOr_:function(e,t){var n=oe(e,"a","logicalOr","bool"),r=oe(t,"b","logicalOr","bool");return qt(n.shape,r.shape),xe.runKernelFunc(function(a){return a.logicalOr(n,r)},{$a:n,$b:r})}}),hee=pe({logicalXor_:function(e,t){var n=oe(e,"a","logicalXor","bool"),r=oe(t,"b","logicalXor","bool");return qt(n.shape,r.shape),F8(e,t).logicalAnd(Y1(e,t).logicalNot())}}),$d=pe({where_:function(e,t,n){var r=oe(t,"a","where"),a=oe(n,"b","where"),i=oe(e,"condition","where","bool");return dn(r.shape,a.shape,"Error in where: "),i.rank===1?ue(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):dn(i.shape,a.shape,"Error in where: "),xe.runKernelFunc(function(o,s){var l=o.select(i,r,a);return s([i]),l},{$condition:i,$a:r,$b:a},function(o,s){var l=s[0];return{$condition:function(){return Xt(l).toFloat()},$a:function(){return o.mul(l.cast(o.dtype))},$b:function(){return o.mul(l.logicalNot().cast(o.dtype))}}})}}),z8=function(e){return lt(this,void 0,void 0,function(){var t,n,r;return ut(this,function(a){switch(a.label){case 0:return[4,(t=oe(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=h4(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},Bt=pe({add_:function(e,t){var n,r=oe(e,"a","add"),a=oe(t,"b","add");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o){return o.add(r,a)},{a:r,b:a},function(o){return{a:function(){var s=o,l=Ur(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=o,l=Ur(a.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(a.shape)}}},"Add")}}),pee=pe({addN_:function(e){ue(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ue(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(a,i){return oe(a,"tensors"+i,"addN")}),n=t[0];t.forEach(function(a){if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(a){if(!na(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return xe.runKernelFunc(function(a){return a.addN(t)},r,function(a){var i={};return t.forEach(function(o,s){i[s]=function(){return a.clone()}}),i},"AddN")}}),mee=pe({addStrict_:function(e,t){var n=oe(e,"a","addStrict"),r=oe(t,"b","addStrict");return dn(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),gee=pe({atan2_:function(e,t){var n,r=oe(e,"a","atan2"),a=oe(t,"b","atan2");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o,s){var l=o.atan2(r,a);return s([r,a]),l},{$a:r,$b:a},function(o,s){var l=s[0],u=s[1];return{$a:function(){var c=Bt(l.square(),u.square()),f=o.mul(u.div(c)),h=Ur(l.shape,i);return h.length>0&&(f=f.sum(h)),f.reshape(l.shape)},$b:function(){var c=Bt(l.square(),u.square()),f=vx(o.mul(l.div(c))),h=Ur(u.shape,i);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)}}})}}),os=pe({div_:function(e,t){var n,r=oe(e,"a","div"),a=oe(t,"b","div");if(n=er(r,a),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return U8(r,a);var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o,s){var l=o.realDivide(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],u=s[1];return{a:function(){var c=o.div(u.toFloat()),f=Ur(l.shape,i);return f.length>0?c.sum(f).reshape(l.shape):c},b:function(){var c=o.mul(l.toFloat()),f=Ur(u.shape,i);f.length>0&&(c=c.sum(f).reshape(u.shape));var h=u.square();return c.div(h.toFloat()).neg()}}},"Div")}}),vee=pe({divNoNan_:function(e,t){var n,r=oe(e,"a","div"),a=oe(t,"b","div");r=(n=er(r,a))[0],a=n[1];var i=os(r,a),o=Xt(i),s=a.equal(o);return $d(s,o,i)}}),yee=pe({divStrict_:function(e,t){var n=oe(e,"a","div"),r=oe(t,"b","div");return dn(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),U8=pe({floorDiv_:function(e,t){var n,r=oe(e,"a","floorDiv"),a=oe(t,"b","floorDiv");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o,s){var l=o.floorDiv(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],u=s[1];return{a:function(){var c=o.div(u.toFloat()),f=Ur(l.shape,i);return f.length>0?c.sum(f).reshape(l.shape):c},b:function(){var c=o.mul(l.toFloat()),f=Ur(u.shape,i);f.length>0&&(c=c.sum(f).reshape(u.shape));var h=u.square();return c.div(h.toFloat()).neg()}}},"FloorDiv")}}),y4=pe({maximum_:function(e,t){var n,r=oe(e,"a","maximum"),a=oe(t,"b","maximum");return n=er(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),qt(r.shape,a.shape),xe.runKernelFunc(function(i,o){var s=i.maximum(r,a);return o([r,a]),s},{a:r,b:a},function(i,o){var s=o[0],l=o[1];return{a:function(){return i.mul(s.greaterEqual(l).toFloat())},b:function(){return i.mul(s.less(l).toFloat())}}},"Maximum")}}),bee=pe({maximumStrict_:function(e,t){var n=oe(e,"a","maximumStrict"),r=oe(t,"b","maximumStrict");return dn(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),W8=pe({minimum_:function(e,t){var n,r=oe(e,"a","minimum"),a=oe(t,"b","minimum");return n=er(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),qt(r.shape,a.shape),xe.runKernelFunc(function(i,o){var s=i.minimum(r,a);return o([r,a]),s},{a:r,b:a},function(i,o){var s=o[0],l=o[1];return{a:function(){return i.mul(s.lessEqual(l).toFloat())},b:function(){return i.mul(s.greater(l).toFloat())}}},"Minimum")}}),xee=pe({minimumStrict_:function(e,t){var n=oe(e,"a","minimumStrict"),r=oe(t,"b","minimumStrict");return dn(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),wee=pe({mod_:function(e,t){var n,r=oe(e,"a","mod"),a=oe(t,"b","mod");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o,s){var l=o.mod(r,a);return s([r,a]),l},{$a:r,$b:a},function(o,s){var l=s[0],u=s[1];return{$a:function(){var c=Ur(l.shape,i);return c.length>0?o.sum(c).reshape(l.shape):o},$b:function(){var c=o.mul(l.div(u).floor().neg()),f=Ur(u.shape,i);return f.length>0?c.sum(f).reshape(u.shape):c}}})}}),Nee=pe({modStrict_:function(e,t){var n=oe(e,"a","modStrict"),r=oe(t,"b","modStrict");return dn(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Ua=pe({mul_:function(e,t){var n,r=oe(e,"a","mul"),a=oe(t,"b","mul");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o,s){var l=o.multiply(r,a);return s([r,a]),l},{a:r,b:a},function(o,s){var l=s[0],u=s[1];return{a:function(){var c=o.mul(u.toFloat()),f=Ur(l.shape,i);return f.length>0?c.sum(f).reshape(l.shape):c},b:function(){var c=o.mul(l.toFloat()),f=Ur(u.shape,i);return f.length>0?c.sum(f).reshape(u.shape):c}}},"Mul")}}),See=pe({mulStrict_:function(e,t){var n=oe(e,"a","mul"),r=oe(t,"b","mul");return dn(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),yx=pe({pow_:function(e,t){var n,r=oe(e,"base","pow"),a=oe(t,"exp","pow");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape),o=[r,a];return xe.runKernelFunc(function(s,l){var u=s.pow(r,a);return l([r,a,u]),u},{a:r,b:a},function(s,l){var u=l[0],c=l[1],f=l[2];return{a:function(){var h=c.toFloat(),p=s.mul(h.mul(u.pow(h.sub(et(1))))),m=Ur(u.shape,i);return m.length>0&&(p=p.sum(m)),p.reshape(u.shape)},b:function(){var h=u.greater(0),p=u.log().where(h,Xt(u)),m=s.mul(f.mul(p)),v=Ur(c.shape,i);return v.length>0&&(m=m.sum(v)),m.reshape(c.shape)}}},"Pow",{},o,[!0])}}),kee=pe({powStrict_:function(e,t){return dn(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),_ee=pe({squaredDifferenceStrict_:function(e,t){var n=oe(e,"a","squaredDifferenceStrict"),r=oe(t,"b","squaredDifferenceStrict");return dn(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Wr=pe({sub_:function(e,t){var n,r=oe(e,"a","sub"),a=oe(t,"b","sub");n=er(r,a),r=n[0],a=n[1];var i=qt(r.shape,a.shape);return xe.runKernelFunc(function(o){return o.subtract(r,a)},{a:r,b:a},function(o){return{a:function(){var s=o,l=Ur(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=o,l=Ur(a.shape,i);return l.length>0&&(s=s.sum(l)),s.neg().reshape(a.shape)}}},"Sub")}}),jee=pe({subStrict_:function(e,t){var n=oe(e,"a","subStrict"),r=oe(t,"b","subStrict");return dn(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),q8=pe({equal_:function(e,t){var n,r=oe(e,"a","equal"),a=oe(t,"b","equal");return n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape),xe.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),Aee=pe({equalStrict_:function(e,t){var n=oe(e,"a","equalStrict"),r=oe(t,"b","equalStrict");return dn(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Cee=pe({greater_:function(e,t){var n,r=oe(e,"a","greater"),a=oe(t,"b","greater");return n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape),xe.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),H8=pe({greaterEqual_:function(e,t){var n,r=oe(e,"a","greaterEqual"),a=oe(t,"b","greaterEqual");return n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape),xe.runKernelFunc(function(i,o){var s=i.greaterEqual(r,a);return o([r,a]),s},{a:r,b:a},function(i,o){var s=o[0],l=o[1];return{a:function(){return Xt(s)},b:function(){return Xt(l)}}},"GreaterEqual")}}),Eee=pe({greaterEqualStrict_:function(e,t){var n=oe(e,"a","greaterEqualStrict"),r=oe(t,"b","greaterEqualStrict");return dn(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Dee=pe({greaterStrict_:function(e,t){var n=oe(e,"a","greaterStrict"),r=oe(t,"b","greaterStrict");return dn(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Pee=pe({less_:function(e,t){var n,r=oe(e,"a","less"),a=oe(t,"b","less");return n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape),xe.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),Oee=pe({lessEqual_:function(e,t){var n,r=oe(e,"a","lessEqual"),a=oe(t,"b","lessEqual");return n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape),xe.runKernelFunc(function(i,o){var s=i.lessEqual(r,a);return o([r,a]),s},{a:r,b:a},null,"LessEqual")}}),Tee=pe({lessEqualStrict_:function(e,t){var n=oe(e,"a","lessEqualStrict"),r=oe(t,"b","lessEqualStrict");return dn(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Mee=pe({lessStrict_:function(e,t){var n=oe(e,"a","lessStrict"),r=oe(t,"b","lessStrict");return dn(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Lee=pe({notEqual_:function(e,t){var n,r=oe(e,"a","notEqual"),a=oe(t,"b","notEqual");return n=er(r,a),r=n[0],a=n[1],qt(r.shape,a.shape),xe.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),Iee=pe({notEqualStrict_:function(e,t){var n=oe(e,"a","notEqualStrict"),r=oe(t,"b","notEqualStrict");return dn(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function V6(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function G6(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var b4=pe({gather_:function(e,t,n){n===void 0&&(n=0);var r=oe(e,"x","gather"),a=oe(t,"indices","gather","int32");n=qr(n,r.shape)[0];var i=function(o,s,l){for(var u=o.shape[l],c=[],f=1,h=1,p=0;p<l;p++)c.push(o.shape[p]),f*=o.shape[p];for(p=0;p<s.rank;p++)c.push(s.shape[p]);for(p=l+1;p<o.rank;p++)c.push(o.shape[p]),h*=o.shape[p];return{batchSize:f,sliceSize:h,dimSize:u,outputShape:c}}(r,a,n);return xe.runKernelFunc(function(o,s){var l=o.gather(r,a.flatten(),n);return s([a]),l},{x:r,indices:a},function(o,s){var l=s[0];return{x:function(){var u=r.shape,c=l.size,f=u.slice(0,n),h=f.length,p=u.slice(n,u.length).slice(1),m=p.length,v=V6(0,h),y=V6(h+1,h+1+m),g=G6([f,[c],p]),b=o.reshape(g),x=l.reshape([c]),N=G6([[h],v,y]),k=b.transpose(N),j=$8(k,x,r.shape[n]),S=i4(N);return j=j.transpose(S)},indices:function(){return l}}},"Gather",{axis:n}).reshape(i.outputShape)}}),$8=pe({unsortedSegmentSum_:function(e,t,n){var r=oe(e,"x","unsortedSegmentSum"),a=oe(t,"segmentIds","unsortedSegmentSum","int32");return ue(vr(n),function(){return"numSegments must be of dtype int"}),xe.runKernelFunc(function(i,o){var s=i.unsortedSegmentSum(r,a,n);return o([a]),s},{$x:r},function(i,o){var s=o[0];return{$x:function(){return function(l,u){for(var c=y4(u,Xt(u)),f=b4(l,c),h=H8(u,et(0,"int32")),p=f.rank-h.rank,m=0;m<p;++m)h=To(h,m+1);h=Y1(h,Rp(f.shape,"bool"));var v=Xt(f);return $d(h,f,v)}(i,s)}}})}}),Ree=function(e,t,n){return lt(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,f,h,p,m,v;return ut(this,function(y){switch(y.label){case 0:for(r=oe(e,"tensor","boolMask"),a=oe(t,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape,ue(o>0,function(){return"mask cannot be scalar"}),dn(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,u=i;u<i+o;u++)l*=s[u];return c=s.slice(0,i).concat([l],s.slice(i+o)),f=r.reshape(c),h=a.reshape([-1]),[4,z8(h)];case 1:return p=y.sent(),m=p.squeeze([1]),v=b4(f,m,i),e!==r&&r.dispose(),t!==a&&a.dispose(),m.dispose(),f.dispose(),h.dispose(),p.dispose(),[2,v]}})})};function V8(e,t,n,r,a,i,o){i===void 0&&(i="NHWC"),ue(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,l=t,u=!1;t.rank===3&&(u=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),ue(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),ue(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),ue(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=i==="NHWC"?s[3]:s[1],f=i==="NHWC"?l.shape[3]:l.shape[1];ue(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),ue(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),o!=null&&ue(vr(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var h=c4(i),p=sf(s,n.shape,r,1,a,o,!1,h),m=xe.runKernelFunc(function(v,y){var g=v.conv2dDerInput(l,n,p);return y([n,l]),g},{dy4D:l,filter:n},function(v,y){var g=y[0],b=y[1];return{dy4D:function(){return Go(v,g,r,a,i,1,o)},filter:function(){return x4(v,b,g.shape,r,a,i,o)}}});return u?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}function Y5(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function G8(e,t,n,r,a){ue(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,s=!1;t.rank===4&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var l=i[4],u=o.shape[4];ue(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),ue(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),ue(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),ue(l===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."}),ue(u===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[4]+"."});var c=mx(i,n.shape,r,1,a),f=xe.runKernelFunc(function(h){return h.conv3dDerInput(o,n,c)},{dy5D:o});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var Bee=pe({conv1d_:function(e,t,n,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var s=oe(e,"x","conv1d"),l=oe(t,"filter","conv1d"),u=s,c=!1;s.rank===2&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),ue(u.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."}),ue(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),o!=null&&ue(vr(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),ue(u.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),ue(Si(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),ue(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var f=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),h=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),p=Go(h,f,[1,n],r,"NHWC",[1,i],o);return c?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Go=pe({conv2d_:function(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=oe(e,"x","conv2d"),l=oe(t,"filter","conv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ue(u.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."}),ue(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),o!=null&&ue(vr(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=a==="NHWC"?u.shape[3]:u.shape[1];ue(f===l.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+l.shape[2]+"."}),ue(Si(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var h=c4(a),p=sf(u.shape,l.shape,n,i,r,o,!1,h),m=[l,u],v=xe.runKernelFunc(function(y,g){var b=y.conv2d(u,l,p);return g([l,u]),b},{x:u,filter:l},function(y,g){var b=g,x=b[0],N=b[1];return ue(dp(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return K8(N.shape,y,x,n,r,a)},filter:function(){return x4(N,y,x.shape,n,r,a)}}},"Conv2D",p,m);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Fee=pe({conv3d_:function(e,t,n,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=oe(e,"x","conv3d"),s=oe(t,"filter","conv3d"),l=o,u=!1;o.rank===4&&(u=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),ue(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),ue(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),ue(l.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),ue(function(h,p){return Y5(h)||Y5(p)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),ue(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var c=mx(l.shape,s.shape,n,i,r),f=xe.runKernelFunc(function(h,p){var m=h.conv3d(l,s,c);return p([l,s]),m},{x:l,$filter:s},function(h,p){ue(Y5(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var m=p[0],v=p[1];return{x:function(){return G8(m.shape,h,v,n,r)},$filter:function(){return function(y,g,b,x,N){var k=y;y.rank===4&&(k=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var j=g;j.rank===4&&(j=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),ue(k.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+k.shape+"."}),ue(j.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+j.shape+"."}),ue(b.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+b+"."}),ue(k.shape[4]===b[3],function(){return"Error in conv3dDerFilter: depth of input "+k.shape[4]+") must match input depth in filter ("+b[3]+"."}),ue(j.shape[4]===b[4],function(){return"Error in conv3dDerFilter: depth of dy ("+j.shape[4]+") must match output depth for filter ("+b[4]+")."});var S=mx(k.shape,b,x,1,N);return xe.runKernelFunc(function(A){return A.conv3dDerFilter(k,j,S)},{x5D:k,dy5D:j})}(m,h,v.shape,n,r)}}});return u?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),x4=pe({conv2dDerFilter_:function(e,t,n,r,a,i,o){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;l.rank===3&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ue(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),ue(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),ue(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];ue(u===n[2],function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+n[2]+"."}),ue(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),o!=null&&ue(vr(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var f=c4(i),h=sf(s.shape,n,r,1,a,o,!1,f);return xe.runKernelFunc(function(p){return p.conv2dDerFilter(s,l,h)},{x4D:s,dy4D:l})}}),K8=pe({conv2dDerInput_:V8}),X1=pe({depthwiseConv2d_:function(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=oe(e,"x","depthwiseConv2d"),l=oe(t,"filter","depthwiseConv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ue(u.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."}),ue(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),ue(u.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),i==null&&(i=[1,1]),ue(Si(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),o!=null&&ue(vr(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=sf(u.shape,l.shape,n,i,r,o,!0),h=[u,l],p=xe.runKernelFunc(function(m,v){var y=m.depthwiseConv2D(u,l,f);return v([u,l]),y},{x:u,filter:l},function(m,v){ue(dp(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var y=v[0],g=v[1];return{x:function(){return Y8(y.shape,m,g,f)},filter:function(){return X8(y,m,g.shape,f)}}},"DepthwiseConv2dNative",f,h);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Y8=pe({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,i=!1;t.rank===3&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=xe.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(a,n,r)},{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),X8=pe({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;e.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),xe.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),w4=pe({separableConv2d_:function(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var s=oe(e,"x","separableConv2d"),l=oe(t,"depthwiseFilter","separableConv2d"),u=oe(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ue(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),ue(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),ue(u.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),ue(u.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."}),ue(u.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."});var h=l.shape[2],p=l.shape[3];ue(u.shape[2]===h*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*p+", but got "+u.shape[2]+"."});var m=X1(c,l,r,a,o,i),v=Go(m,u,1,"valid",o);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),zee=pe({conv2dTranspose_:function(e,t,n,r,a,i){return V8(n,oe(e,"x","conv2dTranspose"),oe(t,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),Uee=pe({conv3dTranspose_:function(e,t,n,r,a){return G8(n,oe(e,"x","conv3dTranspose"),oe(t,"filter","conv3dTranspose"),r,a)}}),J1=pe({matMul_:function(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=oe(e,"a","matMul"),o=oe(t,"b","matMul");a=er(i,o),i=a[0],o=a[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],l=r?o.shape[o.rank-1]:o.shape[o.rank-2],u=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],f=i.shape.slice(0,-2),h=o.shape.slice(0,-2),p=ft(f),m=ft(h);ue(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),ue(na(f,h),function(){return"Error in matMul: outer dimensions ("+f+") and ("+h+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),ue(s===l,function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=i.shape.slice(0,-2).concat([u,c]),y=n?i.as3D(p,s,u):i.as3D(p,u,s),g=r?o.as3D(m,c,l):o.as3D(m,l,c),b={transposeA:n,transposeB:r};return xe.runKernelFunc(function(x,N){var k=x.batchMatMul(y,g,n,r);return N([y,g]),k},{a:y,b:g},function(x,N){var k=N,j=k[0],S=k[1];return n||r?!n&&r?{a:function(){return x.matMul(S,!1,!1)},b:function(){return x.matMul(j,!0,!1)}}:n&&!r?{a:function(){return S.matMul(x,!1,!0)},b:function(){return j.matMul(x,!1,!1)}}:{a:function(){return S.matMul(x,!0,!0)},b:function(){return x.matMul(j,!0,!0)}}:{a:function(){return x.matMul(S,!1,!0)},b:function(){return j.matMul(x,!0,!1)}}},"BatchMatMul",b).reshape(v)}}),Wee=pe({dot_:function(e,t){var n=oe(e,"t1","dot"),r=oe(t,"t2","dot");ue(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return ue(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),qee=pe({outerProduct_:function(e,t){var n=oe(e,"v1","outerProduct"),r=oe(t,"v2","outerProduct");return ue(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),qv=pe({reverse_:function(e,t){var n=oe(e,"x","reverse");if(n.rank===0)return n.clone();var r=qr(t,n.shape);return xe.runKernelFunc(function(a){return a.reverse(n,r)},{$x:n},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(n)}}),Hee=pe({reverse1d_:function(e){var t=oe(e,"x","reverse");return ue(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),qv(t,0)}}),$ee=pe({reverse2d_:function(e,t){var n=oe(e,"x","reverse");return ue(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),qv(n,t)}}),Vee=pe({reverse3d_:function(e,t){var n=oe(e,"x","reverse");return ue(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),qv(n,t)}}),Gee=pe({reverse4d_:function(e,t){var n=oe(e,"x","reverse");return ue(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),qv(n,t)}});function J8(e,t,n,r,a,i){var o=oe(e,"x","maxPool"),s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ue(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),ue(Si(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),i!=null&&ue(vr(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var u=Vg(s.shape,t,n,r,a,i);if(u.filterWidth===1&&u.filterHeight===1&&na(u.inShape,u.outShape))return o.clone();var c=[s],f=xe.runKernelFunc(function(h,p){var m=h.maxPool(s,u);return p([s,m]),m},{x:s},function(h,p){var m=p[0],v=p[1];return{x:function(){return function(y,g,b,x,N,k,j,S){var A=oe(y,"dy","maxPoolBackprop"),P=oe(g,"input","maxPoolBackprop"),T=oe(b,"output","maxPoolBackprop");ue(P.rank===A.rank,function(){return"Rank of input ("+P.rank+") does not match rank of dy ("+A.rank+")"}),ue(Si(N,k),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+N+" and dilations '"+k+"'"}),ue(A.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+A.rank+"."}),ue(P.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+P.rank+"."});var E=Vg(P.shape,x,N,k,j,S);return xe.runKernelFunc(function(D){return D.maxPoolBackprop(A,P,T,E)},{$dy:A,$input:P})}(h,m,v,t,n,r,a)}}},"MaxPool",u,c);return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Q8(e,t,n,r,a,i){var o=oe(e,"x","avgPool","float32");ue(Si(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ue(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),i!=null&&ue(vr(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var u=Vg(s.shape,t,n,r,a,i);if(u.filterWidth===1&&u.filterHeight===1&&na(u.inShape,u.outShape))return o.clone();var c=xe.runKernelFunc(function(f){return f.avgPool(s,u)},{x:s},function(f){return{x:function(){return function(h,p,m,v,y,g){var b=oe(h,"dy","avgPoolBackprop"),x=oe(p,"input","avgPoolBackprop");ue(x.rank===b.rank,function(){return"Rank of input ("+x.rank+") does not match rank of dy ("+b.rank+")"}),ue(Si(v,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+y+"'"});var N=x,k=b,j=!1;x.rank===3&&(j=!0,N=x.as4D(1,x.shape[0],x.shape[1],x.shape[2]),k=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),ue(k.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."}),ue(N.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var S=Vg(N.shape,m,v,y,g),A=xe.runKernelFunc(function(P){return P.avgPoolBackprop(k,N,S)},{dy4D:k,input4D:N});return j?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}(f,s,t,n,r,a)}}},"AvgPool",u);return c=c.cast(o.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Xr=pe({maxPool_:function(e,t,n,r,a){return J8(e,t,n,1,r,a)}}),Hv=pe({avgPool_:function(e,t,n,r,a){return Q8(e,t,n,1,r,a)}}),Kee=pe({pool_:function(e,t,n,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=oe(e,"x","maxPool"),s=o,l=!1;o.rank===3&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ue(Si(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var u,c=Vg(s.shape,t,i,a,r),f=[c.dilationHeight,c.dilationWidth];u=r==="same"?function(N,k){var j=N.map(function(P,T){return P+(P-1)*(k[T]-1)}).map(function(P){return P-1}),S=j.map(function(P){return Math.floor(P/2)}),A=j.map(function(P,T){return P-S[T]});return j.map(function(P,T){return[S[T],A[T]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var h=f[0]===1&&f[1]===1,p=function(N,k,j){var S=j.map(function(F){return F[0]}),A=j.map(function(F){return F[1]}),P=N.concat(S,A),T=k.map(function(F,H){return(F-P[H]%F)%F}),E=A.map(function(F,H){return F+T[H]}),D=k.map(function(F,H){return[S[H],E[H]]}),R=k.map(function(F,H){return[0,T[H]]});return[D,R]}([c.inHeight,c.inWidth],f,u),m=p[0],v=p[1],y=h?r:"valid",g=h?s:a8(s,f,m),b=(n==="avg"?function(){return Q8(g,t,i,1,y)}:function(){return J8(g,t,i,1,y)})(),x=h?b:t8(b,f,v);return l?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Yee=pe({maxPool3d_:function(e,t,n,r,a,i,o){i===void 0&&(i="NDHWC");var s=oe(e,"x","maxPool3d"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),ue(l.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),ue(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),ue(Si(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),a!=null&&ue(vr(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var c=px(l.shape,t,n,o,r,a,i),f=xe.runKernelFunc(function(h,p){var m=h.maxPool3d(l,c);return p([l,m]),m},{x:l},function(h,p){var m=p[0],v=p[1];return{x:function(){return function(y,g,b,x,N,k,j,S){var A=oe(y,"dy","maxPool3dBackprop"),P=oe(g,"input","maxPool3dBackprop"),T=oe(b,"output","maxPool3dBackprop"),E=A,D=P,R=T,F=!1;P.rank===4&&(F=!0,E=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),D=P.as5D(1,P.shape[0],P.shape[1],P.shape[2],P.shape[3]),R=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),ue(E.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+E.rank+"."}),ue(D.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),ue(R.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+R.rank+"."}),k==null&&(k=[1,1,1]),ue(Si(N,k),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+N+" and dilations '"+k+"'"}),S!=null&&ue(vr(j),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+S+" but got pad "+j+"."});var H=px(D.shape,x,N,k,j,S),B=xe.runKernelFunc(function(U){return U.maxPool3dBackprop(E,D,R,H)},{dy5D:E,input5D:D});return F?B.as4D(B.shape[1],B.shape[2],B.shape[3],B.shape[4]):B}(h,m,v,t,n,o,r,a)}}});return u?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Xee=pe({avgPool3d_:function(e,t,n,r,a,i,o){i===void 0&&(i="NDHWC");var s=oe(e,"x","avgPool3d","float32"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),ue(l.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),ue(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),ue(Si(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),a!=null&&ue(vr(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var c=px(l.shape,t,n,o,r,a,i),f=xe.runKernelFunc(function(h){return h.avgPool3d(l,c)},{x:l},function(h){return{x:function(){return function(p,m,v,y,g,b,x){var N=oe(p,"dy","avgPool3dBackprop"),k=oe(m,"input","avgPool3dBackprop"),j=N,S=k,A=!1;k.rank===4&&(A=!0,j=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),S=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3])),ue(j.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+j.rank+"."}),ue(S.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+S.rank+"."}),g==null&&(g=[1,1,1]),ue(Si(y,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+g+"'"}),x!=null&&ue(vr(b),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+x+" but got pad "+b+"."});var P=px(S.shape,v,y,g,b,x),T=xe.runKernelFunc(function(E){return E.avgPool3dBackprop(j,S,P)},{dy5D:j,input5D:S});return A?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(h,l,t,n,o,r,a)}}});return f=f.cast(l.dtype),u?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Zs=pe({slice_:function(e,t,n){var r,a,i=oe(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(l){ue(l!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(l,u){return l>=0?l:(ue(l===-1,function(){return"Negative size values should be exactly -1 but got "+l+" for the slice() size at index "+u+"."}),i.shape[u]-r[u])}),kJ(i,r,a);var o=i.shape,s={begin:r,size:a};return xe.runKernelFunc(function(l){return l.slice(i,r,a)},{x:i},function(l){for(var u=[],c=0;c<l.rank;c++)u.push([r[c],o[c]-r[c]-a[c]]);return{x:function(){return l.pad(u)}}},"Slice",s)}}),Jee=pe({slice1d_:function(e,t,n){var r=oe(e,"x","slice1d");return ue(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Zs(r,[t],[n])}}),Qee=pe({slice2d_:function(e,t,n){var r=oe(e,"x","slice2d");return ue(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Zs(r,t,n)}}),Z8=pe({slice3d_:function(e,t,n){var r=oe(e,"x","slice3d");return ue(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Zs(r,t,n)}}),Zee=pe({slice4d_:function(e,t,n){var r=oe(e,"x","slice4d");return ue(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Zs(r,t,n)}});function e7(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(Ni(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Ni(e.shape,r))),{x:function(){var i=e.mul(n.equal(t).cast(e.dtype));return a==null?i:i.transpose(a)}}}var ete=pe({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","all","bool"),a=qr(t,r.shape),i=a,o=ll(i,r.rank);o!=null&&(r=r.transpose(o),i=ul(i.length,r.rank));var s=xe.runKernelFunc(function(u){return u.all(r,i)},{$x:r});if(n){var l=Ni(s.shape,a);return s.reshape(l)}return s}}),tte=pe({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","any","bool"),a=qr(t,r.shape),i=a,o=ll(i,r.rank);o!=null&&(r=r.transpose(o),i=ul(i.length,r.rank));var s=xe.runKernelFunc(function(u){return u.any(r,i)},{$x:r});if(n){var l=Ni(s.shape,a);return s.reshape(l)}return s}}),nte=pe({argMax_:function(e,t){t===void 0&&(t=0);var n=oe(e,"x","argMax");t==null&&(t=0);var r=qr(t,n.shape),a=ll(r,n.rank);a!=null&&(n=n.transpose(a),r=ul(r.length,n.rank));var i={axis:r[0]},o=[n];return xe.runKernelFunc(function(s,l){var u=s.argMax(n,r[0]);return l([n]),u},{x:n},function(s,l){var u=l[0];return{x:function(){return Xt(u)}}},"ArgMax",i,o)}}),rte=pe({argMin_:function(e,t){t===void 0&&(t=0);var n=oe(e,"x","argMin");t==null&&(t=0);var r=qr(t,n.shape),a=ll(r,n.rank);return a!=null&&(n=n.transpose(a),r=ul(r.length,n.rank)),xe.runKernelFunc(function(i,o){var s=i.argMin(n,r[0]);return o([n]),s},{$x:n},function(i,o){var s=o[0];return{$x:function(){return Xt(s)}}})}}),ate=pe({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","logSumExp"),a=qr(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var l=Ni(s.shape,a);return s.reshape(l)}return s}}),Q1=pe({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","max"),a=r,i=qr(t,r.shape),o=i,s=ll(o,r.rank);s!=null&&(r=r.transpose(s),o=ul(o.length,r.rank));var l=[r],u=xe.runKernelFunc(function(f,h){var p=f.max(r,o);return h([a,p]),p},{x:r},function(f,h){return e7(f,h[1],h[0],i,s)},"Max",{axes:o},l,[!0]);if(n){var c=Ni(u.shape,i);u=u.reshape(c)}return u}}),ite=pe({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","mean"),a=qr(t,r.shape),i=ft(Oa(r.shape,a)[1]);return G1(function(o){var s=et(i);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(l){var u=o.shape.slice();return a.forEach(function(c){u[c]=1}),l.reshape(u).mul(Rp(o.shape,"float32")).div(i)}}})(r)}}),ote=pe({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","min"),a=r,i=qr(t,r.shape),o=i,s=ll(o,r.rank);s!=null&&(r=r.transpose(s),o=ul(o.length,r.rank));var l=[r],u=xe.runKernelFunc(function(f,h){var p=f.min(r,o);return h([a,p]),p},{x:r},function(f,h){return e7(f,h[1],h[0],i,s)},"Min",{axes:o},l,[!0]);if(n){var c=Ni(u.shape,i);u=u.reshape(c)}return u}}),ste=pe({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=qr(t,(e=oe(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=Ni(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),t7=pe({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=qr(t,r.shape);return G1(function(i){var o=ll(a,i.rank),s=a,l=i;o!=null&&(l=i.transpose(o),s=ul(s.length,i.rank));var u=function(p){var m=i.shape.slice();return a.forEach(function(v){m[v]=1}),p.reshape(m).mul(Rp(i.shape,"float32"))},c={axes:s},f=xe.runKernelFunc(function(p){return p.sum(l,s)},{x:l},function(p){return{x:function(){return u(p)}}},"Sum",c);if(n){var h=Ni(f.shape,a);f=f.reshape(h)}return{value:f,gradFunc:u}})(r)}}),lte=pe({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=oe(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=qr(t,r.shape),i=ll(a,r.rank),o=a,s=r;i!=null&&(s=r.transpose(i),o=ul(o.length,r.rank));var l=xe.runKernelFunc(function(c){return c.prod(s,o)},{permutedX:s});if(n){var u=Ni(l.shape,a);l=l.reshape(u)}return l}}),n7=pe({elu_:function(e){var t=oe(e,"x","elu");return xe.runKernelFunc(function(n,r){var a=n.elu(t);return r([a]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){return xe.runKernelFunc(function(i){return i.eluDer(n,a)},{dy:n,y:a})}}})}}),ute=pe({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=oe(e,"x","leakyRelu");return y4(et(t).mul(n),n)}}),r7=pe({prelu_:function(e,t){var n=oe(e,"x","prelu"),r=oe(t,"alpha","prelu");return xe.runKernelFunc(function(a,i){var o=a.prelu(n,r);return i([n,r]),o},{x:n,alpha:r},function(a,i){var o=i[0],s=i[1],l=o.greater(0);return{x:function(){return $d(l,a,a.mul(s))},alpha:function(){var u=$d(l,Xt(a),a.mul(o)),c=Ur(s.shape,a.shape);return c.length>0&&(u=u.sum(c)),u.reshape(s.shape)}}},"Prelu")}}),Zn=pe({relu_:function(e){var t=oe(e,"x","relu");return t.dtype==="bool"?t.toInt():xe.runKernelFunc(function(n,r){var a=n.relu(t);return r([t]),a},{x:t},function(n,r){var a=r[0];return{x:function(){return n.mulStrict(a.step().toFloat())}}},"Relu")}}),a7=pe({relu6_:function(e){var t=oe(e,"x","relu6");return t.dtype==="bool"?t.toInt():xe.runKernelFunc(function(n,r){var a=n.relu6(t);return r([t]),a},{x:t},function(n,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),cte=pe({selu_:function(e){var t=oe(e,"x","selu");return xe.runKernelFunc(function(n,r){var a=n.selu(t);return r([t]),a},{$x:t},function(n,r){var a=r[0];return{$x:function(){var i=a.greater(et(0)),o=et(m4),s=et(g4),l=n.mul(s),u=n.mul(o).mul(a.toFloat().exp());return $d(i,l,u)}}})}}),wc=pe({transpose_:function(e,t){var n=oe(e,"x","transpose");if(t==null&&(t=n.shape.map(function(a,i){return i}).reverse()),ue(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(a){ue(a>=0&&a<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return xe.runKernelFunc(function(a){return a.transpose(n,t)},{x:n},function(a){var i=i4(t);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),dte=pe({localResponseNormalization_:function(e,t,n,r,a){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=oe(e,"x","localResponseNormalization");ue(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),ue(vr(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,s=!1;i.rank===3&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var l=xe.runKernelFunc(function(u,c){var f=u.localResponseNormalization4D(o,t,n,r,a);return c([o,f]),f},{x4D:o},function(u,c){var f=c[0],h=c[1];return{x4D:function(){return xe.runKernelFunc(function(p){return p.LRNGrad(u,f,h,t,n,r,a)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),i7=pe({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var a=function s(l,u,c){if(c===void 0&&(c=null),l.rank===0)return l.abs();if(l.rank!==1&&c===null)return s(l.reshape([-1]),u,c);if(l.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(u===1)return l.abs().sum(c);if(u===1/0)return l.abs().max(c);if(u===-1/0)return l.abs().min(c);if(u==="euclidean"||u===2)return l.abs().pow(et(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}if(Array.isArray(c)&&c.length===2){if(u===1)return l.abs().sum(c[0]).max(c[1]-1);if(u===1/0)return l.abs().sum(c[1]).max(c[0]);if(u===-1/0)return l.abs().sum(c[1]).min(c[0]);if(u==="fro"||u==="euclidean")return l.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}throw new Error("Error in norm: invalid axis: "+c)}(e=oe(e,"x","norm"),t,n),i=a.shape;if(r){var o=qr(n,e.shape);i=Ni(a.shape,o)}return a.reshape(i)}}),fte=pe({basicLSTMCell_:function(e,t,n,r,a,i){var o=oe(e,"forgetBias","basicLSTMCell"),s=oe(t,"lstmKernel","basicLSTMCell"),l=oe(n,"lstmBias","basicLSTMCell"),u=oe(r,"data","basicLSTMCell"),c=oe(a,"c","basicLSTMCell"),f=oe(i,"h","basicLSTMCell"),h=u.concat(f,1).matMul(s).add(l),p=h.shape[0],m=h.shape[1]/4,v=[p,m],y=h.slice([0,0],v),g=h.slice([0,m],v),b=h.slice([0,2*m],v),x=h.slice([0,3*m],v),N=y.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(o.add(b).sigmoid())),k=N.tanh().mulStrict(x.sigmoid());return[N,k]}}),hte=pe({multiRNNCell_:function(e,t,n,r){for(var a=oe(t,"data","multiRNNCell"),i=lx(n,"c","multiRNNCell"),o=lx(r,"h","multiRNNCell"),s=a,l=[],u=0;u<e.length;u++){var c=e[u](s,i[u],o[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var f=[],h=[];for(u=0;u<l.length;u+=2)f.push(l[u]),h.push(l[u+1]);return[f,h]}}),pte=pe({movingAverage_:function(e,t,n,r,a){a===void 0&&(a=!0);var i=oe(e,"v","movingAverage"),o=oe(t,"x","movingAverage"),s=oe(n,"decay","movingAverage");dX(i,o),ue(na(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var l=et(1),u=l.sub(s),c=o.sub(i).mul(u);if(a){ue(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=oe(r,"step","movingAverage");c=c.div(l.sub(yx(s,f)))}return i.add(c)}}),mte=pe({stridedSlice_:function(e,t,n,r,a,i,o,s,l){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),r==null&&(r=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var u=oe(e,"x","stridedSlice"),c=j6(s),f=u.shape.slice();c.forEach(function(y){t[y]=0,n[y]=1,f.splice(y,0,1)}),u=u.reshape(f);for(var h=0;h<u.rank;h++)t[h]=_J(a,t,r,u.shape,h),n[h]=jJ(i,n,r,u.shape,h),r[h]=r[h]||1;var p=j6(l);p.forEach(function(y){n[y]=t[y]+1,r[y]=1});var m=u4(t,n,r),v=m.filter(function(y,g){return p.indexOf(g)===-1});return r.every(function(y){return y===1})?Zs(u,t,m).reshape(v):xe.runKernelFunc(function(y){return y.stridedSlice(u,t,n,r)},{$x:u}).reshape(v)}}),gte=pe({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=oe(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=xe.runKernelFunc(function(o){return o.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}}),vte=pe({scatterND_:function(e,t,n){var r=oe(e,"indices","scatterND","int32"),a=oe(t,"updates","scatterND");return SJ(a,r,n),xe.runKernelFunc(function(i){return i.scatterND(r,a,n)},{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),N4=pe({fft_:function(e){ue(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return xe.runKernelFunc(function(a){return a.fft(r)},{input:e}).reshape(e.shape)}}),bx=pe({ifft_:function(e){ue(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return xe.runKernelFunc(function(a){return a.ifft(r)},{input:e}).reshape(e.shape)}}),S4=pe({rfft_:function(e,t){ue(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],a=e.size/r;if(t!=null&&t<r){var i=e.shape.map(function(g){return 0}),o=e.shape.map(function(g){return g});o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(t!=null&&t>r){var s=e.shape.map(function(g){return g});s[e.shape.length-1]=t-r,n=e.concat(Rn(s),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),u=ma(n,l).as2D(a,r),c=N4(u),f=Math.floor(r/2)+1,h=Ro(c),p=Rs(c),m=h.split([f,r-f],h.shape.length-1),v=p.split([f,r-f],p.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=f,ma(m[0],v[0]).reshape(y)}}),o7=pe({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=bx(r);return Ro(a)}var i=[n,2*(t-1)],o=Ro(e).as2D(n,t),s=Rs(e).as2D(n,t),l=o.slice([0,1],[n,t-2]).reverse(1),u=s.slice([0,1],[n,t-2]).reverse(1).mul(et(-1)),c=o.concat(l,1),f=s.concat(u,1);return r=ma(c,f).as2D(i[0],i[1]),a=bx(r),Ro(a)}}),yte=Object.freeze({fft:N4,ifft:bx,rfft:S4,irfft:o7}),bte=pe({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var a=oe(e,"sparseIndices","sparseToDense","int32"),i=oe(t,"sparseValues","sparseToDense"),o=oe(r,"defaultValue","sparseToDense",i.dtype);return function(s,l,u,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(u.length!==h)throw new Error("outputShape has incorrect number of elements:, "+u.length+", should be: "+h+".");var p=l.size;if(l.rank!==0&&(l.rank!==1||p!==f))throw new Error("sparseValues has incorrect shape "+l.shape+", should be [] or ["+f+"]");if(l.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),xe.runKernelFunc(function(s){return s.sparseToDense(a,i,n,o)},{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),xte=pe({gatherND_:function(e,t){var n=oe(t,"indices","gatherND","int32"),r=oe(e,"x","gatherND");return xe.runKernelFunc(function(a){return a.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),wte=pe({diag_:function(e){var t=oe(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return xe.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),Nte=pe({dropout_:function(e,t,n,r){var a=oe(e,"x","dropout");if(ue(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),ue(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof Jn?a.clone():a;var i=function(l,u){if(u==null)return l.shape.slice();if(na(l.shape,u))return u;if(l.shape.length===u.length){for(var c=[],f=0;f<l.shape.length;f++)u[f]==null&&l.shape[f]!=null?c.push(l.shape[f]):c.push(u[f]);return c}return u}(a,n),o=1-t,s=r8(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function s7(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return jr(a,"float32")}var k4=pe({hannWindow_:function(e){return s7(e,.5,.5)}}),l7=pe({hammingWindow_:function(e){return s7(e,.54,.46)}}),_4=pe({frame_:function(e,t,n,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(Zs(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,l=Br([Zs(e,i,t-s),Ys([s],a)]);o.push(l),i+=n}return o.length===0?dc([],[0,t]):Br(o).as2D(o.length,t)}}),u7=pe({stft_:function(e,t,n,r,a){var i;a===void 0&&(a=k4),r==null&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=_4(e,t,n),s=Ua(o,a(t)),l=[],u=0;u<o.shape[0];u++)l.push(S4(s.slice([u,0],[1,t]),r));return Br(l)}}),Ste=Object.freeze({hannWindow:k4,hammingWindow:l7,frame:_4,stft:u7}),Ra,kte=function(e,t,n){return n===void 0&&(n=1),lt(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,f,h,p,m,v,y;return ut(this,function(g){switch(g.label){case 0:return r=oe(e,"predictions","inTopK"),a=oe(t,"targets","inTopK"),ue(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),ue(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),dn(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],ue(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return o=g.sent(),[4,a.data()];case 2:for(s=g.sent(),l=[o.length/i,i],c=l[1],f=qg("bool",u=l[0]),h=0;h<u;h++){for(p=h*c,m=o.subarray(p,p+c),v=[],y=0;y<m.length;y++)v.push({value:m[y],index:y});for(v.sort(function(b,x){return x.value-b.value}),f[h]=0,y=0;y<n;y++)if(v[y].index===s[h]){f[h]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,ya(f,a.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ra||(Ra={}));var _te=pe({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=Ra.SUM_BY_NONZERO_WEIGHTS);var a=oe(e,"labels","absoluteDifference"),i=oe(t,"predictions","absoluteDifference"),o=null;n!=null&&(o=oe(n,"weights","absoluteDifference")),dn(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return nu(s,o,r)}}),nu=pe({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=Ra.SUM_BY_NONZERO_WEIGHTS);var r=oe(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=oe(t,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(n===Ra.NONE)return i;if(n===Ra.SUM)return i.sum();if(n===Ra.MEAN){if(a==null)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(et(o)):s}if(n===Ra.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(et(r.size));var l=a.mul(Rp(r.shape)).notEqual(et(0)).sum().toFloat();return i.sum().div(l)}throw Error("Unknown reduction: "+n)}}),jte=pe({cosineDistance_:function(e,t,n,r,a){a===void 0&&(a=Ra.SUM_BY_NONZERO_WEIGHTS);var i=oe(e,"labels","cosineDistance"),o=oe(t,"predictions","cosineDistance"),s=null;r!=null&&(s=oe(r,"weights","cosineDistance")),dn(i.shape,o.shape,"Error in cosineDistance: ");var l=et(1).sub(i.mul(o).sum(n,!0));return nu(l,s,a)}}),Ate=pe({hingeLoss_:function(e,t,n,r){r===void 0&&(r=Ra.SUM_BY_NONZERO_WEIGHTS);var a=oe(e,"labels","hingeLoss"),i=oe(t,"predictions","hingeLoss"),o=null;n!=null&&(o=oe(n,"weights","hingeLoss")),dn(a.shape,i.shape,"Error in hingeLoss: ");var s=et(1);a=et(2).mul(a).sub(s);var l=s.sub(a.mul(i)).relu();return nu(l,o,r)}}),Cte=pe({huberLoss_:function(e,t,n,r,a){r===void 0&&(r=1),a===void 0&&(a=Ra.SUM_BY_NONZERO_WEIGHTS);var i=oe(e,"labels","huberLoss"),o=oe(t,"predictions","huberLoss"),s=null;n!=null&&(s=oe(n,"weights","huberLoss")),dn(i.shape,o.shape,"Error in huberLoss: ");var l=et(r),u=o.sub(i).abs(),c=W8(u,l),f=u.sub(c),h=et(.5).mul(c.square()).add(l.mul(f));return nu(h,s,a)}}),Ete=pe({logLoss_:function(e,t,n,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Ra.SUM_BY_NONZERO_WEIGHTS);var i=oe(e,"labels","logLoss"),o=oe(t,"predictions","logLoss"),s=null;n!=null&&(s=oe(n,"weights","logLoss")),dn(i.shape,o.shape,"Error in logLoss: ");var l=et(1),u=et(r),c=i.mul(o.add(u).log()).neg().sub(l.sub(i).mul(l.sub(o).add(u).log()));return nu(c,s,a)}}),Dte=pe({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=Ra.SUM_BY_NONZERO_WEIGHTS);var a=oe(e,"labels","meanSquaredError"),i=oe(t,"predictions","meanSquaredError"),o=null;n!=null&&(o=oe(n,"weights","meanSquaredError")),dn(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return nu(s,o,r)}}),Pte=pe({sigmoidCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=Ra.SUM_BY_NONZERO_WEIGHTS);var i=oe(e,"multiClassLabels","sigmoidCrossEntropy"),o=oe(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=oe(n,"weights","sigmoidCrossEntropy")),dn(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=et(r),u=et(1),c=et(.5);i=i.mul(u.sub(l)).add(c.mul(l))}var f=function(h,p){var m=oe(h,"labels","sigmoidCrossEntropyWithLogits"),v=oe(p,"logits","sigmoidCrossEntropyWithLogits");dn(m.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=v.relu(),g=v.mul(m),b=v.abs().neg().exp().log1p();return y.sub(g).add(b)}(i,o);return nu(f,s,a)}}),Ote=pe({softmaxCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=Ra.SUM_BY_NONZERO_WEIGHTS);var i=oe(e,"onehotLabels","softmaxCrossEntropy"),o=oe(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=oe(n,"weights","softmaxCrossEntropy")),dn(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var l=et(r),u=et(1),c=et(i.shape[1]);i=i.mul(u.sub(l)).add(l.div(c))}var f=function(h,p,m){if(m===void 0&&(m=-1),m===-1&&(m=p.rank-1),m!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+m);return G1(function(v,y,g){var b=y.logSumExp([m],!0),x=y.toFloat().sub(b);return g([v,x]),{value:x.mul(v).neg().sum([m]),gradFunc:function(N,k){var j=k[0],S=k[1],A=Ni(N.shape,[m]);return[N.reshape(A).mul(j.toFloat().sub(S.exp())),N.reshape(A).mul(S.exp().sub(j.toFloat()))]}}})(h,p)}(i,o);return nu(f,s,a)}}),Tte=Object.freeze({get Reduction(){return Ra},absoluteDifference:_te,computeWeightedLoss:nu,cosineDistance:jte,hingeLoss:Ate,huberLoss:Cte,logLoss:Ete,meanSquaredError:Dte,sigmoidCrossEntropy:Pte,softmaxCrossEntropy:Ote});function K6(e,t){return t===void 0&&(t=!1),xe.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=n8(n),i=e.clone(),o=dc([[1]],[1,1]),s=o.clone(),l=n>=r?r:n,u=function(f){var h,p=i,m=s,v=a;h=xe.tidy(function(){var y=i.slice([f,f],[n-f,1]),g=y.norm(),b=i.slice([f,f],[1,1]),x=dc([[-1]]).where(b.greater(0),dc([[1]])),N=b.sub(x.mul(g)),k=y.div(N);s=k.shape[0]===1?o.clone():o.concat(k.slice([1,0],[k.shape[0]-1,k.shape[1]]),0);var j=x.matMul(N).div(g).neg(),S=i.slice([f,0],[n-f,r]),A=j.mul(s);if(f===0)i=S.sub(A.matMul(s.transpose().matMul(S)));else{var P=S.sub(A.matMul(s.transpose().matMul(S)));i=i.slice([0,0],[f,r]).concat(P,0)}var T=a.slice([0,f],[n,a.shape[1]-f]);if(f===0)a=T.sub(T.matMul(s).matMul(A.transpose()));else{var E=T.sub(T.matMul(s).matMul(A.transpose()));a=a.slice([0,0],[n,f]).concat(E,1)}return[s,i,a]}),s=h[0],i=h[1],a=h[2],xi([p,m,v])},c=0;c<l;++c)u(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]})}var Mte=pe({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=oe(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var l=ux(0,o,1,"int32").reshape([-1,1]),u=ux(0,s,1,"int32"),c=Wr(l,u),f=Y1(c.lessEqual(et(+t,"int32")),c.greaterEqual(et(-n,"int32"))),h=Rn([o,s],r.dtype);return ro(Fr(r.reshape([-1,o,s])).map(function(p){return $d(f,p,h)})).reshape(a)}}),Lte=pe({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,ue(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(l){ue(e[l].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[l].shape[0]+" vs. "+n+")"})},a=1;a<e.length;++a)r(a)}else t=!0,e=s4(e,e.shape[0],0).map(function(l){return i8(l,[0])});ue(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,s=function(l){i.push(xe.tidy(function(){var u=o[l];if(l>0)for(var c=0;c<l;++c){var f=t7(i[c].mulStrict(u)).mul(i[c]);u=u.sub(f)}return u.div(i7(u,"euclidean"))}))};for(a=0;a<e.length;++a)s(a);return t?ro(i,0):i}}),Ite=pe({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return K6(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(o,s){return o*s}),r=Fr(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach(function(o){var s=K6(o,t),l=s[0],u=s[1];a.push(l),i.push(u)}),[ro(a,0).reshape(e.shape),ro(i,0).reshape(e.shape)]}}),Rte=Object.freeze({bandPart:Mte,gramSchmidt:Lte,qr:Ite});function Z1(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return n=Math.min(n,o),ue(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),ue(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),ue(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),ue(t.rank===1,function(){return"scores must be a 1D tensor"}),ue(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),ue(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Bte=pe({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=oe(e,"images","resizeBilinear");ue(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),ue(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=xe.runKernelFunc(function(u,c){return c([a]),u.resizeBilinear(a,o,s,n)},{x:a},function(u,c){return{x:function(){return xe.runKernelFunc(function(f){return f.resizeBilinearBackprop(u,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Fte=pe({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=oe(e,"images","resizeNearestNeighbor");ue(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),ue(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),ue(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=xe.runKernelFunc(function(u,c){return c([a]),u.resizeNearestNeighbor(a,o,s,n)},{batchImages:a},function(u,c){return{batchImages:function(){return xe.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(u,c[0],n)},{})}}});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),zte=pe({nonMaxSuppression_:function(e,t,n,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=oe(e,"boxes","nonMaxSuppression"),o=oe(t,"scores","nonMaxSuppression"),s=Z1(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return xe.runKernelFunc(function(u){return u.nonMaxSuppression(i,o,n,r,a)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",l)}}),Ute=function(e,t,n,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),lt(this,void 0,void 0,function(){var i,o,s,l,u,c,f;return ut(this,function(h){switch(h.label){case 0:return i=oe(e,"boxes","nonMaxSuppressionAsync"),o=oe(t,"scores","nonMaxSuppressionAsync"),s=Z1(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return l=h.sent(),u=l[0],c=l[1],f=d4(u,c,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,f]}})})},Wte=pe({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=oe(e,"boxes","nonMaxSuppression"),s=oe(t,"scores","nonMaxSuppression"),l=Z1(o,s,n,r,a,i),u={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma},c=xe.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}}),qte=function(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),lt(this,void 0,void 0,function(){var o,s,l,u,c,f,h;return ut(this,function(p){switch(p.label){case 0:return o=oe(e,"boxes","nonMaxSuppressionAsync"),s=oe(t,"scores","nonMaxSuppressionAsync"),l=Z1(o,s,n,r,a,i),n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return u=p.sent(),c=u[0],f=u[1],h=f4(c,f,n,r,a,i),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,h]}})})},Hte=pe({cropAndResize_:function(e,t,n,r,a,i){var o=oe(e,"image","cropAndResize"),s=oe(t,"boxes","cropAndResize","float32"),l=oe(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var u=s.shape[0];return ue(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),ue(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."}),ue(l.rank===1&&l.shape[0]===u,function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."}),ue(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),ue(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),ue(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),xe.runKernelFunc(function(c,f){return c.cropAndResize(o,s,l,r,a,i)},{images:o,boxes:s,boxInd:l},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),j4=Object.freeze({resizeBilinear:Bte,resizeNearestNeighbor:Fte,nonMaxSuppression:zte,nonMaxSuppressionAsync:Ute,nonMaxSuppressionWithScore:Wte,nonMaxSuppressionWithScoreAsync:qte,cropAndResize:Hte}),A4=function(e,t){return!(e>0)||t==="linear"},C4=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},E4=function(e,t){var n=t,r=Ur(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},D4=function(e,t,n){if(t==="linear")return e;if(t==="relu")return Zn(e);if(t==="elu")return n7(e);if(t==="relu6")return a7(e);if(t==="prelu")return r7(e,n);throw new Error("Unknown fused activation "+t+".")},$te=pe({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=a!==void 0&&a,o=e.transposeB,s=o!==void 0&&o,l=e.bias,u=e.activation,c=u===void 0?"linear":u,f=e.preluActivationWeights;if(A4(xe.state.gradientDepth,c)===!1){var h=J1(n,r,i,s);return l!=null&&(h=Bt(h,l)),D4(h,c,f)}var p=oe(n,"a","fused matMul"),m=oe(r,"b","fused matMul");t=er(p,m),p=t[0],m=t[1];var v=i?p.shape[p.rank-2]:p.shape[p.rank-1],y=s?m.shape[m.rank-1]:m.shape[m.rank-2],g=i?p.shape[p.rank-1]:p.shape[p.rank-2],b=s?m.shape[m.rank-2]:m.shape[m.rank-1],x=p.shape.slice(0,-2),N=m.shape.slice(0,-2),k=ft(x),j=ft(N);ue(p.rank>=2&&m.rank>=2&&p.rank===m.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+m.rank+"."}),ue(na(x,N),function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+N+") of Tensors with shapes "+p.shape+" and "+m.shape+" must match."}),ue(v===y,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+y+") of Tensors with shapes "+p.shape+" and "+m.shape+" and transposeA="+i+" and transposeB="+s+" must match."});var S,A,P=p.shape.slice(0,-2).concat([g,b]),T=i?p.as3D(k,v,g):p.as3D(k,g,v),E=s?m.as3D(j,b,y):m.as3D(j,y,b);l!=null&&qt(P,(S=er(S=oe(l,"bias","fused matMul"),p)[0]).shape),f!=null&&(A=oe(f,"prelu weights","fused matMul"));var D={a:T,b:E};l!=null&&(D.bias=S),f!=null&&(D.preluActivationWeights=A);var R=[T,E];return xe.runKernelFunc(function(F,H){var B=F.fusedBatchMatMul({a:T,b:E,transposeA:i,transposeB:s,bias:S,activation:c,preluActivationWeights:A});return H([T,E,B]),B},D,function(F,H){var B=H[0],U=H[1],W=H[2],z=C4(F,W,c),J={};return l!=null&&(J={bias:function(){return E4(S,z)}}),Object.assign(i||s?!i&&s?{a:function(){return z.matMul(U,!1,!1)},b:function(){return z.matMul(B,!0,!1)}}:i&&!s?{a:function(){return U.matMul(z,!1,!0)},b:function(){return B.matMul(z,!1,!1)}}:{a:function(){return U.matMul(z,!0,!0)},b:function(){return z.matMul(B,!0,!0)}}:{a:function(){return z.matMul(U,!1,!0)},b:function(){return B.matMul(z,!0,!1)}},J)},"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},R,[!0]).reshape(P)}}),Vte=pe({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,s=e.dilations,l=s===void 0?[1,1]:s,u=e.dimRoundingMode,c=e.bias,f=e.activation,h=f===void 0?"linear":f,p=e.preluActivationWeights;if(h=h||"linear",A4(xe.state.gradientDepth,h)===!1){var m=Go(t,n,r,a,o,l,u);return c!=null&&(m=Bt(m,c)),D4(m,h,p)}var v=oe(t,"x","conv2d"),y=oe(n,"filter","conv2d"),g=v,b=!1;v.rank===3&&(b=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),ue(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),ue(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."}),u!=null&&ue(vr(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."}),ue(g.shape[3]===y.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+y.shape[2]+"."}),ue(Si(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),ue(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var x,N,k=sf(g.shape,y.shape,r,l,a,u);c!=null&&(x=er(x=oe(c,"bias","fused conv2d"),v)[0],qt(k.outShape,x.shape)),p!=null&&(N=oe(p,"prelu weights","fused conv2d"));var j={x:g,filter:y};c!=null&&(j.bias=x),p!=null&&(j.preluActivationWeights=N);var S=[y,g],A=xe.runKernelFunc(function(P,T){var E=P.fusedConv2d({input:g,filter:y,convInfo:k,bias:x,activation:h,preluActivationWeights:N});return T([y,g,E]),E},j,function(P,T){var E=T,D=E[0],R=E[1],F=E[2],H=C4(P,F,h);ue(dp(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var B={};return c!=null&&(B={bias:function(){return E4(x,H)}}),Object.assign({x:function(){return K8(R.shape,H,D,r,a)},filter:function(){return x4(R,H,D.shape,r,a)}},B)},"FusedConv2D",{convInfo:k,activation:h},S,[!0]);return b?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),Gte=pe({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,s=e.dilations,l=s===void 0?[1,1]:s,u=e.dimRoundingMode,c=e.bias,f=e.activation,h=f===void 0?"linear":f,p=e.preluActivationWeights;if(A4(xe.state.gradientDepth,h)===!1){var m=X1(t,n,r,a,o,l,u);return c!=null&&(m=Bt(m,c)),D4(m,h,p)}var v=oe(t,"x","depthwiseConv2d"),y=oe(n,"filter","depthwiseConv2d"),g=v,b=!1;v.rank===3&&(b=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),ue(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),ue(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."}),ue(g.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."}),l==null&&(l=[1,1]),ue(Si(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),u!=null&&ue(vr(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+a+"."});var x,N,k=sf(g.shape,y.shape,r,l,a,u,!0);c!=null&&(x=er(x=oe(c,"bias","fused conv2d"),v)[0],qt(k.outShape,x.shape)),p!=null&&(N=oe(p,"prelu weights","fused depthwiseConv2d"));var j={x:g,filter:y};c!=null&&(j.bias=x),p!=null&&(j.preluActivationWeights=N);var S=[y,g],A=xe.runKernelFunc(function(P,T){var E=P.fusedDepthwiseConv2D({input:g,filter:y,convInfo:k,bias:x,activation:h,preluActivationWeights:N});return T([y,g,E]),E},j,function(P,T){ue(dp(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var E=T[0],D=T[1],R=T[2],F=C4(P,R,h),H={};return c!=null&&(H={bias:function(){return E4(x,F)}}),Object.assign({x:function(){return Y8(D.shape,F,E,k)},filter:function(){return X8(D,F,E.shape,k)}},H)},"FusedDepthwiseConv2D",{convInfo:k,activation:h},S,[!0]);return b?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),Kte=Object.freeze({matMul:$te,conv2d:Vte,depthwiseConv2d:Gte}),Yte=Object.freeze({image:j4,linalg:Rte,losses:Tte,spectral:yte,fused:Kte,signal:Ste,square:EZ,squaredDifference:O8,conv1d:Bee,conv2d:Go,conv3d:Fee,depthwiseConv2d:X1,separableConv2d:w4,conv2dTranspose:zee,conv3dTranspose:Uee,op:pe,batchNormalization2d:iee,batchNormalization3d:oee,batchNormalization4d:see,batchNormalization:lee,batchNorm:B8,batchNorm2d:uee,batchNorm3d:cee,batchNorm4d:dee,booleanMaskAsync:Ree,complex:ma,real:Ro,imag:Rs,concat:Br,concat1d:KX,concat2d:YX,concat3d:XX,concat4d:JX,split:s4,matMul:J1,dot:Wee,outerProduct:qee,reverse:qv,reverse1d:Hee,reverse2d:$ee,reverse3d:Vee,reverse4d:Gee,maxPool:Xr,avgPool:Hv,pool:Kee,maxPool3d:Yee,avgPool3d:Xee,slice:Zs,slice1d:Jee,slice2d:Qee,slice3d:Z8,slice4d:Zee,abs:DZ,acos:PZ,acosh:OZ,asin:TZ,asinh:MZ,atan:LZ,atanh:IZ,ceil:RZ,clipByValue:v4,cos:BZ,cosh:FZ,erf:zZ,exp:ck,expm1:UZ,floor:WZ,log:qZ,log1p:HZ,logSigmoid:$Z,neg:vx,reciprocal:VZ,round:GZ,rsqrt:T8,sigmoid:M8,sign:KZ,isNaN:YZ,isInf:XZ,isFinite:JZ,sin:QZ,sinh:ZZ,softplus:eee,sqrt:tee,step:nee,tan:ree,tanh:aee,all:ete,any:tte,argMax:nte,argMin:rte,logSumExp:ate,max:Q1,mean:ite,min:ote,moments:ste,sum:t7,prod:lte,equal:q8,equalStrict:Aee,greater:Cee,greaterEqual:H8,greaterEqualStrict:Eee,greaterStrict:Dee,less:Pee,lessEqual:Oee,lessEqualStrict:Tee,lessStrict:Mee,notEqual:Lee,notEqualStrict:Iee,add:Bt,addN:pee,addStrict:mee,atan2:gee,div:os,divNoNan:vee,divStrict:yee,floorDiv:U8,maximum:y4,maximumStrict:bee,minimum:W8,minimumStrict:xee,mod:wee,modStrict:Nee,mul:Ua,mulStrict:See,pow:yx,powStrict:kee,squaredDifferenceStrict:_ee,sub:Wr,subStrict:jee,elu:n7,leakyRelu:ute,prelu:r7,relu:Zn,relu6:a7,selu:cte,logicalAnd:Y1,logicalNot:fee,logicalOr:F8,logicalXor:hee,where:$d,whereAsync:z8,buffer:Pt,print:oJ,batchToSpaceND:t8,broadcastTo:sJ,cast:lJ,clone:uJ,cumsum:cJ,depthToSpace:dJ,expandDims:To,eye:n8,multinomial:fJ,oneHot:ok,pad:of,pad1d:hJ,pad2d:pJ,pad3d:mJ,pad4d:gJ,rand:vJ,randomNormal:yJ,randomGamma:bJ,randomUniform:r8,reshape:us,spaceToBatchND:a8,squeeze:i8,stack:ro,tile:Bh,truncatedNormal:xJ,unstack:Fr,setdiff1dAsync:wJ,fill:Ys,linspace:GX,ones:Rp,range:ux,scalar:et,tensor:ya,tensor1d:jr,tensor2d:dc,tensor3d:o4,tensor4d:mi,tensor5d:HX,tensor6d:$X,variable:VX,zeros:Rn,onesLike:e8,zerosLike:Xt,transpose:wc,softmax:tu,logSoftmax:CJ,localResponseNormalization:dte,norm:i7,gather:b4,unsortedSegmentSum:$8,basicLSTMCell:fte,multiRNNCell:hte,movingAverage:pte,stridedSlice:mte,topk:gte,scatterND:vte,fft:N4,ifft:bx,rfft:S4,irfft:o7,sparseToDense:bte,gatherND:xte,diag:wte,dropout:Nte,hannWindow:k4,hammingWindow:l7,frame:_4,stft:u7,inTopKAsync:kte});function qe(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&ue(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function X5(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Xte=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new f8(n,xe),n}return vs(t,e),t.prototype.write=function(n,r,a){this.firstUse&&(this.firstUse=!1,Ie().get("IS_NODE")&&sx(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:a}),i},t.prototype.move=function(n,r,a,i){this.data.set(n,{values:r,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return lt(this,void 0,void 0,function(){return ut(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),a=r.dtype,i=r.complexTensors;return a==="complex64"?uk(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),a=r;if(n.dtype==="string")try{a=r.map(function(i){return ax(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Pt(n.shape,n.dtype,a)},t.prototype.makeOutput=function(n,r,a){var i=this.write(n,r,a);return xe.makeTensorFromDataId(i,r,a,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return lt(this,void 0,void 0,function(){var r;return ut(this,function(a){return r=Ms(),n(),[2,{kernelMs:Ms()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var a=this.makeOutput(null,n.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:xe.keep(n.clone()),imag:xe.keep(r.clone())},a},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(qe(n,"slice"),c8(n.shape,r,a)){var i=d8(r,n.strides),o=ft(a);return ya(this.readSync(n.dataId).subarray(i,i+o),a,n.dtype)}for(var s=Pt(a,n.dtype),l=this.bufferSync(n),u=0;u<s.size;++u){var c=s.indexToLoc(u).map(function(f,h){return f+r[h]});s.values[u]=l.get.apply(l,c)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,a,i){qe(n,"stridedSlice");var o=u4(r,a,i);if(o.some(function(p){return p===0}))return ya([],o);for(var s=Pt(o,n.dtype),l=this.bufferSync(n),u=0;u<s.size;u++){for(var c=s.indexToLoc(u),f=new Array(c.length),h=0;h<f.length;h++)f[h]=c[h]*i[h]+r[h];s.set.apply(s,[l.get.apply(l,f)].concat(c))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),a=Pt([n.size,n.size],n.dtype),i=a.values,o=0;o<r.length;o++)i[o*n.size+o]=r[o];return a.toTensor()},t.prototype.unstack=function(n,r){for(var a=n.shape[r],i=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(i[o++]=n.shape[s]);var l=new Array(n.rank).fill(0),u=n.shape.slice();u[r]=1;var c=new Array(a);for(s=0;s<c.length;s++)l[r]=s,c[s]=this.slice(n,l,u).reshape(i);return c},t.prototype.reverse=function(n,r){qe(n,"reverse");for(var a=Pt(n.shape,n.dtype),i=this.bufferSync(n),o=function(l){var u=a.indexToLoc(l),c=u.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),a.set.apply(a,[i.get.apply(i,c)].concat(u))},s=0;s<a.size;s++)o(s);return a.toTensor()},t.prototype.concat=function(n,r){var a=this;if(n[0].dtype==="complex64"){var i=n.map(function(p){return Ro(p)}),o=n.map(function(p){return Rs(p)});return ma(this.concat(i,r),this.concat(o,r))}var s=n.map(function(p){var m=ft(p.shape.slice(r));return p.as2D(-1,m)}),l=cp(s.map(function(p){return p.shape}),1),u=Pt(l,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(p){u.set(a.readSync(p.dataId),c),c+=p.size})}else{var f=0;s.forEach(function(p){for(var m=a.readSync(p.dataId),v=0,y=0;y<p.shape[0];++y)for(var g=y*l[1]+f,b=0;b<p.shape[1];++b)u[g+b]=m[v++];f+=p.shape[1]})}var h=cp(n.map(function(p){return p.shape}),r);return ya(u,h,n[0].dtype)},t.prototype.neg=function(n){return qe(n,"neg"),this.multiply(et(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(a,i,o,s){return{real:a+o,imag:i+s}}):this.broadcastedBinaryOp(n,r,ga(n.dtype,r.dtype),function(a,i){return a+i})},t.prototype.addN=function(n){var r=this;qe(n,"addN");for(var a=n.map(function(c){return r.readSync(c.dataId)}),i=Pt(n[0].shape,n[0].dtype),o=i.values,s=0;s<n.length;s++)for(var l=a[s],u=0;u<o.length;u++)o[u]+=l[u];return i.toTensor()},t.prototype.softmax=function(n,r){var a=qr([r],n.shape),i=this.max(n,a),o=Ni(i.shape,a),s=this.subtract(n,i.reshape(o)),l=this.exp(s),u=this.sum(l,a).reshape(o);return this.realDivide(l,u)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(a,i,o,s){return{real:a-o,imag:i-s}}):this.broadcastedBinaryOp(n,r,ga(n.dtype,r.dtype),function(a,i){return a-i})},t.prototype.pow=function(n,r){return qe([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.pow(a,i)})},t.prototype.batchMatMul=function(n,r,a,i){qe([n,r],"matMul");for(var o=a?n.shape[1]:n.shape[2],s=a?n.shape[2]:n.shape[1],l=i?r.shape[1]:r.shape[2],u=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=a?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],p=h[0],m=h[1],v=h[2],y=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=y[0],b=y[1],x=y[2],N=s*l,k=Pt([u,s,l],n.dtype),j=k.values,S=this.blockSize,A=0;A<u;A++)for(var P=0;P<s;P+=S)for(var T=0;T<l;T+=S)for(var E=0;E<o;E+=S)for(var D=Math.min(P+S,s),R=Math.min(T+S,l),F=Math.min(E+S,o),H=P;H<D;H++)for(var B=T;B<R;B++){for(var U=0,W=E;W<F;W++)U+=c[A*p+H*m+W*v]*f[W*g+B*b+A*x];j[A*N+(H*l+B)]+=U}return k.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,i=n.transposeA,o=n.transposeB,s=n.bias,l=n.activation,u=n.preluActivationWeights,c=this.batchMatMul(r,a,i,o);return s&&(c=this.add(c,s)),l&&(c=X5(this,c,l,u)),c},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(a,i,o,s){return{real:a*o-i*s,imag:a*s+i*o}}):this.broadcastedBinaryOp(n,r,ga(n.dtype,r.dtype),function(a,i){return a*i})},t.prototype.realDivide=function(n,r){return qe([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(a,i){return a/i})},t.prototype.floorDiv=function(n,r){return qe([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(a,i){return Math.floor(a/i)})},t.prototype.sum=function(n,r){qe(n,"sum"),qi("sum",r,n.rank);for(var a=Oa(n.shape,r),i=a[0],o=a[1],s=Rn(i,ga(n.dtype,"int32")),l=ft(o),u=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<u.length;++f){for(var h=f*l,p=0,m=0;m<l;++m)p+=c[h+m];u[f]=p}return s},t.prototype.prod=function(n,r){qe(n,"sum");for(var a=Oa(n.shape,r),i=a[0],o=a[1],s=Rn(i,ga(n.dtype,"int32")),l=ft(o),u=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<u.length;++f){for(var h=f*l,p=1,m=0;m<l;++m)p*=c[h+m];u[f]=p}return s},t.prototype.unsortedSegmentSum=function(n,r,a){qe(n,"unsortedSegmentSum");for(var i=[],o=n.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<a;++s){var l=et(s,"int32"),u=q8(l,r).asType("float32").mul(n).sum(0);i.push(u)}return ro(i)},t.prototype.argMin=function(n,r){qe(n,"argMin");var a=[r];qi("argMin",a,n.rank);for(var i=Oa(n.shape,a),o=i[0],s=i[1],l=Rn(o,"int32"),u=ft(s),c=this.readSync(l.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var p=h*u,m=f[p],v=0,y=0;y<u;++y){var g=f[p+y];g<m&&(m=g,v=y)}c[h]=v}return l},t.prototype.argMax=function(n,r){qe(n,"argMax");var a=[r];qi("argMax",a,n.rank);for(var i=Oa(n.shape,a),o=i[0],s=i[1],l=Rn(o,"int32"),u=ft(s),c=this.readSync(l.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var p=h*u,m=f[p],v=0,y=0;y<u;++y){var g=f[p+y];g>m&&(m=g,v=y)}c[h]=v}return l},t.prototype.cumsum=function(n,r,a,i){if(qe(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var o=ga(n.dtype,"int32"),s=Rn(n.shape,o),l=this.readSync(s.dataId),u=this.readSync(n.dataId),c=n.shape[n.rank-1],f=i?function(y,g){return y+c-g-1}:function(y,g){return y+g},h=0;h<u.length;h+=c)for(var p=0;p<c;p++){var m=f(h,p);if(p===0)l[m]=a?0:u[m];else{var v=f(h,p-1);l[m]=a?u[v]+l[v]:u[m]+l[v]}}return s},t.prototype.equal=function(n,r){return qe([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a===i?1:0})},t.prototype.notEqual=function(n,r){return qe([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a!==i?1:0})},t.prototype.less=function(n,r){return qe([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a<i?1:0})},t.prototype.lessEqual=function(n,r){return qe([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a<=i?1:0})},t.prototype.greater=function(n,r){return qe([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a>i?1:0})},t.prototype.greaterEqual=function(n,r){return qe([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a>=i?1:0})},t.prototype.logicalNot=function(n){qe(n,"logicalNot");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return qe([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a&&i})},t.prototype.logicalOr=function(n,r){return qe([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(a,i){return a||i})},t.prototype.select=function(n,r,a){qe([n,r,a],"select");for(var i=this.readSync(n.dataId),o=this.readSync(r.dataId),s=this.readSync(a.dataId),l=Rn(r.shape,ga(r.dtype,a.dtype)),u=this.readSync(l.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:ft(r.shape.slice(1)),h=0;h<i.length;h++)for(var p=0;p<f;p++)i[h]===1?u[c++]=o[h]:u[c++]=s[h];return l},t.prototype.where=function(n){qe([n],"where");var r=this.readSync(n.dataId);return h4(n.shape,r)},t.prototype.topk=function(n,r,a){return qe(n,"topk"),x8(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){qe(n,"min"),qi("min",r,n.rank);for(var a=Oa(n.shape,r),i=a[0],o=a[1],s=Rn(i,n.dtype),l=ft(o),u=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<u.length;++f){for(var h=f*l,p=c[h],m=0;m<l;++m){var v=c[h+m];v<p&&(p=v)}u[f]=p}return s},t.prototype.minimum=function(n,r){return qe([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.min(a,i)})},t.prototype.mod=function(n,r){return qe([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(n,r){qe(n,"max"),qi("max",r,n.rank);for(var a=Oa(n.shape,r),i=a[0],o=a[1],s=Rn(i,n.dtype),l=ft(o),u=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<u.length;++f){for(var h=f*l,p=c[h],m=0;m<l;++m){var v=c[h+m];v>p&&(p=v)}u[f]=p}return s},t.prototype.maximum=function(n,r){return qe([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.max(a,i)})},t.prototype.all=function(n,r){qe(n,"all"),qi("all",r,n.rank);for(var a=Oa(n.shape,r),i=a[0],o=a[1],s=Rn(i,n.dtype),l=ft(o),u=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<u.length;++f){for(var h=f*l,p=c[h],m=0;m<l;++m){var v=c[h+m];p=p&&v}u[f]=p}return s},t.prototype.any=function(n,r){qe(n,"any"),qi("any",r,n.rank);for(var a=Oa(n.shape,r),i=a[0],o=a[1],s=Rn(i,n.dtype),l=ft(o),u=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<u.length;++f){for(var h=f*l,p=c[h],m=0;m<l;++m){var v=c[h+m];p=p||v}u[f]=p}return s},t.prototype.squaredDifference=function(n,r){return qe([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){var o=a-i;return o*o})},t.prototype.ceil=function(n){qe(n,"ceil");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.floor=function(n){qe(n,"floor");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.sign=function(n){qe(n,"x");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,n.shape,"float32")},t.prototype.isNaN=function(n){qe(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isInf=function(n){qe(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isFinite=function(n){qe(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.round=function(n){qe(n,"round");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,n.shape,"float32")},t.prototype.exp=function(n){qe(n,"exp");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.expm1=function(n){qe(n,"expm1");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,n.shape,"float32")},t.prototype.log=function(n){qe(n,"log");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.log1p=function(n){qe(n,"log1p");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.sqrt=function(n){qe(n,"sqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.rsqrt=function(n){qe(n,"rsqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,n.shape,"float32")},t.prototype.reciprocal=function(n){qe(n,"reciprocal");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){qe(n,"relu");for(var r=Rn(n.shape,n.dtype),a=this.readSync(r.dataId),i=this.readSync(n.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},t.prototype.relu6=function(n){qe(n,"relu");for(var r=Rn(n.shape,n.dtype),a=this.readSync(r.dataId),i=this.readSync(n.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},t.prototype.prelu=function(n,r){return qe([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return a<0?i*a:a})},t.prototype.elu=function(n){qe(n,"elu");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){qe([n,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(n.dataId),s=0;s<i.length;++s){var l=i[s];a[s]=l>=1?o[s]:o[s]*(l+1)}return this.makeOutput(a,r.shape,"float32")},t.prototype.selu=function(n){qe(n,"selu");for(var r=m4,a=g4,i=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var l=o[s];i[s]=l>=0?a*l:r*(Math.exp(l)-1)}return this.makeOutput(i,n.shape,"float32")},t.prototype.clip=function(n,r,a){qe(n,"clip");for(var i=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var l=o[s];i[s]=l>a?a:l<r?r:l}return this.makeOutput(i,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<n.size;++i){var o=a[2*i],s=a[2*i+1];r[i]=Math.hypot(o,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){qe(n,"int");for(var r=new Int32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){qe(n,"sigmoid");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){qe(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var s=i[o]>-r,l=i[o]<r,u=Math.exp(i[o]),c=void 0;c=l?u:s?i[o]:Math.log(1+u),a[o]=c}return this.makeOutput(a,n.shape,"float32")},t.prototype.sin=function(n){qe(n,"sin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){qe(n,"cos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){qe(n,"tan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){qe(n,"asin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){qe(n,"acos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){qe(n,"atan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return qe([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(a,i){return Math.atan2(a,i)})},t.prototype.sinh=function(n){qe(n,"sinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){qe(n,"cosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){qe(n,"tanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=JY(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){qe(n,"asinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){qe(n,"acosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){qe(n,"atanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){qe(n,"erf");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),s=Math.abs(a[i]),l=1/(1+.3275911*s);r[i]=o*(1-((((1.061405429*l-1.453152027)*l+1.421413741)*l-.284496736)*l+.254829592)*l*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),qe(n,"step");for(var a=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var s=i[o];isNaN(s)?a[o]=NaN:a[o]=s>0?1:r}return this.makeOutput(a,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,l=n.preluActivationWeights,u=this.conv2d(r,a,i);return o&&(u=this.add(u,o)),s&&(u=X5(this,u,s,l)),u},t.prototype.conv2d=function(n,r,a){qe([n,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,s=a.dilationHeight,l=a.dilationWidth,u=a.padInfo.left,c=a.padInfo.top,f=a.dataFormat==="channelsLast",h=Pt(a.outShape,n.dtype),p=n.strides[0],m=f?n.strides[1]:n.strides[2],v=f?n.strides[2]:1,y=f?1:n.strides[1],g=h.strides[0],b=f?h.strides[1]:h.strides[2],x=f?h.strides[2]:1,N=f?1:h.strides[1],k=this.readSync(n.dataId),j=this.readSync(r.dataId),S=h.values,A=0;A<a.batchSize;++A)for(var P=A*p,T=A*g,E=0;E<a.outHeight;++E)for(var D=T+E*b,R=E*a.strideHeight-c,F=0;F<i;F++){var H=R+F*s;if(!(H<0||H>=a.inHeight))for(var B=F*r.strides[0],U=P+H*m,W=0;W<a.outWidth;++W)for(var z=D+W*x,J=W*a.strideWidth-u,ee=0;ee<o;ee++){var L=J+ee*l;if(!(L<0||L>=a.inWidth))for(var q=U+L*v,Y=B+ee*r.strides[1],te=0;te<a.inChannels;++te){for(var K=k[q+te*y],ce=0;ce<a.outChannels;++ce)S[z+ce*N]+=K*j[Y+ce];Y+=a.outChannels}}}return h.toTensor()},t.prototype.conv3d=function(n,r,a){for(var i=a.filterDepth,o=a.filterHeight,s=a.filterWidth,l=a.dilationDepth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.front,h=a.padInfo.left,p=a.padInfo.top,m=Pt(a.outShape,n.dtype),v=this.readSync(n.dataId),y=this.readSync(r.dataId),g=m.values,b=0;b<a.batchSize;++b)for(var x=b*n.strides[0],N=b*m.strides[0],k=0;k<a.outDepth;++k)for(var j=N+k*m.strides[1],S=k*a.strideDepth-f,A=0;A<i;A++){var P=S+A*l;if(!(P<0||P>=a.inDepth))for(var T=A*r.strides[0],E=x+P*n.strides[1],D=0;D<a.outHeight;++D)for(var R=j+D*m.strides[2],F=D*a.strideHeight-p,H=0;H<o;H++){var B=F+H*u;if(!(B<0||B>=a.inHeight))for(var U=T+H*r.strides[1],W=E+B*n.strides[2],z=0;z<a.outWidth;++z)for(var J=R+z*a.outChannels,ee=z*a.strideWidth-h,L=0;L<s;L++){var q=ee+L*c;if(!(q<0||q>=a.inWidth))for(var Y=U+L*r.strides[2],te=W+q*a.inChannels,K=Y,ce=0;ce<a.inChannels;++ce){for(var he=v[te+ce],$=0;$<a.outChannels;++$)g[J+$]+=he*y[K+$];K+=a.outChannels}}}}return m.toTensor()},t.prototype.conv2dDerInput=function(n,r,a){qe([n,r],"conv2dDerInput");for(var i=Pt(a.inShape,"float32"),o=i.values,s=this.readSync(n.dataId),l=this.readSync(r.dataId),u=r.strides,c=u[0],f=u[1],h=u[2],p=a.batchSize,m=a.filterHeight,v=a.filterWidth,y=a.inChannels,g=a.inHeight,b=a.inWidth,x=a.outChannels,N=a.outHeight,k=a.outWidth,j=a.strideHeight,S=a.strideWidth,A=a.dataFormat,P=m-1-a.padInfo.top,T=v-1-a.padInfo.left,E=A==="channelsLast",D=i.strides[0],R=E?i.strides[1]:i.strides[2],F=E?i.strides[2]:1,H=E?1:i.strides[1],B=n.strides[0],U=E?n.strides[1]:n.strides[2],W=E?n.strides[2]:1,z=E?1:n.strides[1],J=0;J<p;++J)for(var ee=0;ee<y;++ee)for(var L=0;L<g;++L)for(var q=L-P,Y=Math.max(0,Math.ceil(q/j)),te=Math.min(N,(m+q)/j),K=0;K<b;++K){for(var ce=K-T,he=Math.max(0,Math.ceil(ce/S)),$=Math.min(k,(v+ce)/S),X=0,ae=Y;ae<te;++ae)for(var le=ae*j-q,Se=he;Se<$;++Se)for(var Ee=B*J+U*ae+W*Se,me=c*(m-1-le)+f*(v-1-(Se*S-ce))+h*ee,ie=0;ie<x;++ie)X+=s[Ee+z*ie]*l[me+ie];o[D*J+R*L+F*K+H*ee]=X}return i.toTensor()},t.prototype.conv3dDerInput=function(n,r,a){for(var i=Pt(a.inShape,"float32"),o=i.values,s=i.strides,l=s[0],u=s[1],c=s[2],f=s[3],h=this.readSync(n.dataId),p=n.strides,m=p[0],v=p[1],y=p[2],g=p[3],b=this.readSync(r.dataId),x=r.strides,N=x[0],k=x[1],j=x[2],S=x[3],A=a.batchSize,P=a.filterDepth,T=a.filterHeight,E=a.filterWidth,D=a.inChannels,R=a.inDepth,F=a.inHeight,H=a.inWidth,B=a.outChannels,U=a.outDepth,W=a.outHeight,z=a.outWidth,J=a.strideDepth,ee=a.strideHeight,L=a.strideWidth,q=P-1-a.padInfo.front,Y=T-1-a.padInfo.top,te=E-1-a.padInfo.left,K=0;K<A;++K)for(var ce=0;ce<D;++ce)for(var he=0;he<R;++he)for(var $=he-q,X=Math.max(0,Math.ceil($/J)),ae=Math.min(U,(P+$)/J),le=0;le<F;++le)for(var Se=le-Y,Ee=Math.max(0,Math.ceil(Se/ee)),me=Math.min(W,(T+Se)/ee),ie=0;ie<H;++ie){for(var Ve=ie-te,be=Math.max(0,Math.ceil(Ve/L)),fe=Math.min(z,(E+Ve)/L),_e=0,je=X;je<ae;++je)for(var Re=je*J-$,Ge=Ee;Ge<me;++Ge)for(var Je=Ge*ee-Se,Ye=be;Ye<fe;++Ye)for(var ct=m*K+v*je+y*Ge+g*Ye,dt=N*(P-1-Re)+k*(T-1-Je)+j*(E-1-(Ye*L-Ve))+S*ce,At=0;At<B;++At)_e+=h[ct+At]*b[dt+At];o[l*K+u*he+c*le+f*ie+ce]=_e}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,r,a){qe([n,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,l=a.filterWidth,u=a.dataFormat==="channelsLast",c=Pt(a.filterShape,"float32"),f=a.padInfo.left,h=a.padInfo.top,p=this.bufferSync(n),m=this.bufferSync(r),v=0;v<s;++v)for(var y=Math.max(0,Math.ceil((h-v)/i)),g=Math.min(a.outHeight,(a.inHeight+h-v)/i),b=0;b<l;++b)for(var x=Math.max(0,Math.ceil((f-b)/o)),N=Math.min(a.outWidth,(a.inWidth+f-b)/o),k=0;k<a.inChannels;++k)for(var j=0;j<a.outChannels;++j){for(var S=0,A=0;A<a.batchSize;++A)for(var P=y;P<g;++P)for(var T=v+P*i-h,E=x;E<N;++E){var D=b+E*o-f;S+=u?p.get(A,T,D,k)*m.get(A,P,E,j):p.get(A,k,T,D)*m.get(A,j,P,E)}c.set(S,v,b,k,j)}return c.toTensor()},t.prototype.conv3dDerFilter=function(n,r,a){for(var i=a.strideDepth,o=a.strideHeight,s=a.strideWidth,l=a.filterDepth,u=a.filterHeight,c=a.filterWidth,f=Pt(a.filterShape,"float32"),h=f.values,p=f.strides,m=p[0],v=p[1],y=p[2],g=p[3],b=this.readSync(r.dataId),x=r.strides,N=x[0],k=x[1],j=x[2],S=x[3],A=this.readSync(n.dataId),P=n.strides,T=P[0],E=P[1],D=P[2],R=P[3],F=a.padInfo.front,H=a.padInfo.left,B=a.padInfo.top,U=0;U<l;++U)for(var W=Math.max(0,Math.ceil((F-U)/i)),z=Math.min(a.outDepth,(a.inDepth+F-U)/i),J=U*m,ee=0;ee<u;++ee)for(var L=Math.max(0,Math.ceil((B-ee)/o)),q=Math.min(a.outHeight,(a.inHeight+B-ee)/o),Y=ee*v+J,te=0;te<c;++te)for(var K=Math.max(0,Math.ceil((H-te)/s)),ce=Math.min(a.outWidth,(a.inWidth+H-te)/s),he=te*y+Y,$=0;$<a.inChannels;++$)for(var X=$*g+he,ae=0;ae<a.outChannels;++ae){for(var le=0,Se=0;Se<a.batchSize;++Se)for(var Ee=Se*T,me=Se*N,ie=W;ie<z;++ie)for(var Ve=(U+ie*i-F)*E+Ee,be=ie*k+me,fe=L;fe<q;++fe)for(var _e=(ee+fe*o-B)*D+Ve,je=fe*j+be,Re=K;Re<ce;++Re){var Ge=Re*S+je;le+=A[(te+Re*s-H)*R+_e+$]*b[Ge+ae]}h[X+ae]=le}return f.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,a=n.filter,i=n.convInfo,o=n.bias,s=n.activation,l=n.preluActivationWeights,u=this.depthwiseConv2D(r,a,i);return o&&(u=this.add(u,o)),s&&(u=X5(this,u,s,l)),u},t.prototype.depthwiseConv2D=function(n,r,a){qe([n,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,s=a.dilationHeight,l=a.dilationWidth,u=a.padInfo.left,c=a.padInfo.top,f=a.outChannels/a.inChannels,h=Pt(a.outShape,n.dtype),p=this.readSync(n.dataId),m=this.readSync(r.dataId),v=h.values,y=0;y<a.batchSize;++y)for(var g=y*n.strides[0],b=y*h.strides[0],x=0;x<a.outHeight;++x)for(var N=b+x*h.strides[1],k=x*a.strideHeight-u,j=0;j<i;++j){var S=k+j*s;if(!(S<0||S>=a.inHeight))for(var A=j*r.strides[0],P=g+S*n.strides[1],T=0;T<a.outWidth;++T)for(var E=N+T*h.strides[2],D=T*a.strideWidth-c,R=0;R<o;++R){var F=D+R*l;if(!(F<0||F>=a.inWidth))for(var H=A+R*r.strides[1],B=P+F*a.inChannels,U=E,W=H,z=0;z<a.inChannels;++z){for(var J=p[B+z],ee=0;ee<f;++ee)v[U+ee]+=J*m[W+ee];U+=f,W+=f}}}return h.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,a){qe([n,r],"depthwiseConv2DDerInput");for(var i=Pt(a.inShape,"float32"),o=i.values,s=i.strides,l=s[0],u=s[1],c=s[2],f=this.readSync(n.dataId),h=n.strides,p=h[0],m=h[1],v=h[2],y=this.readSync(r.dataId),g=r.strides,b=g[0],x=g[1],N=g[2],k=a.batchSize,j=a.filterHeight,S=a.filterWidth,A=a.inChannels,P=a.inHeight,T=a.inWidth,E=a.outChannels,D=a.outHeight,R=a.outWidth,F=a.strideHeight,H=a.strideWidth,B=j-1-a.padInfo.top,U=S-1-a.padInfo.left,W=E/A,z=0;z<k;++z)for(var J=0;J<A;++J)for(var ee=0;ee<P;++ee)for(var L=ee-B,q=Math.max(0,Math.ceil(L/F)),Y=Math.min(D,(j+L)/F),te=0;te<T;++te){for(var K=te-U,ce=Math.max(0,Math.ceil(K/H)),he=Math.min(R,(S+K)/H),$=0,X=q;X<Y;++X)for(var ae=X*F-L,le=ce;le<he;++le)for(var Se=p*z+m*X+v*le,Ee=b*(j-1-ae)+x*(S-1-(le*H-K))+N*J,me=0;me<W;++me)$+=f[Se+(J*W+me)]*y[Ee+me];o[l*z+u*ee+c*te+J]=$}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){qe([n,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,l=a.filterWidth,u=Pt(a.filterShape,"float32"),c=a.padInfo.left,f=a.padInfo.top,h=a.outChannels/a.inChannels,p=this.bufferSync(n),m=this.bufferSync(r),v=0;v<s;++v)for(var y=Math.max(0,Math.ceil((f-v)/i)),g=Math.min(a.outHeight,(a.inHeight+f-v)/i),b=0;b<l;++b)for(var x=Math.max(0,Math.ceil((c-b)/o)),N=Math.min(a.outWidth,(a.inWidth+c-b)/o),k=0;k<a.outChannels;++k){for(var j=Math.trunc(k/h),S=k%h,A=0,P=0;P<a.batchSize;++P)for(var T=y;T<g;++T)for(var E=v+T*i-f,D=x;D<N;++D){var R=b+D*o-c;A+=p.get(P,E,R,j)*m.get(P,T,D,k)}u.set(A,v,b,j,S)}return u.toTensor()},t.prototype.tile=function(n,r){return qe(n,"tile"),b8(this.bufferSync(n),r)},t.prototype.pad=function(n,r,a){qe(n,"pad");var i=r.map(function(h,p){return h[0]+n.shape[p]+h[1]}),o=r.map(function(h){return h[0]}),s=this.bufferSync(n),l=Pt(i,n.dtype);a!==0&&l.values.fill(a);for(var u=0;u<n.size;u++){var c=s.indexToLoc(u),f=c.map(function(h,p){return h+o[p]});l.set.apply(l,[s.get.apply(s,c)].concat(f))}return l.toTensor()},t.prototype.transpose=function(n,r){qe(n,"transpose");for(var a=new Array(n.rank),i=0;i<a.length;i++)a[i]=n.shape[r[i]];var o=this.readSync(n.dataId),s=Pt(a,n.dtype),l=this.bufferSync(n);for(i=0;i<n.size;++i){for(var u=l.indexToLoc(i),c=new Array(u.length),f=0;f<c.length;f++)c[f]=u[r[f]];var h=s.locToIndex(c);s.values[h]=o[i]}return s.toTensor()},t.prototype.gather=function(n,r,a){qe([n,r],"gather");var i=n.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var s=Pt(i,n.dtype),l=this.bufferSync(n),u=0;u<s.size;++u){var c=s.indexToLoc(u),f=c.slice();f[a]=o[c[a]];var h=l.locToIndex(f);s.values[u]=l.values[h]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,a){qe([n],"batchToSpaceND");var i=r.reduce(function(f,h){return f*h}),o=cx(n.shape,r,i),s=dx(o.length,r.length),l=fx(n.shape,r,i),u=o8(a,r.length),c=s8(l,a,r.length);return n.reshape(o).transpose(s).reshape(l).slice(u,c)},t.prototype.spaceToBatchND=function(n,r,a){qe([n],"spaceToBatchND");var i=r.reduce(function(h,p){return h*p}),o=[[0,0]];o.push.apply(o,a);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var l=n.pad(o),u=cx(l.shape,r,i,!1),c=dx(u.length,r.length,!1),f=fx(l.shape,r,i,!1);return l.reshape(u).transpose(c).reshape(f)},t.prototype.pool=function(n,r,a){qe(n,"pool");for(var i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,p=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(n.dataId),v=Pt(r.outShape,n.dtype),y=v.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],x=r.outShape[3],N=0;N<r.batchSize;++N)for(var k=N*g,j=N*n.strides[0],S=0;S<r.inChannels;++S)for(var A=0;A<r.outHeight;++A)for(var P=A*i-f,T=Math.max(0,P),E=Math.min(r.inHeight,u+P),D=k+A*b,R=0;R<r.outWidth;++R){for(var F=R*o-h,H=Math.max(0,F),B=Math.min(r.inWidth,c+F),U=p,W=0,z=0,J=T;J<E;J+=s){for(var ee=j+J*n.strides[1],L=H;L<B;L+=l){var q=m[ee+L*n.strides[2]+S];a==="max"&&q>U?U=q:a==="avg"&&(W+=q,z++)}if(isNaN(U))break}y[D+R*x+S]=a==="avg"?W/z:U}return v.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var a=Pt(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,p=this.bufferSync(n),m=0;m<r.batchSize;++m)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var g=y*i-f,b=g;b<0;)b+=s;for(var x=Math.min(r.inHeight,u+g),N=0;N<r.outWidth;++N){for(var k=N*o-h,j=k;j<0;)j+=l;for(var S=Math.min(r.inWidth,c+k),A=Number.NEGATIVE_INFINITY,P=-1,T=b;T<x;T+=s)for(var E=T-g,D=j;D<S;D+=l){var R=D-k,F=p.get(m,T,D,v);F>A&&(A=F,P=E*c+R)}a.set(P,m,y,N,v)}}return a.toTensor()},t.prototype.maxPoolBackprop=function(n,r,a,i){qe([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),s=i.strideHeight,l=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,h=i.effectiveFilterWidth,p=h-1-i.padInfo.left,m=f-1-i.padInfo.top,v=Pt(r.shape,"float32"),y=this.bufferSync(o),g=this.bufferSync(n),b=0;b<i.batchSize;++b)for(var x=0;x<i.inChannels;++x)for(var N=0;N<i.inHeight;++N)for(var k=0;k<i.inWidth;++k){for(var j=N-m,S=k-p,A=0,P=0;P<f;P+=u){var T=(j+P)/s;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var E=0;E<h;E+=c){var D=(S+E)/l;if(!(D<0||D>=i.outWidth||Math.floor(D)!==D)){var R=f*h-1-y.get(b,T,D,x)===P*h+E?1:0;R!==0&&(A+=g.get(b,T,D,x)*R)}}}v.set(A,b,N,k,x)}return v.toTensor()},t.prototype.avgPoolBackprop=function(n,r,a){qe([n,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,s=a.filterHeight,l=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,p=h-1-a.padInfo.left,m=f-1-a.padInfo.top,v=Pt(r.shape,"float32"),y=1/(s*l),g=this.bufferSync(n),b=0;b<a.batchSize;++b)for(var x=0;x<a.inChannels;++x)for(var N=0;N<a.inHeight;++N)for(var k=0;k<a.inWidth;++k){for(var j=N-m,S=k-p,A=0,P=0;P<f;P+=u){var T=(j+P)/i;if(!(T<0||T>=a.outHeight||Math.floor(T)!==T))for(var E=0;E<h;E+=c){var D=(S+E)/o;D<0||D>=a.outWidth||Math.floor(D)!==D||(A+=g.get(b,T,D,x))}}v.set(A*y,b,N,k,x)}return v.toTensor()},t.prototype.pool3d=function(n,r,a){qe(n,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.front,v=r.padInfo.top,y=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=this.readSync(n.dataId),x=Pt(r.outShape,n.dtype),N=x.values,k=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],j=r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[3]*r.outShape[4],A=r.outShape[4],P=0;P<r.batchSize;++P)for(var T=P*k,E=P*n.strides[0],D=0;D<r.inChannels;++D)for(var R=0;R<r.outDepth;++R){for(var F=R*i-m,H=F;H<0;)H+=l;for(var B=Math.min(r.inDepth,f+F),U=T+R*j,W=0;W<r.outHeight;++W){for(var z=W*o-v,J=z;J<0;)J+=u;for(var ee=Math.min(r.inHeight,h+z),L=U+W*S,q=0;q<r.outWidth;++q){for(var Y=q*s-y,te=Y;te<0;)te+=c;for(var K=Math.min(r.inWidth,p+Y),ce=L+q*A,he=g,$=0,X=0,ae=H;ae<B;ae+=l){for(var le=E+ae*n.strides[1],Se=J;Se<ee;Se+=u){for(var Ee=le+Se*n.strides[2],me=te;me<K;me+=c){var ie=b[Ee+me*n.strides[3]+D];if(a==="max"&&ie>he?he=ie:a==="avg"&&($+=ie,X++),isNaN(he))break}if(isNaN(he))break}if(isNaN(he))break}N[ce+D]=a==="avg"?$/X:he}}}return x.toTensor()},t.prototype.avgPool3d=function(n,r){return qe(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,a){qe([n,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,s=a.strideWidth,l=a.filterDepth,u=a.filterHeight,c=a.filterWidth,f=a.dilationDepth,h=a.dilationHeight,p=a.dilationWidth,m=a.effectiveFilterDepth,v=a.effectiveFilterHeight,y=a.effectiveFilterWidth,g=m-1-a.padInfo.front,b=y-1-a.padInfo.left,x=v-1-a.padInfo.top,N=Pt(r.shape,"float32"),k=1/(l*u*c),j=this.bufferSync(n),S=0;S<a.batchSize;++S)for(var A=0;A<a.inChannels;++A)for(var P=0;P<a.inDepth;++P)for(var T=0;T<a.inHeight;++T)for(var E=0;E<a.inWidth;++E){for(var D=P-g,R=T-x,F=E-b,H=0,B=0;B<m;B+=f){var U=(D+B)/i;if(!(U<0||U>=a.outDepth||Math.floor(U)!==U))for(var W=0;W<v;W+=h){var z=(R+W)/o;if(!(z<0||z>=a.outHeight||Math.floor(z)!==z))for(var J=0;J<y;J+=p){var ee=(F+J)/s;ee<0||ee>=a.outWidth||Math.floor(ee)!==ee||(H+=j.get(S,U,z,ee,A))}}}N.set(H*k,S,P,T,E,A)}return N.toTensor()},t.prototype.maxPool3d=function(n,r){return qe(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var a=Pt(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.front,v=r.padInfo.top,y=r.padInfo.left,g=this.bufferSync(n),b=0;b<r.batchSize;++b)for(var x=0;x<r.inChannels;++x)for(var N=0;N<r.outDepth;++N){for(var k=N*i-m,j=k;j<0;)j+=l;for(var S=Math.min(r.inDepth,f+k),A=0;A<r.outHeight;++A){for(var P=A*o-v,T=P;T<0;)T+=u;for(var E=Math.min(r.inHeight,h+P),D=0;D<r.outWidth;++D){for(var R=D*s-y,F=R;F<0;)F+=c;for(var H=Math.min(r.inWidth,p+R),B=Number.NEGATIVE_INFINITY,U=-1,W=j;W<S;W+=l)for(var z=W-k,J=T;J<E;J+=u)for(var ee=J-P,L=F;L<H;L+=c){var q=L-R,Y=g.get(b,W,J,L,x);Y>=B&&(B=Y,U=z*h*p+ee*h+q)}a.set(U,b,N,A,D,x)}}}return a.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,a,i){qe([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),s=i.strideDepth,l=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,v=i.effectiveFilterWidth,y=p-1-i.padInfo.front,g=v-1-i.padInfo.left,b=m-1-i.padInfo.top,x=Pt(r.shape,"float32"),N=this.bufferSync(o),k=this.bufferSync(n),j=0;j<i.batchSize;++j)for(var S=0;S<i.inChannels;++S)for(var A=0;A<i.inDepth;++A)for(var P=0;P<i.inHeight;++P)for(var T=0;T<i.inWidth;++T){for(var E=A-y,D=P-b,R=T-g,F=0,H=0;H<p;H+=c){var B=(E+H)/s;if(!(B<0||B>=i.outDepth||Math.floor(B)!==B))for(var U=0;U<m;U+=f){var W=(D+U)/l;if(!(W<0||W>=i.outHeight||Math.floor(W)!==W))for(var z=0;z<v;z+=h){var J=(R+z)/u;if(!(J<0||J>=i.outWidth||Math.floor(J)!==J)){var ee=p*m*v-1-N.get(j,B,W,J,S)===H*m*v+U*v+z?1:0;ee!==0&&(F+=k.get(j,B,W,J,S)*ee)}}}}x.set(F,j,A,P,T,S)}return x.toTensor()},t.prototype.cast=function(n,r){return m8(n,r,this)},t.prototype.reshape=function(n,r){return lk(n,r)},t.prototype.avgPool=function(n,r){return qe(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,a,i){qe(n,"resizeBilinear");for(var o=n.shape,s=o[0],l=o[1],u=o[2],c=o[3],f=this.readSync(n.dataId),h=new Float32Array(ft([s,r,a,c])),p=[i&&r>1?l-1:l,i&&a>1?u-1:u],m=[i&&r>1?r-1:r,i&&a>1?a-1:a],v=0,y=p[0]/m[0],g=p[1]/m[1],b=0;b<s;b++)for(var x=0;x<r;x++)for(var N=y*x,k=Math.floor(N),j=N-k,S=Math.min(l-1,Math.ceil(N)),A=b*n.strides[0]+k*n.strides[1],P=b*n.strides[0]+S*n.strides[1],T=0;T<a;T++)for(var E=g*T,D=Math.floor(E),R=E-D,F=Math.min(u-1,Math.ceil(E)),H=A+D*n.strides[2],B=P+D*n.strides[2],U=A+F*n.strides[2],W=P+F*n.strides[2],z=0;z<c;z++){var J=f[H+z],ee=f[B+z],L=J+(f[U+z]-J)*R,q=L+(ee+(f[W+z]-ee)*R-L)*j;h[v++]=q}return ya(h,[s,r,a,c])},t.prototype.resizeBilinearBackprop=function(n,r,a){qe([n,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],s=i[1],l=i[2],u=i[3],c=n.shape,f=c[1],h=c[2],p=new Float32Array(o*s*l*u),m=[a&&f>1?s-1:s,a&&h>1?l-1:l],v=[a&&f>1?f-1:f,a&&h>1?h-1:h],y=m[0]/v[0],g=m[1]/v[1],b=this.readSync(n.dataId),x=0,N=0;N<o;N++)for(var k=N*r.strides[0],j=0;j<f;j++)for(var S=j*y,A=Math.floor(S),P=Math.min(Math.ceil(S),s-1),T=k+A*r.strides[1],E=k+P*r.strides[1],D=S-A,R=1-D,F=0;F<h;F++)for(var H=F*g,B=Math.floor(H),U=Math.min(Math.ceil(H),l-1),W=H-B,z=1-W,J=T+B*r.strides[2],ee=T+U*r.strides[2],L=E+B*r.strides[2],q=E+U*r.strides[2],Y=R*z,te=R*W,K=D*z,ce=D*W,he=0;he<u;he++){var $=b[x++];p[J+he]+=$*Y,p[ee+he]+=$*te,p[L+he]+=$*K,p[q+he]+=$*ce}return mi(p,[o,l,s,u],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,a,i){qe(n,"resizeNearestNeighbor");for(var o=n.shape,s=o[0],l=o[1],u=o[2],c=o[3],f=this.readSync(n.dataId),h=new Float32Array(s*r*a*c),p=[i&&r>1?l-1:l,i&&a>1?u-1:u],m=[i&&r>1?r-1:r,i&&a>1?a-1:a],v=p[0]/m[0],y=p[1]/m[1],g=0,b=0;b<s;b++)for(var x=b*n.strides[0],N=0;N<r;N++)for(var k=v*N,j=x+Math.min(l-1,i?Math.round(k):Math.floor(k))*n.strides[1],S=0;S<a;S++)for(var A=y*S,P=j+Math.min(u-1,i?Math.round(A):Math.floor(A))*n.strides[2],T=0;T<c;T++){var E=f[P+T];h[g++]=E}return ya(h,[s,r,a,c],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){qe([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],s=i[1],l=i[2],u=i[3],c=n.shape,f=c[1],h=c[2],p=new Float32Array(o*s*l*u),m=this.readSync(n.dataId),v=[a&&f>1?s-1:s,a&&h>1?l-1:l],y=[a&&f>1?f-1:f,a&&h>1?h-1:h],g=v[0]/y[0],b=v[1]/y[1],x=1/g,N=1/b,k=2*Math.ceil(x)+2,j=2*Math.ceil(N)+2,S=0;S<o;S++)for(var A=S*r.strides[0],P=0;P<s;P++)for(var T=A+P*r.strides[1],E=Math.floor(P*x),D=Math.floor(E-k/2),R=0;R<l;R++)for(var F=T+R*r.strides[2],H=Math.floor(R*N),B=Math.floor(H-j/2),U=0;U<u;U++){for(var W=0,z=0;z<k;z++){var J=z+D;if(!(J<0||J>=f)){var ee=A+J*n.strides[1],L=J*g;if(P===Math.min(s-1,a?Math.round(L):Math.floor(L)))for(var q=0;q<j;q++){var Y=q+B;if(!(Y<0||Y>=h)){var te=ee+Y*n.strides[2],K=Y*b;R===Math.min(l-1,a?Math.round(K):Math.floor(K))&&(W+=m[te+U])}}}}p[F+U]=W}return mi(p,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,a,i,o,s){qe([n,r,a,o,s],"batchNorm");for(var l=this.readSync(n.dataId),u=this.readSync(r.dataId),c=this.readSync(a.dataId),f=o?this.readSync(o.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),p=new Float32Array(l.length),m=h.length,v=f.length,y=c.length,g=u.length,b=0,x=0,N=0,k=0,j=0;j<l.length;++j)p[j]=h[b++]+(l[j]-u[x++])*f[N++]/Math.sqrt(c[k++]+i),b>=m&&(b=0),x>=g&&(x=0),N>=v&&(N=0),k>=y&&(k=0);return mi(p,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,a,i,o){qe(n,"localResponseNormalization4D");var s=n.shape[3],l=s-1,u=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function h(y){for(var g=y%s,b=y-g+Math.max(0,g-r),x=y-g+Math.min(g+r,l),N=0;b<=x;b++){var k=u[b];N+=k*k}return N}for(var p=0;p<c;p++){var m=h(p),v=u[p]*Math.pow(a+i*m,-o);f[p]=v}return mi(f,n.shape)},t.prototype.LRNGrad=function(n,r,a,i,o,s,l){qe(n,"LRNGrad");for(var u=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=this.readSync(a.dataId),p=new Float32Array(n.size),m=n.size,v=0;v<m;v++){for(var y=v%u,g=v-y+Math.max(0,y-i),b=v-y+Math.min(u,y+i+1),x=0,N=g;N<b;N++)x+=Math.pow(f[N],2);for(x=s*x+o,N=g;N<b;N++){var k=-2*s*l*f[N]*h[v]/x;v===N&&(k+=Math.pow(x,-l)),k*=c[v],p[N]+=k}}return mi(p,n.shape)},t.prototype.multinomial=function(n,r,a,i){qe(n,"multinomial");for(var o=r?n:tu(n),s=o.shape[0],l=o.shape[1],u=Rn([s,a],"int32"),c=this.readSync(u.dataId),f=this.readSync(o.dataId),h=0;h<s;++h){var p=h*l,m=new Float32Array(l-1);m[0]=f[p];for(var v=1;v<m.length;++v)m[v]=m[v-1]+f[p+v];for(var y=V1(i.toString()),g=h*a,b=0;b<a;++b){var x=y();c[g+b]=m.length;for(var N=0;N<m.length;N++)if(x<m[N]){c[g+b]=N;break}}}return u},t.prototype.oneHot=function(n,r,a,i){qe(n,"oneHot");var o=new Float32Array(n.size*r);o.fill(i);for(var s=this.readSync(n.dataId),l=0;l<n.size;++l)s[l]>=0&&s[l]<r&&(o[l*r+s[l]]=a);return dc(o,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,a,i,o){return qe(n,"nonMaxSuppression"),d4(this.readSync(n.dataId),this.readSync(r.dataId),a,i,o)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var a=n.shape[0],i=n.shape[1],o=Pt(n.shape,"float32"),s=Pt(n.shape,"float32"),l=Ro(n).as2D(a,i),u=Rs(n).as2D(a,i),c=0;c<a;c++)for(var f=l.slice([c,0],[1,i]),h=u.slice([c,0],[1,i]),p=ma(f,h),m=this.readSync(this.fftImpl(p,r).dataId),v=0;v<i;v++){var y=A6(m,v);o.values[c*i+v]=y.real,s.values[c*i+v]=y.imag}return ma(o.toTensor(),s.toTensor()).as2D(a,i)},t.prototype.fftImpl=function(n,r){var a=n.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(n.shape[0],n.shape[1]);return r&&(o=ma(Ro(o).div(et(i)),Rs(o).div(et(i)))),o}var s=this.readSync(n.dataId),l=function(u){for(var c=new Float32Array(u.length/2),f=new Float32Array(u.length/2),h=0;h<u.length;h+=2)c[h/2]=u[h],f[h/2]=u[h+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,i,r));return ma(l.real,l.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,a){if(r===1)return n;var i=this.readSync(n.dataId),o=r/2,s=function(g){for(var b=Math.ceil(g.length/4),x=new Float32Array(b),N=new Float32Array(b),k=0;k<g.length;k+=4)x[Math.floor(k/4)]=g[k],N[Math.floor(k/4)]=g[k+1];return{real:x,imag:N}}(i),l=ma(s.real,s.imag).as1D(),u=function(g){for(var b=Math.floor(g.length/4),x=new Float32Array(b),N=new Float32Array(b),k=2;k<g.length;k+=4)x[Math.floor(k/4)]=g[k],N[Math.floor(k/4)]=g[k+1];return{real:x,imag:N}}(i),c=ma(u.real,u.imag).as1D();l=this.fftRadix2(l,o,a),c=this.fftRadix2(c,o,a);var f=function(g,b){for(var x=new Float32Array(g/2),N=new Float32Array(g/2),k=0;k<Math.ceil(g/2);k++){var j=(b?2:-2)*Math.PI*(k/g);x[k]=Math.cos(j),N[k]=Math.sin(j)}return{real:x,imag:N}}(r,a),h=ma(f.real,f.imag).mul(c),p=l.add(h),m=l.sub(h),v=Ro(p).concat(Ro(m)),y=Rs(p).concat(Rs(m));return ma(v,y).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,l=0,u=0;u<r;u++){var c=DJ(o*u,r,a),f=A6(n,u);s+=f.real*c.real-f.imag*c.imag,l+=f.real*c.imag+f.imag*c.real}a&&(s/=r,l/=r),EJ(i,s,l,o)}return i},t.prototype.depthToSpace=function(n,r,a){ue(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),ue(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=n.shape[0],o=n.shape[1],s=n.shape[2],l=n.shape[3],u=o*r,c=s*r,f=l/(r*r),h=this.readSync(n.dataId),p=new Float32Array(i*u*c*f),m=0,v=0;v<i;++v)for(var y=0;y<u;++y)for(var g=Math.floor(y/r),b=y%r,x=0;x<c;++x)for(var N=Math.floor(x/r),k=(b*r+x%r)*f,j=0;j<f;++j){var S=j+k+l*(N+s*(g+o*v));p[m++]=h[S]}return mi(p,[i,u,c,f])},t.prototype.broadcastedBinaryOp=function(n,r,a,i){var o=qt(n.shape,r.shape),s=Pt(o,a),l=this.readSync(n.dataId),u=this.readSync(r.dataId),c=ec(n.shape,o),f=ec(r.shape,o),h=s.values;if(c.length+f.length===0)for(var p=0;p<h.length;++p)h[p]=i(l[p%l.length],u[p%u.length]);else{var m=this.bufferSync(n),v=this.bufferSync(r),y=function(g){var b=s.indexToLoc(g),x=b.slice(-n.rank);c.forEach(function(S){return x[S]=0});var N=m.locToIndex(x),k=b.slice(-r.rank);f.forEach(function(S){return k[S]=0});var j=v.locToIndex(k);h[g]=i(l[N],u[j])};for(p=0;p<h.length;++p)y(p)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,a){var i=qt(n.shape,r.shape),o=Pt(i,"float32"),s=Pt(i,"float32"),l=this.readSync(n.dataId),u=this.readSync(r.dataId),c=ec(n.shape,i),f=ec(r.shape,i),h=o.values,p=s.values;if(c.length+f.length===0)for(var m=0;m<h.length;m++){var v=m%l.length,y=m%u.length,g=a(l[2*v],l[2*v+1],u[2*y],u[2*y+1]);h[m]=g.real,p[m]=g.imag}else{var b=this.bufferSync(this.data.get(n.dataId).complexTensors.real),x=this.bufferSync(this.data.get(r.dataId).complexTensors.real),N=function(k){var j=o.indexToLoc(k),S=j.slice(-n.rank);c.forEach(function(D){return S[D]=0});var A=b.locToIndex(S),P=j.slice(-r.rank);f.forEach(function(D){return P[D]=0});var T=x.locToIndex(P),E=a(l[2*A],l[2*A+1],u[2*T],u[2*T+1]);h[k]=E.real,p[k]=E.imag};for(m=0;m<h.length;m++)N(m)}return this.complex(o.toTensor(),s.toTensor())},t.prototype.split=function(n,r,a){return y8(n,r,a)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,a,i,o,s){for(var l=n.shape,u=l[0],c=l[1],f=l[2],h=l[3],p=r.shape[0],m=i[0],v=i[1],y=Pt([p,m,v,h],"float32"),g=this.readSync(r.dataId),b=this.readSync(a.dataId),x=this.readSync(n.dataId),N=n.strides,k=y.strides,j=0;j<p;j++){var S=4*j,A=g[S],P=g[S+1],T=g[S+2],E=g[S+3],D=b[j];if(!(D>=u))for(var R=m>1?(T-A)*(c-1)/(m-1):0,F=v>1?(E-P)*(f-1)/(v-1):0,H=0;H<m;H++){var B=m>1?A*(c-1)+H*R:.5*(A+T)*(c-1);if(B<0||B>c-1)for(var U=0;U<v;U++)for(var W=0;W<h;W++){var z=W+U*k[2]+H*k[1]+j*k[0];y.values[z]=s}else if(o==="bilinear"){var J=Math.floor(B),ee=Math.ceil(B),L=B-J;for(U=0;U<v;U++)if((ae=v>1?P*(f-1)+U*F:.5*(P+E)*(f-1))<0||ae>f-1)for(W=0;W<h;W++)z=W+U*k[2]+H*k[1]+j*k[0],y.values[z]=s;else{var q=Math.floor(ae),Y=Math.ceil(ae),te=ae-q;for(W=0;W<h;W++){var K=x[z=W+q*N[2]+J*N[1]+D*N[0]],ce=x[z=W+Y*N[2]+J*N[1]+D*N[0]],he=x[z=W+q*N[2]+ee*N[1]+D*N[0]],$=K+(ce-K)*te,X=he+(x[z=W+Y*N[2]+ee*N[1]+D*N[0]]-he)*te;z=W+U*k[2]+H*k[1]+j*k[0],y.values[z]=$+(X-$)*L}}}else for(U=0;U<v;++U){var ae;if((ae=v>1?P*(f-1)+U*F:.5*(P+E)*(f-1))<0||ae>f-1)for(W=0;W<h;W++)z=W+U*k[2]+H*k[1]+j*k[0],y.values[z]=s;else{var le=Math.round(ae),Se=Math.round(B);for(W=0;W<h;W++){var Ee=W+le*N[2]+Se*N[1]+D*N[0],me=W+U*k[2]+H*k[1]+j*k[0];y.values[me]=x[Ee]}}}}}return y.toTensor()},t.prototype.sparseToDense=function(n,r,a,i){var o=hx(0,n,a),s=o.sliceRank,l=o.numUpdates,u=o.sliceSize,c=o.strides,f=o.outputSize;return this.scatter(n,r,a,f,u,l,s,c,i,!1)},t.prototype.gatherND=function(n,r){var a=r.shape,i=a[a.length-1],o=l8(n,r),s=o[0],l=o[1],u=o[2],c=o[3];if(l===0)return ya([],s,n.dtype);for(var f=new Hg([l,u],n.dtype),h=this.readSync(r.dataId),p=this.readSync(n.dataId),m=0;m<l;m++){for(var v=[],y=0,g=0;g<i;g++){var b=h[m*i+g];y+=b*c[g],v.push(b)}if(y<0||y>=n.size/u)throw new Error("Invalid indices: "+v+" does not index into "+n.shape);for(var x=0;x<u;x++)f.values[m*u+x]=p[y*u+x]}return f.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,a){var i=hx(0,n,a),o=i.sliceRank,s=i.numUpdates,l=i.sliceSize,u=i.strides,c=i.outputSize,f=et(0);return this.scatter(n,r,a,c,l,s,o,u,f,!0)},t.prototype.fill=function(n,r,a){var i=rx(a=a||Bv(r),ft(n));return i.fill(r),xe.makeTensor(i,n,a,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=rx(n.dtype,ft(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,a){return g8(n,r,a)},t.prototype.scatter=function(n,r,a,i,o,s,l,u,c,f){var h=[i/o,o],p=this.readSync(n.dataId),m=this.readSync(r.dataId);if(i===0)return ya([],a,r.dtype);var v=new Hg(h,r.dtype);v.values.fill(this.readSync(c.dataId)[0]);for(var y=0;y<s;y++){for(var g=[],b=0,x=0;x<l;x++){var N=p[y*l+x];g.push(N),b+=N*u[x]}if(b<0||b>=i/o)throw new Error("Invalid indices: "+g+" does not index into "+a);for(var k=0;k<o;k++)f?v.values[b*o+k]+=m[y*o+k]:v.values[b*o+k]=r.rank===0?m[0]:m[y*o+k]}return v.toTensor().reshape(a)},t}(h8);xe.registerBackend("cpu",function(){return new Xte},1);for(var J5=0,Y6=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,i=a.boxes,o=a.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n;qe(i,"NonMaxSuppressionWithScore");var p=f4(h.data.get(i.dataId).values,h.data.get(o.dataId).values,l,u,c,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;qe(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var l=i[s];o[s]=l*l}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Gg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n;qe([a,i],Gg);var s=o.data.get(a.dataId).values,l=o.data.get(i.dataId).values,u=function(h,p,m,v,y,g){var b=qt(h,p),x=b.length,N=Ks(b),k=qg(y,ft(b)),j=h.length,S=p.length,A=Ks(h),P=Ks(p),T=ec(h,b),E=ec(p,b);if(T.length+E.length===0)for(var D=0;D<k.length;++D)k[D]=g(m[D%m.length],v[D%v.length]);else{var R=function(F){var H=oX(F,x,N),B=H.slice(-j);T.forEach(function(J){return B[J]=0});var U=y6(B,j,A),W=H.slice(-S);E.forEach(function(J){return W[J]=0});var z=y6(W,S,P);k[F]=g(m[U],v[z])};for(D=0;D<k.length;++D)R(D)}return[k,b]}(a.shape,i.shape,s,l,a.dtype,function(h,p){var m=h-p;return m*m}),c=u[0],f=u[1];return{dataId:o.write(c,f,a.dtype),shape:f,dtype:a.dtype}}}];J5<Y6.length;J5++)UR(Y6[J5]);var Gf,Jte=function(e){this.variableNames=["A"];var t=Ia(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Qte=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Ia(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var Q5=0,X6=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,l=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=l[0],c=l[1],f=[c,u],h=[c,u,i];(s||o)&&(Gf==null&&(Gf=document.createElement("canvas").getContext("2d")),Gf.canvas.width=u,Gf.canvas.height=c,Gf.drawImage(a,0,0,u,c),a=Gf.canvas);var p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Yi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var m=Ie().getBool("WEBGL_PACK")?new Qte(h):new Jte(h),v=n.runWebGLProgram(m,[p],"int32");return n.disposeData(p.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;sx("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,i=a.boxes,o=a.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n,p=f4(h.readSync(i.dataId),h.readSync(o.dataId),l,u,c,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new It(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:Gg,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n,s=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jl("return (a - b) * (a - b);",a.shape,i.shape):new ar("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(s,[a,i])}}];Q5<X6.length;Q5++)UR(X6[Q5]);for(var Z5=0,J6=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Gg,gradFunc:function(e,t){var n=t[0],r=t[1],a=et(2);return{a:function(){return Ua(e,Ua(a,Wr(n,r)))},b:function(){return Ua(e,Ua(a,Wr(r,n)))}}}}];Z5<J6.length;Z5++)YY(J6[Z5]);var Zte=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();Ie().get("IS_BROWSER")&&Ie().setPlatform("browser",new Zte);var eN,ene=function(){return require("node-fetch")},tne=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return Ie().global.fetch!=null?Ie().global.fetch(t,n):(eN==null&&(eN=ene()),eN(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();Ie().get("IS_NODE")&&Ie().setPlatform("node",new tne);var dk={float32:4,int32:4,uint16:2,uint8:1,bool:1},xx=4;function c7(e,t){for(var n={},r=0,a=function(s){var l=s.name,u=s.dtype,c=s.shape,f=ft(c),h=void 0;if("quantization"in s){var p=s.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var m=dk[p.dtype],v=e.slice(r,r+f*m),y=p.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(u==="float32")h=Float32Array.from(y,function(j){return j*p.scale+p.min});else{if(u!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+u);h=Int32Array.from(y,function(j){return Math.round(j*p.scale+p.min)})}r+=f*m}else if(u==="string"){var g=ft(s.shape);h=[];for(var b=0;b<g;b++){var x=new Uint32Array(e.slice(r,r+xx))[0];r+=xx;var N=new Uint8Array(e.slice(r,r+x));h.push(N),r+=x}}else{var k=dk[u];if(v=e.slice(r,r+f*k),u==="float32")h=new Float32Array(v);else if(u==="int32")h=new Int32Array(v);else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+u);h=new Uint8Array(v)}r+=f*k}n[l]=ya(h,c,u)},i=0,o=t;i<o.length;i++)a(o[i]);return n}function nne(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(t),a=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var fk=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Q6(e){return fk?Buffer.byteLength(e):new Blob([e]).size}function P4(e){var t=0;e.forEach(function(a){t+=a.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(a){n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function Z6(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function $v(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Q6(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Q6(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Xi=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,r);o!==null&&a.push(o)}),a},e}(),zh="://",fc=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){ue(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(zh)&&(t=t.slice(0,t.indexOf(zh))),ue(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();ue(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function hb(e){if(e.indexOf(zh)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+fc.getSchemes().join(","));return{scheme:e.split(zh)[0],path:e.split(zh)[1]}}function eD(e,t,n){return n===void 0&&(n=!1),lt(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,f;return ut(this,function(h){switch(h.label){case 0:return ue(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),ue((r=Xi.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),ue(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),a=r[0],ue((i=Xi.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),ue(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),o=i[0],s=hb(e).scheme,l=hb(e).path,u=s===hb(e).scheme,[4,a.load()];case 1:return c=h.sent(),n&&u?[4,fc.getManager(s).removeModel(l)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,o.save(c)];case 4:return f=h.sent(),!n||u?[3,6]:[4,fc.getManager(s).removeModel(l)];case 5:h.sent(),h.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var cd="models_store",tc="model_info_store";function d7(){if(!Ie().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function hk(e){var t=e.result;t.createObjectStore(cd,{keyPath:"modelPath"}),t.createObjectStore(tc,{keyPath:"modelPath"})}var Uh=function(){function e(t){if(this.indexedDB=d7(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return lt(this,void 0,void 0,function(){return ut(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return lt(this,void 0,void 0,function(){return ut(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return hk(o)},o.onsuccess=function(){var s=o.result;if(n==null){var l=s.transaction(cd,"readonly"),u=l.objectStore(cd).get(r.modelPath);u.onsuccess=function(){if(u.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(u.result.modelArtifacts)},u.onerror=function(v){return s.close(),i(u.error)},l.oncomplete=function(){return s.close()}}else{var c,f=$v(n),h=s.transaction(tc,"readwrite"),p=h.objectStore(tc),m=p.put({modelPath:r.modelPath,modelArtifactsInfo:f});m.onsuccess=function(){var v=(c=s.transaction(cd,"readwrite")).objectStore(cd).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});v.onsuccess=function(){return a({modelArtifactsInfo:f})},v.onerror=function(y){var g=(p=h.objectStore(tc)).delete(r.modelPath);g.onsuccess=function(){return s.close(),i(v.error)},g.onerror=function(b){return s.close(),i(v.error)}}},m.onerror=function(v){return s.close(),i(m.error)},h.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),tD=function(e){return Ie().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Uh.URL_SCHEME)?(t=e.slice(Uh.URL_SCHEME.length),new Uh(t)):null;var t};Xi.registerSaveRouter(tD),Xi.registerLoadRouter(tD);var rne=function(){function e(){this.indexedDB=d7()}return e.prototype.listModels=function(){return lt(this,void 0,void 0,function(){var t=this;return ut(this,function(n){return[2,new Promise(function(r,a){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return hk(i)},i.onsuccess=function(){var o=i.result,s=o.transaction(tc,"readonly"),l=s.objectStore(tc).getAll();l.onsuccess=function(){for(var u={},c=0,f=l.result;c<f.length;c++){var h=f[c];u[h.modelPath]=h.modelArtifactsInfo}r(u)},l.onerror=function(u){return o.close(),a(l.error)},s.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},e.prototype.removeModel=function(t){return lt(this,void 0,void 0,function(){var n=this;return ut(this,function(r){var a;return t=(a=t).startsWith(Uh.URL_SCHEME)?a.slice(Uh.URL_SCHEME.length):a,[2,new Promise(function(i,o){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return hk(s)},s.onsuccess=function(){var l,u=s.result,c=u.transaction(tc,"readwrite"),f=c.objectStore(tc),h=f.get(t);h.onsuccess=function(){if(h.result==null)return u.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=f.delete(t),m=function(){var v=(l=u.transaction(cd,"readwrite")).objectStore(cd).delete(t);v.onsuccess=function(){return i(h.result.modelArtifactsInfo)},v.onerror=function(y){return o(h.error)}};p.onsuccess=m,p.onerror=function(v){return m(),u.close(),o(h.error)}},h.onerror=function(p){return u.close(),o(h.error)},c.oncomplete=function(){l==null?u.close():l.oncomplete=function(){return u.close()}}},s.onerror=function(l){return o(s.error)}})]})})},e}();if(Ie().getBool("IS_BROWSER"))try{fc.registerManager(Uh.URL_SCHEME,new rne)}catch{}var El="/",lh="tensorflowjs_models",f7="info",ane="model_topology",ine="weight_specs",one="weight_data",sne="model_metadata";function h7(e){return{info:[lh,e,f7].join(El),topology:[lh,e,ane].join(El),weightSpecs:[lh,e,ine].join(El),weightData:[lh,e,one].join(El),modelMetadata:[lh,e,sne].join(El)}}function lne(e){var t=e.split(El);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(El)}var Wh=function(){function e(t){if(!Ie().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=h7(this.modelPath)}return e.prototype.save=function(t){return lt(this,void 0,void 0,function(){var n,r,a;return ut(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=$v(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(fk)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),l="",u=0,c=s.length;u<c;u++)l+=String.fromCharCode(s[u]);return btoa(l)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return lt(this,void 0,void 0,function(){var t,n,r,a,i,o,s;return ut(this,function(l){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(u){if(fk){var c=Buffer.from(u,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(u),h=new Uint8Array(f.length),p=0;p<f.length;++p)h.set([f.charCodeAt(p)],p);return h.buffer}(s),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),nD=function(e){return Ie().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Wh.URL_SCHEME)?(t=e.slice(Wh.URL_SCHEME.length),new Wh(t)):null;var t};Xi.registerSaveRouter(nD),Xi.registerLoadRouter(nD);var une=function(){function e(){ue(Ie().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ue(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return lt(this,void 0,void 0,function(){var t,n,r,a,i,o;return ut(this,function(s){for(t={},n=lh+El,r=El+f7,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=lne(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return lt(this,void 0,void 0,function(){var n,r;return ut(this,function(a){var i;if(t=(i=t).startsWith(Wh.URL_SCHEME)?i.slice(Wh.URL_SCHEME.length):i,n=h7(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(Ie().getBool("IS_BROWSER"))try{fc.registerManager(Wh.URL_SCHEME,new une)}catch{}var cne="model",dne=".json",fne=".weights.bin";function rD(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var tN=function(){function e(t){if(!Ie().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=cne),this.modelTopologyFileName=t+dne,this.weightDataFileName=t+fne}return e.prototype.save=function(t){return lt(this,void 0,void 0,function(){var n,r,a,i,o,s;return ut(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,rD(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,rD(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:$v(t)}]}})})},e.URL_SCHEME="downloads://",e}(),hne=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return lt(this,void 0,void 0,function(){var t,n,r=this;return ut(this,function(a){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,o){var s=new FileReader;s.onload=function(l){var u=JSON.parse(l.target.result),c=u.modelTopology;if(c!=null){n.length===0&&i({modelTopology:c});var f=u.weightsManifest;if(f!=null){var h;try{h=r.checkManifestAndWeightFiles(f,n)}catch(y){return void o(y)}var p=[],m=[],v=[];f.forEach(function(y){y.paths.forEach(function(g){m.push(g),v.push(null)}),p.push.apply(p,y.weights)}),f.forEach(function(y){y.paths.forEach(function(g){var b=new FileReader;b.onload=function(x){var N=x.target.result,k=m.indexOf(g);v[k]=N,v.indexOf(null)===-1&&i({modelTopology:c,weightSpecs:p,weightData:P4(v),format:u.format,generatedBy:u.generatedBy,convertedBy:u.convertedBy,userDefinedMetadata:u.userDefinedMetadata})},b.onerror=function(x){return o("Failed to weights data from file of path '"+g+"'.")},b.readAsArrayBuffer(h[g])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(l){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],a=n.map(function(l){return Z6(l.name)}),i={},o=0,s=t;o<s.length;o++)s[o].paths.forEach(function(l){var u=Z6(l);if(r.indexOf(u)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+u+"'");if(r.push(u),a.indexOf(u)===-1)throw new Error("Weight file with basename '"+u+"' is not provided.");i[l]=n[a.indexOf(u)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},e}();function aD(e,t,n,r){(function(i){ue(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){ue(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),ue(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),ue(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(n=n??0,r=r??1);var a=0;return Promise.all(e.map(function(i){return i.then(function(o){var s=n+ ++a/e.length*(r-n);return t(s),o}),i}))}function p7(e,t){return lt(this,void 0,void 0,function(){var n,r,a,i,o,s,l,u,c;return ut(this,function(f){switch(f.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?Ie().platform.fetch:t.fetchFunc,r=e.map(function(h){return n(h,t.requestInit,{isBinary:!0})}),a=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=f.sent(),[3,4];case 2:return[4,aD(r,t.onProgress,a,i)];case 3:o=f.sent(),f.label=4;case 4:return s=o.map(function(h){return h.arrayBuffer()}),l=.5,u=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,aD(s,t.onProgress,l,u)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function iD(e){var t=this;return function(n,r,a){return r===void 0&&(r=""),lt(t,void 0,void 0,function(){var i,o,s,l,u,c,f,h,p,m;return ut(this,function(v){switch(v.label){case 0:if(i=n.map(function(){return!1}),o={},s=a!=null?a.map(function(){return!1}):[],l=[],n.forEach(function(y,g){var b=0;y.weights.forEach(function(x){var N="quantization"in x?x.quantization.dtype:x.dtype,k=dk[N]*ft(x.shape),j=function(){i[g]=!0,o[g]==null&&(o[g]=[]),o[g].push({manifestEntry:x,groupOffset:b,sizeBytes:k})};a!=null?a.forEach(function(S,A){S===x.name&&(j(),s[A]=!0)}):j(),l.push(x.name),b+=k})}),!s.every(function(y){return y}))throw u=a.filter(function(y,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return c=i.reduce(function(y,g,b){return g&&y.push(b),y},[]),f=[],c.forEach(function(y){n[y].paths.forEach(function(g){var b=r+(r.endsWith("/")?"":"/")+g;f.push(b)})}),[4,e(f)];case 1:return h=v.sent(),p={},m=0,c.forEach(function(y){for(var g=n[y].paths.length,b=0,x=0;x<g;x++)b+=h[m+x].byteLength;for(var N=new ArrayBuffer(b),k=new Uint8Array(N),j=0,S=0;S<g;S++){var A=new Uint8Array(h[m+S]);k.set(A,j),j+=A.byteLength}o[y].forEach(function(P){var T=c7(N.slice(P.groupOffset,P.groupOffset+P.sizeBytes),[P.manifestEntry]);for(var E in T)p[E]=T[E]}),m+=g}),[2,p]}})})}}Xi.registerSaveRouter(function(e){return Ie().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tN.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new tN(t)}(e.slice(tN.URL_SCHEME.length)):null});var m7=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(ue(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=Ie().platform.fetch,ue(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&ue(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return lt(this,void 0,void 0,function(){var n,r,a,i;return ut(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:$v(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return lt(this,void 0,void 0,function(){var t,n,r,a,i,o,s,l,u,c,f,h;return ut(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return n=p.sent(),[3,5];case 4:throw p.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,l=n.format,u=n.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:h=p.sent(),c=h[0],f=h[1],p.label=7;case 7:return[2,{modelTopology:a,weightSpecs:c,weightData:f,userDefinedMetadata:u,generatedBy:o,convertedBy:s,format:l}]}})})},e.prototype.loadWeights=function(t){return lt(this,void 0,void 0,function(){var n,r,a,i,o,s,l,u,c,f,h;return ut(this,function(p){switch(p.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(m){var v=m.lastIndexOf("/"),y=m.lastIndexOf("?"),g=m.substring(0,v),b=y>v?m.substring(y):"";return[g+"/",b]}(n),a=r[0],i=r[1],o=this.weightPathPrefix||a,s=[],l=0,u=t;l<u.length;l++)c=u[l],s.push.apply(s,c.weights);return f=[],t.forEach(function(m){m.paths.forEach(function(v){f.push(o+v+i)})}),[4,p7(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=p.sent(),[2,[s,P4(h)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function pk(e){return e.match(m7.URL_SCHEME_REGEX)!=null}var oD=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return pk(n)}):pk(e))?mk(e,{onProgress:t}):null};function mk(e,t){return new m7(e,t)}Xi.registerSaveRouter(oD),Xi.registerLoadRouter(oD);var nN=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return lt(this,void 0,void 0,function(){return ut(this,function(t){return[2,this.modelArtifacts]})})},e}(),pne=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return lt(this,void 0,void 0,function(){return ut(this,function(n){return[2,this.saveHandler(t)]})})},e}(),g7=Object.freeze({browserFiles:function(e){return new hne(e)},browserHTTPRequest:function(e,t){return mk(e,t)},concatenateArrayBuffers:P4,decodeWeights:c7,encodeWeights:function(e,t){return lt(this,void 0,void 0,function(){var n,r,a,i,o,s=this;return ut(this,function(l){switch(l.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map(function(u){return u.name}):Object.keys(e),i=function(u){var c=a[u],f=Array.isArray(e)?e[u].tensor:e[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var h={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var p=new Promise(function(m){return lt(s,void 0,void 0,function(){var v,y,g,b,x,N,k;return ut(this,function(j){switch(j.label){case 0:return[4,f.bytes()];case 1:for(v=j.sent(),y=v.reduce(function(S,A){return S+A.length},0)+xx*v.length,g=new Uint8Array(y),b=0,x=0;x<v.length;x++)N=v[x],k=new Uint8Array(new Uint32Array([N.length]).buffer),g.set(k,b),b+=xx,g.set(N,b),b+=N.length;return m(g),[2]}})})});r.push(p)}else r.push(f.data());t!=null&&(h.group=t),n.push(h)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:nne(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new nN(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new nN({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new nN({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Xi.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:$v,getSaveHandlers:function(e){return Xi.getSaveHandlers(e)},http:mk,isHTTPScheme:pk,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),lt(this,void 0,void 0,function(){return ut(this,function(a){return[2,iD(function(i){return p7(i,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return Xi.registerLoadRouter(e)},registerSaveRouter:function(e){return Xi.registerSaveRouter(e)},weightsLoaderFactory:iD,withSaveHandler:function(e){return new pne(e)},copyModel:function(e,t){return lt(this,void 0,void 0,function(){return ut(this,function(n){return[2,eD(e,t,!1)]})})},listModels:function(){return lt(this,void 0,void 0,function(){var e,t,n,r,a,i,o;return ut(this,function(s){switch(s.label){case 0:e=fc.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,fc.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+zh+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return lt(this,void 0,void 0,function(){return ut(this,function(n){return[2,eD(e,t,!0)]})})},removeModel:function(e){return lt(this,void 0,void 0,function(){var t;return ut(this,function(n){return t=hb(e),[2,fc.getManager(t.scheme).removeModel(t.path)]})})}}),Kf;pe({confusionMatrix_:function(e,t,n){var r=oe(e,"labels","confusionMatrix"),a=oe(t,"predictions","confusionMatrix");ue(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),ue(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),ue(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),ue(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),ue(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=ok(r.asType("int32"),n),o=ok(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}});var mne=pe({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(zR("FromPixels",xe.backendName)!=null)return xe.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,l,u=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=u[0],f=u[1];if(o?s=e.getContext("2d").getImageData(0,0,c,f).data:r||n?s=e.data:(i||a)&&(Kf==null&&(Kf=document.createElement("canvas").getContext("2d")),Kf.canvas.width=c,Kf.canvas.height=f,Kf.drawImage(e,0,0,c,f),s=Kf.getImageData(0,0,c,f).data),t===4)l=new Int32Array(s);else{var h=c*f;l=new Int32Array(h*t);for(var p=0;p<h;p++)for(var m=0;m<t;++m)l[p*t+m]=s[4*p+m]}return o4(l,[f,c,t],"int32")}}),O4=Object.freeze({toPixels:function(e,t){return lt(this,void 0,void 0,function(){var n,r,a,i,o,s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A;return ut(this,function(P){switch(P.label){case 0:if(n=oe(e,"img","toPixels"),e instanceof Jn||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=n.rank===2?1:n.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=P.sent(),l=n.min(),u=n.max(),[4,Promise.all([l.data(),u.data()])];case 2:if(c=P.sent(),f=c[0],h=c[1],p=f[0],m=h[0],l.dispose(),u.dispose(),n.dtype==="float32"){if(p<0||m>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+m+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||m>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+m+"].")}for(v=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(i*a*4),g=0;g<a*i;++g)b=void 0,x=void 0,N=void 0,k=void 0,o===1?(b=s[g]*v,x=s[g]*v,N=s[g]*v,k=255):o===3?(b=s[3*g]*v,x=s[3*g+1]*v,N=s[3*g+2]*v,k=255):o===4&&(b=s[4*g]*v,x=s[4*g+1]*v,N=s[4*g+2]*v,k=s[4*g+3]*v),y[(j=4*g)+0]=Math.round(b),y[j+1]=Math.round(x),y[j+2]=Math.round(N),y[j+3]=Math.round(k);return t!=null&&(t.width=i,t.height=a,S=t.getContext("2d"),A=new ImageData(y,i,a),S.putImageData(A,0,0)),n!==e&&n.dispose(),[2,y]}})})},fromPixels:mne}),gne=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),vne=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function lf(e){ue(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),ue(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),ue(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),vne.register(e)}var uf=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return vs(t,e),t.prototype.minimize=function(n,r,a){r===void 0&&(r=!1);var i=this.computeGradients(n,a),o=i.value,s=i.grads;if(a!=null){var l=a.map(function(u){return{name:u.name,tensor:s[u.name]}});this.applyGradients(l)}else this.applyGradients(s);return xi(s),r?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return AJ(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&xi(this.iterations_)},t.prototype.saveIterations=function(){return lt(this,void 0,void 0,function(){return ut(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:et(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ut(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ut(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return lt(this,void 0,void 0,function(){var r;return ut(this,function(a){switch(a.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,n.slice(1)]}})})},t}(gne);Object.defineProperty(uf,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var yne=function(e){function t(n,r,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=xe.backend.epsilon()),i}return vs(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=xe.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:at(function(){return Xt(o).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:at(function(){return Xt(o).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var l=r.accumulatedGrads[i].variable,u=r.accumulatedUpdates[i].variable;at(function(){var c=l.mul(r.rho).add(s.square().mul(1-r.rho)),f=u.add(r.epsilon).sqrt().div(l.add(r.epsilon).sqrt()).mul(s),h=u.mul(r.rho).add(f.square().mul(1-r.rho));l.assign(c),u.assign(h);var p=f.mul(-r.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(xi(this.accumulatedGrads.map(function(n){return n.variable})),xi(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){var n;return ut(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){var r;return ut(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(uf);lf(yne);var bne=function(e){function t(n,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=n,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return vs(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=xe.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:at(function(){return Ys(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var l=r.accumulatedGrads[i].variable;at(function(){var u=l.add(s.square());l.assign(u);var c=s.div(u.add(xe.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(c)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&xi(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ut(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ut(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(uf);lf(bne);var xne=function(e){function t(n,r,a,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],at(function(){o.accBeta1=et(r).variable(),o.accBeta2=et(a).variable()}),i==null&&(o.epsilon=xe.backend.epsilon()),o}return vs(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);at(function(){var i=Wr(1,r.accBeta1),o=Wr(1,r.accBeta2);a.forEach(function(s,l){var u=xe.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:at(function(){return Xt(u).variable(!1)})}),r.accumulatedSecondMoment[l]==null&&(r.accumulatedSecondMoment[l]={originalName:s+"/v",variable:at(function(){return Xt(u).variable(!1)})});var c=Array.isArray(n)?n[l].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[l].variable,h=r.accumulatedSecondMoment[l].variable,p=f.mul(r.beta1).add(c.mul(1-r.beta1)),m=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),v=p.div(i),y=m.div(o);f.assign(p),h.assign(m);var g=v.div(y.sqrt().add(r.epsilon)).mul(-r.learningRate).add(u);u.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&xi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&xi(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){var n;return ut(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){var r,a=this;return ut(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),at(function(){a.accBeta1.assign(yx(a.beta1,a.iterations_+1)),a.accBeta2.assign(yx(a.beta2,a.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(uf);lf(xne);var wne=function(e){function t(n,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=a,s.epsilon=i,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],at(function(){s.iteration=et(0).variable(),s.accBeta1=et(r).variable()}),i==null&&(s.epsilon=xe.backend.epsilon()),s}return vs(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);at(function(){var i=Wr(1,r.accBeta1),o=os(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(s,l){var u=xe.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:Xt(u).variable(!1)}),r.accumulatedWeightedInfNorm[l]==null&&(r.accumulatedWeightedInfNorm[l]={originalName:s+"/v",variable:Xt(u).variable(!1)});var c=Array.isArray(n)?n[l].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[l].variable,h=r.accumulatedWeightedInfNorm[l].variable,p=f.mul(r.beta1).add(c.mul(1-r.beta1)),m=h.mul(r.beta2),v=c.abs(),y=m.maximum(v);f.assign(p),h.assign(y);var g=o.div(i).mul(p.div(y.add(r.epsilon))).add(u);u.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&xi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&xi(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ut(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ut(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(uf);lf(wne);var v7=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return vs(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=Array.isArray(n)?n[i].tensor:n[a];if(o!=null){var s=xe.registeredVariables[a];at(function(){var l=r.c.mul(o).add(s);s.assign(l)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=UX(et(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ut(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ut(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(uf);lf(v7);var Nne=function(e){function t(n,r,a){a===void 0&&(a=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=et(i.momentum),i}return vs(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=xe.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:at(function(){return Xt(o).variable(!1)})});var s=r.accumulations[i].variable,l=Array.isArray(n)?n[i].tensor:n[a];l!=null&&at(function(){var u,c=r.m.mul(s).add(l);u=r.useNesterov?r.c.mul(l.add(c.mul(r.m))).add(o):r.c.mul(c).add(o),s.assign(c),o.assign(u)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&xi(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){return ut(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){return ut(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(v7);lf(Nne);var Sne=function(e){function t(n,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=a,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,i==null&&(s.epsilon=xe.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return vs(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n)).forEach(function(a,i){var o=xe.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:at(function(){return Xt(o).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:at(function(){return Xt(o).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:at(function(){return Xt(o).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[a];if(s!=null){var l=r.accumulatedMeanSquares[i].variable,u=r.accumulatedMoments[i].variable;at(function(){var c=l.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[i].variable,h=f.mul(r.decay).add(s.mul(1-r.decay)),p=u.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));l.assign(c),f.assign(h),u.assign(p);var m=o.sub(p);o.assign(m)}else{var v=l.mul(r.decay).add(s.square().mul(1-r.decay));p=u.mul(r.momentum).add(s.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),l.assign(v),u.assign(p),m=o.sub(p),o.assign(m)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&xi(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&xi(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&xi(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return lt(this,void 0,void 0,function(){var n;return ut(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return lt(this,void 0,void 0,function(){var r;return ut(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(uf);lf(Sne);Jn.prototype.squaredDifference=function(e){return O8(this,e)},Oe=Yte;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gk=function(e,t){return gk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},gk(e,t)};function Et(e,t){gk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ta=function(){return Ta=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ta.apply(this,arguments)};function pt(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):a(c.value).then(s,l)}u((r=r.apply(e,[])).next())})}function mt(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function yg(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var _d=function(){function e(t,n){if(!jd(t)||!jd(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function e2(e,t){return e instanceof Jn&&e.shape.length===t}function kne(e){return e2(e,2)}function t2(e){return e2(e,3)}function hc(e){return e2(e,4)}function _ne(e){return e%1!==0}function sD(e){return e%2===0}function jne(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function lD(e){return e&&e.width&&e.height}function Ane(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new _d(Math.round(n*a),Math.round(r*a))}function T4(e){return e.reduce(function(t,n){return t.add(n)},new sn(0,0)).div(new sn(e.length,e.length))}function Kg(e,t,n){return Array(e).fill(0).map(function(r,a){return t+a*n})}function jd(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function uD(e){return jd(e)&&0<=e&&e<=1}var sn=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Nc=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(jd),i=[r.x,r.y,r.width,r.height].every(jd);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],l=o[1],u=o[2],c=o[3];e.assertIsValidBox({x:s,y:l,width:u,height:c},"Box.constructor",n),this._x=s,this._y=l,this._width=u,this._height=c}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(jd)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new sn(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new sn(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new sn(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new sn(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),n=t[0],r=t[1],a=t[2],i=t[3];return new e({x:n,y:r,width:a,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),n=t[0],r=t[1],a=t[2],i=t[3];return new e({x:n,y:r,width:a,height:i})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,i=t.height,o=Math.abs(a-i);return a<i&&(n-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:n,y:r,width:a,height:i})},e.prototype.rescale=function(t){var n=lD(t)?t.width:t,r=lD(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],a=r[0],i=r[1],o=r[2],s=r[3];return new e({x:a,y:i,width:o,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,i=r.y,o=r.right,s=r.bottom,l=Math.max(a,0),u=Math.max(i,0),c=o-l,f=s-u,h=Math.min(c,t-l),p=Math.min(f,n-u);return new e({x:l,y:u,width:h,height:p}).floor()},e.prototype.shift=function(t,n){var r=this,a=r.width,i=r.height,o=this.x+t,s=this.y+n;return new e({x:o,y:s,width:a,height:i})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,a=this.height+1,i=1,o=1,s=r,l=a,u=this.left,c=this.top,f=this.right,h=this.bottom;return f>n&&(s=-f+n+r,f=n),h>t&&(l=-h+t+a,h=t),u<1&&(l=2-u,u=1),c<1&&(l=2-c,c=1),{dy:o,edy:l,dx:i,edx:s,y:c,ey:h,x:u,ex:f,w:r,h:a}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),n2=function(e){Et(t,e);function t(n,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{left:n,top:r,right:a,bottom:i},o)||this}return t}(Nc),y7=function(){function e(t,n,r,a,i){this._imageDims=new _d(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new Nc(a).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Nc(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),bs=function(e){Et(t,e);function t(n,r,a){return e.call(this,n,n,"",r,a)||this}return t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r),i=a.score,o=a.relativeBox,s=a.imageDims;return new t(i,o,s)},t}(y7);function Cne(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*a;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function Ene(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,l){return l<s?l:s},1/0),a=n.reduce(function(s,l){return l<s?l:s},1/0),i=t.reduce(function(s,l){return s<l?l:s},0),o=n.reduce(function(s,l){return s<l?l:s},0);return new n2(r,a,i,o)}function Yg(e,t,n,r){r===void 0&&(r=!0);for(var a=t.map(function(s,l){return{score:s,boxIndex:l}}).sort(function(s,l){return s.score-l.score}).map(function(s){return s.boxIndex}),i=[],o=function(){var s=a.pop();i.push(s);for(var l=a,u=[],c=0;c<l.length;c++){var f=l[c],h=e[s],p=e[f];u.push(Cne(h,p,r))}a=a.filter(function(m,v){return u[v]<=n})};a.length>0;)o();return i}function Vv(e,t){return at(function(){var n=t[0],r=t[1],a=t[2],i=Ys(yg(e.shape.slice(0,3),[1]),n),o=Ys(yg(e.shape.slice(0,3),[1]),r),s=Ys(yg(e.shape.slice(0,3),[1]),a),l=Br([i,o,s],3);return Wr(e,l)})}function Dne(e,t){return t===void 0&&(t=!1),at(function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(t?.5:1)),s=r>a?2:1,l=function(p){var m=e.shape.slice();return m[s]=p,Ys(m,0)},u=l(o),c=i-u.shape[s],f=t&&c?l(c):null,h=[f,e,u].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return Br(h,s)})}function rN(e){return 1/(1+Math.exp(-e))}var M4=function(e){Et(t,e);function t(n,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{x:n,y:r,width:a,height:i},o)||this}return t}(Nc),Pne=.5,One=.43,Tne=.45,Xg=function(){function e(t,n,r){r===void 0&&(r=new sn(0,0));var a=n.width,i=n.height;this._imgDims=new _d(a,i),this._shift=r,this._positions=t.map(function(o){return o.mul(new sn(a,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new sn(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new sn(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new sn(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof bs?t.box.floor():new Nc(t);return this.shiftBy(r.x,r.y).align(null,n)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],a=t[2],i=function(f){return a.sub(f).magnitude()},o=(i(n)+i(r))/2,s=Math.floor(o/Tne),l=T4(t),u=Math.floor(Math.max(0,l.x-Pne*s)),c=Math.floor(Math.max(0,l.y-One*s));return new M4(u,c,Math.min(s,this.imageWidth+u),Math.min(s,this.imageHeight+c))},e.prototype.alignMinBbox=function(t){var n=Ene(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Mne=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],T4([n[3],n[4]])]},t}(Xg),Lne=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(T4)},t}(Xg),cD=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+jne(this.distance)+")":"")},e}(),dD=function(e){Et(t,e);function t(n,r){var a=e.call(this,n)||this;return a._label=r,a}return t.assertIsValidLabeledBox=function(n,r){if(Nc.assertIsValidBox(n,r),!jd(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Nc),jy=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}();(function(e){Et(t,e);function t(n,r,a,i){var o=e.call(this,n,r)||this;return o._score=a,o._classScore=i,o}return t.assertIsValidPredictedBox=function(n,r){if(dD.assertIsValidLabeledBox(n,r),!uD(n.score)||!uD(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(dD);function b7(e){return e.detection instanceof bs}function Jg(e,t){var n={detection:t};return Object.assign({},e,n)}function x7(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function w7(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(a,i){e.readFile(r,function(o,s){return o?i(o):a(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function N7(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=w7();return Ta({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:n,createImageElement:r,fetch:a},i)}function S7(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function k7(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var Mr;function Ine(){if(!Mr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Mr}function vk(e){Mr=e}function L4(){S7()&&vk(x7()),k7()&&vk(N7())}function Rne(e){if(Mr||L4(),!Mr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?Mr.Canvas:t,r=e.Image,a=r===void 0?Mr.Image:r;Mr.Canvas=n,Mr.Image=a,Mr.createCanvasElement=e.createCanvasElement||function(){return new n},Mr.createImageElement=e.createImageElement||function(){return new a},Mr.ImageData=e.ImageData||Mr.ImageData,Mr.Video=e.Video||Mr.Video,Mr.fetch=e.fetch||Mr.fetch,Mr.readFile=e.readFile||Mr.readFile}var $a={getEnv:Ine,setEnv:vk,initialize:L4,createBrowserEnv:x7,createFileSystem:w7,createNodejsEnv:N7,monkeyPatch:Rne,isBrowser:S7,isNodejs:k7};L4();function _7(e){return!$a.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Vd(e){var t=$a.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var a=_7(e);if(!(a instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var fD;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(fD||(fD={}));function j7(e){var t=$a.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Bne(e){return new Promise(function(t,n){if(e instanceof $a.getEnv().Canvas||j7(e))return t();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),n(i))}e.addEventListener("load",r),e.addEventListener("error",a)})}function I4(e){var t=$a.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new _d(e.naturalWidth,e.naturalHeight):e instanceof r?new _d(e.videoWidth,e.videoHeight):new _d(e.width,e.height)}function r2(e){var t=e.width,n=e.height,r=$a.getEnv().createCanvasElement,a=r();return a.width=t,a.height=n,a}function R4(e,t){var n=$a.getEnv().ImageData;if(!(e instanceof n)&&!j7(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=I4(e),a=r.width,i=r.height,o=r2({width:a,height:i});return e instanceof n?Vd(o).putImageData(e,0,0):Vd(o).drawImage(e,0,0,a,i),o}function Fne(e,t){return pt(this,void 0,void 0,function(){var n,r,a,i,o,s;return mt(this,function(l){switch(l.label){case 0:return n=$a.getEnv().createCanvasElement(),r=e.shape.slice(hc(e)?1:0),a=r[0],i=r[1],o=r[2],s=at(function(){return e.as3D(a,i,o).toInt()}),[4,O4.toPixels(s,n)];case 1:return l.sent(),s.dispose(),[2,n]}})})}function hD(e){var t=$a.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}function zne(e,t,n){n===void 0&&(n=!1);var r=$a.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=I4(e),s=t/Math.max(o.height,o.width),l=s*o.width,u=s*o.height,c=r2({width:t,height:t}),f=e instanceof i?e:R4(e),h=Math.abs(l-u)/2,p=n&&l<u?h:0,m=n&&u<l?h:0;return Vd(c).drawImage(f,p,m,l,u),c}var wx=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(a,i){if(t2(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(hc(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var s=a instanceof $a.getEnv().Canvas?a:R4(a);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Kg(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return Ane({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,at(function(){var a=Kg(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof Jn){var l=hc(s)?s:s.expandDims();return l=Dne(l,n),(l.shape[1]!==t||l.shape[2]!==t)&&(l=j4.resizeBilinear(l,[t,t])),l.as3D(t,t,3)}if(s instanceof $a.getEnv().Canvas)return O4.fromPixels(zne(s,t,n));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=ro(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,t,t,3);return i})},e}();function aa(e){return pt(this,void 0,void 0,function(){var t,n,r;return mt(this,function(a){switch(a.label){case 0:if(e instanceof wx)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=t.map(_7),r.forEach(function(i,o){if(!hD(i)&&!t2(i)&&!hc(i))throw typeof t[o]=="string"?new Error("toNetInput -"+n(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+n(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(hc(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return hD(i)&&Bne(i)}))];case 1:return a.sent(),[2,new wx(r,Array.isArray(e))]}})})}function B4(e,t){return pt(this,void 0,void 0,function(){var n,r,a,i,o,s,l;return mt(this,function(u){switch(u.label){case 0:return n=$a.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,aa(e)];case 1:if(a=u.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof n?(o=i,[3,4]):[3,2];case 2:return[4,Fne(i)];case 3:o=u.sent(),u.label=4;case 4:r=o,u.label=5;case 5:return s=Vd(r),l=t.map(function(c){return c instanceof bs?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,l.map(function(c){var f=c.x,h=c.y,p=c.width,m=c.height,v=r2({width:p,height:m});return Vd(v).putImageData(s.getImageData(f,h,p,m),0,0),v})]}})})}function F4(e,t){return pt(this,void 0,void 0,function(){return mt(this,function(n){if(!t2(e)&&!hc(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(hc(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,at(function(){var r=e.shape.slice(hc(e)?1:0),a=r[0],i=r[1],o=r[2],s=t.map(function(u){return u instanceof bs?u.forSize(i,a).box:u}).map(function(u){return u.clipAtImageBorders(i,a)}),l=s.map(function(u){var c=u.x,f=u.y,h=u.width,p=u.height;return Z8(e.as3D(a,i,o),[f,c,0],[p,h,o])});return l})]})})}function Une(e,t){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(a){switch(a.label){case 0:return n=$a.getEnv().fetch,[4,n(e,t)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Wne(e){return pt(this,void 0,void 0,function(){return mt(this,function(t){switch(t.label){case 0:return[4,Une(e)];case 1:return[2,t.sent().json()]}})})}function A7(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var a=e.split("/").filter(function(s){return s}),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function qne(e,t){return pt(this,void 0,void 0,function(){var n,r,a,i;return mt(this,function(o){switch(o.label){case 0:return n=A7(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,Wne(r)];case 1:return i=o.sent(),[2,g7.loadWeights(i,a)]}})})}function Hne(e,t,n){n===void 0&&(n=!1);var r=n?I4(t):t,a=r.width,i=r.height;return e.width=a,e.height=i,{width:a,height:i}}var ru=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,a=n.objProp;return r[a]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof up})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof up)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,a=n.tensor;t.reassignParamFromPath(r,a.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,a=n.tensor,i=ya(a.dataSync());a.dispose(),t.reassignParamFromPath(r,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return pt(this,void 0,void 0,function(){return mt(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return pt(this,void 0,void 0,function(){var n;return mt(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,qne(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return pt(this,void 0,void 0,function(){var n,r,a,i,o,s,l,u,c,f;return mt(this,function(h){switch(h.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=$a.getEnv().readFile,r=A7(t,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(p){return Promise.all(p.map(function(m){return n(m).then(function(v){return v.buffer})}))},s=g7.weightsLoaderFactory(o),c=(u=JSON).parse,[4,n(a)];case 1:return l=c.apply(u,[h.sent().toString()]),[4,s(l,i)];case 2:return f=h.sent(),this.loadFromWeightMap(f),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=n.obj,a=n.objProp;if(!r||!a||!(r[a]instanceof Jn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:a}},e}();function Ji(e,t,n){return at(function(){var r=w4(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Bt(r,t.bias),r})}function aN(e,t,n){return n===void 0&&(n=!1),at(function(){var r=Zn(n?Bt(Go(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Ji(e,t.conv0,[2,2])),a=Ji(r,t.conv1,[1,1]),i=Zn(Bt(r,a)),o=Ji(i,t.conv2,[1,1]);return Zn(Bt(r,Bt(a,o)))})}function Ay(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),at(function(){var a=Zn(n?Bt(Go(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Ji(e,t.conv0,r?[2,2]:[1,1])),i=Ji(a,t.conv1,[1,1]),o=Zn(Bt(a,i)),s=Ji(o,t.conv2,[1,1]),l=Zn(Bt(a,Bt(i,s))),u=Ji(l,t.conv3,[1,1]);return Zn(Bt(a,Bt(i,Bt(s,u))))})}function fs(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),at(function(){var a=Bt(Go(e,t.filters,[1,1],n),t.bias);return r?Zn(a):a})}function au(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function a2(e,t){return function(n,r,a,i){var o=mi(e(n*r*a*a),[a,a,n,r]),s=jr(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}}function z4(e,t){return function(n,r,a){var i=dc(e(n*r),[n,r]),o=jr(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var C7=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function U4(e,t){return function(n,r,a){var i=mi(e(9*n),[3,3,n,1]),o=mi(e(n*r),[1,1,n,r]),s=jr(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new C7(i,o,s)}}function W4(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new C7(n,r,a)}}function Dc(e,t){return function(n,r,a){var i=e[n];if(!e2(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:a||n}),i}}function iu(e){var t=e;function n(a){var i=t.slice(0,a);return t=t.slice(a),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function E7(e,t){var n=a2(e,t),r=U4(e,t);function a(o,s,l,u){u===void 0&&(u=!1);var c=u?n(o,s,3,l+"/conv0"):r(o,s,l+"/conv0"),f=r(s,s,l+"/conv1"),h=r(s,s,l+"/conv2");return{conv0:c,conv1:f,conv2:h}}function i(o,s,l,u){u===void 0&&(u=!1);var c=a(o,s,l,u),f=c.conv0,h=c.conv1,p=c.conv2,m=r(s,s,l+"/conv3");return{conv0:f,conv1:h,conv2:p,conv3:m}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function $ne(e){var t=[],n=iu(e),r=n.extractWeights,a=n.getRemainingWeights,i=E7(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),l=i(64,128,"dense2"),u=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l,dense3:u}}}function D7(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function P7(e,t){var n=Dc(e,t),r=D7(n),a=W4(n);function i(s,l){l===void 0&&(l=!1);var u=l?r(s+"/conv0"):a(s+"/conv0"),c=a(s+"/conv1"),f=a(s+"/conv2");return{conv0:u,conv1:c,conv2:f}}function o(s,l){l===void 0&&(l=!1);var u=l?r(s+"/conv0"):a(s+"/conv0"),c=a(s+"/conv1"),f=a(s+"/conv2"),h=a(s+"/conv3");return{conv0:u,conv1:c,conv2:f,conv3:h}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function Vne(e){var t=[],n=P7(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return au(e,t),{params:r,paramMappings:t}}var O7=function(e){Et(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return at(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Vv(a,i).div(et(255)),s=Ay(o,r.dense0,!0);return s=Ay(s,r.dense1),s=Ay(s,r.dense2),s=Ay(s,r.dense3),s=Hv(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Vne(n)},t.prototype.extractParams=function(n){return $ne(n)},t}(ru);function Us(e,t){return at(function(){return Bt(J1(e,t.weights),t.bias)})}function Gne(e,t,n){var r=[],a=iu(e),i=a.extractWeights,o=a.getRemainingWeights,s=z4(i,r),l=s(t,n,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:l}}}function Kne(e){var t=[],n=Dc(e,t);function r(i){var o=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:o,bias:s}}var a={fc:r("fc")};return au(e,t),{params:a,paramMappings:t}}function T7(e){var t={},n={};return Object.keys(e).forEach(function(r){var a=r.startsWith("fc")?n:t;a[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var M7=function(e){Et(t,e);function t(n,r){var a=e.call(this,n)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return at(function(){var i=n instanceof wx?r.faceFeatureExtractor.forwardInput(n):n;return Us(i.as2D(i.shape[0],-1),a.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return Gne(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=T7(n),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),Kne(i)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},t}(ru),pD=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Yne=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);pD.forEach(function(r,a){n[r]=t[a]})}return e.prototype.asSortedArray=function(){var t=this;return pD.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),Xne=function(e){Et(t,e);function t(n){return n===void 0&&(n=new O7),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return at(function(){return tu(r.runNet(n))})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictExpressions=function(n){return pt(this,void 0,void 0,function(){var r,a,i,o,s=this;return mt(this,function(l){switch(l.label){case 0:return[4,aa(n)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return a=l.sent(),[4,Promise.all(Fr(a).map(function(u){return pt(s,void 0,void 0,function(){var c;return mt(this,function(f){switch(f.label){case 0:return[4,u.data()];case 1:return c=f.sent(),u.dispose(),[2,c]}})})}))];case 3:return i=l.sent(),a.dispose(),o=i.map(function(u){return new Yne(u)}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(M7);function L7(e,t){var n={expressions:t};return Object.assign({},e,n)}function I7(e){return b7(e)&&e.landmarks instanceof Xg&&e.unshiftedLandmarks instanceof Xg&&e.alignedRect instanceof bs}function i2(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o=new bs(e.detection.score,a.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,s)}function Jne(e,t){var n=a2(e,t),r=U4(e,t);function a(o,s,l){var u=r(o,s,l+"/separable_conv0"),c=r(s,s,l+"/separable_conv1"),f=n(o,s,1,l+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:f}}function i(o,s){var l=r(o,o,s+"/separable_conv0"),u=r(o,o,s+"/separable_conv1"),c=r(o,o,s+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function Qne(e,t){var n=[],r=iu(e),a=r.extractWeights,i=r.getRemainingWeights,o=Jne(a,n),s=o.extractConvParams,l=o.extractSeparableConvParams,u=o.extractReductionBlockParams,c=o.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),h=u(32,64,"entry_flow/reduction_block_0"),p=u(64,128,"entry_flow/reduction_block_1"),m={conv_in:f,reduction_block_0:h,reduction_block_1:p},v={};Kg(t,0,1).forEach(function(x){v["main_block_"+x]=c(128,"middle_flow/main_block_"+x)});var y=u(128,256,"exit_flow/reduction_block"),g=l(256,512,"exit_flow/separable_conv"),b={reduction_block:y,separable_conv:g};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:m,middle_flow:v,exit_flow:b}}}function Zne(e,t){var n=Dc(e,t),r=D7(n),a=W4(n);function i(s){var l=a(s+"/separable_conv0"),u=a(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:l,separable_conv1:u,expansion_conv:c}}function o(s){var l=a(s+"/separable_conv0"),u=a(s+"/separable_conv1"),c=a(s+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function ere(e,t){var n=[],r=Zne(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,l=a("entry_flow/conv_in"),u=o("entry_flow/reduction_block_0"),c=o("entry_flow/reduction_block_1"),f={conv_in:l,reduction_block_0:u,reduction_block_1:c},h={};Kg(t,0,1).forEach(function(y){h["main_block_"+y]=s("middle_flow/main_block_"+y)});var p=o("exit_flow/reduction_block"),m=i("exit_flow/separable_conv"),v={reduction_block:p,separable_conv:m};return au(e,n),{params:{entry_flow:f,middle_flow:h,exit_flow:v},paramMappings:n}}function R7(e,t,n){return Bt(Go(e,t.filters,n,"same"),t.bias)}function iN(e,t,n){n===void 0&&(n=!0);var r=n?Zn(e):e;return r=Ji(r,t.separable_conv0,[1,1]),r=Ji(Zn(r),t.separable_conv1,[1,1]),r=Xr(r,[3,3],[2,2],"same"),r=Bt(r,R7(e,t.expansion_conv,[2,2])),r}function tre(e,t){var n=Ji(Zn(e),t.separable_conv0,[1,1]);return n=Ji(Zn(n),t.separable_conv1,[1,1]),n=Ji(Zn(n),t.separable_conv2,[1,1]),n=Bt(n,e),n}var nre=function(e){Et(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return at(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Vv(i,o).div(et(256)),l=Zn(R7(s,a.entry_flow.conv_in,[2,2]));return l=iN(l,a.entry_flow.reduction_block_0,!1),l=iN(l,a.entry_flow.reduction_block_1),Kg(r._numMainBlocks,0,1).forEach(function(u){l=tre(l,a.middle_flow["main_block_"+u])}),l=iN(l,a.exit_flow.reduction_block),l=Zn(Ji(l,a.exit_flow.separable_conv,[1,1])),l})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return ere(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return Qne(n,this._numMainBlocks)},t}(ru);function rre(e){var t=[],n=iu(e),r=n.extractWeights,a=n.getRemainingWeights,i=z4(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}function are(e){var t=[],n=Dc(e,t);function r(i){var o=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:o,bias:s}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return au(e,t),{params:a,paramMappings:t}}var Nx;(function(e){e.FEMALE="female",e.MALE="male"})(Nx||(Nx={}));var ire=function(e){Et(t,e);function t(n){n===void 0&&(n=new nre(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return at(function(){var i=n instanceof wx?r.faceFeatureExtractor.forwardInput(n):n,o=Hv(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=Us(o,a.fc.age).as1D(),l=Us(o,a.fc.gender);return{age:s,gender:l}})},t.prototype.forwardInput=function(n){var r=this;return at(function(){var a=r.runNet(n),i=a.age,o=a.gender;return{age:i,gender:tu(o)}})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return pt(this,void 0,void 0,function(){var r,a,i,o,s,l,u=this;return mt(this,function(c){switch(c.label){case 0:return[4,aa(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),i=Fr(a.age),o=Fr(a.gender),s=i.map(function(f,h){return{ageTensor:f,genderTensor:o[h]}}),[4,Promise.all(s.map(function(f){var h=f.ageTensor,p=f.genderTensor;return pt(u,void 0,void 0,function(){var m,v,y,g,b;return mt(this,function(x){switch(x.label){case 0:return[4,h.data()];case 1:return m=x.sent()[0],[4,p.data()];case 2:return v=x.sent()[0],y=v>.5,g=y?Nx.MALE:Nx.FEMALE,b=y?v:1-v,h.dispose(),p.dispose(),[2,{age:m,gender:g,genderProbability:b}]}})})}))];case 3:return l=c.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?l:l[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return rre(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=T7(n),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),are(i)},t.prototype.extractParams=function(n){var r=1539,a=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},t}(ru),B7=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,a){var i=a.map(function(s){var l=s.width,u=s.height,c=r/Math.max(u,l);return{width:l*c,height:u*c}}),o=i.length;return at(function(){var s=function(h,p){return ro([Ys([68],h),Ys([68],p)],1).as2D(1,136).as1D()},l=function(h,p){var m=i[h],v=m.width,y=m.height;return p(v,y)?Math.abs(v-y)/2:0},u=function(h){return l(h,function(p,m){return p<m})},c=function(h){return l(h,function(p,m){return m<p})},f=n.mul(Ys([o,136],r)).sub(ro(Array.from(Array(o),function(h,p){return s(u(p),c(p))}))).div(ro(Array.from(Array(o),function(h,p){return s(i[p].width,i[p].height)})));return f})},t.prototype.forwardInput=function(n){var r=this;return at(function(){var a=r.runNet(n);return r.postProcess(a,n.inputSize,n.inputDimensions.map(function(i){var o=i[0],s=i[1];return{height:o,width:s}}))})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.detectLandmarks=function(n){return pt(this,void 0,void 0,function(){var r,a,i,o=this;return mt(this,function(s){switch(s.label){case 0:return[4,aa(n)];case 1:return r=s.sent(),a=at(function(){return Fr(o.forwardInput(r))}),[4,Promise.all(a.map(function(l,u){return pt(o,void 0,void 0,function(){var c,f,h,p,m;return mt(this,function(v){switch(v.label){case 0:return h=(f=Array).from,[4,l.data()];case 1:return c=h.apply(f,[v.sent()]),p=c.filter(function(y,g){return sD(g)}),m=c.filter(function(y,g){return!sD(g)}),[2,new Lne(Array(68).fill(0).map(function(y,g){return new sn(p[g],m[g])}),{height:r.getInputHeight(u),width:r.getInputWidth(u)})]}})})}))];case 2:return i=s.sent(),a.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(M7),F7=function(e){Et(t,e);function t(n){return n===void 0&&(n=new O7),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(B7);function ore(e){var t=[],n=P7(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return au(e,t),{params:r,paramMappings:t}}function sre(e){var t=[],n=iu(e),r=n.extractWeights,a=n.getRemainingWeights,i=E7(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),l=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l}}}var lre=function(e){Et(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return at(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Vv(a,i).div(et(255)),s=aN(o,r.dense0,!0);return s=aN(s,r.dense1),s=aN(s,r.dense2),s=Hv(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return ore(n)},t.prototype.extractParams=function(n){return sre(n)},t}(ru),ure=function(e){Et(t,e);function t(n){return n===void 0&&(n=new lre),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(B7);(function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(F7);function cre(e,t){return Bt(Ua(e,t.weights),t.biases)}function q4(e,t,n,r,a){a===void 0&&(a="same");var i=t.conv,o=i.filters,s=i.bias,l=Go(e,o,n,a);return l=Bt(l,s),l=cre(l,t.scale),r?Zn(l):l}function dre(e,t){return q4(e,t,[1,1],!0)}function z7(e,t){return q4(e,t,[1,1],!1)}function U7(e,t){return q4(e,t,[2,2],!0,"valid")}function fre(e,t){function n(s,l,u){var c=e(s),f=c.length/(l*u*u);if(_ne(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+l+", filterSize: "+u);return at(function(){return wc(mi(c,[l,f,u,u]),[2,3,1,0])})}function r(s,l,u,c){var f=n(s,l,u),h=jr(e(l));return t.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:h}}function a(s,l){var u=jr(e(s)),c=jr(e(s));return t.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:u,biases:c}}function i(s,l,u,c){var f=r(s,l,u,c+"/conv"),h=a(l,c+"/scale");return{conv:f,scale:h}}function o(s,l,u,c,f){f===void 0&&(f=!1);var h=i((f?.5:1)*s,l,u,c+"/conv1"),p=i(s,l,u,c+"/conv2");return{conv1:h,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function hre(e){var t=iu(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=fre(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,l=o(4704,32,7,"conv32_down"),u=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),p=s(36864,64,3,"conv64_1"),m=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),y=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),b=s(147456,128,3,"conv128_2"),x=s(589824,256,3,"conv256_down",!0),N=s(589824,256,3,"conv256_1"),k=s(589824,256,3,"conv256_2"),j=s(589824,256,3,"conv256_down_out"),S=at(function(){return wc(dc(n(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var A={conv32_down:l,conv32_1:u,conv32_2:c,conv32_3:f,conv64_down:h,conv64_1:p,conv64_2:m,conv64_3:v,conv128_down:y,conv128_1:g,conv128_2:b,conv256_down:x,conv256_1:N,conv256_2:k,conv256_down_out:j,fc:S};return{params:A,paramMappings:a}}function pre(e,t){var n=Dc(e,t);function r(o){var s=n(o+"/scale/weights",1),l=n(o+"/scale/biases",1);return{weights:s,biases:l}}function a(o){var s=n(o+"/conv/filters",4),l=n(o+"/conv/bias",1),u=r(o);return{conv:{filters:s,bias:l},scale:u}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function mre(e){var t=[],n=pre(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),l=a("conv32_3"),u=a("conv64_down"),c=a("conv64_1"),f=a("conv64_2"),h=a("conv64_3"),p=a("conv128_down"),m=a("conv128_1"),v=a("conv128_2"),y=a("conv256_down"),g=a("conv256_1"),b=a("conv256_2"),x=a("conv256_down_out"),N=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!kne(N))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+N);var k={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:l,conv64_down:u,conv64_1:c,conv64_2:f,conv64_3:h,conv128_down:p,conv128_1:m,conv128_2:v,conv256_down:y,conv256_1:g,conv256_2:b,conv256_down_out:x,fc:N};return au(e,t),{params:k,paramMappings:t}}function Es(e,t){var n=dre(e,t.conv1);return n=z7(n,t.conv2),n=Bt(n,e),n=Zn(n),n}function Cy(e,t){var n=U7(e,t.conv1);n=z7(n,t.conv2);var r=Hv(e,2,2,"valid"),a=Rn(r.shape),i=r.shape[3]!==n.shape[3],o=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(o){var s=yg(n.shape);s[1]=1;var l=Rn(s);n=Br([n,l],1);var u=yg(n.shape);u[2]=1;var c=Rn(u);n=Br([n,c],2)}return r=i?Br([r,a],3):r,n=Bt(r,n),n=Zn(n),n}var gre=function(e){Et(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return at(function(){var a=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Vv(a,i).div(et(256)),s=U7(o,r.conv32_down);s=Xr(s,3,2,"valid"),s=Es(s,r.conv32_1),s=Es(s,r.conv32_2),s=Es(s,r.conv32_3),s=Cy(s,r.conv64_down),s=Es(s,r.conv64_1),s=Es(s,r.conv64_2),s=Es(s,r.conv64_3),s=Cy(s,r.conv128_down),s=Es(s,r.conv128_1),s=Es(s,r.conv128_2),s=Cy(s,r.conv256_down),s=Es(s,r.conv256_1),s=Es(s,r.conv256_2),s=Cy(s,r.conv256_down_out);var l=s.mean([1,2]),u=J1(l,r.fc);return u})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return pt(this,void 0,void 0,function(){var r,a,i,o=this;return mt(this,function(s){switch(s.label){case 0:return[4,aa(n)];case 1:return r=s.sent(),a=at(function(){return Fr(o.forwardInput(r))}),[4,Promise.all(a.map(function(l){return l.data()}))];case 2:return i=s.sent(),a.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return mre(n)},t.prototype.extractParams=function(n){return hre(n)},t}(ru);function W7(e,t){var n={descriptor:t};return Object.assign({},e,n)}function q7(e,t){var n={age:t};return Object.assign({},e,n)}function H7(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var $7=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,a=n.scaleFactor,i=n.maxNumScales,o=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(l){return typeof l!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(l){return typeof l!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function vre(e,t){function n(l,u){var c=mi(e(9*l),[3,3,l,1]),f=jr(e(l)),h=jr(e(l)),p=jr(e(l)),m=jr(e(l));return t.push({paramPath:u+"/filters"},{paramPath:u+"/batch_norm_scale"},{paramPath:u+"/batch_norm_offset"},{paramPath:u+"/batch_norm_mean"},{paramPath:u+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:h,batch_norm_mean:p,batch_norm_variance:m}}function r(l,u,c,f,h){var p=mi(e(l*u*c*c),[c,c,l,u]),m=jr(e(u));return t.push({paramPath:f+"/filters"},{paramPath:f+"/"+(h?"batch_norm_offset":"bias")}),{filters:p,bias:m}}function a(l,u,c,f){var h=r(l,u,c,f,!0),p=h.filters,m=h.bias;return{filters:p,batch_norm_offset:m}}function i(l,u,c){var f=n(l,c+"/depthwise_conv"),h=a(l,u,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:h}}function o(){var l=a(3,32,3,"mobilenetv1/conv_0"),u=i(32,64,"mobilenetv1/conv_1"),c=i(64,128,"mobilenetv1/conv_2"),f=i(128,128,"mobilenetv1/conv_3"),h=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),m=i(256,512,"mobilenetv1/conv_6"),v=i(512,512,"mobilenetv1/conv_7"),y=i(512,512,"mobilenetv1/conv_8"),g=i(512,512,"mobilenetv1/conv_9"),b=i(512,512,"mobilenetv1/conv_10"),x=i(512,512,"mobilenetv1/conv_11"),N=i(512,1024,"mobilenetv1/conv_12"),k=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:u,conv_2:c,conv_3:f,conv_4:h,conv_5:p,conv_6:m,conv_7:v,conv_8:y,conv_9:g,conv_10:b,conv_11:x,conv_12:N,conv_13:k}}function s(){var l=a(1024,256,1,"prediction_layer/conv_0"),u=a(256,512,3,"prediction_layer/conv_1"),c=a(512,128,1,"prediction_layer/conv_2"),f=a(128,256,3,"prediction_layer/conv_3"),h=a(256,128,1,"prediction_layer/conv_4"),p=a(128,256,3,"prediction_layer/conv_5"),m=a(256,64,1,"prediction_layer/conv_6"),v=a(64,128,3,"prediction_layer/conv_7"),y=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),b=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),x=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),N=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),k=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),j=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),S=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),A=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),P=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),T=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),E=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),D={box_encoding_predictor:y,class_predictor:g},R={box_encoding_predictor:b,class_predictor:x},F={box_encoding_predictor:N,class_predictor:k},H={box_encoding_predictor:j,class_predictor:S},B={box_encoding_predictor:A,class_predictor:P},U={box_encoding_predictor:T,class_predictor:E};return{conv_0:l,conv_1:u,conv_2:c,conv_3:f,conv_4:h,conv_5:p,conv_6:m,conv_7:v,box_predictor_0:D,box_predictor_1:R,box_predictor_2:F,box_predictor_3:H,box_predictor_4:B,box_predictor_5:U}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function yre(e){var t=[],n=iu(e),r=n.extractWeights,a=n.getRemainingWeights,i=vre(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,l=o(),u=s(),c=o4(r(5118*4),[1,5118,4]),f={extra_dim:c};if(t.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:l,prediction_layer:u,output_layer:f},paramMappings:t}}function bre(e,t){var n=Dc(e,t);function r(u,c,f){var h=n(u+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),p=n(u+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:h,batch_norm_offset:p}}function a(u){var c="mobilenetv1/conv_"+u,f="MobilenetV1/Conv2d_"+u+"_depthwise",h=c+"/depthwise_conv",p=c+"/pointwise_conv",m=n(f+"/depthwise_weights",4,h+"/filters"),v=n(f+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),y=n(f+"/BatchNorm/beta",1,h+"/batch_norm_offset"),g=n(f+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),b=n(f+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:m,batch_norm_scale:v,batch_norm_offset:y,batch_norm_mean:g,batch_norm_variance:b},pointwise_conv:r("MobilenetV1",u,p)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(u,c){var f=n(u+"/weights",4,c+"/filters"),h=n(u+"/biases",1,c+"/bias");return{filters:f,bias:h}}function s(u){var c=o("Prediction/BoxPredictor_"+u+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+u+"/box_encoding_predictor"),f=o("Prediction/BoxPredictor_"+u+"/ClassPredictor","prediction_layer/box_predictor_"+u+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function xre(e){var t=[],n=bre(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!t2(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return au(e,t),{params:o,paramMappings:t}}function Os(e,t,n){return at(function(){var r=Go(e,t.filters,n,"same");return r=Bt(r,t.batch_norm_offset),v4(r,0,6)})}var wre=.0010000000474974513;function Nre(e,t,n){return at(function(){var r=X1(e,t.filters,n,"same");return r=B8(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,wre),v4(r,0,6)})}function Sre(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function kre(e,t){return at(function(){var n=null,r=Os(e,t.conv_0,[2,2]),a=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(a.forEach(function(i,o){var s=o+1,l=Sre(s);r=Nre(r,i.depthwise_conv,l),r=Os(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function _re(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>a}).sort(function(c,f){return f.score-c.score}),l=function(c){return c<=r?1:0},u=[];return s.forEach(function(c){if(!(u.length>=o)){for(var f=c.score,h=u.length-1;h>=0;--h){var p=jre(e,c.boxIndex,u[h]);if(p!==0&&(c.score*=l(p),c.score<=a))break}f===c.score&&u.push(c.boxIndex)}}),u}function jre(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),h=(o-a)*(s-i),p=(c-l)*(f-u);if(h<=0||p<=0)return 0;var m=Math.max(a,l),v=Math.max(i,u),y=Math.min(o,c),g=Math.min(s,f),b=Math.max(y-m,0)*Math.max(g-v,0);return b/(h+p-b)}function Are(e){var t=Fr(wc(e,[1,0])),n=[Wr(t[2],t[0]),Wr(t[3],t[1])],r=[Bt(t[0],os(n[0],et(2))),Bt(t[1],os(n[1],et(2)))];return{sizes:n,centers:r}}function Cre(e,t){var n=Are(e),r=n.sizes,a=n.centers,i=Fr(wc(t,[1,0])),o=os(Ua(ck(os(i[2],et(5))),r[0]),et(2)),s=Bt(Ua(os(i[0],et(10)),r[0]),a[0]),l=os(Ua(ck(os(i[3],et(5))),r[1]),et(2)),u=Bt(Ua(os(i[1],et(10)),r[1]),a[1]);return wc(ro([Wr(s,o),Wr(u,l),Bt(s,o),Bt(u,l)]),[1,0])}function Ere(e,t,n){return at(function(){var r=e.shape[0],a=Cre(us(Bh(n.extra_dim,[r,1,1]),[-1,4]),us(e,[-1,4]));a=us(a,[r,a.shape[0]/r,4]);var i=M8(Zs(t,[0,0,1],[-1,-1,-1])),o=Zs(i,[0,0,0],[-1,-1,1]);o=us(o,[r,o.shape[1]]);var s=Fr(a),l=Fr(o);return{boxes:s,scores:l}})}function Yf(e,t){return at(function(){var n=e.shape[0],r=us(fs(e,t.box_encoding_predictor),[n,-1,1,4]),a=us(fs(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function Dre(e,t,n){return at(function(){var r=Os(e,n.conv_0,[1,1]),a=Os(r,n.conv_1,[2,2]),i=Os(a,n.conv_2,[1,1]),o=Os(i,n.conv_3,[2,2]),s=Os(o,n.conv_4,[1,1]),l=Os(s,n.conv_5,[2,2]),u=Os(l,n.conv_6,[1,1]),c=Os(u,n.conv_7,[2,2]),f=Yf(t,n.box_predictor_0),h=Yf(e,n.box_predictor_1),p=Yf(a,n.box_predictor_2),m=Yf(o,n.box_predictor_3),v=Yf(l,n.box_predictor_4),y=Yf(c,n.box_predictor_5),g=Br([f.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding,y.boxPredictionEncoding],1),b=Br([f.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,v.classPrediction,y.classPrediction],1);return{boxPredictions:g,classPredictions:b}})}var o2=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,a=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),V7=function(e){Et(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return at(function(){var a=n.toBatchTensor(512,!1).toFloat(),i=Wr(Ua(a,et(.007843137718737125)),et(1)),o=kre(i,r.mobilenetv1),s=Dre(o.out,o.conv11,r.prediction_layer),l=s.boxPredictions,u=s.classPredictions;return Ere(l,u,r.output_layer)})},t.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,aa(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a,i,o,s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A;return mt(this,function(P){switch(P.label){case 0:return a=new o2(r),i=a.maxResults,o=a.minConfidence,[4,aa(n)];case 1:for(s=P.sent(),l=this.forwardInput(s),u=l.boxes,c=l.scores,f=u[0],h=c[0],p=1;p<u.length;p++)u[p].dispose(),c[p].dispose();return y=(v=Array).from,[4,h.data()];case 2:return m=y.apply(v,[P.sent()]),g=.5,b=_re(f,m,i,g,o),x=s.getReshapedInputDimensions(0),N=s.inputSize,k=N/x.width,j=N/x.height,S=f.arraySync(),A=b.map(function(T){var E=[Math.max(0,S[T][0]),Math.min(1,S[T][2])].map(function(U){return U*j}),D=E[0],R=E[1],F=[Math.max(0,S[T][1]),Math.min(1,S[T][3])].map(function(U){return U*k}),H=F[0],B=F[1];return new bs(m[T],new M4(H,D,B-H,R-D),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),h.dispose(),[2,A]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return xre(n)},t.prototype.extractParams=function(n){return yre(n)},t}(ru);(function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(V7);var Pre=.4,Ore=[new sn(.738768,.874946),new sn(2.42204,2.65704),new sn(4.30971,7.04493),new sn(10.246,4.59428),new sn(12.6868,11.8741)],Tre=[new sn(1.603231,2.094468),new sn(6.041143,7.080126),new sn(2.882459,3.518061),new sn(4.266906,5.178857),new sn(9.041765,10.66308)],Mre=[117.001,114.697,97.404],Lre="tiny_yolov2_model",Ire="tiny_yolov2_separable_conv_model",Ey=function(e){return typeof e=="number"};function Rre(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Ey(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return Ey(t.x)&&Ey(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Ey)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function H4(e){return at(function(){var t=Ua(e,et(.10000000149011612));return Bt(Zn(Wr(e,t)),t)})}function Du(e,t){return at(function(){var n=of(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Go(n,t.conv.filters,[1,1],"valid"),n=Wr(n,t.bn.sub),n=Ua(n,t.bn.truediv),n=Bt(n,t.conv.bias),H4(n)})}function Pu(e,t){return at(function(){var n=of(e,[[0,0],[1,1],[1,1],[0,0]]);return n=w4(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Bt(n,t.bias),H4(n)})}function Bre(e,t){var n=a2(e,t);function r(o,s){var l=jr(e(o)),u=jr(e(o));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:l,truediv:u}}function a(o,s,l){var u=n(o,s,3,l+"/conv"),c=r(s,l+"/bn");return{conv:u,bn:c}}var i=U4(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function Fre(e,t,n,r){var a=iu(e),i=a.extractWeights,o=a.getRemainingWeights,s=[],l=Bre(i,s),u=l.extractConvParams,c=l.extractConvWithBatchNormParams,f=l.extractSeparableConvParams,h;if(t.withSeparableConvs){var p=r[0],m=r[1],v=r[2],y=r[3],g=r[4],b=r[5],x=r[6],N=r[7],k=r[8],j=t.isFirstLayerConv2d?u(p,m,3,"conv0"):f(p,m,"conv0"),S=f(m,v,"conv1"),A=f(v,y,"conv2"),P=f(y,g,"conv3"),T=f(g,b,"conv4"),E=f(b,x,"conv5"),D=N?f(x,N,"conv6"):void 0,R=k?f(N,k,"conv7"):void 0,F=u(k||N||x,5*n,1,"conv8");h={conv0:j,conv1:S,conv2:A,conv3:P,conv4:T,conv5:E,conv6:D,conv7:R,conv8:F}}else{var p=r[0],m=r[1],v=r[2],y=r[3],g=r[4],b=r[5],x=r[6],N=r[7],k=r[8],j=c(p,m,"conv0"),S=c(m,v,"conv1"),A=c(v,y,"conv2"),P=c(y,g,"conv3"),T=c(g,b,"conv4"),E=c(b,x,"conv5"),D=c(x,N,"conv6"),R=c(N,k,"conv7"),F=u(k,5*n,1,"conv8");h={conv0:j,conv1:S,conv2:A,conv3:P,conv4:T,conv5:E,conv6:D,conv7:R,conv8:F}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:h,paramMappings:s}}function zre(e,t){var n=Dc(e,t);function r(s){var l=n(s+"/sub",1),u=n(s+"/truediv",1);return{sub:l,truediv:u}}function a(s){var l=n(s+"/filters",4),u=n(s+"/bias",1);return{filters:l,bias:u}}function i(s){var l=a(s+"/conv"),u=r(s+"/bn");return{conv:l,bn:u}}var o=W4(n);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function Ure(e,t){var n=[],r=zre(e,n),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:l>7?o("conv6"):void 0,conv7:l>8?o("conv7"):void 0,conv8:a("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return au(e,n),{params:s,paramMappings:n}}var mD;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(mD||(mD={}));var $4=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,a=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),G7=function(e){Et(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return Rre(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var a=Du(n,r.conv0);return a=Xr(a,[2,2],[2,2],"same"),a=Du(a,r.conv1),a=Xr(a,[2,2],[2,2],"same"),a=Du(a,r.conv2),a=Xr(a,[2,2],[2,2],"same"),a=Du(a,r.conv3),a=Xr(a,[2,2],[2,2],"same"),a=Du(a,r.conv4),a=Xr(a,[2,2],[2,2],"same"),a=Du(a,r.conv5),a=Xr(a,[2,2],[1,1],"same"),a=Du(a,r.conv6),a=Du(a,r.conv7),fs(a,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var a=this.config.isFirstLayerConv2d?H4(fs(n,r.conv0,"valid",!1)):Pu(n,r.conv0);return a=Xr(a,[2,2],[2,2],"same"),a=Pu(a,r.conv1),a=Xr(a,[2,2],[2,2],"same"),a=Pu(a,r.conv2),a=Xr(a,[2,2],[2,2],"same"),a=Pu(a,r.conv3),a=Xr(a,[2,2],[2,2],"same"),a=Pu(a,r.conv4),a=Xr(a,[2,2],[2,2],"same"),a=Pu(a,r.conv5),a=Xr(a,[2,2],[1,1],"same"),a=r.conv6?Pu(a,r.conv6):a,a=r.conv7?Pu(a,r.conv7):a,fs(a,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return at(function(){var o=n.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Vv(o,a.config.meanRgb):o,o=o.div(et(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},t.prototype.forward=function(n,r){return pt(this,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,aa(n)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a,i,o,s,l,u,c,f,h,p,m,v,y,g,b=this;return mt(this,function(x){switch(x.label){case 0:return a=new $4(r),i=a.inputSize,o=a.scoreThreshold,[4,aa(n)];case 1:return s=x.sent(),[4,this.forwardInput(s,i)];case 2:return l=x.sent(),u=at(function(){return Fr(l)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(u,s.getReshapedInputDimensions(0),o)];case 3:return f=x.sent(),l.dispose(),u.dispose(),h=f.map(function(N){return N.box}),p=f.map(function(N){return N.score}),m=f.map(function(N){return N.classScore}),v=f.map(function(N){return b.config.classes[N.label]}),y=Yg(h.map(function(N){return N.rescale(i)}),p,this.config.iouThreshold,!0),g=y.map(function(N){return new y7(p[N],m[N],v[N],h[N],c)}),[2,g]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return Ure(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return Fre(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,a){return pt(this,void 0,void 0,function(){var i,o,s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A,P,T,E,D,R,F,H,B,U,W=this;return mt(this,function(z){switch(z.label){case 0:return i=r.width,o=r.height,s=Math.max(i,o),l=s/i,u=s/o,c=n.shape[1],f=this.config.anchors.length,h=at(function(){var J=n.reshape([c,c,f,W.boxEncodingSize]),ee=J.slice([0,0,0,0],[c,c,f,4]),L=J.slice([0,0,0,4],[c,c,f,1]),q=W.withClassScores?tu(J.slice([0,0,0,5],[c,c,f,W.config.classes.length]),3):et(0);return[ee,L,q]}),p=h[0],m=h[1],v=h[2],y=[],[4,m.array()];case 1:return g=z.sent(),[4,p.array()];case 2:b=z.sent(),x=0,z.label=3;case 3:if(!(x<c))return[3,12];N=0,z.label=4;case 4:if(!(N<c))return[3,11];k=0,z.label=5;case 5:return k<f?(j=rN(g[x][N][k][0]),!a||j>a?(S=(N+rN(b[x][N][k][0]))/c*l,A=(x+rN(b[x][N][k][1]))/c*u,P=Math.exp(b[x][N][k][2])*this.config.anchors[k].x/c*l,T=Math.exp(b[x][N][k][3])*this.config.anchors[k].y/c*u,E=S-P/2,D=A-T/2,R={row:x,col:N,anchor:k},this.withClassScores?[4,this.extractPredictedClass(v,R)]:[3,7]):[3,9]):[3,10];case 6:return U=z.sent(),[3,8];case 7:U={classScore:1,label:0},z.label=8;case 8:F=U,H=F.classScore,B=F.label,y.push(Ta({box:new n2(E,D,E+P,D+T),score:j,classScore:j*H,label:B},R)),z.label=9;case 9:return k++,[3,5];case 10:return N++,[3,4];case 11:return x++,[3,3];case 12:return p.dispose(),m.dispose(),v.dispose(),[2,y]}})})},t.prototype.extractPredictedClass=function(n,r){return pt(this,void 0,void 0,function(){var a,i,o,s;return mt(this,function(l){switch(l.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,n.array()];case 1:return s=l.sent(),[2,Array(this.config.classes.length).fill(0).map(function(u,c){return s[a][i][o][c]}).map(function(u,c){return{classScore:u,label:c}}).reduce(function(u,c){return u.classScore>c.classScore?u:c})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(ru),Wre=function(e){Et(t,e);function t(n){n===void 0&&(n=!0);var r=this,a=Object.assign({},{withSeparableConvs:n,iouThreshold:Pre,classes:["face"]},n?{anchors:Tre,meanRgb:Mre}:{anchors:Ore,withClassScores:!0});return r=e.call(this,a)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return pt(this,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new bs(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Ire:Lre},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(G7),K7=function(e){Et(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}($4),Gv=function(){function e(){}return e.prototype.then=function(t){return pt(this,void 0,void 0,function(){var n;return mt(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return pt(this,void 0,void 0,function(){return mt(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function s2(e,t,n,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),pt(this,void 0,void 0,function(){var i,o,s,l,u;return mt(this,function(c){switch(c.label){case 0:return i=e.map(function(f){return I7(f)?a(f):f.detection}),s=r,s?[3,5]:t instanceof Jn?[4,F4(t,i)]:[3,2];case 1:return l=c.sent(),[3,4];case 2:return[4,B4(t,i)];case 3:l=c.sent(),c.label=4;case 4:s=l,c.label=5;case 5:return o=s,[4,n(o)];case 6:return u=c.sent(),o.forEach(function(f){return f instanceof Jn&&f.dispose()}),[2,u]}})})}function V4(e,t,n,r,a){return pt(this,void 0,void 0,function(){var i=this;return mt(this,function(o){return[2,s2([e],t,function(s){return pt(i,void 0,void 0,function(){return mt(this,function(l){return[2,n(s[0])]})})},r,a)]})})}function qre(e){return at(function(){return ro(Fr(e,3).reverse(),3)})}var Dy=2,Sx=12;function Hre(e,t){var n=a2(e,t),r=z4(e,t);function a(u,c){var f=jr(e(u));return t.push({paramPath:c}),f}function i(u,c,f){f===void 0&&(f=!1);var h=n(u[0],u[1],3,c+"/conv1"),p=a(u[1],c+"/prelu1_alpha"),m=n(u[1],u[2],3,c+"/conv2"),v=a(u[2],c+"/prelu2_alpha"),y=n(u[2],u[3],f?2:3,c+"/conv3"),g=a(u[3],c+"/prelu3_alpha");return{conv1:h,prelu1_alpha:p,conv2:m,prelu2_alpha:v,conv3:y,prelu3_alpha:g}}function o(){var u=i([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return Ta(Ta({},u),{conv4_1:c,conv4_2:f})}function s(){var u=i([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=a(128,"rnet/prelu4_alpha"),h=r(128,2,"rnet/fc2_1"),p=r(128,4,"rnet/fc2_2");return Ta(Ta({},u),{fc1:c,prelu4_alpha:f,fc2_1:h,fc2_2:p})}function l(){var u=i([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=a(128,"onet/prelu4_alpha"),h=r(1152,256,"onet/fc1"),p=a(256,"onet/prelu5_alpha"),m=r(256,2,"onet/fc2_1"),v=r(256,4,"onet/fc2_2"),y=r(256,10,"onet/fc2_3");return Ta(Ta({},u),{conv4:c,prelu4_alpha:f,fc1:h,prelu5_alpha:p,fc2_1:m,fc2_2:v,fc2_3:y})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:l}}function $re(e){var t=iu(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=Hre(n,a),o=i.extractPNetParams,s=i.extractRNetParams,l=i.extractONetParams,u=o(),c=s(),f=l();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:u,rnet:c,onet:f},paramMappings:a}}function Vre(e,t){var n=Dc(e,t);function r(c){var f=n(c+"/weights",4,c+"/filters"),h=n(c+"/bias",1);return{filters:f,bias:h}}function a(c){var f=n(c+"/weights",2),h=n(c+"/bias",1);return{weights:f,bias:h}}function i(c){return n(c,1)}function o(c){var f=r(c+"/conv1"),h=i(c+"/prelu1_alpha"),p=r(c+"/conv2"),m=i(c+"/prelu2_alpha"),v=r(c+"/conv3"),y=i(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:p,prelu2_alpha:m,conv3:v,prelu3_alpha:y}}function s(){var c=o("pnet"),f=r("pnet/conv4_1"),h=r("pnet/conv4_2");return Ta(Ta({},c),{conv4_1:f,conv4_2:h})}function l(){var c=o("rnet"),f=a("rnet/fc1"),h=i("rnet/prelu4_alpha"),p=a("rnet/fc2_1"),m=a("rnet/fc2_2");return Ta(Ta({},c),{fc1:f,prelu4_alpha:h,fc2_1:p,fc2_2:m})}function u(){var c=o("onet"),f=r("onet/conv4"),h=i("onet/prelu4_alpha"),p=a("onet/fc1"),m=i("onet/prelu5_alpha"),v=a("onet/fc2_1"),y=a("onet/fc2_2"),g=a("onet/fc2_3");return Ta(Ta({},c),{conv4:f,prelu4_alpha:h,fc1:p,prelu5_alpha:m,fc2_1:v,fc2_2:y,fc2_3:g})}return{extractPNetParams:s,extractRNetParams:l,extractONetParams:u}}function Gre(e){var t=[],n=Vre(e,t),r=n.extractPNetParams,a=n.extractRNetParams,i=n.extractONetParams,o=r(),s=a(),l=i();return au(e,t),{params:{pnet:o,rnet:s,onet:l},paramMappings:t}}function yk(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function Kre(e,t,n){for(var r=n[0],a=n[1],i=Sx/e,o=[],s=Math.min(r,a)*i,l=0;s>=12;)o.push(i*Math.pow(t,l)),s=s*t,l+=1;return o}var G4=function(e){Et(t,e);function t(n,r,a,i){return e.call(this,{left:n,top:r,right:a,bottom:i},!0)||this}return t}(Nc);function Y7(e){return at(function(){return Ua(Wr(e,et(127.5)),et(.0078125))})}function qh(e,t){return at(function(){return Bt(Zn(e),Ua(t,vx(Zn(vx(e)))))})}function K4(e,t,n){return n===void 0&&(n=!1),at(function(){var r=fs(e,t.conv1,"valid");return r=qh(r,t.prelu1_alpha),r=Xr(r,n?[2,2]:[3,3],[2,2],"same"),r=fs(r,t.conv2,"valid"),r=qh(r,t.prelu2_alpha),r=n?r:Xr(r,[3,3],[2,2],"valid"),r=fs(r,t.conv3,"valid"),r=qh(r,t.prelu3_alpha),r})}function Yre(e,t){return at(function(){var n=K4(e,t,!0),r=fs(n,t.conv4_1,"valid"),a=To(Q1(r,3),3),i=tu(Wr(r,a),3),o=fs(n,t.conv4_2,"valid");return{prob:i,regions:o}})}function Xre(e,t){return at(function(){var n=yk(t,e.shape.slice(1)),r=n.height,a=n.width,i=j4.resizeBilinear(e,[r,a]),o=Y7(i);return wc(o,[0,2,1,3])})}function Jre(e,t,n,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)i[o][s]>=r&&a.push(new sn(s,o));var l=a.map(function(u){var c=new n2(Math.round((u.y*Dy+1)/n),Math.round((u.x*Dy+1)/n),Math.round((u.y*Dy+Sx)/n),Math.round((u.x*Dy+Sx)/n)),f=i[u.y][u.x],h=t.arraySync(),p=new G4(h[u.y][u.x][0],h[u.y][u.x][1],h[u.y][u.x][2],h[u.y][u.x][3]);return{cell:c,score:f,region:p}});return l}function Qre(e,t,n,r,a){a.stage1=[];var i=t.map(function(h){return at(function(){var p={scale:h},m=Xre(e,h),v=Date.now(),y=Yre(m,r),g=y.prob,b=y.regions;p.pnet=Date.now()-v;var x=Fr(Fr(g,3)[1])[0],N=Fr(b)[0];return{scoresTensor:x,regionsTensor:N,scale:h,statsForScale:p}})}),o=i.map(function(h){var p=h.scoresTensor,m=h.regionsTensor,v=h.scale,y=h.statsForScale,g=Jre(p,m,v,n);if(p.dispose(),m.dispose(),!g.length)return a.stage1.push(y),[];var b=Date.now(),x=Yg(g.map(function(N){return N.cell}),g.map(function(N){return N.score}),.5);return y.nms=Date.now()-b,y.numBoxes=x.length,a.stage1.push(y),x.map(function(N){return g[N]})}),s=o.reduce(function(h,p){return h.concat(p)},[]),l=[],u=[];if(s.length>0){var c=Date.now(),f=Yg(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);a.stage1_nms=Date.now()-c,u=f.map(function(h){return s[h].score}),l=f.map(function(h){return s[h]}).map(function(h){var p=h.cell,m=h.region;return new n2(p.left+m.left*p.width,p.top+m.top*p.height,p.right+m.right*p.width,p.bottom+m.bottom*p.height).toSquare().round()})}return{boxes:l,scores:u}}function X7(e,t,n){var r=n.width,a=n.height;return pt(this,void 0,void 0,function(){var i,o,s,l=this;return mt(this,function(u){switch(u.label){case 0:return i=Vd(e),[4,Promise.all(t.map(function(c){return pt(l,void 0,void 0,function(){var f,h,p,m,v,y,g,b;return mt(this,function(x){return f=c.padAtBorders(e.height,e.width),h=f.y,p=f.ey,m=f.x,v=f.ex,y=m-1,g=h-1,b=i.getImageData(y,g,v-y,p-g),[2,$a.isNodejs()?R4(b):createImageBitmap(b)]})})}))];case 1:return o=u.sent(),s=[],o.forEach(function(c){var f=r2({width:r,height:a}),h=Vd(f);h.drawImage(c,0,0,r,a);for(var p=h.getImageData(0,0,r,a).data,m=[],v=0;v<p.length;v+=4)m.push(p[v+2]),m.push(p[v+1]),m.push(p[v]);s.push(m)}),[2,s.map(function(c){var f=at(function(){var h=wc(mi(c,[1,r,a,3]),[0,2,1,3]).toFloat();return Y7(h)});return f})]}})})}function Zre(e,t){return at(function(){var n=K4(e,t),r=us(n,[n.shape[0],t.fc1.weights.shape[0]]),a=Us(r,t.fc1),i=qh(a,t.prelu4_alpha),o=Us(i,t.fc2_1),s=To(Q1(o,1),1),l=tu(Wr(o,s),1),u=Us(i,t.fc2_2),c=Fr(l,1)[1];return{scores:c,regions:u}})}function eae(e,t,n,r,a){return pt(this,void 0,void 0,function(){var i,o,s,l,u,c,f,h,p,m,v,y,g,b;return mt(this,function(x){switch(x.label){case 0:return i=Date.now(),[4,X7(e,t,{width:24,height:24})];case 1:return o=x.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map(function(N){var k=Zre(N,r);return N.dispose(),k}),a.stage2_rnet=Date.now()-i,l=s.length>1?Br(s.map(function(N){return N.scores})):s[0].scores,f=(c=Array).from,[4,l.data()];case 2:return u=f.apply(c,[x.sent()]),l.dispose(),h=u.map(function(N,k){return{score:N,idx:k}}).filter(function(N){return N.score>n}).map(function(N){var k=N.idx;return k}),p=h.map(function(N){return t[N]}),m=h.map(function(N){return u[N]}),v=[],y=[],p.length>0&&(i=Date.now(),g=Yg(p,m,.7),a.stage2_nms=Date.now()-i,b=g.map(function(N){var k=s[h[N]].regions.arraySync();return new G4(k[0][0],k[0][1],k[0][2],k[0][3])}),y=g.map(function(N){return m[N]}),v=g.map(function(N,k){return p[N].calibrate(b[k])})),s.forEach(function(N){N.regions.dispose(),N.scores.dispose()}),[2,{boxes:v,scores:y}]}})})}function tae(e,t){return at(function(){var n=K4(e,t);n=Xr(n,[2,2],[2,2],"same"),n=fs(n,t.conv4,"valid"),n=qh(n,t.prelu4_alpha);var r=us(n,[n.shape[0],t.fc1.weights.shape[0]]),a=Us(r,t.fc1),i=qh(a,t.prelu5_alpha),o=Us(i,t.fc2_1),s=To(Q1(o,1),1),l=tu(Wr(o,s),1),u=Us(i,t.fc2_2),c=Us(i,t.fc2_3),f=Fr(l,1)[1];return{scores:f,regions:u,points:c}})}function nae(e,t,n,r,a){return pt(this,void 0,void 0,function(){var i,o,s,l,u,c,f,h,p,m,v,y,g,b,x;return mt(this,function(N){switch(N.label){case 0:return i=Date.now(),[4,X7(e,t,{width:48,height:48})];case 1:return o=N.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map(function(k){var j=tae(k,r);return k.dispose(),j}),a.stage3_onet=Date.now()-i,l=s.length>1?Br(s.map(function(k){return k.scores})):s[0].scores,f=(c=Array).from,[4,l.data()];case 2:return u=f.apply(c,[N.sent()]),l.dispose(),h=u.map(function(k,j){return{score:k,idx:j}}).filter(function(k){return k.score>n}).map(function(k){var j=k.idx;return j}),p=h.map(function(k){var j=s[k].regions.arraySync();return new G4(j[0][0],j[0][1],j[0][2],j[0][3])}),m=h.map(function(k,j){return t[k].calibrate(p[j])}),v=h.map(function(k){return u[k]}),y=[],g=[],b=[],m.length>0&&(i=Date.now(),x=Yg(m,v,.7,!1),a.stage3_nms=Date.now()-i,y=x.map(function(k){return m[k]}),g=x.map(function(k){return v[k]}),b=x.map(function(k,j){return Array(5).fill(0).map(function(S,A){var P=s[k].points.arraySync();return new sn(P[0][A]*(y[j].width+1)+y[j].left,P[0][A+5]*(y[j].height+1)+y[j].top)})})),s.forEach(function(k){k.regions.dispose(),k.scores.dispose(),k.points.dispose()}),[2,{boxes:y,scores:g,points:b}]}})})}var rae=function(e){Et(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return pt(this,void 0,void 0,function(){return mt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return pt(this,void 0,void 0,function(){return mt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a,i,o,s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A;return mt(this,function(P){switch(P.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),l=at(function(){return qre(To(O4.fromPixels(i)).toFloat())}),u=function(T){return l.dispose(),o.total=Date.now()-s,T},c=l.shape.slice(1),f=c[0],h=c[1],p=new $7(r),m=p.minFaceSize,v=p.scaleFactor,y=p.maxNumScales,g=p.scoreThresholds,b=p.scaleSteps,x=(b||Kre(m,v,[f,h])).filter(function(T){var E=yk(T,[f,h]);return Math.min(E.width,E.height)>Sx}).slice(0,y),o.scales=x,o.pyramid=x.map(function(T){return yk(T,[f,h])}),N=Date.now(),[4,Qre(l,x,g[0],a.pnet,o)];case 1:return k=P.sent(),o.total_stage1=Date.now()-N,k.boxes.length?(o.stage2_numInputBoxes=k.boxes.length,N=Date.now(),[4,eae(i,k.boxes,g[1],a.rnet,o)]):[2,u({results:[],stats:o})];case 2:return j=P.sent(),o.total_stage2=Date.now()-N,j.boxes.length?(o.stage3_numInputBoxes=j.boxes.length,N=Date.now(),[4,nae(i,j.boxes,g[2],a.onet,o)]):[2,u({results:[],stats:o})];case 3:return S=P.sent(),o.total_stage3=Date.now()-N,A=S.boxes.map(function(T,E){return i2(Jg({},new bs(S.scores[E],new M4(T.left/h,T.top/f,T.width/h,T.height/f),{height:f,width:h})),new Mne(S.points[E].map(function(D){return D.sub(new sn(T.left,T.top)).div(new sn(T.width,T.height))}),{width:T.width,height:T.height}))}),[2,u({results:A,stats:o})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,aa(n)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,aa(n)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Gre(n)},t.prototype.extractParams=function(n){return $re(n)},t}(ru),aae=.4,iae=[new sn(1.603231,2.094468),new sn(6.041143,7.080126),new sn(2.882459,3.518061),new sn(4.266906,5.178857),new sn(9.041765,10.66308)],oae=[117.001,114.697,97.404],sae=function(e){Et(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:aae,classes:["face"],anchors:iae,meanRgb:oae,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return pt(this,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new bs(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(G7),Wa={ssdMobilenetv1:new V7,tinyFaceDetector:new sae,tinyYolov2:new Wre,mtcnn:new rae,faceLandmark68Net:new F7,faceLandmark68TinyNet:new ure,faceRecognitionNet:new gre,faceExpressionNet:new Xne,ageGenderNet:new ire},J7=function(e){Et(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=a,i}return t}(Gv),Y4=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,a=this;return mt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,s2(n,this.input,function(o){return pt(a,void 0,void 0,function(){return mt(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(l){return Wa.faceExpressionNet.predictExpressions(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(o,s){return L7(o,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new Z4(this,this.input)},t}(J7),X4=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,V4(n,this.input,function(i){return Wa.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,L7(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new ej(this,this.input)},t}(J7),J4=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new tj(this,this.input)},t.prototype.withFaceDescriptors=function(){return new rj(this,this.input)},t}(Y4),Q4=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new nj(this,this.input)},t.prototype.withFaceDescriptor=function(){return new aj(this,this.input)},t}(X4),Q7=function(e){Et(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=a,i}return t}(Gv),Z4=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,a=this;return mt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,s2(n,this.input,function(o){return pt(a,void 0,void 0,function(){return mt(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(l){return Wa.ageGenderNet.predictAgeAndGender(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(o,s){var l=r[s],u=l.age,c=l.gender,f=l.genderProbability;return q7(H7(o,c,f),u)})]}})})},t.prototype.withFaceExpressions=function(){return new Y4(this,this.input)},t}(Q7),ej=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,a,i,o;return mt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,V4(n,this.input,function(l){return Wa.ageGenderNet.predictAgeAndGender(l)},this.extractedFaces)]:[2];case 2:return r=s.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,q7(H7(n,i,o),a)]}})})},t.prototype.withFaceExpressions=function(){return new X4(this,this.input)},t}(Q7),tj=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new J4(this,this.input)},t.prototype.withFaceDescriptors=function(){return new rj(this,this.input)},t}(Z4),nj=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Q4(this,this.input)},t.prototype.withFaceDescriptor=function(){return new aj(this,this.input)},t}(ej),Z7=function(e){Et(t,e);function t(n,r){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a}return t}(Gv),rj=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,s2(n,this.input,function(i){return Promise.all(i.map(function(o){return Wa.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return W7(n[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new J4(this,this.input)},t.prototype.withAgeAndGender=function(){return new tj(this,this.input)},t}(Z7),aj=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,V4(n,this.input,function(i){return Wa.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,W7(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new Q4(this,this.input)},t.prototype.withAgeAndGender=function(){return new nj(this,this.input)},t}(Z7),eB=function(e){Et(t,e);function t(n,r,a){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Wa.faceLandmark68TinyNet:Wa.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Gv),lae=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,a,i,o,s=this;return mt(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return n=l.sent(),r=n.map(function(u){return u.detection}),this.input instanceof Jn?[4,F4(this.input,r)]:[3,3];case 2:return i=l.sent(),[3,5];case 3:return[4,B4(this.input,r)];case 4:i=l.sent(),l.label=5;case 5:return a=i,[4,Promise.all(a.map(function(u){return s.landmarkNet.detectLandmarks(u)}))];case 6:return o=l.sent(),a.forEach(function(u){return u instanceof Jn&&u.dispose()}),[2,n.map(function(u,c){return i2(u,o[c])})]}})})},t.prototype.withFaceExpressions=function(){return new J4(this,this.input)},t.prototype.withAgeAndGender=function(){return new tj(this,this.input)},t.prototype.withFaceDescriptors=function(){return new rj(this,this.input)},t}(eB),uae=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,a,i,o;return mt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Jn?[4,F4(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,B4(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=s.sent(),a.forEach(function(l){return l instanceof Jn&&l.dispose()}),[2,i2(n,o)]}})})},t.prototype.withFaceExpressions=function(){return new Q4(this,this.input)},t.prototype.withAgeAndGender=function(){return new nj(this,this.input)},t.prototype.withFaceDescriptor=function(){return new aj(this,this.input)},t}(eB),tB=function(e){Et(t,e);function t(n,r){r===void 0&&(r=new o2);var a=e.call(this)||this;return a.input=n,a.options=r,a}return t}(Gv),nB=function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,a,i;return mt(this,function(o){switch(o.label){case 0:return n=this,r=n.input,a=n.options,a instanceof $7?[4,Wa.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(i=a instanceof K7?function(s){return Wa.tinyFaceDetector.locateFaces(s,a)}:a instanceof o2?function(s){return Wa.ssdMobilenetv1.locateFaces(s,a)}:a instanceof $4?function(s){return Wa.tinyYolov2.locateFaces(s,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return pt(n,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return Jg({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new lae(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new Y4(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Z4(this.runAndExtendWithFaceDetections(),this.input)},t}(tB);(function(e){Et(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(a){switch(a.label){case 0:return[4,new nB(this.input,this.options)];case 1:return n=a.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return pt(n,void 0,void 0,function(){var a;return mt(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?Jg({},a):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new uae(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new X4(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new ej(this.runAndExtendWithFaceDetection(),this.input)},t})(tB);function cae(e,t){return t===void 0&&(t=new o2),new nB(e,t)}function dae(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof jy)return o;if(o instanceof Float32Array)return new jy(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new jy(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return dae(r,t)}).reduce(function(r,a){return r+a},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new cD(i,n.computeMeanDistance(t,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new cD("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return jy.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();function rB(e,t){var n=new _d(t.width,t.height),r=n.width,a=n.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(e))return e.map(function(s){return rB(s,{width:r,height:a})});if(I7(e)){var i=e.detection.forSize(r,a),o=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return i2(Jg(e,i),o)}return b7(e)?Jg(e,e.detection.forSize(r,a)):e instanceof Xg||e instanceof bs?e.forSize(r,a):e}let gD=!1,Py=null;const fae=async(e={})=>{const{detector:t="ssdMobilenetv1"}=e;return Py||(gD?!0:(Py=(async()=>{try{const n="/haris/models";console.log(`Loading face-api.js models from ${n}...`);const r=[Wa.faceLandmark68Net.loadFromUri(n),Wa.faceRecognitionNet.loadFromUri(n)];return t==="ssdMobilenetv1"?r.push(Wa.ssdMobilenetv1.loadFromUri(n)):r.push(Wa.tinyFaceDetector.loadFromUri(n)),await Promise.all(r),gD=!0,console.log(` Face-api.js models (detector: ${t}) loaded successfully`),!0}catch(n){throw console.error(" Error loading face-api.js models:",n),console.error("Make sure model files are downloaded to /public/models/"),console.error("Download from: https://github.com/justadudewhohacks/face-api.js/tree/master/weights"),new Error("Failed to load face recognition models. Please check model files.")}})(),Py))},aB=e=>{const{data:t,width:n,height:r}=e,a=[];[4,8,16].forEach(s=>{for(let l=0;l<r;l+=s)for(let u=0;u<n;u+=s){let c=0,f=0;for(let h=0;h<s&&l+h<r;h++)for(let p=0;p<s&&u+p<n;p++){const m=((l+h)*n+(u+p))*4,v=t[m]*.299+t[m+1]*.587+t[m+2]*.114;c+=v,f++}f>0&&a.push(Math.round(c/f))}});const o=a.join(",");return btoa(o).substring(0,128)},iB=e=>{const{data:t,width:n,height:r}=e;let a=0,i=0,o=0,s=0;const l=Math.floor(n/2),u=Math.floor(r/2);for(let x=1;x<r-1;x++)for(let N=1;N<n-1;N++){const k=(x*n+N)*4,j=(t[k]+t[k+1]+t[k+2])/3,S=(t[k-4]+t[k-3]+t[k-2])/3,A=(t[k+4]+t[k+5]+t[k+6])/3,P=(t[(x-1)*n*4+N*4]+t[(x-1)*n*4+N*4+1]+t[(x-1)*n*4+N*4+2])/3,T=(t[(x+1)*n*4+N*4]+t[(x+1)*n*4+N*4+1]+t[(x+1)*n*4+N*4+2])/3,E=Math.abs(A-S),D=Math.abs(T-P);Math.sqrt(E*E+D*D)>10&&a++;const F=Math.max(j,S,A,P,T),H=Math.min(j,S,A,P,T);if(o+=F-H,N<l){const z=n-N-1;if(z<n){const J=(x*n+z)*4,ee=(t[J]+t[J+1]+t[J+2])/3;Math.abs(j-ee)<80&&i++}}const B=Math.sqrt((N-l)**2+(x-u)**2),U=Math.sqrt(l**2+u**2),W=B/U;s+=j*(1-W)}const c=n*r,f=a/c,h=i/(c/2),p=o/c,m=s/c,v=f>.01&&f<.5,y=h>.03,g=p>5,b=m>20&&m<230;return v&&y&&g&&b},hae=(e,t,n=.9)=>{if(console.log("Fingerprint 1 (absensi):",e),console.log("Fingerprint 2 (database):",t),!e||!t)return!1;try{const r=atob(e).split(",").map(Number),a=atob(t).split(",").map(Number);if(r.length!==a.length)return!1;const i=[];let o=0;for(let b=0;b<r.length;b++)o+=Math.pow(r[b]-a[b],2);o=Math.sqrt(o);const s=Math.sqrt(r.length*Math.pow(255,2)),l=1-o/s;i.push(l);let u=0,c=0,f=0;for(let b=0;b<r.length;b++)u+=r[b]*a[b],c+=r[b]*r[b],f+=a[b]*a[b];const h=u/(Math.sqrt(c)*Math.sqrt(f));i.push(Math.max(0,h));let p=0;const m=120;for(let b=0;b<r.length;b++)Math.abs(r[b]-a[b])<=m&&p++;const v=p/r.length;i.push(v);const y=[.05,.05,.9];let g=0;for(let b=0;b<i.length;b++)g+=i[b]*y[b];return g>=n-.15&&g<n&&console.warn("Wajah benar-benar sangat mirip, tapi belum lolos threshold. Nilai:",g.toFixed(3),"Threshold:",n),console.log("Face comparison results:",{euclidean:l.toFixed(3),cosine:h.toFixed(3),tolerance:v.toFixed(3),weighted:g.toFixed(3),threshold:n,match:g>=n}),g>=n}catch(r){return console.error("Error comparing fingerprints:",r),!1}},pae=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{try{const a=document.createElement("canvas"),i=a.getContext("2d");a.width=400,a.height=300,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(r,0,0,a.width,a.height);const o=mae(a);if(!o){n(new Error("Gagal memproses gambar wajah"));return}const s=iB(o),l=aB(o);t({fingerprint:l,isValidFace:!0})}catch(a){n(new Error("Gagal memproses gambar: "+a.message))}},r.onerror=()=>{n(new Error("Gagal memuat gambar dari URL"))},r.src=e}),mae=e=>{const t=e.getContext("2d"),{width:n,height:r}=e,a=Math.min(n*.7,350),i=Math.min(r*.85,420),o=(n-a)/2,s=(r-i)/2;try{return t.getImageData(o,s,a,i)}catch(l){return console.error("Error extracting face region:",l),null}},l2=({onFaceCapture:e,isCapturing:t=!1})=>{const n=M.useRef(null),r=M.useRef(null),[a,i]=M.useState(null),[o,s]=M.useState("Posisikan wajah Anda di dalam lingkaran."),[l,u]=M.useState(!1),c=M.useRef(!1),f=p=>{try{window.speechSynthesis.cancel();const m=new SpeechSynthesisUtterance(p);m.lang="id-ID",window.speechSynthesis.speak(m)}catch(m){console.error("Speech synthesis failed",m)}},h=async()=>{if(n.current){const p=n.current,m=document.createElement("canvas");m.width=p.videoWidth,m.height=p.videoHeight;const v=m.getContext("2d");v.translate(m.width,0),v.scale(-1,1),v.drawImage(p,0,0,m.width,m.height);try{const y=v.getImageData(0,0,m.width,m.height),g=iB(y);m.toBlob(async b=>{if(g){const x=aB(y);await Wt.fire({icon:"success",title:"Foto Berhasil",text:"Foto wajah berhasil diambil dan diverifikasi!"}),e(b,x)}else await Wt.fire({icon:"warning",title:"Fingerprint Tidak Terdeteksi",text:"Fingerprint wajah tidak terdeteksi, silakan ulangi pengambilan foto."}),e(b,null)},"image/jpeg",.95)}catch{m.toBlob(async g=>{await Wt.fire({icon:"error",title:"Gagal Mengambil Foto",text:"Terjadi kesalahan saat mengambil foto."}),e(g,null)},"image/jpeg",.95)}}};return M.useEffect(()=>{let p=null,m=null;const v=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Kamera tidak didukung oleh browser ini.");p=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}}),n.current&&(n.current.srcObject=p)}catch(x){console.error("Error accessing camera:",x),i(x.message||"Gagal mengakses kamera. Pastikan izin telah diberikan.")}},y=async()=>{const x=n.current,N=r.current;if(x&&N&&x.readyState===4){const k={width:x.clientWidth,height:x.clientHeight};(N.width!==k.width||N.height!==k.height)&&Hne(N,k);const j=await cae(x,new K7({inputSize:320})).withFaceLandmarks(),S=rB(j,k),A=N.getContext("2d");A.clearRect(0,0,N.width,N.height);const P=N.width/2,T=N.height/2,E=N.width/3.5,D=N.height/2.5;if(A.beginPath(),A.ellipse(P,T,E,D,0,0,2*Math.PI),A.lineWidth=5,S.length>0){const R=S[0].detection.box,F=R.x+R.width/2,H=R.y+R.height/2,B=Math.abs(F-P)<30&&Math.abs(H-T)<40,U=R.width>100&&R.height>100;if(B&&U)A.strokeStyle="green",u(!0),c.current||(s("Wajah terdeteksi. Silakan ambil foto."),f("Wajah terdeteksi. Silakan ambil foto."),c.current=!0);else if(A.strokeStyle="yellow",u(!1),c.current){const W=U?"Posisikan wajah di tengah lingkaran.":"Mohon lebih dekat ke kamera.";s(W),f(W),c.current=!1}}else A.strokeStyle="red",u(!1),c.current&&(s("Wajah tidak terdeteksi."),f("Wajah tidak terdeteksi."),c.current=!1);A.stroke()}m=requestAnimationFrame(y)};(async()=>{try{await fae({detector:"tinyFaceDetector"}),await v(),f("Posisikan wajah Anda di dalam lingkaran.")}catch(x){console.error("Initialization failed:",x),i("Gagal memulai kamera atau memuat model. Coba muat ulang halaman.")}})();const b=n.current;return b&&(b.onplay=()=>{y()}),()=>{p&&p.getTracks().forEach(x=>x.stop()),m&&cancelAnimationFrame(m),window.speechSynthesis.cancel()}},[]),a?d.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg text-center",children:["Error: ",a]}):d.jsxs("div",{className:"relative bg-black rounded-lg w-full max-w-md mx-auto overflow-hidden",children:[d.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",transform:"scaleX(-1)"}}),d.jsx("canvas",{ref:r,className:"absolute top-0 left-0",style:{transform:"scaleX(-1)"}}),d.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 w-full px-4 flex flex-col items-center",children:[d.jsx("div",{className:"bg-black bg-opacity-60 text-white text-center p-2 rounded-md mb-4",children:o}),l&&d.jsx("button",{onClick:h,disabled:t,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full disabled:bg-gray-500",children:t?"Memproses...":"Ambil Foto"})]})]})},gae=()=>{const e=Za(),[t,n]=M.useState(1),[r,a]=M.useState({name:"",email:"",password:"",confirmPassword:"",role:"karyawan"}),[i,o]=M.useState(null),[s,l]=M.useState(null),[u,c]=M.useState(!1),[f,h]=M.useState(null),[p,m]=M.useState(null),v=gb.createRef(),y=T=>{a({...r,[T.target.name]:T.target.value})},g=T=>{if(T.preventDefault(),h(null),!p){h("Silakan verifikasi bahwa Anda bukan robot dengan mencentang reCAPTCHA");return}if(r.password!==r.confirmPassword){h("Password tidak cocok");return}if(r.password.length<6){h("Password minimal 6 karakter");return}if(!Ju()){h("Sistem belum dikonfigurasi. Silakan hubungi administrator untuk mengatur koneksi database.");return}r.role==="admin"?k():n(2)},b=T=>{m(T)},x=()=>{m(null)},N=(T,E)=>{o(T),l(E),console.log(" Face captured with custom fingerprint for registration")},k=async()=>{if(r.role!=="admin"&&(!i||!s)){h("Silakan ambil foto wajah Anda terlebih dahulu");return}c(!0),h(null);try{if(console.log("Memulai pendaftaran untuk role:",r.role),!Ju())throw new Error("Sistem belum dikonfigurasi. Silakan hubungi administrator.");const{data:T,error:E}=await Pe.auth.signUp({email:r.email,password:r.password,options:{data:{name:r.name,role:r.role,full_name:r.name}}});if(E)throw console.error("Auth error:",E),E.message.includes("already registered")?new Error("Email sudah terdaftar"):E.message.includes("Email rate limit exceeded")?new Error("Terlalu banyak percobaan pendaftaran. Silakan coba lagi nanti."):E.message.includes("Password should be at least")?new Error("Password minimal 6 karakter"):new Error(E.message||"Gagal mendaftar");if(!T.user)throw new Error("Pendaftaran gagal - tidak ada data user");const D=T.user.id;let R=null;if(console.log("User berhasil dibuat dengan ID:",D,"Role:",r.role),r.role!=="admin"&&i)try{const W=`${D}-face-${Date.now()}.jpg`;await L3(i,"face-photos",W),R=I3("face-photos",W),console.log("Foto wajah berhasil diupload:",R)}catch(W){console.error("Error upload foto:",W),console.log("Melanjutkan tanpa foto wajah")}await new Promise(W=>setTimeout(W,2e3));const F={id:D,name:r.name,full_name:r.name,email:r.email,role:r.role,title:j(r.role),bio:`${j(r.role)} di sistem absensi`,avatar_url:R,is_face_registered:r.role==="admin"?!0:!!R,status:"active",join_date:new Date().toISOString().split("T")[0],contract_start_date:new Date().toISOString().split("T")[0],contract_type:"permanent",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Membuat profil dengan data:",F);const{data:H,error:B}=await Pe.from("profiles").insert([F]).select().single();if(B){console.error("Error membuat profil:",B);const{data:W,error:z}=await Pe.from("profiles").update(F).eq("id",D).select().single();if(z)throw console.error("Error update profil:",z),new Error("Gagal membuat profil user: "+z.message);console.log("Profil berhasil diupdate:",W)}else console.log("Profil berhasil dibuat:",H);if(r.role==="admin"||r.role==="kepala")try{await Pe.from("temp_admin_users").insert([{user_id:D,role:r.role}]),console.log("Admin/Kepala berhasil ditambahkan ke temp_admin_users")}catch(W){console.error("Error menambahkan ke temp_admin_users:",W)}await Pe.auth.signOut();const U=r.role==="admin"?`Pendaftaran Administrator berhasil! Akun ${r.name} telah dibuat tanpa verifikasi wajah. Silakan masuk untuk mengakses panel admin.`:`Pendaftaran berhasil! Akun ${j(r.role)} ${r.name} telah dibuat dengan verifikasi wajah. Silakan masuk.`;e("/login",{state:{message:U,email:r.email}})}catch(T){console.error("Error pendaftaran:",T);let E="Terjadi kesalahan saat mendaftar";T.message.includes("Email sudah terdaftar")?E="Email sudah terdaftar. Silakan gunakan email lain atau masuk dengan akun yang sudah ada.":T.message.includes("Password minimal")?E="Password minimal 6 karakter":T.message.includes("rate limit")?E="Terlalu banyak percobaan. Silakan coba lagi dalam beberapa menit.":T.message.includes("Sistem belum dikonfigurasi")?E="Sistem belum dikonfigurasi. Silakan hubungi administrator untuk mengatur koneksi database.":E=T.message||"Terjadi kesalahan saat mendaftar",h(E)}finally{c(!1)}},j=T=>{switch(T){case"karyawan":return"Karyawan";case"kepala":return"Kepala Bagian";case"admin":return"Administrator";default:return"Karyawan"}},S=T=>{switch(T){case"karyawan":return"Akses: Absensi pribadi dan riwayat kehadiran";case"kepala":return"Akses: Kelola karyawan dan laporan tim";case"admin":return"Akses: Kelola semua pengguna dan pengaturan sistem (tanpa verifikasi wajah)";default:return"Akses dasar sistem"}},A=T=>{switch(T){case"admin":return d.jsx(Qm,{className:"h-5 w-5"});case"kepala":return d.jsx(Uq,{className:"h-5 w-5"});default:return d.jsx(gc,{className:"h-5 w-5"})}},P=T=>{switch(T){case"admin":return"border-purple-300 bg-purple-50 text-purple-700";case"kepala":return"border-blue-300 bg-blue-50 text-blue-700";default:return"border-green-300 bg-green-50 text-green-700"}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-indigo-800 flex items-center justify-center p-4",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-full mb-6 shadow-lg",children:d.jsx(UT,{className:"h-10 w-10 text-blue-600"})}),d.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Portal Karyawan"}),d.jsx("p",{className:"text-blue-100",children:r.role==="admin"?"Buat akun Administrator tanpa verifikasi wajah":"Buat akun dengan verifikasi wajah"})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 backdrop-blur-sm",children:[r.role!=="admin"&&d.jsx("div",{className:"flex items-center justify-center mb-6",children:[1,2].map(T=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${t>=T?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:T<t?d.jsx(ln,{className:"h-4 w-4"}):T}),T<2&&d.jsx("div",{className:`w-12 h-1 mx-2 ${t>T?"bg-blue-600":"bg-gray-200"}`})]},T))}),d.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[d.jsx(WT,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t===1?"Informasi Dasar":"Verifikasi Wajah"})]}),f&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Rd,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-red-700 font-medium",children:"Kesalahan Pendaftaran"}),d.jsx("p",{className:"text-red-600 text-sm mt-1",children:f})]})]}),t===1?d.jsxs("form",{onSubmit:g,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),d.jsxs("div",{className:"relative",children:[d.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:y,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan nama lengkap Anda"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Alamat Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(u1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:y,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan email Anda"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-3",children:"Pilih Jabatan"}),d.jsx("div",{className:"grid grid-cols-1 gap-3",children:["karyawan","kepala","admin"].map(T=>d.jsxs("label",{className:"cursor-pointer",children:[d.jsx("input",{type:"radio",name:"role",value:T,checked:r.role===T,onChange:y,className:"sr-only"}),d.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${r.role===T?P(T):"border-gray-200 hover:border-gray-300"}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[A(T),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-lg",children:j(T)}),d.jsx("div",{className:"text-sm opacity-75 mt-1",children:S(T)})]}),r.role===T&&d.jsx(ln,{className:"h-5 w-5 text-current"})]})})]},T))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ag,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:y,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan password Anda"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Konfirmasi Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ag,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:y,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Konfirmasi password Anda"})]})]}),r.role==="admin"&&d.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Qm,{className:"h-5 w-5 text-purple-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-purple-800 font-medium",children:"Administrator"}),d.jsx("p",{className:"text-purple-700 text-sm mt-1",children:"Sebagai Administrator, Anda tidak perlu verifikasi wajah dan dapat langsung mengakses semua fitur sistem manajemen."})]})]})}),!Ju()&&d.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Rd,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-yellow-800 font-medium",children:"Sistem Belum Dikonfigurasi"}),d.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Database belum terhubung. Silakan hubungi administrator untuk mengatur koneksi Supabase."})]})]})}),d.jsx("div",{className:"mt-6",children:d.jsx("div",{className:"flex justify-center",children:d.jsx(RR,{ref:v,sitekey:"6LdVU1srAAAAAHHTvpZWAe6SDWNUgXw80Gh1t8ea",onChange:b,onExpired:x,theme:"light"})})}),d.jsx(HY,{}),d.jsx("button",{type:"submit",disabled:u||!Ju()||!p,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:u?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d.jsx("span",{children:"Membuat Akun..."})]}):r.role==="admin"?"Buat Akun Administrator":"Lanjut ke Verifikasi Wajah"})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx(Bd,{className:"h-12 w-12 text-blue-600 mx-auto mb-3"}),d.jsx("p",{className:"text-gray-600",children:"Ambil foto wajah yang jelas untuk verifikasi absensi. Sistem kami menggunakan teknologi pengenalan wajah yang aman dan cepat."})]}),d.jsx(l2,{onFaceCapture:N,isCapturing:u}),i&&d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"inline-flex items-center space-x-2 text-green-600 mb-4",children:[d.jsx(ln,{className:"h-5 w-5"}),d.jsx("span",{children:"Foto wajah berhasil diambil dan diverifikasi!"})]})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>n(1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Kembali"}),d.jsx("button",{onClick:k,disabled:!i||u,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d.jsx("span",{children:"Membuat Akun..."})]}):"Selesaikan Pendaftaran"})]})]}),t===1&&d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-gray-600",children:["Sudah punya akun?"," ",d.jsx(Lq,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Masuk di sini"})]})})]}),d.jsxs("div",{className:"mt-6 p-4 bg-white/20 backdrop-blur-sm rounded-lg text-white",children:[d.jsxs("p",{className:"text-sm font-medium mb-2",children:[d.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-xs mr-2",children:"INFO"}),"Sistem Verifikasi Berdasarkan Role"]}),d.jsxs("div",{className:"text-xs space-y-1",children:[d.jsxs("p",{children:[" ",d.jsx("strong",{children:"Administrator:"})," Akses penuh tanpa verifikasi wajah"]}),d.jsxs("p",{children:[" ",d.jsx("strong",{children:"Karyawan & Kepala:"})," Verifikasi wajah untuk keamanan absensi"]}),d.jsx("p",{children:" Data dienkripsi dan tidak dibagikan ke pihak ketiga"}),d.jsx("p",{children:" Sistem custom yang aman dan cepat"})]})]})]})})};function vae(e,t,n,r){const i=h=>h*Math.PI/180,o=i(e),s=i(n),l=i(n-e),u=i(r-t),c=Math.sin(l/2)**2+Math.cos(o)*Math.cos(s)*Math.sin(u/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}function yae(e,t,n,r,a){return vae(e,t,n,r)<=a}function bae(){return new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(n=>{e({latitude:n.coords.latitude,longitude:n.coords.longitude})},n=>{let r="Unknown location error";switch(n.code){case n.PERMISSION_DENIED:r="Location access denied by user";break;case n.POSITION_UNAVAILABLE:r="Location information unavailable";break;case n.TIMEOUT:r="Location request timed out";break}t(new Error(r))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})}const xae=({onLocationValidated:e})=>{const[t,n]=M.useState(null),[r,a]=M.useState(!1),[i,o]=M.useState(!1),[s,l]=M.useState(null),[u,c]=M.useState(null);M.useEffect(()=>{f()},[]);const f=async()=>{o(!0),l(null);try{const m=await jV();c(m);const v=await bae();n(v);const y=yae(v.latitude,v.longitude,m.latitude,m.longitude,m.radius);a(y),e&&e(y,v)}catch(m){console.error("Location validation error:",m);let v=m.message;v.includes("denied")?v="Akses lokasi ditolak. Silakan izinkan akses lokasi.":v.includes("unavailable")?v="Informasi lokasi tidak tersedia.":v.includes("timeout")?v="Permintaan lokasi timeout.":v.includes("not supported")&&(v="Geolokasi tidak didukung oleh browser ini."),l(v),e&&e(!1,null)}finally{o(!1)}},h=async()=>{await f()},p=m=>m?m.toFixed(6):"Tidak diketahui";return i?d.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 rounded-lg",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-3"}),d.jsx("p",{className:"text-blue-700 font-medium",children:"Mendapatkan lokasi Anda..."}),d.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Silakan izinkan akses lokasi"})]}):s?d.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-red-50 rounded-lg",children:[d.jsx(Rd,{className:"h-8 w-8 text-red-500 mb-3"}),d.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Kesalahan Akses Lokasi"}),d.jsx("p",{className:"text-red-600 text-sm text-center mb-4",children:s}),d.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Coba Lagi"})]}):d.jsx("div",{className:`p-6 rounded-lg ${r?"bg-green-50":"bg-red-50"}`,children:d.jsxs("div",{className:"flex items-start space-x-4",children:[r?d.jsx(ln,{className:"h-8 w-8 text-green-500 flex-shrink-0 mt-1"}):d.jsx(zn,{className:"h-8 w-8 text-red-500 flex-shrink-0 mt-1"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(Uo,{className:"h-5 w-5 text-gray-600"}),d.jsx("h3",{className:`font-semibold ${r?"text-green-700":"text-red-700"}`,children:r?"Lokasi Terverifikasi":"Lokasi Tidak Valid"})]}),d.jsx("p",{className:`text-sm mb-3 ${r?"text-green-600":"text-red-600"}`,children:r?"Anda berada dalam radius yang diizinkan dari kantor.":`Anda harus berada dalam radius ${(u==null?void 0:u.radius)||100} meter dari kantor untuk absen.`}),t&&u&&d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[d.jsxs("div",{className:"bg-white/70 p-3 rounded",children:[d.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Lokasi Anda"}),d.jsxs("p",{className:"text-gray-600",children:[p(t.latitude),", ",p(t.longitude)]})]}),d.jsxs("div",{className:"bg-white/70 p-3 rounded",children:[d.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Lokasi Kantor"}),d.jsxs("p",{className:"text-gray-600",children:[p(u.latitude),", ",p(u.longitude)]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:u.address})]})]}),d.jsx("button",{onClick:h,className:`mt-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:"Perbarui Lokasi"})]})]})})},wae=({user:e,onAttendanceSubmitted:t,todayAttendance:n=[]})=>{const[r,a]=M.useState("masuk"),[i,o]=M.useState(!1),[s,l]=M.useState(!1),[u,c]=M.useState(null),[f,h]=M.useState(null),[p,m]=M.useState(null),[v,y]=M.useState(null),[g,b]=M.useState(1),[x,N]=M.useState(null),[k,j]=M.useState(null),[S,A]=M.useState(null),[P,T]=M.useState(!1),[E,D]=M.useState(!0);M.useEffect(()=>{H(),B(),F(),R()},[e,n]);const R=async()=>{try{const $=await MI();D($.enabled)}catch($){console.error("Error fetching camera settings:",$),D(!0)}},F=()=>{const $=n.some(ae=>ae.type==="masuk"&&ae.status==="berhasil"),X=n.some(ae=>ae.type==="keluar"&&ae.status==="berhasil");$?$&&!X&&a("keluar"):a("masuk")},H=async()=>{try{const{data:$,error:X}=await Pe.from("profiles").select("*").eq("id",e.id).single();if(X)throw X;if(A($),$.avatar_url&&E)try{const ae=await pae($.avatar_url);y(ae.fingerprint),console.log(" Stored face fingerprint loaded")}catch(ae){console.error("Error loading stored face fingerprint:",ae),N("Gagal memuat data wajah tersimpan. Silakan hubungi administrator.")}else N("Foto profil belum tersedia. Silakan lengkapi profil Anda terlebih dahulu.")}catch($){console.error("Error fetching user profile:",$),N("Gagal memuat profil pengguna.")}},B=async()=>{try{const{data:$,error:X}=await Pe.from("attendance").select("*").eq("user_id",e.id).eq("status","berhasil").order("timestamp",{ascending:!1}).limit(1);if(X)throw X;$&&$.length>0&&j($[0])}catch($){console.error("Error fetching last attendance:",$)}},U=($,X)=>{l($),c(X),$&&E?b(2):$&&!E&&b(3)},W=($,X)=>{h($),m(X),b(3)},z=async()=>{if(!E)return!0;if(!p||!v)throw new Error("Data wajah tidak tersedia untuk verifikasi");try{const X=hae(p,v,.7);if(console.log("Face match check:",{threshold:.7,faceFingerprint:p,storedFingerprint:v}),!X)throw console.error(`Face verification failed. Distance exceeded threshold of ${.7}`),new Error("Wajah tidak cocok dengan data yang tersimpan. Pastikan Anda adalah orang yang benar dengan pencahayaan yang baik.");return console.log(` Face verified with threshold: ${.7}`),!0}catch($){throw console.error("Face verification error:",$),$}},J=()=>{const $=new Date,X=$.toTimeString().slice(0,5),ae="08:00";let le=!1,Se=0,Ee=0,me=0;if(r==="masuk"){if(le=X>"08:15",le){const ie=new Date(`1970-01-01T${ae}:00`),Ve=new Date(`1970-01-01T${X}:00`);Se=Math.floor((Ve-ie)/6e4)}}else if(r==="keluar"&&k&&k.type==="masuk"){const ie=new Date(k.timestamp),be=Math.floor(($-ie)/6e4);Ee=Math.max(0,be/60),Ee>9&&(me=Ee-9,Ee=9)}return{isLate:le,lateMinutes:Se,workHours:Ee,overtimeHours:me}},ee=async()=>{if(!s||!u){N("Silakan selesaikan verifikasi lokasi");return}if(E&&!p){N("Silakan selesaikan verifikasi wajah");return}if(n.some(X=>X.type===r&&X.status==="berhasil")){N(`Anda sudah melakukan absensi ${r} hari ini.`);return}o(!0),N(null);try{E&&await z();const X=new Date,{isLate:ae,lateMinutes:le,workHours:Se,overtimeHours:Ee}=J(),me=S!=null&&S.salary?S.salary/22:0;let ie=0;if(r==="masuk")if(ae&&le>15){const _e=Math.min(le/60*.1,.5);ie=me*(1-_e)}else ie=me;const Ve={user_id:e.id,type:r,timestamp:X.toISOString(),latitude:u.latitude,longitude:u.longitude,status:"berhasil",is_late:ae,late_minutes:le,work_hours:Se,overtime_hours:Ee,daily_salary_earned:ie,notes:`Absensi ${r} berhasil dengan verifikasi ${E?"wajah dan ":""}lokasi. ${ae?`Terlambat ${le} menit.`:"Tepat waktu."}`};r==="masuk"?Ve.check_in_time=X.toISOString():Ve.check_out_time=X.toISOString();const{data:be,error:fe}=await Pe.from("attendance").insert([Ve]).select();if(fe)throw fe;try{await Pe.from("activity_logs").insert([{user_id:e.id,action_type:`attendance_${r}`,action_details:{type:r,status:"berhasil",is_late:ae,late_minutes:le,work_hours:Se,overtime_hours:Ee,daily_salary_earned:ie,location:{latitude:u.latitude,longitude:u.longitude},device_info:{user_agent:navigator.userAgent,timestamp:X.toISOString()}},user_agent:navigator.userAgent}])}catch(_e){console.error("Failed to log activity:",_e)}await Wt.fire({icon:"success",title:`Absensi ${r==="masuk"?"Masuk":"Keluar"} Berhasil`,html:`<div style='text-align:left'>${ae?`<b>Status:</b> Terlambat ${le} menit<br/>`:"<b>Status:</b> Tepat Waktu<br/>"}${Se>0?`<b>Jam Kerja:</b> ${Se.toFixed(1)} jam<br/>`:""}${Ee>0?`<b>Lembur:</b> ${Ee.toFixed(1)} jam<br/>`:""}</div>`,confirmButtonText:"OK",timer:3e3,timerProgressBar:!0}),t&&t(be[0]),L()}catch(X){console.error("Attendance submission error:",X);let ae="gagal";X.message.includes("wajah")||X.message.includes("Verifikasi wajah")?ae=E?"wajah_tidak_valid":"gagal":X.message.includes("lokasi")&&(ae="lokasi_tidak_valid");const le={user_id:e.id,type:r,timestamp:new Date().toISOString(),latitude:(u==null?void 0:u.latitude)||null,longitude:(u==null?void 0:u.longitude)||null,status:ae,notes:`Absensi gagal: ${X.message}`};await Pe.from("attendance").insert([le]),await Wt.fire({icon:"error",title:`Absensi ${r==="masuk"?"Masuk":"Keluar"} Gagal`,text:X.message||"Terjadi kesalahan saat absensi",confirmButtonText:"OK"}),N(X.message)}finally{o(!1)}},L=()=>{b(1),l(!1),c(null),h(null),m(null),N(null),T(!1),B()},q=()=>new Date().toLocaleString("id-ID",{dateStyle:"full",timeStyle:"medium"}),Y=$=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format($),te=n.some($=>$.type==="masuk"&&$.status==="berhasil"),K=n.some($=>$.type==="keluar"&&$.status==="berhasil"),ce=!te,he=te&&!K;if(P){const{isLate:$,lateMinutes:X,workHours:ae,overtimeHours:le}=J();return d.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden",children:[d.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 px-6 py-8 text-white",children:d.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[d.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:d.jsx(ln,{className:"h-6 w-6"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Absensi Berhasil!"}),d.jsxs("p",{className:"opacity-90",children:[r==="masuk"?"Check In":"Check Out"," berhasil dicatat"]})]})]})}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-6",children:[d.jsx("h3",{className:"font-medium text-green-900 mb-3",children:"Detail Absensi"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Waktu:"}),d.jsx("span",{className:"font-medium text-green-900",children:new Date().toLocaleString("id-ID")})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Status:"}),d.jsx("span",{className:`font-medium ${$?"text-orange-600":"text-green-900"}`,children:$?`Terlambat ${X} menit`:"Tepat Waktu"})]}),r==="keluar"&&ae>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Jam Kerja:"}),d.jsxs("span",{className:"font-medium text-green-900",children:[ae.toFixed(1)," jam"]})]}),le>0&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Lembur:"}),d.jsxs("span",{className:"font-medium text-green-900",children:[le.toFixed(1)," jam"]})]})]})]})]}),(S==null?void 0:S.salary)&&r==="masuk"&&d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"Informasi Gaji Hari Ini"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-blue-700",children:"Gaji Harian:"}),d.jsx("span",{className:"font-medium text-blue-900",children:Y(S.salary/22)})]}),$&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-blue-700",children:"Potongan Keterlambatan:"}),d.jsxs("span",{className:"font-medium text-orange-600",children:["-",Y(S.salary/22*(X/15*.1))]})]})]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-gray-600 mb-4",children:"Terima kasih! Data absensi Anda telah tersimpan dengan aman."}),d.jsx("button",{onClick:L,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Tutup"})]})]})]})}return E&&!v&&x&&x.includes("Foto profil")?d.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Absensi Karyawan"}),d.jsx("p",{className:"opacity-90",children:"Setup diperlukan untuk melanjutkan"})]}),d.jsxs("div",{className:"p-6 text-center",children:[d.jsx(Bd,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Foto Profil Diperlukan"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Untuk dapat melakukan absensi dengan verifikasi wajah, Anda perlu menambahkan foto wajah ke profil terlebih dahulu."}),d.jsx("div",{className:"space-y-3",children:d.jsx("button",{onClick:()=>window.location.href="/profile-setup",className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(Jd,{className:"h-4 w-4"}),d.jsx("span",{children:"Setup Foto Wajah Sekarang"})]})})}),d.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-yellow-700",children:[d.jsx("strong",{children:"Catatan:"})," Proses setup hanya perlu dilakukan sekali dan memakan waktu kurang dari 2 menit."]})})]})]}):E&&!v&&!x?d.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Absensi Karyawan"}),d.jsx("p",{className:"opacity-90",children:"Memuat data verifikasi..."})]}),d.jsxs("div",{className:"p-6 text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Memuat data wajah untuk verifikasi..."})]})]}):d.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[d.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:d.jsx(qa,{className:"h-6 w-6"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Absensi Karyawan"}),d.jsx("p",{className:"opacity-90",children:(S==null?void 0:S.name)||"Pengguna"})]})]}),d.jsx("p",{className:"opacity-90",children:q()}),k&&d.jsx("div",{className:"mt-4 p-3 bg-white/10 rounded-lg",children:d.jsxs("p",{className:"text-sm",children:["Absensi terakhir: ",d.jsx("span",{className:"font-medium",children:k.type==="masuk"?"Masuk":"Keluar"})," pada ",new Date(k.timestamp).toLocaleString("id-ID")]})}),d.jsx("div",{className:"mt-4 p-3 bg-white/10 rounded-lg",children:d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Status Hari Ini:"}),d.jsx("span",{className:te?"text-green-300":"text-yellow-300",children:te?" Sudah Masuk":" Belum Masuk"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{}),d.jsx("span",{className:K?"text-green-300":"text-yellow-300",children:K?" Sudah Keluar":" Belum Keluar"})]})]})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"flex items-center justify-between mb-8",children:[1,2,3].map($=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-medium ${g>=$?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:$<g?d.jsx(ln,{className:"h-5 w-5"}):$}),$<3&&d.jsx("div",{className:`flex-1 h-1 mx-4 ${g>$?"bg-blue-600":"bg-gray-200"}`})]},$))}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Jenis Absensi"}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("button",{onClick:()=>a("masuk"),disabled:!ce,className:`p-4 rounded-lg border-2 transition-all ${r==="masuk"?"border-blue-600 bg-blue-50 text-blue-700":ce?"border-gray-200 hover:border-gray-300":"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[d.jsx(hs,{className:"h-6 w-6 mx-auto mb-2"}),d.jsx("p",{className:"font-medium",children:"Masuk"}),!ce&&d.jsx("p",{className:"text-xs mt-1",children:"Sudah absen masuk"})]}),d.jsxs("button",{onClick:()=>a("keluar"),disabled:!he,className:`p-4 rounded-lg border-2 transition-all ${r==="keluar"?"border-blue-600 bg-blue-50 text-blue-700":he?"border-gray-200 hover:border-gray-300":"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[d.jsx(hs,{className:"h-6 w-6 mx-auto mb-2"}),d.jsx("p",{className:"font-medium",children:"Keluar"}),!he&&d.jsx("p",{className:"text-xs mt-1",children:te?"Sudah absen keluar":"Belum absen masuk"})]})]})]}),g===1&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx(Uo,{className:"h-5 w-5 text-blue-600"}),d.jsx("h3",{className:"text-lg font-semibold",children:"Langkah 1: Verifikasi Lokasi"})]}),d.jsx(xae,{onLocationValidated:U})]}),g===2&&E&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx(Bd,{className:"h-5 w-5 text-blue-600"}),d.jsx("h3",{className:"text-lg font-semibold",children:"Langkah 2: Verifikasi Wajah"})]}),d.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-700",children:[d.jsx("strong",{children:"Tips untuk verifikasi wajah yang berhasil:"}),d.jsx("br",{})," Pastikan pencahayaan cukup terang",d.jsx("br",{})," Posisikan wajah tepat di tengah kamera",d.jsx("br",{})," Hindari bayangan pada wajah",d.jsx("br",{})," Jangan gunakan masker atau kacamata gelap"]})}),d.jsx(l2,{onFaceCapture:W,isCapturing:i})]}),g===3&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx(ln,{className:"h-5 w-5 text-blue-600"}),d.jsx("h3",{className:"text-lg font-semibold",children:"Langkah 3: Kirim Absensi"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[d.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Ringkasan Verifikasi"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{children:"Lokasi:"}),d.jsx("span",{className:"text-green-600 font-medium",children:" Terverifikasi"})]}),E&&d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{children:"Pengenalan Wajah:"}),d.jsx("span",{className:"text-green-600 font-medium",children:" Terverifikasi"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{children:"Jenis:"}),d.jsx("span",{className:"font-medium",children:r==="masuk"?"Masuk":"Keluar"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{children:"Waktu:"}),d.jsx("span",{className:"font-medium",children:new Date().toLocaleTimeString("id-ID")})]})]})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:L,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Mulai Ulang"}),d.jsx("button",{onClick:ee,disabled:i,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Mengirim...":"Kirim Absensi"})]})]}),x&&!x.includes("Foto profil")&&d.jsxs("div",{className:"mt-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Rd,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-red-700 font-medium",children:"Absensi Gagal"}),d.jsx("p",{className:"text-red-600 text-sm mt-1",children:x}),d.jsx("button",{onClick:L,className:"mt-2 text-sm text-red-700 underline hover:text-red-800",children:"Coba Lagi"})]})]})]})]})},oB=({userId:e,userRole:t})=>{const[n,r]=M.useState([]),[a,i]=M.useState(!1),[o,s]=M.useState(0);M.useEffect(()=>{if(e){l();const m=Pe.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e}`},v=>{r(y=>[v.new,...y]),s(y=>y+1)}).subscribe();return()=>{m.unsubscribe()}}},[e]);const l=async()=>{try{const{data:m,error:v}=await Pe.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(20);if(v)throw v;r(m||[]),s((m==null?void 0:m.filter(y=>!y.is_read).length)||0)}catch(m){console.error("Error fetching notifications:",m)}},u=async m=>{try{const{error:v}=await Pe.from("notifications").update({is_read:!0}).eq("id",m);if(v)throw v;r(y=>y.map(g=>g.id===m?{...g,is_read:!0}:g)),s(y=>Math.max(0,y-1))}catch(v){console.error("Error marking notification as read:",v)}},c=async()=>{try{const{error:m}=await Pe.from("notifications").update({is_read:!0}).eq("user_id",e).eq("is_read",!1);if(m)throw m;r(v=>v.map(y=>({...y,is_read:!0}))),s(0)}catch(m){console.error("Error marking all notifications as read:",m)}},f=m=>{switch(m){case"late_warning":return d.jsx(hs,{className:"h-5 w-5 text-orange-500"});case"absence_warning":return d.jsx(Qn,{className:"h-5 w-5 text-red-500"});case"salary_info":return d.jsx(ln,{className:"h-5 w-5 text-green-500"});case"system_alert":return d.jsx(vc,{className:"h-5 w-5 text-blue-500"});case"general":return d.jsx(qa,{className:"h-5 w-5 text-gray-500"});default:return d.jsx(Ol,{className:"h-5 w-5 text-gray-500"})}},h=m=>{switch(m){case"late_warning":return"border-l-orange-400 bg-orange-50";case"absence_warning":return"border-l-red-400 bg-red-50";case"salary_info":return"border-l-green-400 bg-green-50";case"system_alert":return"border-l-blue-400 bg-blue-50";case"general":return"border-l-gray-400 bg-gray-50";default:return"border-l-gray-400 bg-gray-50"}},p=m=>{const v=new Date(m),y=new Date,g=(y-v)/(1e3*60*60);if(g<1){const b=Math.floor((y-v)/6e4);return b<=1?"Baru saja":`${b} menit yang lalu`}else return g<24?`${Math.floor(g)} jam yang lalu`:v.toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>i(!a),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors group",children:[d.jsx(Ol,{className:"h-6 w-6 group-hover:scale-110 transition-transform"}),o>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:o>9?"9+":o})]}),a&&d.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ol,{className:"h-5 w-5 text-blue-600"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifikasi"}),o>0&&d.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:o})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[o>0&&d.jsx("button",{onClick:c,className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Tandai semua dibaca"}),d.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 p-1 hover:bg-gray-100 rounded transition-colors",children:d.jsx(al,{className:"h-4 w-4"})})]})]}),d.jsx("div",{className:"max-h-80 overflow-y-auto",children:n.length>0?n.map(m=>{var v;return d.jsx("div",{className:`p-4 border-l-4 hover:bg-gray-50 cursor-pointer transition-colors ${m.is_read?"border-l-gray-200 bg-white":h(m.type)}`,onClick:()=>!m.is_read&&u(m.id),children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"flex-shrink-0 mt-1",children:f(m.type)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("p",{className:`text-sm font-medium ${m.is_read?"text-gray-700":"text-gray-900"}`,children:m.title}),!m.is_read&&d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:m.message}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[d.jsx(Fd,{className:"h-3 w-3 mr-1"}),p(m.created_at)]}),((v=m.data)==null?void 0:v.letter_number)&&d.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:m.data.letter_number})]})]})]})},m.id)}):d.jsxs("div",{className:"p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Ol,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 font-medium",children:"Tidak ada notifikasi"}),d.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Notifikasi akan muncul di sini"})]})}),n.length>0&&d.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50 text-center",children:d.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Lihat semua notifikasi"})})]})]})};function sB(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=sB(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function cn(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=sB(e))&&(r&&(r+=" "),r+=t);return r}const Nae=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const a=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!Sae(a,i)&&r||Object.defineProperty(e,n,i)},Sae=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},kae=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},_ae=(e,t)=>`/* Wrapped ${e}*/
${t}`,jae=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Aae=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Cae=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,a=_ae.bind(null,r,t.toString());Object.defineProperty(a,"name",Aae);const{writable:i,enumerable:o,configurable:s}=jae;Object.defineProperty(e,"toString",{value:a,writable:i,enumerable:o,configurable:s})};function Eae(e,t,{ignoreNonConfigurable:n=!1}={}){const{name:r}=e;for(const a of Reflect.ownKeys(t))Nae(e,t,a,n);return kae(e,t),Cae(e,t,r),e}const Dae=new WeakMap,vD=new WeakMap;function lB(e,{cacheKey:t,cache:n=new Map,maxAge:r}={}){if(r===0)return e;if(typeof r=="number"){if(r>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const a=function(...i){var c;const o=t?t(i):i[0],s=n.get(o);if(s)return s.data;const l=e.apply(this,i),u=typeof r=="function"?r(...i):r;if(n.set(o,{data:l,maxAge:u?Date.now()+u:Number.POSITIVE_INFINITY}),u&&u>0&&u!==Number.POSITIVE_INFINITY){const f=setTimeout(()=>{n.delete(o)},u);(c=f.unref)==null||c.call(f);const h=vD.get(e)??new Set;h.add(f),vD.set(e,h)}return l};return Eae(a,e,{ignoreNonConfigurable:!0}),Dae.set(a,n),a}function Pae(e){return typeof e=="string"}function Oae(e,t,n){return n.indexOf(e)===t}function Tae(e){return e.toLowerCase()===e}function yD(e){return e.indexOf(",")===-1?e:e.split(",")}function bk(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return bk(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return bk(n)}if(e.indexOf("-")===-1||!Tae(e))return e;var a=e.split("-"),i=a[0],o=a[1],s=o===void 0?"":o;return"".concat(i,"-").concat(s.toUpperCase())}function Mae(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,a=t.fallbackLocale,i=a===void 0?"en-US":a,o=[];if(typeof navigator<"u"){for(var s=navigator.languages||[],l=[],u=0,c=s;u<c.length;u++){var f=c[u];l=l.concat(yD(f))}var h=navigator.language,p=h&&yD(h);o=o.concat(l,p)}return r&&o.push(i),o.filter(Pae).map(bk).filter(Oae)}var Lae=lB(Mae,{cacheKey:JSON.stringify});function Iae(e){return Lae(e)[0]||null}var uB=lB(Iae,{cacheKey:JSON.stringify});function ou(e,t,n){return function(a,i=n){const o=e(a)+i;return t(o)}}function Kv(e){return function(n){return new Date(e(n).getTime()-1)}}function Yv(e,t){return function(r){return[e(r),t(r)]}}function Gn(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;const t=Number.parseInt(e,10);if(typeof e=="string"&&!Number.isNaN(t))return t;throw new Error(`Failed to get year from date: ${e}.`)}function Pc(e){if(e instanceof Date)return e.getMonth();throw new Error(`Failed to get month from date: ${e}.`)}function u2(e){if(e instanceof Date)return e.getDate();throw new Error(`Failed to get year from date: ${e}.`)}function Bp(e){const t=Gn(e),n=t+(-t+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const Rae=ou(Gn,Bp,-100),cB=ou(Gn,Bp,100),ij=Kv(cB),Bae=ou(Gn,ij,-100),dB=Yv(Bp,ij);function Oc(e){const t=Gn(e),n=t+(-t+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const fB=ou(Gn,Oc,-10),oj=ou(Gn,Oc,10),c2=Kv(oj),hB=ou(Gn,c2,-10),pB=Yv(Oc,c2);function Fp(e){const t=Gn(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}const mB=ou(Gn,Fp,-1),sj=ou(Gn,Fp,1),d2=Kv(sj),gB=ou(Gn,d2,-1),Fae=Yv(Fp,d2);function lj(e,t){return function(r,a=t){const i=Gn(r),o=Pc(r)+a,s=new Date;return s.setFullYear(i,o,1),s.setHours(0,0,0,0),e(s)}}function cf(e){const t=Gn(e),n=Pc(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}const vB=lj(cf,-1),uj=lj(cf,1),Xv=Kv(uj),yB=lj(Xv,-1),zae=Yv(cf,Xv);function Uae(e,t){return function(r,a=t){const i=Gn(r),o=Pc(r),s=u2(r)+a,l=new Date;return l.setFullYear(i,o,s),l.setHours(0,0,0,0),e(l)}}function Jv(e){const t=Gn(e),n=Pc(e),r=u2(e),a=new Date;return a.setFullYear(t,n,r),a.setHours(0,0,0,0),a}const Wae=Uae(Jv,1),cj=Kv(Wae),qae=Yv(Jv,cj);function bB(e){return u2(Xv(e))}var wa={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Hae={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},dj=[0,1,2,3,4,5,6],oN=new Map;function $ae(e){return function(n,r){var a=n||uB();oN.has(a)||oN.set(a,new Map);var i=oN.get(a);return i.has(e)||i.set(e,new Intl.DateTimeFormat(a||void 0,e).format),i.get(e)(r)}}function Vae(e){var t=new Date(e);return new Date(t.setHours(12))}function df(e){return function(t,n){return $ae(e)(t,Vae(n))}}var Gae={day:"numeric"},Kae={day:"numeric",month:"long",year:"numeric"},Yae={month:"long"},Xae={month:"long",year:"numeric"},Jae={weekday:"short"},Qae={weekday:"long"},Zae={year:"numeric"},eie=df(Gae),tie=df(Kae),nie=df(Yae),xB=df(Xae),rie=df(Jae),aie=df(Qae),f2=df(Zae),iie=dj[0],oie=dj[5],bD=dj[6];function Qg(e,t){t===void 0&&(t=wa.ISO_8601);var n=e.getDay();switch(t){case wa.ISO_8601:return(n+6)%7;case wa.ISLAMIC:return(n+1)%7;case wa.HEBREW:case wa.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function sie(e){var t=Bp(e);return Gn(t)}function lie(e){var t=Oc(e);return Gn(t)}function xk(e,t){t===void 0&&(t=wa.ISO_8601);var n=Gn(e),r=Pc(e),a=e.getDate()-Qg(e,t);return new Date(n,r,a)}function uie(e,t){t===void 0&&(t=wa.ISO_8601);var n=t===wa.GREGORY?wa.GREGORY:wa.ISO_8601,r=xk(e,t),a=Gn(e)+1,i,o;do i=new Date(a,0,n===wa.ISO_8601?4:1),o=xk(i,t),a-=1;while(e<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Ad(e,t){switch(e){case"century":return Bp(t);case"decade":return Oc(t);case"year":return Fp(t);case"month":return cf(t);case"day":return Jv(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function cie(e,t){switch(e){case"century":return Rae(t);case"decade":return fB(t);case"year":return mB(t);case"month":return vB(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function wB(e,t){switch(e){case"century":return cB(t);case"decade":return oj(t);case"year":return sj(t);case"month":return uj(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function die(e,t){switch(e){case"decade":return fB(t,-100);case"year":return mB(t,-10);case"month":return vB(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function fie(e,t){switch(e){case"decade":return oj(t,100);case"year":return sj(t,10);case"month":return uj(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function NB(e,t){switch(e){case"century":return ij(t);case"decade":return c2(t);case"year":return d2(t);case"month":return Xv(t);case"day":return cj(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function hie(e,t){switch(e){case"century":return Bae(t);case"decade":return hB(t);case"year":return gB(t);case"month":return yB(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function pie(e,t){switch(e){case"decade":return hB(t,-100);case"year":return gB(t,-10);case"month":return yB(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function xD(e,t){switch(e){case"century":return dB(t);case"decade":return pB(t);case"year":return Fae(t);case"month":return zae(t);case"day":return qae(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function mie(e,t,n){var r=[t,n].sort(function(a,i){return a.getTime()-i.getTime()});return[Ad(e,r[0]),NB(e,r[1])]}function SB(e,t,n){return n.map(function(r){return(t||f2)(e,r)}).join("  ")}function gie(e,t,n){return SB(e,t,dB(n))}function kB(e,t,n){return SB(e,t,pB(n))}function vie(e){return e.getDay()===new Date().getDay()}function _B(e,t){t===void 0&&(t=wa.ISO_8601);var n=e.getDay();switch(t){case wa.ISLAMIC:case wa.HEBREW:return n===oie||n===bD;case wa.ISO_8601:case wa.GREGORY:return n===bD||n===iie;default:throw new Error("Unsupported calendar type.")}}var Ds="react-calendar__navigation";function yie(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,a=r===void 0?xB:r,i=e.formatYear,o=i===void 0?f2:i,s=e.locale,l=e.maxDate,u=e.minDate,c=e.navigationAriaLabel,f=c===void 0?"":c,h=e.navigationAriaLive,p=e.navigationLabel,m=e.next2AriaLabel,v=m===void 0?"":m,y=e.next2Label,g=y===void 0?"":y,b=e.nextAriaLabel,x=b===void 0?"":b,N=e.nextLabel,k=N===void 0?"":N,j=e.prev2AriaLabel,S=j===void 0?"":j,A=e.prev2Label,P=A===void 0?"":A,T=e.prevAriaLabel,E=T===void 0?"":T,D=e.prevLabel,R=D===void 0?"":D,F=e.setActiveStartDate,H=e.showDoubleView,B=e.view,U=e.views,W=U.indexOf(B)>0,z=B!=="century",J=cie(B,t),ee=z?die(B,t):void 0,L=wB(B,t),q=z?fie(B,t):void 0,Y=function(){if(J.getFullYear()<0)return!0;var Ee=hie(B,t);return u&&u>=Ee}(),te=z&&function(){if(ee.getFullYear()<0)return!0;var Ee=pie(B,t);return u&&u>=Ee}(),K=l&&l<L,ce=z&&l&&l<q;function he(){F(J,"prev")}function $(){F(ee,"prev2")}function X(){F(L,"next")}function ae(){F(q,"next2")}function le(Ee){var me=function(){switch(B){case"century":return gie(s,o,Ee);case"decade":return kB(s,o,Ee);case"year":return o(s,Ee);case"month":return a(s,Ee);default:throw new Error("Invalid view: ".concat(B,"."))}}();return p?p({date:Ee,label:me,locale:s||uB()||void 0,view:B}):me}function Se(){var Ee="".concat(Ds,"__label");return d.jsxs("button",{"aria-label":f,"aria-live":h,className:Ee,disabled:!W,onClick:n,style:{flexGrow:1},type:"button",children:[d.jsx("span",{className:"".concat(Ee,"__labelText ").concat(Ee,"__labelText--from"),children:le(t)}),H?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"".concat(Ee,"__divider"),children:"  "}),d.jsx("span",{className:"".concat(Ee,"__labelText ").concat(Ee,"__labelText--to"),children:le(L)})]}):null]})}return d.jsxs("div",{className:Ds,children:[P!==null&&z?d.jsx("button",{"aria-label":S,className:"".concat(Ds,"__arrow ").concat(Ds,"__prev2-button"),disabled:te,onClick:$,type:"button",children:P}):null,R!==null&&d.jsx("button",{"aria-label":E,className:"".concat(Ds,"__arrow ").concat(Ds,"__prev-button"),disabled:Y,onClick:he,type:"button",children:R}),Se(),k!==null&&d.jsx("button",{"aria-label":x,className:"".concat(Ds,"__arrow ").concat(Ds,"__next-button"),disabled:K,onClick:X,type:"button",children:k}),g!==null&&z?d.jsx("button",{"aria-label":v,className:"".concat(Ds,"__arrow ").concat(Ds,"__next2-button"),disabled:ce,onClick:ae,type:"button",children:g}):null]})}var Sh=function(){return Sh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Sh.apply(this,arguments)},bie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function wD(e){return"".concat(e,"%")}function fj(e){var t=e.children,n=e.className,r=e.count,a=e.direction,i=e.offset,o=e.style,s=e.wrap,l=bie(e,["children","className","count","direction","offset","style","wrap"]);return d.jsx("div",Sh({className:n,style:Sh({display:"flex",flexDirection:a,flexWrap:s?"wrap":"nowrap"},o)},l,{children:M.Children.map(t,function(u,c){var f=i&&c===0?wD(100*i/r):null;return M.cloneElement(u,Sh(Sh({},u.props),{style:{flexBasis:wD(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))})}))}function xie(e,t,n){return t&&t>e?t:n&&n<e?n:e}function Zg(e,t){return t[0]<=e&&t[1]>=e}function wie(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function jB(e,t){return Zg(e[0],t)||Zg(e[1],t)}function ND(e,t,n){var r=jB(t,e),a=[];if(r){a.push(n);var i=Zg(e[0],t),o=Zg(e[1],t);i&&a.push("".concat(n,"Start")),o&&a.push("".concat(n,"End")),i&&o&&a.push("".concat(n,"BothEnds"))}return a}function Nie(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function Sie(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,a="react-calendar__tile",i=[a];if(!n)return i;var o=new Date,s=function(){if(Array.isArray(n))return n;var p=e.dateType;if(!p)throw new Error("dateType is required when date is not an array of two dates");return xD(p,n)}();if(Zg(o,s)&&i.push("".concat(a,"--now")),!t||!Nie(t))return i;var l=function(){if(Array.isArray(t))return t;var p=e.valueType;if(!p)throw new Error("valueType is required when value is not an array of two dates");return xD(p,t)}();wie(l,s)?i.push("".concat(a,"--active")):jB(l,s)&&i.push("".concat(a,"--hasActive"));var u=ND(l,s,"".concat(a,"--range"));i.push.apply(i,u);var c=Array.isArray(t)?t:[t];if(r&&c.length===1){var f=r>l[0]?[l[0],r]:[r,l[0]],h=ND(f,s,"".concat(a,"--hover"));i.push.apply(i,h)}return i}function h2(e){for(var t=e.className,n=e.count,r=n===void 0?3:n,a=e.dateTransform,i=e.dateType,o=e.end,s=e.hover,l=e.offset,u=e.renderTile,c=e.start,f=e.step,h=f===void 0?1:f,p=e.value,m=e.valueType,v=[],y=c;y<=o;y+=h){var g=a(y);v.push(u({classes:Sie({date:g,dateType:i,hover:s,value:p,valueType:m}),date:g}))}return d.jsx(fj,{className:t,count:r,offset:l,wrap:!0,children:v})}function p2(e){var t=e.activeStartDate,n=e.children,r=e.classes,a=e.date,i=e.formatAbbr,o=e.locale,s=e.maxDate,l=e.maxDateTransform,u=e.minDate,c=e.minDateTransform,f=e.onClick,h=e.onMouseOver,p=e.style,m=e.tileClassName,v=e.tileContent,y=e.tileDisabled,g=e.view,b=M.useMemo(function(){var N={activeStartDate:t,date:a,view:g};return typeof m=="function"?m(N):m},[t,a,m,g]),x=M.useMemo(function(){var N={activeStartDate:t,date:a,view:g};return typeof v=="function"?v(N):v},[t,a,v,g]);return d.jsxs("button",{className:cn(r,b),disabled:u&&c(u)>a||s&&l(s)<a||(y==null?void 0:y({activeStartDate:t,date:a,view:g})),onClick:f?function(N){return f(a,N)}:void 0,onFocus:h?function(){return h(a)}:void 0,onMouseOver:h?function(){return h(a)}:void 0,style:p,type:"button",children:[i?d.jsx("abbr",{"aria-label":i(o,a),children:n}):n,x]})}var wk=function(){return wk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},wk.apply(this,arguments)},kie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},SD="react-calendar__century-view__decades__decade";function _ie(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentCentury,a=e.formatYear,i=a===void 0?f2:a,o=kie(e,["classes","currentCentury","formatYear"]),s=o.date,l=o.locale,u=[];return n&&u.push.apply(u,n),u.push(SD),Bp(s).getFullYear()!==r&&u.push("".concat(SD,"--neighboringCentury")),d.jsx(p2,wk({},o,{classes:u,maxDateTransform:c2,minDateTransform:Oc,view:"century",children:kB(l,i,s)}))}var Nk=function(){return Nk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Nk.apply(this,arguments)},kD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function jie(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringCentury,a=e.value,i=e.valueType,o=kD(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),s=sie(t),l=s+(r?119:99);return d.jsx(h2,{className:"react-calendar__century-view__decades",dateTransform:Oc,dateType:"decade",end:l,hover:n,renderTile:function(u){var c=u.date,f=kD(u,["date"]);return d.jsx(_ie,Nk({},o,f,{activeStartDate:t,currentCentury:s,date:c}),c.getTime())},start:s,step:10,value:a,valueType:i})}var Sk=function(){return Sk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Sk.apply(this,arguments)};function Aie(e){function t(){return d.jsx(jie,Sk({},e))}return d.jsx("div",{className:"react-calendar__century-view",children:t()})}var kk=function(){return kk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},kk.apply(this,arguments)},Cie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},_D="react-calendar__decade-view__years__year";function Eie(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentDecade,a=e.formatYear,i=a===void 0?f2:a,o=Cie(e,["classes","currentDecade","formatYear"]),s=o.date,l=o.locale,u=[];return n&&u.push.apply(u,n),u.push(_D),Oc(s).getFullYear()!==r&&u.push("".concat(_D,"--neighboringDecade")),d.jsx(p2,kk({},o,{classes:u,maxDateTransform:d2,minDateTransform:Fp,view:"decade",children:i(l,s)}))}var _k=function(){return _k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},_k.apply(this,arguments)},jD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Die(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringDecade,a=e.value,i=e.valueType,o=jD(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),s=lie(t),l=s+(r?11:9);return d.jsx(h2,{className:"react-calendar__decade-view__years",dateTransform:Fp,dateType:"year",end:l,hover:n,renderTile:function(u){var c=u.date,f=jD(u,["date"]);return d.jsx(Eie,_k({},o,f,{activeStartDate:t,currentDecade:s,date:c}),c.getTime())},start:s,value:a,valueType:i})}var jk=function(){return jk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},jk.apply(this,arguments)};function Pie(e){function t(){return d.jsx(Die,jk({},e))}return d.jsx("div",{className:"react-calendar__decade-view",children:t()})}var Ak=function(){return Ak=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ak.apply(this,arguments)},Oie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},AD=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Tie="react-calendar__year-view__months__month";function Mie(e){var t=e.classes,n=t===void 0?[]:t,r=e.formatMonth,a=r===void 0?nie:r,i=e.formatMonthYear,o=i===void 0?xB:i,s=Oie(e,["classes","formatMonth","formatMonthYear"]),l=s.date,u=s.locale;return d.jsx(p2,Ak({},s,{classes:AD(AD([],n,!0),[Tie],!1),formatAbbr:o,maxDateTransform:Xv,minDateTransform:cf,view:"year",children:a(u,l)}))}var Ck=function(){return Ck=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ck.apply(this,arguments)},CD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Lie(e){var t=e.activeStartDate,n=e.hover,r=e.value,a=e.valueType,i=CD(e,["activeStartDate","hover","value","valueType"]),o=0,s=11,l=Gn(t);return d.jsx(h2,{className:"react-calendar__year-view__months",dateTransform:function(u){var c=new Date;return c.setFullYear(l,u,1),cf(c)},dateType:"month",end:s,hover:n,renderTile:function(u){var c=u.date,f=CD(u,["date"]);return d.jsx(Mie,Ck({},i,f,{activeStartDate:t,date:c}),c.getTime())},start:o,value:r,valueType:a})}var Ek=function(){return Ek=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ek.apply(this,arguments)};function Iie(e){function t(){return d.jsx(Lie,Ek({},e))}return d.jsx("div",{className:"react-calendar__year-view",children:t()})}var Dk=function(){return Dk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Dk.apply(this,arguments)},Rie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},sN="react-calendar__month-view__days__day";function Bie(e){var t=e.calendarType,n=e.classes,r=n===void 0?[]:n,a=e.currentMonthIndex,i=e.formatDay,o=i===void 0?eie:i,s=e.formatLongDate,l=s===void 0?tie:s,u=Rie(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),c=u.date,f=u.locale,h=[];return r&&h.push.apply(h,r),h.push(sN),_B(c,t)&&h.push("".concat(sN,"--weekend")),c.getMonth()!==a&&h.push("".concat(sN,"--neighboringMonth")),d.jsx(p2,Dk({},u,{classes:h,formatAbbr:l,maxDateTransform:cj,minDateTransform:Jv,view:"month",children:o(f,c)}))}var Pk=function(){return Pk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Pk.apply(this,arguments)},ED=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Fie(e){var t=e.activeStartDate,n=e.calendarType,r=e.hover,a=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,o=e.value,s=e.valueType,l=ED(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),u=Gn(t),c=Pc(t),f=a||i,h=Qg(t,n),p=f?0:h,m=(f?-h:0)+1,v=function(){if(a)return m+6*7-1;var y=bB(t);if(i){var g=new Date;g.setFullYear(u,c,y),g.setHours(0,0,0,0);var b=7-Qg(g,n)-1;return y+b}return y}();return d.jsx(h2,{className:"react-calendar__month-view__days",count:7,dateTransform:function(y){var g=new Date;return g.setFullYear(u,c,y),Jv(g)},dateType:"day",hover:r,end:v,renderTile:function(y){var g=y.date,b=ED(y,["date"]);return d.jsx(Bie,Pk({},l,b,{activeStartDate:t,calendarType:n,currentMonthIndex:c,date:g}),g.getTime())},offset:p,start:m,value:o,valueType:s})}var AB="react-calendar__month-view__weekdays",lN="".concat(AB,"__weekday");function zie(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=n===void 0?rie:n,a=e.formatWeekday,i=a===void 0?aie:a,o=e.locale,s=e.onMouseLeave,l=new Date,u=cf(l),c=Gn(u),f=Pc(u),h=[],p=1;p<=7;p+=1){var m=new Date(c,f,p-Qg(u,t)),v=i(o,m);h.push(d.jsx("div",{className:cn(lN,vie(m)&&"".concat(lN,"--current"),_B(m,t)&&"".concat(lN,"--weekend")),children:d.jsx("abbr",{"aria-label":v,title:v,children:r(o,m).replace(".","")})},p))}return d.jsx(fj,{className:AB,count:7,onFocus:s,onMouseOver:s,children:h})}var kx=function(){return kx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},kx.apply(this,arguments)},DD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},PD="react-calendar__tile";function Uie(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=d.jsx("span",{children:n});if(t){var a=e.date,i=e.onClickWeekNumber,o=e.weekNumber,s=DD(e,["date","onClickWeekNumber","weekNumber"]);return d.jsx("button",kx({},s,{className:PD,onClick:function(l){return i(o,a,l)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var s=DD(e,["date","onClickWeekNumber","weekNumber"]);return d.jsx("div",kx({},s,{className:PD,children:r}))}}function Wie(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,a=e.onMouseLeave,i=e.showFixedNumberOfWeeks,o=function(){if(i)return 6;var u=bB(t),c=Qg(t,n),f=u-(7-c);return 1+Math.ceil(f/7)}(),s=function(){for(var u=Gn(t),c=Pc(t),f=u2(t),h=[],p=0;p<o;p+=1)h.push(xk(new Date(u,c,f+p*7),n));return h}(),l=s.map(function(u){return uie(u,n)});return d.jsx(fj,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(u,c){var f=s[c];if(!f)throw new Error("date is not defined");return d.jsx(Uie,{date:f,onClickWeekNumber:r,weekNumber:u},u)})})}var Ok=function(){return Ok=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ok.apply(this,arguments)},qie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Hie(e){if(e)for(var t=0,n=Object.entries(Hae);t<n.length;t++){var r=n[t],a=r[0],i=r[1];if(i.includes(e))return a}return wa.ISO_8601}function $ie(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,a=e.showFixedNumberOfWeeks,i=e.calendarType,o=i===void 0?Hie(n):i,s=e.formatShortWeekday,l=e.formatWeekday,u=e.onClickWeekNumber,c=e.showWeekNumbers,f=qie(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function h(){return d.jsx(zie,{calendarType:o,formatShortWeekday:s,formatWeekday:l,locale:n,onMouseLeave:r})}function p(){return c?d.jsx(Wie,{activeStartDate:t,calendarType:o,onClickWeekNumber:u,onMouseLeave:r,showFixedNumberOfWeeks:a}):null}function m(){return d.jsx(Fie,Ok({calendarType:o},f))}var v="react-calendar__month-view";return d.jsx("div",{className:cn(v,c?"".concat(v,"--weekNumbers"):""),children:d.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[p(),d.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[h(),m()]})]})})}var kh=function(){return kh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},kh.apply(this,arguments)},Oy="react-calendar",pb=["century","decade","year","month"],Vie=["decade","year","month","day"],hj=new Date;hj.setFullYear(1,0,1);hj.setHours(0,0,0,0);var Gie=new Date(864e13);function Ym(e){return e instanceof Date?e:new Date(e)}function CB(e,t){return pb.slice(pb.indexOf(e),pb.indexOf(t)+1)}function Kie(e,t,n){var r=CB(t,n);return r.indexOf(e)!==-1}function pj(e,t,n){return e&&Kie(e,t,n)?e:n}function EB(e){var t=pb.indexOf(e);return Vie[t]}function Yie(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=Ym(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function DB(e,t){var n=e.value,r=e.minDate,a=e.maxDate,i=e.maxDetail,o=Yie(n,t);if(!o)return null;var s=EB(i),l=function(){switch(t){case 0:return Ad(s,o);case 1:return NB(s,o);default:throw new Error("Invalid index value: ".concat(t))}}();return xie(l,r,a)}var mj=function(e){return DB(e,0)},PB=function(e){return DB(e,1)},Xie=function(e){return[mj,PB].map(function(t){return t(e)})};function OB(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,a=e.minDetail,i=e.value,o=e.view,s=pj(o,a,n),l=mj({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date;return Ad(s,l)}function Jie(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,a=e.defaultView,i=e.maxDate,o=e.maxDetail,s=e.minDate,l=e.minDetail,u=e.value,c=e.view,f=pj(c,l,o),h=t||n;return h?Ad(f,h):OB({maxDate:i,maxDetail:o,minDate:s,minDetail:l,value:u||r,view:c||a})}function uN(e){return e&&(!Array.isArray(e)||e.length===1)}function Ty(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var Qie=M.forwardRef(function(t,n){var r=t.activeStartDate,a=t.allowPartialRange,i=t.calendarType,o=t.className,s=t.defaultActiveStartDate,l=t.defaultValue,u=t.defaultView,c=t.formatDay,f=t.formatLongDate,h=t.formatMonth,p=t.formatMonthYear,m=t.formatShortWeekday,v=t.formatWeekday,y=t.formatYear,g=t.goToRangeStartOnSelect,b=g===void 0?!0:g,x=t.inputRef,N=t.locale,k=t.maxDate,j=k===void 0?Gie:k,S=t.maxDetail,A=S===void 0?"month":S,P=t.minDate,T=P===void 0?hj:P,E=t.minDetail,D=E===void 0?"century":E,R=t.navigationAriaLabel,F=t.navigationAriaLive,H=t.navigationLabel,B=t.next2AriaLabel,U=t.next2Label,W=t.nextAriaLabel,z=t.nextLabel,J=t.onActiveStartDateChange,ee=t.onChange,L=t.onClickDay,q=t.onClickDecade,Y=t.onClickMonth,te=t.onClickWeekNumber,K=t.onClickYear,ce=t.onDrillDown,he=t.onDrillUp,$=t.onViewChange,X=t.prev2AriaLabel,ae=t.prev2Label,le=t.prevAriaLabel,Se=t.prevLabel,Ee=t.returnValue,me=Ee===void 0?"start":Ee,ie=t.selectRange,Ve=t.showDoubleView,be=t.showFixedNumberOfWeeks,fe=t.showNavigation,_e=fe===void 0?!0:fe,je=t.showNeighboringCentury,Re=t.showNeighboringDecade,Ge=t.showNeighboringMonth,Je=Ge===void 0?!0:Ge,Ye=t.showWeekNumbers,ct=t.tileClassName,dt=t.tileContent,At=t.tileDisabled,Qe=t.value,rt=t.view,Ke=M.useState(s),xr=Ke[0],Lt=Ke[1],$r=M.useState(null),Jt=$r[0],kn=$r[1],Ei=M.useState(Array.isArray(l)?l.map(function(_t){return _t!==null?Ym(_t):null}):l!=null?Ym(l):null),Gt=Ei[0],dl=Ei[1],In=M.useState(u),Di=In[0],go=In[1],Ft=r||xr||Jie({activeStartDate:r,defaultActiveStartDate:s,defaultValue:l,defaultView:u,maxDate:j,maxDetail:A,minDate:T,minDetail:D,value:Qe,view:rt}),gt=function(){var _t=function(){return ie&&uN(Gt)?Gt:Qe!==void 0?Qe:Gt}();return _t?Array.isArray(_t)?_t.map(function(Vt){return Vt!==null?Ym(Vt):null}):_t!==null?Ym(_t):null:null}(),$t=EB(A),tn=pj(rt||Di,D,A),xn=CB(D,A),vo=ie?Jt:null,ti=xn.indexOf(tn)<xn.length-1,bt=xn.indexOf(tn)>0,ni=M.useCallback(function(_t){var Vt=function(){switch(me){case"start":return mj;case"end":return PB;case"range":return Xie;default:throw new Error("Invalid returnValue.")}}();return Vt({maxDate:j,maxDetail:A,minDate:T,value:_t})},[j,A,T,me]),ri=M.useCallback(function(_t,Vt){Lt(_t);var nn={action:Vt,activeStartDate:_t,value:gt,view:tn};J&&!Ty(Ft,_t)&&J(nn)},[Ft,J,gt,tn]),Dr=M.useCallback(function(_t,Vt){var nn=function(){switch(tn){case"century":return q;case"decade":return K;case"year":return Y;case"month":return L;default:throw new Error("Invalid view: ".concat(tn,"."))}}();nn&&nn(_t,Vt)},[L,q,Y,K,tn]),Kn=M.useCallback(function(_t,Vt){if(ti){Dr(_t,Vt);var nn=xn[xn.indexOf(tn)+1];if(!nn)throw new Error("Attempted to drill down from the lowest view.");Lt(_t),go(nn);var Pr={action:"drillDown",activeStartDate:_t,value:gt,view:nn};J&&!Ty(Ft,_t)&&J(Pr),$&&tn!==nn&&$(Pr),ce&&ce(Pr)}},[Ft,ti,J,Dr,ce,$,gt,tn,xn]),Wn=M.useCallback(function(){if(bt){var _t=xn[xn.indexOf(tn)-1];if(!_t)throw new Error("Attempted to drill up from the highest view.");var Vt=Ad(_t,Ft);Lt(Vt),go(_t);var nn={action:"drillUp",activeStartDate:Vt,value:gt,view:_t};J&&!Ty(Ft,Vt)&&J(nn),$&&tn!==_t&&$(nn),he&&he(nn)}},[Ft,bt,J,he,$,gt,tn,xn]),ca=M.useCallback(function(_t,Vt){var nn=gt;Dr(_t,Vt);var Pr=ie&&!uN(nn),Vr;if(ie)if(Pr)Vr=Ad($t,_t);else{if(!nn)throw new Error("previousValue is required");if(Array.isArray(nn))throw new Error("previousValue must not be an array");Vr=mie($t,nn,_t)}else Vr=ni(_t);var Ss=!ie||Pr||b?OB({maxDate:j,maxDetail:A,minDate:T,minDetail:D,value:Vr,view:tn}):null;Vt.persist(),Lt(Ss),dl(Vr);var hu={action:"onChange",activeStartDate:Ss,value:Vr,view:tn};if(J&&!Ty(Ft,Ss)&&J(hu),ee)if(ie){var pu=uN(Vr);if(!pu)ee(Vr||null,Vt);else if(a){if(Array.isArray(Vr))throw new Error("value must not be an array");ee([Vr||null,null],Vt)}}else ee(Vr||null,Vt)},[Ft,a,ni,b,j,A,T,D,J,ee,Dr,ie,gt,$t,tn]);function fu(_t){kn(_t)}function Pi(){kn(null)}M.useImperativeHandle(n,function(){return{activeStartDate:Ft,drillDown:Kn,drillUp:Wn,onChange:ca,setActiveStartDate:ri,value:gt,view:tn}},[Ft,Kn,Wn,ca,ri,gt,tn]);function ai(_t){var Vt=_t?wB(tn,Ft):Ad(tn,Ft),nn=ti?Kn:ca,Pr={activeStartDate:Vt,hover:vo,locale:N,maxDate:j,minDate:T,onClick:nn,onMouseOver:ie?fu:void 0,tileClassName:ct,tileContent:dt,tileDisabled:At,value:gt,valueType:$t};switch(tn){case"century":return d.jsx(Aie,kh({formatYear:y,showNeighboringCentury:je},Pr));case"decade":return d.jsx(Pie,kh({formatYear:y,showNeighboringDecade:Re},Pr));case"year":return d.jsx(Iie,kh({formatMonth:h,formatMonthYear:p},Pr));case"month":return d.jsx($ie,kh({calendarType:i,formatDay:c,formatLongDate:f,formatShortWeekday:m,formatWeekday:v,onClickWeekNumber:te,onMouseLeave:ie?Pi:void 0,showFixedNumberOfWeeks:typeof be<"u"?be:Ve,showNeighboringMonth:Je,showWeekNumbers:Ye},Pr));default:throw new Error("Invalid view: ".concat(tn,"."))}}function Oi(){return _e?d.jsx(yie,{activeStartDate:Ft,drillUp:Wn,formatMonthYear:p,formatYear:y,locale:N,maxDate:j,minDate:T,navigationAriaLabel:R,navigationAriaLive:F,navigationLabel:H,next2AriaLabel:B,next2Label:U,nextAriaLabel:W,nextLabel:z,prev2AriaLabel:X,prev2Label:ae,prevAriaLabel:le,prevLabel:Se,setActiveStartDate:ri,showDoubleView:Ve,view:tn,views:xn}):null}var Ti=Array.isArray(gt)?gt:[gt];return d.jsxs("div",{className:cn(Oy,ie&&Ti.length===1&&"".concat(Oy,"--selectRange"),Ve&&"".concat(Oy,"--doubleView"),o),ref:x,children:[Oi(),d.jsxs("div",{className:"".concat(Oy,"__viewContainer"),onBlur:ie?Pi:void 0,onMouseLeave:ie?Pi:void 0,children:[ai(),Ve?ai(!0):null]})]})});const TB=6048e5,Zie=864e5,OD=Symbol.for("constructDateFrom");function el(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&OD in e?e[OD](t):e instanceof Date?new e.constructor(t):new Date(t)}function _i(e,t){return el(t||e,e)}function TD(e,t){const n=_i(e,t==null?void 0:t.in).getDay();return n===0||n===6}let eoe={};function m2(){return eoe}function ev(e,t){var s,l,u,c;const n=m2(),r=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,a=_i(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function _x(e,t){return ev(e,{...t,weekStartsOn:1})}function MB(e,t){const n=_i(e,t==null?void 0:t.in),r=n.getFullYear(),a=el(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=_x(a),o=el(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=_x(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function MD(e){const t=_i(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function LB(e,...t){const n=el.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function jx(e,t){const n=_i(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function toe(e,t,n){const[r,a]=LB(n==null?void 0:n.in,e,t),i=jx(r),o=jx(a),s=+i-MD(i),l=+o-MD(o);return Math.round((s-l)/Zie)}function noe(e,t){const n=MB(e,t),r=el(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),_x(r)}function roe(e){return el(e,Date.now())}function aoe(e,t,n){const[r,a]=LB(n==null?void 0:n.in,e,t);return+jx(r)==+jx(a)}function ioe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ooe(e){return!(!ioe(e)&&typeof e!="number"||isNaN(+_i(e)))}function soe(e,t){const n=_i(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function loe(e,t){const n=_i(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function uoe(e,t){const n=_i(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const coe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},doe=(e,t,n)=>{let r;const a=coe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Hh(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const foe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hoe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},poe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},moe={date:Hh({formats:foe,defaultWidth:"full"}),time:Hh({formats:hoe,defaultWidth:"full"}),dateTime:Hh({formats:poe,defaultWidth:"full"})},goe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},voe=(e,t,n,r)=>goe[e];function Bs(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const yoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},boe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xoe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},woe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Noe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Soe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},koe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_oe={ordinalNumber:koe,era:Bs({values:yoe,defaultWidth:"wide"}),quarter:Bs({values:boe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bs({values:xoe,defaultWidth:"wide"}),day:Bs({values:woe,defaultWidth:"wide"}),dayPeriod:Bs({values:Noe,defaultWidth:"wide",formattingValues:Soe,defaultFormattingWidth:"wide"})};function Fs(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?Aoe(s,f=>f.test(o)):joe(s,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=t.slice(o.length);return{value:u,rest:c}}}function joe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Aoe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function IB(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Coe=/^(\d+)(th|st|nd|rd)?/i,Eoe=/\d+/i,Doe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Poe={any:[/^b/i,/^(a|c)/i]},Ooe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Toe={any:[/1/i,/2/i,/3/i,/4/i]},Moe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Loe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ioe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Roe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Boe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Foe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zoe={ordinalNumber:IB({matchPattern:Coe,parsePattern:Eoe,valueCallback:e=>parseInt(e,10)}),era:Fs({matchPatterns:Doe,defaultMatchWidth:"wide",parsePatterns:Poe,defaultParseWidth:"any"}),quarter:Fs({matchPatterns:Ooe,defaultMatchWidth:"wide",parsePatterns:Toe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Fs({matchPatterns:Moe,defaultMatchWidth:"wide",parsePatterns:Loe,defaultParseWidth:"any"}),day:Fs({matchPatterns:Ioe,defaultMatchWidth:"wide",parsePatterns:Roe,defaultParseWidth:"any"}),dayPeriod:Fs({matchPatterns:Boe,defaultMatchWidth:"any",parsePatterns:Foe,defaultParseWidth:"any"})},Uoe={code:"en-US",formatDistance:doe,formatLong:moe,formatRelative:voe,localize:_oe,match:zoe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Woe(e,t){const n=_i(e,t==null?void 0:t.in);return toe(n,uoe(n))+1}function qoe(e,t){const n=_i(e,t==null?void 0:t.in),r=+_x(n)-+noe(n);return Math.round(r/TB)+1}function RB(e,t){var c,f,h,p;const n=_i(e,t==null?void 0:t.in),r=n.getFullYear(),a=m2(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=el((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=ev(o,t),l=el((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=ev(l,t);return+n>=+s?r+1:+n>=+u?r:r-1}function Hoe(e,t){var s,l,u,c;const n=m2(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,a=RB(e,t),i=el((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),ev(i,t)}function $oe(e,t){const n=_i(e,t==null?void 0:t.in),r=+ev(n,t)-+Hoe(n,t);return Math.round(r/TB)+1}function pn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ou={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return pn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):pn(n+1,2)},d(e,t){return pn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return pn(e.getHours()%12||12,t.length)},H(e,t){return pn(e.getHours(),t.length)},m(e,t){return pn(e.getMinutes(),t.length)},s(e,t){return pn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return pn(a,t.length)}},Xf={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LD={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ou.y(e,t)},Y:function(e,t,n,r){const a=RB(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return pn(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):pn(i,t.length)},R:function(e,t){const n=MB(e);return pn(n,t.length)},u:function(e,t){const n=e.getFullYear();return pn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return pn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return pn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ou.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return pn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=$oe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):pn(a,t.length)},I:function(e,t,n){const r=qoe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):pn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ou.d(e,t)},D:function(e,t,n){const r=Woe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):pn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return pn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return pn(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return pn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Xf.noon:r===0?a=Xf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Xf.evening:r>=12?a=Xf.afternoon:r>=4?a=Xf.morning:a=Xf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ou.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ou.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):pn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):pn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ou.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ou.s(e,t)},S:function(e,t){return Ou.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return RD(r);case"XXXX":case"XX":return rd(r);case"XXXXX":case"XXX":default:return rd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return RD(r);case"xxxx":case"xx":return rd(r);case"xxxxx":case"xxx":default:return rd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ID(r,":");case"OOOO":default:return"GMT"+rd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ID(r,":");case"zzzz":default:return"GMT"+rd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return pn(r,t.length)},T:function(e,t,n){return pn(+e,t.length)}};function ID(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+pn(i,2)}function RD(e,t){return e%60===0?(e>0?"-":"+")+pn(Math.abs(e)/60,2):rd(e,t)}function rd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=pn(Math.trunc(r/60),2),i=pn(r%60,2);return n+a+t+i}const BD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},BB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Voe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return BD(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",BD(r,t)).replace("{{time}}",BB(a,t))},Goe={p:BB,P:Voe},Koe=/^D+$/,Yoe=/^Y+$/,Xoe=["D","DD","YY","YYYY"];function Joe(e){return Koe.test(e)}function Qoe(e){return Yoe.test(e)}function Zoe(e,t,n){const r=ese(e,t,n);if(console.warn(r),Xoe.includes(e))throw new RangeError(r)}function ese(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const tse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rse=/^'([^]*?)'?$/,ase=/''/g,ise=/[a-zA-Z]/;function cN(e,t,n){var c,f,h,p,m,v,y,g;const r=m2(),a=(n==null?void 0:n.locale)??r.locale??Uoe,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((g=(y=r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??0,s=_i(e,n==null?void 0:n.in);if(!ooe(s))throw new RangeError("Invalid time value");let l=t.match(nse).map(b=>{const x=b[0];if(x==="p"||x==="P"){const N=Goe[x];return N(b,a.formatLong)}return b}).join("").match(tse).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const x=b[0];if(x==="'")return{isToken:!1,value:ose(b)};if(LD[x])return{isToken:!0,value:b};if(x.match(ise))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(l=a.localize.preprocessor(s,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return l.map(b=>{if(!b.isToken)return b.value;const x=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Qoe(x)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Joe(x))&&Zoe(x,t,String(e));const N=LD[x[0]];return N(s,x,a.localize,u)}).join("")}function ose(e){const t=e.match(rse);return t?t[1].replace(ase,"'"):e}function FD(e,t){return aoe(el(e,e),roe(e))}const sse={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},lse=(e,t,n)=>{let r;const a=sse[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dalam waktu "+r:r+" yang lalu":r},use={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},cse={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},dse={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fse={date:Hh({formats:use,defaultWidth:"full"}),time:Hh({formats:cse,defaultWidth:"full"}),dateTime:Hh({formats:dse,defaultWidth:"full"})},hse={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},pse=(e,t,n,r)=>hse[e],mse={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},gse={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},vse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},yse={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},bse={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},xse={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},wse=(e,t)=>"ke-"+Number(e),Nse={ordinalNumber:wse,era:Bs({values:mse,defaultWidth:"wide"}),quarter:Bs({values:gse,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bs({values:vse,defaultWidth:"wide"}),day:Bs({values:yse,defaultWidth:"wide"}),dayPeriod:Bs({values:bse,defaultWidth:"wide",formattingValues:xse,defaultFormattingWidth:"wide"})},Sse=/^ke-(\d+)?/i,kse=/\d+/i,_se={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},jse={any:[/^s/i,/^(m|e)/i]},Ase={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},Cse={any:[/1/i,/2/i,/3/i,/4/i]},Ese={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},Dse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pse={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},Ose={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},Tse={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},Mse={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},Lse={ordinalNumber:IB({matchPattern:Sse,parsePattern:kse,valueCallback:e=>parseInt(e,10)}),era:Fs({matchPatterns:_se,defaultMatchWidth:"wide",parsePatterns:jse,defaultParseWidth:"any"}),quarter:Fs({matchPatterns:Ase,defaultMatchWidth:"wide",parsePatterns:Cse,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Fs({matchPatterns:Ese,defaultMatchWidth:"wide",parsePatterns:Dse,defaultParseWidth:"any"}),day:Fs({matchPatterns:Pse,defaultMatchWidth:"wide",parsePatterns:Ose,defaultParseWidth:"any"}),dayPeriod:Fs({matchPatterns:Tse,defaultMatchWidth:"any",parsePatterns:Mse,defaultParseWidth:"any"})},zD={code:"id",formatDistance:lse,formatLong:fse,formatRelative:pse,localize:Nse,match:Lse,options:{weekStartsOn:1,firstWeekContainsDate:1}},FB=()=>{var U,W;const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState([]),[s,l]=M.useState([]),[u,c]=M.useState(!0),[f,h]=M.useState([]),[p,m]=M.useState(null),[v,y]=M.useState("all"),[g,b]=M.useState({startDate:"",endDate:"",type:"",status:"",employeeId:""});M.useEffect(()=>{x()},[]),M.useEffect(()=>{S()},[i,g,v]);const x=async()=>{try{const{data:{user:z}}=await Pe.auth.getUser();if(!z){e("/login");return}n(z);const{data:J,error:ee}=await Pe.from("profiles").select("role").eq("id",z.id).single();if(ee)throw ee;a(J.role),J.role==="admin"?(await N(),await k()):await j(z.id)}catch(z){console.error("Error checking user:",z),e("/login")}finally{c(!1)}},N=async()=>{try{const{data:z,error:J}=await Pe.from("profiles").select("id, name, email, employee_id, department").order("name");if(J)throw J;h(z||[])}catch(z){console.error("Error fetching employees:",z)}},k=async()=>{try{const{data:z,error:J}=await Pe.from("attendance").select(`
          *,
          profiles:user_id(id, name, email, employee_id, department)
        `).order("timestamp",{ascending:!1}).limit(500);if(J)throw J;o(z||[])}catch(z){console.error("Error fetching all attendance:",z)}},j=async z=>{try{const{data:J,error:ee}=await Pe.from("attendance").select("*").eq("user_id",z).order("timestamp",{ascending:!1});if(ee)throw ee;o(J||[])}catch(J){console.error("Error fetching attendance history:",J)}},S=()=>{let z=[...i];if(r==="admin"&&v!=="all"&&(z=z.filter(ee=>ee.user_id===v)),g.startDate&&(z=z.filter(ee=>new Date(ee.timestamp)>=new Date(g.startDate))),g.endDate){const ee=new Date(g.endDate);ee.setHours(23,59,59,999),z=z.filter(L=>new Date(L.timestamp)<=ee)}g.type&&(z=z.filter(ee=>ee.type===g.type)),g.status&&(z=z.filter(ee=>ee.status===g.status));const J=new Set;z=z.filter(ee=>{if(ee.status!=="tidak_hadir")return!0;const L=`${ee.timestamp}|${ee.status}|${ee.latitude||""}|${ee.longitude||""}`;return J.has(L)?!1:(J.add(L),!0)}),l(z)},A=z=>{b({...g,[z.target.name]:z.target.value})},P=z=>{y(z.target.value)},T=()=>{b({startDate:"",endDate:"",type:"",status:""}),y("all")},E=async()=>{c(!0),r==="admin"?await k():await j(t.id),c(!1)},D=()=>{if(s.length===0){Wt.fire({icon:"info",title:"Tidak Ada Data",text:"Tidak ada data absensi untuk diexport."});return}try{const J=[r==="admin"?["Tanggal","Waktu","Karyawan","Departemen","Jenis","Status","Terlambat","Menit Terlambat","Jam Kerja","Lembur","Latitude","Longitude"]:["Tanggal","Waktu","Jenis","Status","Terlambat","Menit Terlambat","Jam Kerja","Lembur","Latitude","Longitude"],...s.map(Y=>{var he,$;const te=new Date(Y.timestamp),K=te.toLocaleDateString("id-ID"),ce=te.toLocaleTimeString("id-ID");return r==="admin"?[K,ce,((he=Y.profiles)==null?void 0:he.name)||"Unknown",(($=Y.profiles)==null?void 0:$.department)||"-",Y.type==="masuk"?"Masuk":Y.type==="keluar"?"Keluar":"Tidak Hadir",Y.status,Y.is_late?"Ya":"Tidak",Y.late_minutes||"0",Y.work_hours||"0",Y.overtime_hours||"0",Y.latitude||"",Y.longitude||""]:[K,ce,Y.type==="masuk"?"Masuk":Y.type==="keluar"?"Keluar":"Tidak Hadir",Y.status,Y.is_late?"Ya":"Tidak",Y.late_minutes||"0",Y.work_hours||"0",Y.overtime_hours||"0",Y.latitude||"",Y.longitude||""]})].map(Y=>Y.join(",")).join(`
`),ee=new Blob([J],{type:"text/csv;charset=utf-8;"}),L=document.createElement("a"),q=URL.createObjectURL(ee);L.setAttribute("href",q),L.setAttribute("download",`attendance_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(q),Wt.fire({icon:"success",title:"Export Berhasil",text:"Data absensi berhasil diexport ke CSV."})}catch{Wt.fire({icon:"error",title:"Export Gagal",text:"Terjadi kesalahan saat export data absensi."})}},R=z=>{switch(z){case"berhasil":return"text-green-600 bg-green-100";case"wajah_tidak_valid":return"text-red-600 bg-red-100";case"lokasi_tidak_valid":return"text-yellow-600 bg-yellow-100";case"tidak_hadir":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},F=z=>{switch(z){case"berhasil":return d.jsx(ln,{className:"h-4 w-4"});case"wajah_tidak_valid":case"lokasi_tidak_valid":return d.jsx(zn,{className:"h-4 w-4"});case"tidak_hadir":return d.jsx(zn,{className:"h-4 w-4"});default:return d.jsx(Qn,{className:"h-4 w-4"})}},H=z=>{switch(z){case"berhasil":return"Berhasil";case"wajah_tidak_valid":return"Wajah Invalid";case"lokasi_tidak_valid":return"Lokasi Invalid";case"tidak_hadir":return"Tidak Hadir";default:return"Gagal"}},B=z=>{const J=new Date(z);return{date:J.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),time:J.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}};return u?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data absensi..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>e(r==="admin"?"/admin":"/dashboard"),className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:d.jsx(qT,{className:"h-5 w-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-white",children:"Laporan Absensi"}),d.jsx("p",{className:"text-sm text-blue-100",children:r==="admin"?"Lihat dan export laporan absensi semua karyawan":"Lihat dan export riwayat absensi Anda"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("button",{onClick:E,className:"flex items-center space-x-2 px-3 py-1.5 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",title:"Refresh Data",children:[d.jsx(F_,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),d.jsxs("button",{onClick:D,disabled:s.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-white text-blue-700 rounded-lg hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[d.jsx(mv,{className:"h-4 w-4"}),d.jsx("span",{children:"Export CSV"})]})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Wq,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter Laporan"})]})}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"grid grid-cols-1 gap-4 md:hidden",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Absensi"}),d.jsxs("select",{name:"type",value:g.type,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Jenis"}),d.jsx("option",{value:"masuk",children:"Masuk"}),d.jsx("option",{value:"keluar",children:"Keluar"}),d.jsx("option",{value:"absent",children:"Tidak Hadir"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{name:"status",value:g.status,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Status"}),d.jsx("option",{value:"berhasil",children:"Berhasil"}),d.jsx("option",{value:"wajah_tidak_valid",children:"Wajah Invalid"}),d.jsx("option",{value:"lokasi_tidak_valid",children:"Lokasi Invalid"}),d.jsx("option",{value:"tidak_hadir",children:"Tidak Hadir"})]})]})]}),d.jsxs("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[r==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Karyawan"}),d.jsxs("div",{className:"relative",children:[d.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsxs("select",{value:v,onChange:P,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"all",children:"Semua Karyawan"}),f.map(z=>d.jsxs("option",{value:z.id,children:[z.name," ",z.employee_id?`(${z.employee_id})`:""]},z.id))]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai"}),d.jsx("input",{type:"date",name:"startDate",value:g.startDate,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Akhir"}),d.jsx("input",{type:"date",name:"endDate",value:g.endDate,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Absensi"}),d.jsxs("select",{name:"type",value:g.type,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Jenis"}),d.jsx("option",{value:"masuk",children:"Masuk"}),d.jsx("option",{value:"keluar",children:"Keluar"}),d.jsx("option",{value:"absent",children:"Tidak Hadir"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{name:"status",value:g.status,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Status"}),d.jsx("option",{value:"berhasil",children:"Berhasil"}),d.jsx("option",{value:"wajah_tidak_valid",children:"Wajah Invalid"}),d.jsx("option",{value:"lokasi_tidak_valid",children:"Lokasi Invalid"}),d.jsx("option",{value:"tidak_hadir",children:"Tidak Hadir"})]})]})]}),d.jsx("div",{className:"mt-4 flex justify-end",children:d.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:"Reset Filter"})})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Fd,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Data Absensi (",s.length,")"]})]}),r==="admin"&&d.jsx("div",{className:"text-sm text-gray-500",children:v==="all"?"Menampilkan semua karyawan":`Menampilkan ${((U=f.find(z=>z.id===v))==null?void 0:U.name)||"karyawan"}`})]})}),s.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal & Waktu"}),r==="admin"&&d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Karyawan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Keterlambatan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jam Kerja"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lokasi"})]})}),d.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.map(z=>{var ee,L;const J=B(z.timestamp);return d.jsxs("tr",{className:"hover:bg-blue-50 cursor-pointer transition",onClick:()=>m(z),children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:J.date}),d.jsx("div",{className:"text-sm text-gray-500",children:J.time})]})}),r==="admin"&&d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:((ee=z.profiles)==null?void 0:ee.name)||"Unknown"}),d.jsx("div",{className:"text-sm text-gray-500",children:((L=z.profiles)==null?void 0:L.department)||"-"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:z.type==="masuk"?"Masuk":z.type==="keluar"?"Keluar":"Tidak Hadir"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${R(z.status)}`,children:[F(z.status),d.jsx("span",{children:H(z.status)})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.is_late?d.jsx("div",{className:"text-sm text-red-600",children:d.jsxs("span",{className:"font-medium",children:[z.late_minutes," menit"]})}):d.jsx("div",{className:"text-sm text-green-600",children:d.jsx("span",{className:"font-medium",children:"Tepat Waktu"})})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm text-gray-900",children:z.work_hours>0?d.jsxs("span",{children:[z.work_hours," jam"]}):d.jsx("span",{children:"-"})}),z.overtime_hours>0&&d.jsxs("div",{className:"text-xs text-blue-600",children:["Lembur: ",z.overtime_hours," jam"]})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.latitude&&z.longitude?d.jsxs("div",{className:"flex items-center",children:[d.jsx(Uo,{className:"h-4 w-4 mr-1 text-gray-400"}),d.jsxs("span",{children:[z.latitude.toFixed(4),", ",z.longitude.toFixed(4)]})]}):d.jsx("span",{className:"text-gray-400",children:"Tidak ada lokasi"})})]},z.id)}),p&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full p-6 relative animate-fade-in",children:[d.jsx("button",{onClick:()=>m(null),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",title:"Tutup",children:d.jsx(zn,{className:"h-6 w-6"})}),d.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Detail Absensi"}),d.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:[B(p.timestamp).date,"  ",B(p.timestamp).time]}),d.jsxs("div",{className:"space-y-2",children:[r==="admin"&&d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Karyawan:"})," ",((W=p.profiles)==null?void 0:W.name)||"Unknown"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Jenis:"})," ",p.type==="masuk"?"Masuk":p.type==="keluar"?"Keluar":"Tidak Hadir"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Status:"})," ",d.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R(p.status)}`,children:[F(p.status)," ",H(p.status)]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Keterlambatan:"})," ",p.is_late?`${p.late_minutes} menit`:"Tepat Waktu"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Jam Kerja:"})," ",p.work_hours>0?`${p.work_hours} jam`:"-"]}),p.overtime_hours>0&&d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Lembur:"})," ",p.overtime_hours," jam"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-700",children:"Lokasi:"})," ",p.latitude&&p.longitude?`${p.latitude.toFixed(4)}, ${p.longitude.toFixed(4)}`:"Tidak ada lokasi"]})]})]})})]})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Fd,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada data absensi ditemukan"}),d.jsx("p",{className:"text-gray-400",children:"Coba sesuaikan filter atau periksa kembali nanti"})]})]})]})]})},Ise=()=>{var be;const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState([]),[s,l]=M.useState([]),[u,c]=M.useState(null),[f,h]=M.useState([]),[p,m]=M.useState({thisMonth:0,onTime:0,late:0,totalHours:0,expectedSalary:0,currentMonthSalary:0,dailySalaryEarned:0}),[v,y]=M.useState(!0),[g,b]=M.useState(!1),[x,N]=M.useState(!1),[k,j]=M.useState(!1),[S,A]=M.useState(!0),[P,T]=M.useState(new Date),[E,D]=M.useState({}),[R,F]=M.useState(!1);M.useMemo(()=>(r==null?void 0:r.role)==="admin",[r==null?void 0:r.role]);const H=M.useCallback(async()=>{try{const{data:{user:fe}}=await Pe.auth.getUser();if(!fe){e("/login");return}n(fe),await Pe.from("profiles").update({last_login:new Date().toISOString(),device_info:{user_agent:navigator.userAgent,timestamp:new Date().toISOString()}}).eq("id",fe.id),await Promise.all([B(fe.id),z(fe.id),U(fe.id),W(fe.id),q()]).then(()=>{fe&&Y(fe.id,P)})}catch(fe){console.error("Error checking user:",fe),e("/login")}finally{y(!1)}},[e]);M.useEffect(()=>{H()},[H]);const B=M.useCallback(async fe=>{try{const{data:_e,error:je}=await Pe.from("profiles").select(`
          *,
          positions(name_id, department, base_salary)
        `).eq("id",fe).maybeSingle();if(je&&je.code!=="PGRST116")throw console.error("Profile fetch error:",je),je;if(_e){if(a(_e),_e.role==="admin"){e("/admin");return}}else{const{data:Re}=await Pe.auth.getUser();if(Re.user){const Ge={id:fe,name:Re.user.email.split("@")[0],full_name:Re.user.email.split("@")[0],email:Re.user.email,role:"karyawan",title:"Karyawan",bio:"Karyawan sistem absensi",department:"General",employee_id:`EMP${Date.now().toString().slice(-6)}`,status:"active",salary:35e5,join_date:new Date().toISOString().split("T")[0],contract_start_date:new Date().toISOString().split("T")[0],contract_type:"permanent",is_face_registered:!1},{data:Je,error:Ye}=await Pe.from("profiles").insert([Ge]).select().maybeSingle();!Ye&&Je&&a(Je)}}}catch(_e){console.error("Error in fetchUserProfile:",_e)}},[e]),U=M.useCallback(async fe=>{try{const{data:_e,error:je}=await Pe.from("employee_salaries").select("*").eq("user_id",fe).eq("is_active",!0).maybeSingle();je&&je.code!=="PGRST116"?console.error("Salary fetch error:",je):_e&&c(_e)}catch(_e){console.error("Error fetching salary info:",_e)}},[]),W=M.useCallback(async fe=>{try{const{data:_e,error:je}=await Pe.from("attendance_warnings").select("*").eq("user_id",fe).eq("is_resolved",!1).order("created_at",{ascending:!1}).limit(5);if(je)throw je;h(_e||[])}catch(_e){console.error("Error fetching warnings:",_e)}},[]),z=M.useCallback(async fe=>{try{const _e=new Date().toISOString().split("T")[0],[je,Re]=await Promise.all([Pe.from("attendance").select("*").eq("user_id",fe).gte("timestamp",`${_e}T00:00:00`).lte("timestamp",`${_e}T23:59:59`).order("timestamp",{ascending:!1}),Pe.from("attendance").select("*").eq("user_id",fe).gte("timestamp",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("timestamp",{ascending:!1}).limit(10)]);if(je.error)throw je.error;if(Re.error)throw Re.error;o(je.data||[]),l(Re.data||[]),J(Re.data||[],je.data||[])}catch(_e){console.error("Error fetching attendance:",_e)}},[]),J=M.useCallback((fe,_e)=>{const je=new Date;je.setDate(1);const Re=fe.filter(Qe=>new Date(Qe.timestamp)>=je&&Qe.status==="berhasil"),Ge=Re.filter(Qe=>Qe.type==="masuk"&&!Qe.is_late),Je=Re.filter(Qe=>Qe.type==="masuk"&&Qe.is_late),Ye=Re.filter(Qe=>Qe.type==="masuk").length;let ct=0;u?ct=u.daily_salary*22:r!=null&&r.salary&&(ct=r.salary);const dt=r!=null&&r.salary?r.salary/22*Ye:0,At=_e.filter(Qe=>Qe.type==="masuk"&&Qe.status==="berhasil").reduce((Qe,rt)=>Qe+(rt.daily_salary_earned||0),0);m({thisMonth:Ye,onTime:Ge.length,late:Je.length,totalHours:Math.round(Re.length*8/2),expectedSalary:ct,currentMonthSalary:dt,dailySalaryEarned:At})},[u,r==null?void 0:r.salary]),ee=M.useCallback(async()=>{try{await Pe.auth.signOut(),e("/login")}catch(fe){console.error("Failed to log out:",fe)}},[e]),L=M.useCallback(fe=>{o(_e=>[fe,..._e]),b(!1),t&&z(t.id)},[t,z]),q=M.useCallback(async()=>{try{const fe=await MI();A(fe.enabled)}catch(fe){console.error("Error fetching camera settings:",fe),A(!0)}},[]),Y=M.useCallback(async(fe,_e)=>{try{const je=loe(_e),Re=soe(_e),{data:Ge,error:Je}=await Pe.from("attendance").select("*").eq("user_id",fe).eq("status","berhasil").gte("timestamp",je.toISOString()).lte("timestamp",Re.toISOString()).order("timestamp",{ascending:!0});if(Je)throw Je;const Ye={};Ge==null||Ge.forEach(ct=>{const dt=ct.timestamp.split("T")[0];Ye[dt]||(Ye[dt]=[]),Ye[dt].push(ct)}),D(Ye)}catch(je){console.error("Error fetching monthly attendance:",je)}},[]),te=M.useCallback(fe=>{T(fe),t&&Y(t.id,fe)},[t,Y]),K=M.useCallback(()=>{if(S&&!(r!=null&&r.is_face_registered)){N(!0);return}const fe=i.some(je=>je.type==="masuk"&&je.status==="berhasil"),_e=i.some(je=>je.type==="keluar"&&je.status==="berhasil");if(fe&&_e){alert("Anda sudah melakukan absensi masuk dan keluar hari ini.");return}b(!0)},[r==null?void 0:r.is_face_registered,i,S]),ce=({date:fe,view:_e})=>{if(_e!=="month")return null;const je=cN(fe,"yyyy-MM-dd"),Re=E[je]||[],Ge=Re.some(Ye=>Ye.type==="masuk"),Je=Re.some(Ye=>Ye.type==="keluar");return TD(fe)?d.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Akhir pekan"}):Ge&&Je?d.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[d.jsx(ln,{className:"h-3 w-3 inline mr-1"}),"Lengkap"]}):Ge?d.jsxs("div",{className:"text-xs text-orange-500 mt-1",children:[d.jsx(Qn,{className:"h-3 w-3 inline mr-1"}),"Hanya masuk"]}):fe<new Date&&!FD(fe)?d.jsxs("div",{className:"text-xs text-red-500 mt-1",children:[d.jsx(zn,{className:"h-3 w-3 inline mr-1"}),"Absen"]}):null},he=({date:fe,view:_e})=>{if(_e!=="month")return"";const je=cN(fe,"yyyy-MM-dd"),Re=E[je]||[],Ge=Re.some(Ye=>Ye.type==="masuk"),Je=Re.some(Ye=>Ye.type==="keluar");return TD(fe)?"bg-gray-50":Ge&&Je?"bg-green-50 border border-green-200":Ge?"bg-orange-50 border border-orange-200":fe<new Date&&!FD(fe)?"bg-red-50 border border-red-200":""},$=M.useCallback(fe=>{switch(fe){case"berhasil":return"text-green-600 bg-green-100";case"wajah_tidak_valid":return"text-red-600 bg-red-100";case"lokasi_tidak_valid":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},[]),X=M.useCallback(fe=>{switch(fe){case"berhasil":return d.jsx(ln,{className:"h-4 w-4"});case"wajah_tidak_valid":case"lokasi_tidak_valid":return d.jsx(zn,{className:"h-4 w-4"});default:return d.jsx(Qn,{className:"h-4 w-4"})}},[]),ae=M.useCallback(fe=>{switch(fe){case"karyawan":return"Karyawan";case"admin":return"Administrator";default:return"Karyawan"}},[]);M.useCallback(fe=>{switch(fe){case"admin":return"bg-blue-100 text-blue-800";default:return"bg-green-100 text-green-800"}},[]);const le=M.useCallback(fe=>{switch(fe){case 1:return"bg-yellow-100 text-yellow-800 border-yellow-200";case 2:return"bg-orange-100 text-orange-800 border-orange-200";case 3:return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},[]),Se=M.useCallback(fe=>new Date(fe).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),[]),Ee=M.useCallback(fe=>new Date(fe).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),[]);M.useCallback(fe=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(fe),[]);const me=i.some(fe=>fe.type==="masuk"&&fe.status==="berhasil"),ie=i.some(fe=>fe.type==="keluar"&&fe.status==="berhasil"),Ve=!me||me&&!ie;return v?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat dashboard..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[d.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between items-center py-3",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:d.jsx(qa,{className:"h-6 w-6 text-white"})}),d.jsxs("div",{className:"overflow-hidden",children:[d.jsx("h1",{className:"text-base md:text-xl font-semibold text-gray-900 truncate",children:(r==null?void 0:r.full_name)||(r==null?void 0:r.name)||"Karyawan"}),d.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-xs text-gray-500",children:[d.jsx("span",{children:ae(r==null?void 0:r.role)}),((be=r==null?void 0:r.positions)==null?void 0:be.name_id)&&d.jsxs("span",{children:[" ",r.positions.name_id]}),(r==null?void 0:r.employee_id)&&d.jsxs("span",{children:[" ID: ",r.employee_id]})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(oB,{userId:t==null?void 0:t.id,userRole:r==null?void 0:r.role}),d.jsx("button",{onClick:()=>N(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:"Edit Profil",children:d.jsx(Jd,{className:"h-5 w-5"})}),d.jsx("button",{onClick:()=>j(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",title:"Riwayat Absensi",children:d.jsx(Zm,{className:"h-5 w-5"})}),k&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-start justify-center p-4 overflow-y-auto",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-5xl mt-24 relative animate-fade-in",children:[d.jsx("button",{onClick:()=>j(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10",title:"Tutup Riwayat",children:d.jsx(zn,{className:"h-6 w-6"})}),d.jsx(FB,{})]})}),d.jsx("button",{onClick:ee,className:"p-2 text-red-600 hover:bg-red-100 rounded-full transition-colors",title:"Keluar",children:d.jsx(HT,{className:"h-5 w-5"})})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex-1 overflow-y-auto",children:[!(r!=null&&r.is_face_registered)&&d.jsx("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200 animate-pulse",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-yellow-800 font-medium",children:"Profil Belum Lengkap"}),d.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Anda perlu menambahkan foto wajah untuk dapat melakukan absensi dengan verifikasi wajah."}),d.jsx("button",{onClick:()=>e("/profile-setup"),className:"mt-2 text-sm text-yellow-800 underline hover:text-yellow-900",children:"Lengkapi Profil Sekarang"})]})]})}),f.length>0&&d.jsx("div",{className:"mb-6 p-4 bg-red-50 rounded-lg border border-red-200 animate-pulse",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Ol,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("p",{className:"text-red-800 font-medium",children:["Peringatan Aktif (",f.length,")"]}),d.jsx("div",{className:"mt-2 space-y-1",children:f.slice(0,2).map(fe=>d.jsxs("div",{className:`text-sm p-2 rounded border ${le(fe.warning_level)}`,children:[d.jsxs("span",{className:"font-medium",children:["SP ",fe.warning_level,":"]})," ",fe.description,fe.sp_number&&d.jsxs("span",{className:"ml-2 text-xs",children:["(",fe.sp_number,")"]})]},fe.id))}),f.length>2&&d.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["+",f.length-2," peringatan lainnya"]})]})]})}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[d.jsx(My,{icon:Fd,title:"Hadir",value:`${p.thisMonth} hari`,color:"blue"}),d.jsx(My,{icon:ln,title:"Tepat Waktu",value:p.onTime,color:"green"}),d.jsx(My,{icon:Qn,title:"Terlambat",value:p.late,color:"orange"}),d.jsx(My,{icon:Cg,title:"Jam Kerja",value:`${p.totalHours} jam`,color:"purple"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(hs,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Absensi Hari Ini"})]})})}),d.jsxs("div",{className:"p-6",children:[(()=>{const fe=i.find(je=>je.type==="masuk"&&je.status==="berhasil"),_e=i.find(je=>je.type==="keluar"&&je.status==="berhasil");return!fe&&!_e?d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(hs,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500",children:"Belum ada absensi hari ini"})]}):d.jsxs("div",{className:"space-y-4",children:[fe&&d.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${$(fe.status)}`,children:[X(fe.status),d.jsx("span",{className:"capitalize",children:"Masuk"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm text-gray-600",children:Se(fe.timestamp)}),fe.is_late&&d.jsxs("span",{className:"ml-2 text-xs text-red-600 bg-red-100 px-2 py-1 rounded",children:["Terlambat ",fe.late_minutes," menit"]})]})]})}),_e&&d.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${$(_e.status)}`,children:[X(_e.status),d.jsx("span",{className:"capitalize",children:"Keluar"})]}),d.jsx("div",{children:d.jsx("span",{className:"text-sm text-gray-600",children:Se(_e.timestamp)})})]})}),d.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:d.jsxs("div",{className:"text-sm",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{children:"Status Absensi:"}),d.jsx("span",{className:me?"text-green-600":"text-gray-600",children:me?" Sudah Masuk":" Belum Masuk"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{}),d.jsx("span",{className:ie?"text-green-600":"text-gray-600",children:ie?" Sudah Keluar":" Belum Keluar"})]})]})})]})})(),Ve&&d.jsx("button",{onClick:K,className:"w-full mt-6 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:me?"Absen Keluar":"Absen Masuk"}),!Ve&&d.jsx("div",{className:"w-full mt-6 bg-gray-100 text-gray-500 py-3 px-4 rounded-lg font-medium text-center",children:"Absensi hari ini sudah selesai"})]})]}),R&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(qq,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Kalender Absensi"})]})}),d.jsxs("div",{className:"p-4",children:[d.jsx(Qie,{onChange:te,value:P,tileContent:ce,tileClassName:he,locale:zD,className:"w-full border-0",prevLabel:d.jsx(Hq,{className:"h-5 w-5"}),nextLabel:d.jsx($q,{className:"h-5 w-5"}),navigationLabel:({date:fe})=>d.jsx("span",{className:"text-lg font-medium",children:cN(fe,"MMMM yyyy",{locale:zD})})}),d.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Keterangan:"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-4 h-4 bg-green-50 border border-green-200 mr-2"}),d.jsx("span",{children:"Absensi Lengkap"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-4 h-4 bg-orange-50 border border-orange-200 mr-2"}),d.jsx("span",{children:"Hanya Masuk"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-4 h-4 bg-red-50 border border-red-200 mr-2"}),d.jsx("span",{children:"Tidak Hadir"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-4 h-4 bg-gray-50 mr-2"}),d.jsx("span",{children:"Akhir Pekan"})]})]})]})]})]})]}),d.jsx("div",{className:"lg:col-span-2",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Zm,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Aktivitas Terbaru"})]})}),d.jsx("div",{className:"p-6",children:s.length>0?d.jsx("div",{className:"space-y-4",children:s.map(fe=>d.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${$(fe.status)}`,children:[X(fe.status),d.jsx("span",{className:"capitalize",children:fe.type==="masuk"?"Masuk":"Keluar"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:Se(fe.timestamp)}),d.jsx("p",{className:"text-sm text-gray-600",children:Ee(fe.timestamp)}),fe.is_late&&d.jsxs("p",{className:"text-xs text-red-600",children:["Terlambat ",fe.late_minutes," menit"]})]})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[d.jsx(Uo,{className:"h-4 w-4 mr-1"}),d.jsx("span",{children:"Kantor"})]})]},fe.id))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Zm,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500",children:"Belum ada aktivitas"})]})})]})})]})]}),x&&d.jsx(Rse,{user:t,profile:r,onClose:()=>{N(!1),B(t.id)}}),g&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-fadeIn",children:d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>b(!1),className:"absolute top-4 right-4 z-10 bg-white rounded-full p-2 shadow-lg hover:bg-gray-50",children:d.jsx(zn,{className:"h-6 w-6 text-gray-600"})}),d.jsx(wae,{user:{id:t.id,avatar_url:r==null?void 0:r.avatar_url},onAttendanceSubmitted:L,todayAttendance:i})]})})})]})},My=({icon:e,title:t,value:n,color:r})=>{const a={blue:{bg:"bg-blue-100",text:"text-blue-600"},green:{bg:"bg-green-100",text:"text-green-600"},orange:{bg:"bg-orange-100",text:"text-orange-600"},purple:{bg:"bg-purple-100",text:"text-purple-600"}},i=a[r]||a.blue;return d.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:`w-10 h-10 ${i.bg} rounded-lg flex items-center justify-center flex-shrink-0`,children:d.jsx(e,{className:`h-5 w-5 ${i.text}`})}),d.jsxs("div",{className:"overflow-hidden",children:[d.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:t}),d.jsx("p",{className:"text-base font-bold text-gray-900 truncate",children:n})]})]})})},Rse=({user:e,profile:t,onClose:n})=>{const[r,a]=M.useState("face");M.useState(null);const[i,o]=M.useState(!1),[s,l]=M.useState(null),[u,c]=M.useState(null),[f,h]=M.useState([]),[p,m]=M.useState({name:(t==null?void 0:t.name)||"",full_name:(t==null?void 0:t.full_name)||"",phone:(t==null?void 0:t.phone)||"",location:(t==null?void 0:t.location)||"",bio:(t==null?void 0:t.bio)||""}),[v,y]=M.useState({bank_id:(t==null?void 0:t.bank_id)||"",bank_account_number:(t==null?void 0:t.bank_account_number)||"",bank_account_name:(t==null?void 0:t.bank_account_name)||(t==null?void 0:t.full_name)||""}),[g,b]=M.useState({newPassword:"",confirmPassword:""});M.useEffect(()=>{(async()=>{try{const{data:S,error:A}=await Pe.from("bank_info").select("*").eq("is_active",!0).order("bank_name");if(A)throw A;h(S||[])}catch(S){console.error("Error fetching banks:",S)}})()},[]);const x=async j=>{j.preventDefault(),o(!0),l(null),c(null);try{const{error:S}=await Pe.from("profiles").update({full_name:p.full_name,phone:p.phone,updated_at:new Date().toISOString()}).eq("id",e.id);if(S)throw S;await Wt.fire({icon:"success",title:"Berhasil",text:"Profil berhasil diperbarui!"}),n()}catch(S){await Wt.fire({icon:"error",title:"Gagal",text:S.message||"Gagal memperbarui profil."})}finally{o(!1)}},N=async j=>{j.preventDefault(),o(!0),l(null),c(null);try{const{error:S}=await Pe.from("profiles").update({bank_id:v.bank_id,bank_account_number:v.bank_account_number,bank_account_name:v.bank_account_name,updated_at:new Date().toISOString()}).eq("id",e.id);if(S)throw S;await Wt.fire({icon:"success",title:"Berhasil",text:"Data bank berhasil diperbarui!"}),n()}catch(S){await Wt.fire({icon:"error",title:"Gagal",text:S.message||"Gagal memperbarui data bank."})}finally{o(!1)}},k=async j=>{if(j.preventDefault(),o(!0),l(null),c(null),g.newPassword!==g.confirmPassword){l("Password dan konfirmasi tidak sama."),o(!1);return}try{const{error:S}=await Pe.auth.updateUser({password:g.newPassword});if(S)throw S;await Wt.fire({icon:"success",title:"Berhasil",text:"Password berhasil diubah!"}),b({newPassword:"",confirmPassword:""})}catch(S){await Wt.fire({icon:"error",title:"Gagal",text:S.message||"Gagal mengubah password."})}finally{o(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Kelola Profil"}),d.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100",children:d.jsx(zn,{className:"h-6 w-6 text-gray-500"})})]}),d.jsxs("div",{className:"flex-grow overflow-y-auto",children:[d.jsxs("div",{className:"flex border-b border-gray-200",children:[d.jsx("button",{className:`px-4 py-2 text-sm font-medium focus:outline-none ${r==="profile"?"border-b-2 border-blue-600 text-blue-700":"text-gray-500"}`,onClick:()=>a("profile"),children:"Data Profil"}),d.jsx("button",{className:`px-4 py-2 text-sm font-medium focus:outline-none ${r==="bank"?"border-b-2 border-blue-600 text-blue-700":"text-gray-500"}`,onClick:()=>a("bank"),children:"Bank"}),d.jsx("button",{className:`px-4 py-2 text-sm font-medium focus:outline-none ${r==="password"?"border-b-2 border-blue-600 text-blue-700":"text-gray-500"}`,onClick:()=>a("password"),children:"Ubah Password"}),d.jsx("button",{className:`px-4 py-2 text-sm font-medium focus:outline-none ${r==="face"?"border-b-2 border-blue-600 text-blue-700":"text-gray-500"}`,onClick:()=>a("face"),children:"Foto Wajah"})]}),r==="profile"&&d.jsxs("form",{className:"p-6 space-y-4 animate-fade-in",onSubmit:x,children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:p.full_name,onChange:j=>m({...p,full_name:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:(t==null?void 0:t.email)||"",disabled:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No. Telepon"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:p.phone,onChange:j=>m({...p,phone:j.target.value})})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Batal"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",disabled:i,children:i?"Menyimpan...":"Simpan"})]})]}),r==="bank"&&d.jsxs("form",{className:"p-6 space-y-4 animate-fade-in",onSubmit:N,children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Bank"}),d.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:v.bank_id,onChange:j=>y({...v,bank_id:j.target.value}),children:[d.jsx("option",{value:"",children:"Pilih Bank"}),f.map(j=>d.jsx("option",{value:j.id,children:j.bank_name},j.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No. Rekening"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:v.bank_account_number,onChange:j=>y({...v,bank_account_number:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Pemilik Rekening"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:v.bank_account_name,onChange:j=>y({...v,bank_account_name:j.target.value})})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Batal"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",disabled:i,children:i?"Menyimpan...":"Simpan"})]})]}),r==="password"&&d.jsxs("form",{className:"p-6 space-y-4 animate-fade-in",onSubmit:k,children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Baru"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:g.newPassword,onChange:j=>b({...g,newPassword:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",value:g.confirmPassword,onChange:j=>b({...g,confirmPassword:j.target.value})})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Batal"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",disabled:i,children:i?"Menyimpan...":"Simpan"})]})]}),r==="face"&&d.jsx("div",{className:"p-6 text-gray-500 text-center",children:"Fitur edit foto wajah belum diimplementasikan di modal ini."})]})]})})};var g2={},zB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(zB);var gj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(gj);var vj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(vj);var v2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],a=n.length;if(a===0)return r;let i=0,o="",s="",l=!1;for(n.charCodeAt(0)===46&&(r.push(""),i++);i<a;){const u=n[i];s?u==="\\"&&i+1<a?(i++,o+=n[i]):u===s?s="":o+=u:l?u==='"'||u==="'"?s=u:u==="]"?(l=!1,r.push(o),o=""):o+=u:u==="["?(l=!0,o&&(r.push(o),o="")):u==="."?o&&(r.push(o),o=""):o+=u,i++}return o&&r.push(o),r}e.toPath=t})(v2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zB,n=gj,r=vj,a=v2;function i(s,l,u){if(s==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const c=s[l];return c===void 0?n.isDeepKey(l)?i(s,a.toPath(l),u):u:c}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const c=s[l];return c===void 0?u:c}default:{if(Array.isArray(l))return o(s,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const c=s[l];return c===void 0?u:c}}}function o(s,l,u){if(l.length===0)return u;let c=s;for(let f=0;f<l.length;f++){if(c==null||t.isUnsafeProperty(l[f]))return u;c=c[l[f]]}return c===void 0?u:c}e.get=i})(g2);var Bse=g2.get;const Gd=ms(Bse);var vi=e=>e===0?0:e>0?1:-1,lo=e=>typeof e=="number"&&e!=+e,dd=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,st=e=>(typeof e=="number"||e instanceof Number)&&!lo(e),tl=e=>st(e)||typeof e=="string",Fse=0,tv=e=>{var t=++Fse;return"".concat(e||"").concat(t)},ps=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!st(t)&&typeof t!="string")return r;var i;if(dd(t)){if(n==null)return r;var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return lo(i)&&(i=r),a&&n!=null&&i>n&&(i=n),i},UB=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},Jf=(e,t)=>st(e)&&st(t)?n=>e+n*(t-e):()=>t;function zse(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Gd(r,t))===n)}var Cr=e=>e===null||typeof e>"u",Qv=e=>Cr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Use=["viewBox","children"],Wse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],UD=["points","pathLength"],dN={svg:Use,polygon:UD,polyline:UD},yj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],qse=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(M.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(a=>{yj.includes(a)&&(r[a]=i=>n[a](n,i))}),r},Hse=(e,t,n)=>r=>(e(t,n,r),null),y2=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(a=>{var i=e[a];yj.includes(a)&&typeof i=="function"&&(r||(r={}),r[a]=Hse(i,t,n))}),r},WD=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",qD=null,fN=null,WB=e=>{if(e===qD&&Array.isArray(fN))return fN;var t=[];return M.Children.forEach(e,n=>{Cr(n)||(MR.isFragment(n)?t=t.concat(WB(n.props.children)):t.push(n))}),fN=t,qD=e,t};function bj(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(a=>WD(a)):r=[WD(t)],WB(e).forEach(a=>{var i=Gd(a,"type.displayName")||Gd(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}var $se=(e,t,n,r)=>{var a,i=(a=r&&(dN==null?void 0:dN[r]))!==null&&a!==void 0?a:[];return t.startsWith("data-")||typeof e!="function"&&(r&&i.includes(t)||Wse.includes(t))||n&&yj.includes(t)},Hn=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(M.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(i=>{var o;$se((o=r)===null||o===void 0?void 0:o[i],i,t,n)&&(a[i]=r[i])}),a},Vse=["children","width","height","viewBox","className","style","title","desc"];function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(null,arguments)}function Gse(e,t){if(e==null)return{};var n,r,a=Kse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Kse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var xj=M.forwardRef((e,t)=>{var{children:n,width:r,height:a,viewBox:i,className:o,style:s,title:l,desc:u}=e,c=Gse(e,Vse),f=i||{width:r,height:a,x:0,y:0},h=cn("recharts-surface",o);return M.createElement("svg",Tk({},Hn(c,!0,"svg"),{className:h,width:r,height:a,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),M.createElement("title",null,l),M.createElement("desc",null,u),n)}),Yse=["children","className"];function Mk(){return Mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mk.apply(null,arguments)}function Xse(e,t){if(e==null)return{};var n,r,a=Jse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Jse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nl=M.forwardRef((e,t)=>{var{children:n,className:r}=e,a=Xse(e,Yse),i=cn("recharts-layer",r);return M.createElement("g",Mk({className:i},Hn(a,!0),{ref:t}),n)}),qB=M.createContext(null),Qse=()=>M.useContext(qB);function On(e){return function(){return e}}const HB=Math.cos,Ax=Math.sin,xs=Math.sqrt,Cx=Math.PI,b2=2*Cx,Lk=Math.PI,Ik=2*Lk,ad=1e-6,Zse=Ik-ad;function $B(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ele(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $B;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class tle{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?$B:ele(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=r-t,u=a-n,c=o-t,f=s-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>ad)if(!(Math.abs(f*l-u*c)>ad)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,m=a-s,v=l*l+u*u,y=p*p+m*m,g=Math.sqrt(v),b=Math.sqrt(h),x=i*Math.tan((Lk-Math.acos((v+h-y)/(2*g*b)))/2),N=x/b,k=x/g;Math.abs(N-1)>ad&&this._append`L${t+N*c},${n+N*f}`,this._append`A${i},${i},0,0,${+(f*p>c*m)},${this._x1=t+k*l},${this._y1=n+k*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),l=r*Math.sin(a),u=t+s,c=n+l,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ad||Math.abs(this._y1-c)>ad)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%Ik+Ik),h>Zse?this._append`A${r},${r},0,1,${f},${t-s},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>ad&&this._append`A${r},${r},0,${+(h>=Lk)},${f},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function wj(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new tle(t)}function Nj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function VB(e){this._context=e}VB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function x2(e){return new VB(e)}function GB(e){return e[0]}function KB(e){return e[1]}function YB(e,t){var n=On(!0),r=null,a=x2,i=null,o=wj(s);e=typeof e=="function"?e:e===void 0?GB:On(e),t=typeof t=="function"?t:t===void 0?KB:On(t);function s(l){var u,c=(l=Nj(l)).length,f,h=!1,p;for(r==null&&(i=a(p=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,l),+t(f,u,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:On(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:On(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:On(!!l),s):n},s.curve=function(l){return arguments.length?(a=l,r!=null&&(i=a(r)),s):a},s.context=function(l){return arguments.length?(l==null?r=i=null:i=a(r=l),s):r},s}function Ly(e,t,n){var r=null,a=On(!0),i=null,o=x2,s=null,l=wj(u);e=typeof e=="function"?e:e===void 0?GB:On(+e),t=typeof t=="function"?t:On(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?KB:On(+n);function u(f){var h,p,m,v=(f=Nj(f)).length,y,g=!1,b,x=new Array(v),N=new Array(v);for(i==null&&(s=o(b=l())),h=0;h<=v;++h){if(!(h<v&&a(y=f[h],h,f))===g)if(g=!g)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=p;--m)s.point(x[m],N[m]);s.lineEnd(),s.areaEnd()}g&&(x[h]=+e(y,h,f),N[h]=+t(y,h,f),s.point(r?+r(y,h,f):x[h],n?+n(y,h,f):N[h]))}if(b)return s=null,b+""||null}function c(){return YB().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:On(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:On(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:On(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:On(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:On(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:On(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:On(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(s=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=s=null:s=o(i=f),u):i},u}class XB{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function nle(e){return new XB(e,!0)}function rle(e){return new XB(e,!1)}const Sj={draw(e,t){const n=xs(t/Cx);e.moveTo(n,0),e.arc(0,0,n,0,b2)}},ale={draw(e,t){const n=xs(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},JB=xs(1/3),ile=JB*2,ole={draw(e,t){const n=xs(t/ile),r=n*JB;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},sle={draw(e,t){const n=xs(t),r=-n/2;e.rect(r,r,n,n)}},lle=.8908130915292852,QB=Ax(Cx/10)/Ax(7*Cx/10),ule=Ax(b2/10)*QB,cle=-HB(b2/10)*QB,dle={draw(e,t){const n=xs(t*lle),r=ule*n,a=cle*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=b2*i/5,s=HB(o),l=Ax(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*a,l*r+s*a)}e.closePath()}},hN=xs(3),fle={draw(e,t){const n=-xs(t/(hN*3));e.moveTo(0,n*2),e.lineTo(-hN*n,-n),e.lineTo(hN*n,-n),e.closePath()}},_o=-.5,jo=xs(3)/2,Rk=1/xs(12),hle=(Rk/2+1)*3,ple={draw(e,t){const n=xs(t/hle),r=n/2,a=n*Rk,i=r,o=n*Rk+n,s=-i,l=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(_o*r-jo*a,jo*r+_o*a),e.lineTo(_o*i-jo*o,jo*i+_o*o),e.lineTo(_o*s-jo*l,jo*s+_o*l),e.lineTo(_o*r+jo*a,_o*a-jo*r),e.lineTo(_o*i+jo*o,_o*o-jo*i),e.lineTo(_o*s+jo*l,_o*l-jo*s),e.closePath()}};function mle(e,t){let n=null,r=wj(a);e=typeof e=="function"?e:On(e||Sj),t=typeof t=="function"?t:On(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:On(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:On(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Ex(){}function Dx(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ZB(e){this._context=e}ZB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gle(e){return new ZB(e)}function eF(e){this._context=e}eF.prototype={areaStart:Ex,areaEnd:Ex,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Dx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vle(e){return new eF(e)}function tF(e){this._context=e}tF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Dx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yle(e){return new tF(e)}function nF(e){this._context=e}nF.prototype={areaStart:Ex,areaEnd:Ex,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ble(e){return new nF(e)}function HD(e){return e<0?-1:1}function $D(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(HD(i)+HD(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function VD(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pN(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,a+s*t,i-s,o-s*n,i,o)}function Px(e){this._context=e}Px.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pN(this,this._t0,VD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pN(this,VD(this,n=$D(this,e,t)),n);break;default:pN(this,this._t0,n=$D(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function rF(e){this._context=new aF(e)}(rF.prototype=Object.create(Px.prototype)).point=function(e,t){Px.prototype.point.call(this,t,e)};function aF(e){this._context=e}aF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function xle(e){return new Px(e)}function wle(e){return new rF(e)}function iF(e){this._context=e}iF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=GD(e),a=GD(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GD(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Nle(e){return new iF(e)}function w2(e,t){this._context=e,this._t=t}w2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Sle(e){return new w2(e,.5)}function kle(e){return new w2(e,0)}function _le(e){return new w2(e,1)}function fp(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,s=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<s;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function Bk(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jle(e,t){return e[t]}function Ale(e){const t=[];return t.key=e,t}function Cle(){var e=On([]),t=Bk,n=fp,r=jle;function a(i){var o=Array.from(e.apply(this,arguments),Ale),s,l=o.length,u=-1,c;for(const f of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+r(f,o[s].key,u,i)]).data=f;for(s=0,c=Nj(t(o));s<l;++s)o[c[s]].index=s;return n(o,c),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:On(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:On(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?Bk:typeof i=="function"?i:On(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??fp,a):n},a}function Ele(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}fp(e,t)}}function Dle(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,s=0;o<a;++o)s+=e[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}fp(e,t)}}function Ple(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var s=0,l=0,u=0;s<o;++s){for(var c=e[t[s]],f=c[r][1]||0,h=c[r-1][1]||0,p=(f-h)/2,m=0;m<s;++m){var v=e[t[m]],y=v[r][1]||0,g=v[r-1][1]||0;p+=y-g}l+=f,u+=p*f}a[r-1][1]+=a[r-1][0]=n,l&&(n-=u/l)}a[r-1][1]+=a[r-1][0]=n,fp(e,t)}}var Ole=["type","size","sizeType"];function Fk(){return Fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fk.apply(null,arguments)}function KD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function YD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KD(Object(n),!0).forEach(function(r){Tle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tle(e,t,n){return(t=Mle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mle(e){var t=Lle(e,"string");return typeof t=="symbol"?t:t+""}function Lle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ile(e,t){if(e==null)return{};var n,r,a=Rle(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Rle(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var oF={symbolCircle:Sj,symbolCross:ale,symbolDiamond:ole,symbolSquare:sle,symbolStar:dle,symbolTriangle:fle,symbolWye:ple},Ble=Math.PI/180,Fle=e=>{var t="symbol".concat(Qv(e));return oF[t]||Sj},zle=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Ble;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ule=(e,t)=>{oF["symbol".concat(Qv(e))]=t},kj=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,a=Ile(e,Ole),i=YD(YD({},a),{},{type:t,size:n,sizeType:r}),o=()=>{var f=Fle(t),h=mle().type(f).size(zle(n,r,t));return h()},{className:s,cx:l,cy:u}=i,c=Hn(i,!0);return l===+l&&u===+u&&n===+n?M.createElement("path",Fk({},c,{className:cn("recharts-symbols",s),transform:"translate(".concat(l,", ").concat(u,")"),d:o()})):null};kj.registerSymbol=Ule;function zk(){return zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zk.apply(null,arguments)}function XD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wle(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XD(Object(n),!0).forEach(function(r){_j(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _j(e,t,n){return(t=qle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qle(e){var t=Hle(e,"string");return typeof t=="symbol"?t:t+""}function Hle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ao=32;class jj extends M.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,a=Ao/2,i=Ao/6,o=Ao/3,s=t.inactive?r:t.color,l=n??t.type;if(l==="none")return null;if(l==="plainline")return M.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Ao,y2:a,className:"recharts-legend-icon"});if(l==="line")return M.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Ao,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(l==="rect")return M.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Ao/8,"h").concat(Ao,"v").concat(Ao*3/4,"h").concat(-Ao,"z"),className:"recharts-legend-icon"});if(M.isValidElement(t.legendIcon)){var u=Wle({},t);return delete u.legendIcon,M.cloneElement(t.legendIcon,u)}return M.createElement(kj,{fill:s,cx:a,cy:a,size:Ao,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:a,inactiveColor:i,iconType:o}=this.props,s={x:0,y:0,width:Ao,height:Ao},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((c,f)=>{var h=c.formatter||a,p=cn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:c.inactive});if(c.type==="none")return null;var m=c.inactive?i:c.color,v=h?h(c.value,c,f):c.value;return M.createElement("li",zk({className:p,style:l,key:"legend-item-".concat(f)},y2(this.props,c,f)),M.createElement(xj,{width:n,height:n,viewBox:s,style:u,"aria-label":"".concat(v," legend icon")},this.renderIcon(c,o)),M.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},v))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return M.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}_j(jj,"displayName","Legend");_j(jj,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var sF={},lF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const a=new Map;for(let i=0;i<n.length;i++){const o=n[i],s=r(o);a.has(s)||a.set(s,o)}return Array.from(a.values())}e.uniqBy=t})(lF);var Aj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Aj);var uF={},N2={},cF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(cF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cF;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(N2);var dF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(dF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2,n=dF;function r(a){return n.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=r})(uF);var fF={},hF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g2;function n(r){return function(a){return t.get(a,r)}}e.property=n})(hF);var pF={},mN={},gN={},Cj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Cj);var Ej={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Ej);var S2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(S2);var JD;function $le(){return JD||(JD=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dj(),n=Cj,r=Ej,a=S2;function i(f,h,p){return typeof p!="function"?t.isMatch(f,h):o(f,h,function m(v,y,g,b,x,N){const k=p(v,y,g,b,x,N);return k!==void 0?!!k:o(v,y,m,N)},new Map)}function o(f,h,p,m){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,p,m);case"function":return Object.keys(h).length>0?o(f,{...h},p,m):a.eq(f,h);default:return n.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function s(f,h,p,m){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,m);if(h instanceof Map)return l(f,h,p,m);if(h instanceof Set)return c(f,h,p,m);const v=Object.keys(h);if(f==null)return v.length===0;if(v.length===0)return!0;if(m&&m.has(h))return m.get(h)===f;m&&m.set(h,f);try{for(let y=0;y<v.length;y++){const g=v[y];if(!r.isPrimitive(f)&&!(g in f)||h[g]===void 0&&f[g]!==void 0||h[g]===null&&f[g]!==null||!p(f[g],h[g],g,f,h,m))return!1}return!0}finally{m&&m.delete(h)}}function l(f,h,p,m){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,y]of h.entries()){const g=f.get(v);if(p(g,y,v,f,h,m)===!1)return!1}return!0}function u(f,h,p,m){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let y=0;y<h.length;y++){const g=h[y];let b=!1;for(let x=0;x<f.length;x++){if(v.has(x))continue;const N=f[x];let k=!1;if(p(N,g,y,f,h,m)&&(k=!0),k){v.add(x),b=!0;break}}if(!b)return!1}return!0}function c(f,h,p,m){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,m):!1}e.isMatchWith=i,e.isSetMatch=c}(gN)),gN}var QD;function Dj(){return QD||(QD=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$le();function n(r,a){return t.isMatchWith(r,a,()=>{})}e.isMatch=n}(mN)),mN}var mF={},Pj={},Oj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Oj);var k2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(k2);var _2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",s="[object Date]",l="[object Map]",u="[object Set]",c="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",m="[object Error]",v="[object DataView]",y="[object Uint8Array]",g="[object Uint8ClampedArray]",b="[object Uint16Array]",x="[object Uint32Array]",N="[object BigUint64Array]",k="[object Int8Array]",j="[object Int16Array]",S="[object Int32Array]",A="[object BigInt64Array]",P="[object Float32Array]",T="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=c,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=N,e.booleanTag=a,e.dataViewTag=v,e.dateTag=s,e.errorTag=m,e.float32ArrayTag=P,e.float64ArrayTag=T,e.functionTag=f,e.int16ArrayTag=j,e.int32ArrayTag=S,e.int8ArrayTag=k,e.mapTag=l,e.numberTag=r,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=x,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=g})(_2);var gF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(gF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oj,n=k2,r=_2,a=Ej,i=gF;function o(c,f){return s(c,void 0,c,new Map,f)}function s(c,f,h,p=new Map,m=void 0){const v=m==null?void 0:m(c,f,h,p);if(v!=null)return v;if(a.isPrimitive(c))return c;if(p.has(c))return p.get(c);if(Array.isArray(c)){const y=new Array(c.length);p.set(c,y);for(let g=0;g<c.length;g++)y[g]=s(c[g],g,h,p,m);return Object.hasOwn(c,"index")&&(y.index=c.index),Object.hasOwn(c,"input")&&(y.input=c.input),y}if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp){const y=new RegExp(c.source,c.flags);return y.lastIndex=c.lastIndex,y}if(c instanceof Map){const y=new Map;p.set(c,y);for(const[g,b]of c)y.set(g,s(b,g,h,p,m));return y}if(c instanceof Set){const y=new Set;p.set(c,y);for(const g of c)y.add(s(g,void 0,h,p,m));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(c))return c.subarray();if(i.isTypedArray(c)){const y=new(Object.getPrototypeOf(c)).constructor(c.length);p.set(c,y);for(let g=0;g<c.length;g++)y[g]=s(c[g],g,h,p,m);return y}if(c instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&c instanceof SharedArrayBuffer)return c.slice(0);if(c instanceof DataView){const y=new DataView(c.buffer.slice(0),c.byteOffset,c.byteLength);return p.set(c,y),l(y,c,h,p,m),y}if(typeof File<"u"&&c instanceof File){const y=new File([c],c.name,{type:c.type});return p.set(c,y),l(y,c,h,p,m),y}if(c instanceof Blob){const y=new Blob([c],{type:c.type});return p.set(c,y),l(y,c,h,p,m),y}if(c instanceof Error){const y=new c.constructor;return p.set(c,y),y.message=c.message,y.name=c.name,y.stack=c.stack,y.cause=c.cause,l(y,c,h,p,m),y}if(typeof c=="object"&&u(c)){const y=Object.create(Object.getPrototypeOf(c));return p.set(c,y),l(y,c,h,p,m),y}return c}function l(c,f,h=c,p,m){const v=[...Object.keys(f),...t.getSymbols(f)];for(let y=0;y<v.length;y++){const g=v[y],b=Object.getOwnPropertyDescriptor(c,g);(b==null||b.writable)&&(c[g]=s(f[g],g,h,p,m))}}function u(c){switch(n.getTag(c)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=s,e.copyProperties=l})(Pj);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pj;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(mF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dj(),n=mF;function r(a){return a=n.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=r})(pF);var vF={},yF={},bF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pj,n=_2;function r(a,i){return t.cloneDeepWith(a,(o,s,l,u)=>{const c=i==null?void 0:i(o,s,l,u);if(c!=null)return c;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case n.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=r})(bF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bF;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(yF);var xF={},Tj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,a=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<a;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Tj);var wF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k2;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(wF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gj,n=Tj,r=wF,a=v2;function i(o,s){let l;if(Array.isArray(s)?l=s:typeof s=="string"&&t.isDeepKey(s)&&(o==null?void 0:o[s])==null?l=a.toPath(s):l=[s],l.length===0)return!1;let u=o;for(let c=0;c<l.length;c++){const f=l[c];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(xF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dj(),n=vj,r=yF,a=g2,i=xF;function o(s,l){switch(typeof s){case"object":{Object.is(s==null?void 0:s.valueOf(),-0)&&(s="-0");break}case"number":{s=n.toKey(s);break}}return l=r.cloneDeep(l),function(u){const c=a.get(u,s);return c===void 0?i.has(u,s):l===void 0?c===void 0:t.isMatch(c,l)}}e.matchesProperty=o})(vF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aj,n=hF,r=pF,a=vF;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=i})(fF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lF,n=Aj,r=uF,a=fF;function i(o,s=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(s)):[]}e.uniqBy=i})(sF);var Vle=sF.uniqBy;const ZD=ms(Vle);function NF(e,t,n){return t===!0?ZD(e,n):typeof t=="function"?ZD(e,t):e}var SF={exports:{}},kF={},_F={exports:{}},jF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp=M;function Gle(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kle=typeof Object.is=="function"?Object.is:Gle,Yle=hp.useState,Xle=hp.useEffect,Jle=hp.useLayoutEffect,Qle=hp.useDebugValue;function Zle(e,t){var n=t(),r=Yle({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return Jle(function(){a.value=n,a.getSnapshot=t,vN(a)&&i({inst:a})},[e,n,t]),Xle(function(){return vN(a)&&i({inst:a}),e(function(){vN(a)&&i({inst:a})})},[e]),Qle(n),n}function vN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kle(e,n)}catch{return!0}}function eue(e,t){return t()}var tue=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eue:Zle;jF.useSyncExternalStore=hp.useSyncExternalStore!==void 0?hp.useSyncExternalStore:tue;_F.exports=jF;var nue=_F.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2=M,rue=nue;function aue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iue=typeof Object.is=="function"?Object.is:aue,oue=rue.useSyncExternalStore,sue=j2.useRef,lue=j2.useEffect,uue=j2.useMemo,cue=j2.useDebugValue;kF.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var i=sue(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=uue(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),a!==void 0&&o.hasValue){var m=o.value;if(a(m,p))return f=m}return f=p}if(m=f,iue(c,p))return m;var v=r(p);return a!==void 0&&a(m,v)?(c=p,m):(c=p,f=v)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,a]);var s=oue(e,i[0],i[1]);return lue(function(){o.hasValue=!0,o.value=s},[s]),cue(s),s};SF.exports=kF;var due=SF.exports,Mj=M.createContext(null),fue=e=>e,br=()=>{var e=M.useContext(Mj);return e?e.store.dispatch:fue},mb=()=>{},hue=()=>mb,pue=(e,t)=>e===t;function yt(e){var t=M.useContext(Mj);return due.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:hue,t?t.store.getState:mb,t?t.store.getState:mb,t?e:mb,pue)}function mue(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function gue(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vue(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var eP=e=>Array.isArray(e)?e:[e];function yue(e){const t=Array.isArray(e[0])?e[0]:e;return vue(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function bue(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}var xue=class{constructor(e){this.value=e}deref(){return this.value}},wue=typeof WeakRef<"u"?WeakRef:xue,Nue=0,tP=1;function Iy(){return{s:Nue,v:void 0,o:null,p:null}}function AF(e,t={}){let n=Iy();const{resultEqualityCheck:r}=t;let a,i=0;function o(){var f;let s=n;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let v=s.o;v===null&&(s.o=v=new WeakMap);const y=v.get(m);y===void 0?(s=Iy(),v.set(m,s)):s=y}else{let v=s.p;v===null&&(s.p=v=new Map);const y=v.get(m);y===void 0?(s=Iy(),v.set(m,s)):s=y}}const u=s;let c;if(s.s===tP)c=s.v;else if(c=e.apply(null,arguments),i++,r){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&r(h,c)&&(c=h,i!==0&&i--),a=typeof c=="object"&&c!==null||typeof c=="function"?new wue(c):c}return u.s=tP,u.v=c,c}return o.clearCache=()=>{n=Iy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Sue(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...a)=>{let i=0,o=0,s,l={},u=a.pop();typeof u=="object"&&(l=u,u=a.pop()),mue(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:p=AF,argsMemoizeOptions:m=[],devModeChecks:v={}}=c,y=eP(h),g=eP(m),b=yue(a),x=f(function(){return i++,u.apply(null,arguments)},...y),N=p(function(){o++;const j=bue(b,arguments);return s=x.apply(null,j),s},...g);return Object.assign(N,{resultFunc:u,memoizedResultFunc:x,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var Be=Sue(AF),kue=Object.assign((e,t=Be)=>{gue(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(i=>e[i]);return t(r,(...i)=>i.reduce((o,s,l)=>(o[n[l]]=s,o),{}))},{withTypes:()=>kue}),CF={},EF={},DF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,a,i)=>{if(r!==a){const o=t(r),s=t(a);if(o===s&&o===0){if(r<a)return i==="desc"?1:-1;if(r>a)return i==="desc"?-1:1}return i==="desc"?s-o:o-s}return 0};e.compareValues=n})(DF);var PF={},Lj={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Lj);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lj,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(PF);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DF,n=PF,r=v2;function a(i,o,s,l){if(i==null)return[];s=l?void 0:s,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(p=>String(p));const u=(p,m)=>{let v=p;for(let y=0;y<m.length&&v!=null;++y)v=v[m[y]];return v},c=(p,m)=>m==null||p==null?m:typeof p=="object"&&"key"in p?Object.hasOwn(m,p.key)?m[p.key]:u(m,p.path):typeof p=="function"?p(m):Array.isArray(p)?u(m,p):typeof m=="object"?m[p]:m,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||n.isKey(p)?p:{key:p,path:r.toPath(p)}));return i.map(p=>({original:p,criteria:f.map(m=>c(m,p))})).slice().sort((p,m)=>{for(let v=0;v<f.length;v++){const y=t.compareValues(p.criteria[v],m.criteria[v],s[v]);if(y!==0)return y}return 0}).map(p=>p.original)}e.orderBy=a})(EF);var OF={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const a=[],i=Math.floor(r),o=(s,l)=>{for(let u=0;u<s.length;u++){const c=s[u];Array.isArray(c)&&l<i?o(c,l+1):a.push(c)}};return o(n,0),a}e.flatten=t})(OF);var Ij={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tj,n=N2,r=Cj,a=S2;function i(o,s,l){return r.isObject(l)&&(typeof s=="number"&&n.isArrayLike(l)&&t.isIndex(s)&&s<l.length||typeof s=="string"&&s in l)?a.eq(l[s],o):!1}e.isIterateeCall=i})(Ij);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EF,n=OF,r=Ij;function a(i,...o){const s=o.length;return s>1&&r.isIterateeCall(i,o[0],o[1])?o=[]:s>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,n.flatten(o),["asc"])}e.sortBy=a})(CF);var _ue=CF.sortBy;const A2=ms(_ue);var TF=e=>e.legend.settings,jue=e=>e.legend.size,Aue=e=>e.legend.payload,Cue=Be([Aue,TF],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?A2(r,n):r});function Eue(){return yt(Cue)}var Ry=1;function MF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=M.useState({height:0,left:0,top:0,width:0}),r=M.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Ry||Math.abs(o.left-t.left)>Ry||Math.abs(o.top-t.top)>Ry||Math.abs(o.width-t.width)>Ry)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function ha(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Due=typeof Symbol=="function"&&Symbol.observable||"@@observable",nP=Due,yN=()=>Math.random().toString(36).substring(7).split("").join("."),Pue={INIT:`@@redux/INIT${yN()}`,REPLACE:`@@redux/REPLACE${yN()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yN()}`},Ox=Pue;function Rj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function LF(e,t,n){if(typeof e!="function")throw new Error(ha(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ha(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ha(1));return n(LF)(e,t)}let r=e,a=t,i=new Map,o=i,s=0,l=!1;function u(){o===i&&(o=new Map,i.forEach((y,g)=>{o.set(g,y)}))}function c(){if(l)throw new Error(ha(3));return a}function f(y){if(typeof y!="function")throw new Error(ha(4));if(l)throw new Error(ha(5));let g=!0;u();const b=s++;return o.set(b,y),function(){if(g){if(l)throw new Error(ha(6));g=!1,u(),o.delete(b),i=null}}}function h(y){if(!Rj(y))throw new Error(ha(7));if(typeof y.type>"u")throw new Error(ha(8));if(typeof y.type!="string")throw new Error(ha(17));if(l)throw new Error(ha(9));try{l=!0,a=r(a,y)}finally{l=!1}return(i=o).forEach(b=>{b()}),y}function p(y){if(typeof y!="function")throw new Error(ha(10));r=y,h({type:Ox.REPLACE})}function m(){const y=f;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(ha(11));function b(){const N=g;N.next&&N.next(c())}return b(),{unsubscribe:y(b)}},[nP](){return this}}}return h({type:Ox.INIT}),{dispatch:h,subscribe:f,getState:c,replaceReducer:p,[nP]:m}}function Oue(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Ox.INIT})>"u")throw new Error(ha(12));if(typeof n(void 0,{type:Ox.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ha(13))})}function IF(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{Oue(n)}catch(i){a=i}return function(o={},s){if(a)throw a;let l=!1;const u={};for(let c=0;c<r.length;c++){const f=r[c],h=n[f],p=o[f],m=h(p,s);if(typeof m>"u")throw s&&s.type,new Error(ha(14));u[f]=m,l=l||m!==p}return l=l||r.length!==Object.keys(o).length,l?u:o}}function Tx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Tue(...e){return t=>(n,r)=>{const a=t(n,r);let i=()=>{throw new Error(ha(15))};const o={getState:a.getState,dispatch:(l,...u)=>i(l,...u)},s=e.map(l=>l(o));return i=Tx(...s)(a.dispatch),{...a,dispatch:i}}}function RF(e){return Rj(e)&&"type"in e&&typeof e.type=="string"}var BF=Symbol.for("immer-nothing"),rP=Symbol.for("immer-draftable"),uo=Symbol.for("immer-state");function ss(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pp=Object.getPrototypeOf;function Kd(e){return!!e&&!!e[uo]}function Yl(e){var t;return e?FF(e)||Array.isArray(e)||!!e[rP]||!!((t=e.constructor)!=null&&t[rP])||E2(e)||D2(e):!1}var Mue=Object.prototype.constructor.toString();function FF(e){if(!e||typeof e!="object")return!1;const t=pp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Mue}function Mx(e,t){C2(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function C2(e){const t=e[uo];return t?t.type_:Array.isArray(e)?1:E2(e)?2:D2(e)?3:0}function Uk(e,t){return C2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zF(e,t,n){const r=C2(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Lue(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function E2(e){return e instanceof Map}function D2(e){return e instanceof Set}function id(e){return e.copy_||e.base_}function Wk(e,t){if(E2(e))return new Map(e);if(D2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=FF(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[uo];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(pp(e),r)}else{const r=pp(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function Bj(e,t=!1){return P2(e)||Kd(e)||!Yl(e)||(C2(e)>1&&(e.set=e.add=e.clear=e.delete=Iue),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Bj(r,!0))),e}function Iue(){ss(2)}function P2(e){return Object.isFrozen(e)}var Rue={};function Yd(e){const t=Rue[e];return t||ss(0,e),t}var nv;function UF(){return nv}function Bue(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function aP(e,t){t&&(Yd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qk(e){Hk(e),e.drafts_.forEach(Fue),e.drafts_=null}function Hk(e){e===nv&&(nv=e.parent_)}function iP(e){return nv=Bue(nv,e)}function Fue(e){const t=e[uo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function oP(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[uo].modified_&&(qk(t),ss(4)),Yl(e)&&(e=Lx(t,e),t.parent_||Ix(t,e)),t.patches_&&Yd("Patches").generateReplacementPatches_(n[uo].base_,e,t.patches_,t.inversePatches_)):e=Lx(t,n,[]),qk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==BF?e:void 0}function Lx(e,t,n){if(P2(t))return t;const r=t[uo];if(!r)return Mx(t,(a,i)=>sP(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Ix(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),Mx(i,(s,l)=>sP(e,r,a,s,l,n,o)),Ix(e,a,!1),n&&e.patches_&&Yd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function sP(e,t,n,r,a,i,o){if(Kd(a)){const s=i&&t&&t.type_!==3&&!Uk(t.assigned_,r)?i.concat(r):void 0,l=Lx(e,a,s);if(zF(n,r,l),Kd(l))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Yl(a)&&!P2(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Lx(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Ix(e,a)}}function Ix(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Bj(t,n)}function zue(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:UF(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Fj;n&&(a=[r],i=rv);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var Fj={get(e,t){if(t===uo)return e;const n=id(e);if(!Uk(n,t))return Uue(e,n,t);const r=n[t];return e.finalized_||!Yl(r)?r:r===bN(e.base_,t)?(xN(e),e.copy_[t]=Vk(r,e)):r},has(e,t){return t in id(e)},ownKeys(e){return Reflect.ownKeys(id(e))},set(e,t,n){const r=WF(id(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=bN(id(e),t),i=a==null?void 0:a[uo];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Lue(n,a)&&(n!==void 0||Uk(e.base_,t)))return!0;xN(e),$k(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return bN(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,xN(e),$k(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=id(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ss(11)},getPrototypeOf(e){return pp(e.base_)},setPrototypeOf(){ss(12)}},rv={};Mx(Fj,(e,t)=>{rv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});rv.deleteProperty=function(e,t){return rv.set.call(this,e,t,void 0)};rv.set=function(e,t,n){return Fj.set.call(this,e[0],t,n,e[0])};function bN(e,t){const n=e[uo];return(n?id(n):e)[t]}function Uue(e,t,n){var a;const r=WF(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function WF(e,t){if(!(t in e))return;let n=pp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=pp(n)}}function $k(e){e.modified_||(e.modified_=!0,e.parent_&&$k(e.parent_))}function xN(e){e.copy_||(e.copy_=Wk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Wue=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(l=i,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&ss(6),r!==void 0&&typeof r!="function"&&ss(7);let a;if(Yl(t)){const i=iP(this),o=Vk(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?qk(i):Hk(i)}return aP(i,r),oP(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===BF&&(a=void 0),this.autoFreeze_&&Bj(a,!0),r){const i=[],o=[];Yd("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else ss(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,l=>t(l,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Yl(e)||ss(8),Kd(e)&&(e=ql(e));const t=iP(this),n=Vk(e,void 0);return n[uo].isManual_=!0,Hk(t),n}finishDraft(e,t){const n=e&&e[uo];(!n||!n.isManual_)&&ss(9);const{scope_:r}=n;return aP(r,t),oP(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Yd("Patches").applyPatches_;return Kd(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Vk(e,t){const n=E2(e)?Yd("MapSet").proxyMap_(e,t):D2(e)?Yd("MapSet").proxySet_(e,t):zue(e,t);return(t?t.scope_:UF()).drafts_.push(n),n}function ql(e){return Kd(e)||ss(10,e),qF(e)}function qF(e){if(!Yl(e)||P2(e))return e;const t=e[uo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Wk(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Wk(e,!0);return Mx(n,(r,a)=>{zF(n,r,qF(a))}),t&&(t.finalized_=!1),n}var co=new Wue,HF=co.produce;co.produceWithPatches.bind(co);co.setAutoFreeze.bind(co);co.setUseStrictShallowCopy.bind(co);co.applyPatches.bind(co);co.createDraft.bind(co);co.finishDraft.bind(co);function $F(e){return({dispatch:n,getState:r})=>a=>i=>typeof i=="function"?i(n,r,e):a(i)}var que=$F(),Hue=$F,$ue=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tx:Tx.apply(null,arguments)};function $o(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(ao(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>RF(r)&&r.type===e,n}var VF=class Xm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Xm.prototype)}static get[Symbol.species](){return Xm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Xm(...t[0].concat(this)):new Xm(...t.concat(this))}};function lP(e){return Yl(e)?HF(e,()=>{}):e}function By(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Vue(e){return typeof e=="boolean"}var Gue=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new VF;return n&&(Vue(n)?o.push(que):o.push(Hue(n.extraArgument))),o},Kue="RTK_autoBatch",uP=e=>t=>{setTimeout(t,e)},Yue=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,i=!1,o=!1;const s=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uP(10):e.type==="callback"?e.queueNotification:uP(e.timeout),u=()=>{o=!1,i&&(i=!1,s.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>a&&c(),h=r.subscribe(f);return s.add(c),()=>{h(),s.delete(c)}},dispatch(c){var f;try{return a=!((f=c==null?void 0:c.meta)!=null&&f[Kue]),i=!a,i&&(o||(o=!0,l(u))),r.dispatch(c)}finally{a=!0}}})},Xue=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new VF(e);return r&&a.push(Yue(typeof r=="object"?r:void 0)),a};function Jue(e){const t=Gue(),{reducer:n=void 0,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Rj(n))l=IF(n);else throw new Error(ao(1));let u;typeof r=="function"?u=r(t):u=t();let c=Tx;a&&(c=$ue({trace:!1,...typeof a=="object"&&a}));const f=Tue(...u),h=Xue(f);let p=typeof s=="function"?s(h):h();const m=c(...p);return LF(l,o,m)}function GF(e){const t={},n=[];let r;const a={addCase(i,o){const s=typeof i=="string"?i:i.type;if(!s)throw new Error(ao(28));if(s in t)throw new Error(ao(29));return t[s]=o,a},addMatcher(i,o){return n.push({matcher:i,reducer:o}),a},addDefaultCase(i){return r=i,a}};return e(a),[t,n,r]}function Que(e){return typeof e=="function"}function Zue(e,t){let[n,r,a]=GF(t),i;if(Que(e))i=()=>lP(e());else{const s=lP(e);i=()=>s}function o(s=i(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[a]),u.reduce((c,f)=>{if(f)if(Kd(c)){const p=f(c,l);return p===void 0?c:p}else{if(Yl(c))return HF(c,h=>f(h,l));{const h=f(c,l);if(h===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return c},s)}return o.getInitialState=i,o}var ece="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tce=(e=21)=>{let t="",n=e;for(;n--;)t+=ece[Math.random()*64|0];return t},nce=Symbol.for("rtk-slice-createasyncthunk");function rce(e,t){return`${e}/${t}`}function ace({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[nce];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(ao(11));typeof process<"u";const s=(typeof a.reducers=="function"?a.reducers(oce()):a.reducers)||{},l=Object.keys(s),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(N,k){const j=typeof N=="string"?N:N.type;if(!j)throw new Error(ao(12));if(j in u.sliceCaseReducersByType)throw new Error(ao(13));return u.sliceCaseReducersByType[j]=k,c},addMatcher(N,k){return u.sliceMatchers.push({matcher:N,reducer:k}),c},exposeAction(N,k){return u.actionCreators[N]=k,c},exposeCaseReducer(N,k){return u.sliceCaseReducersByName[N]=k,c}};l.forEach(N=>{const k=s[N],j={reducerName:N,type:rce(i,N),createNotation:typeof a.reducers=="function"};lce(k)?cce(j,k,c,t):sce(j,k,c)});function f(){const[N={},k=[],j=void 0]=typeof a.extraReducers=="function"?GF(a.extraReducers):[a.extraReducers],S={...N,...u.sliceCaseReducersByType};return Zue(a.initialState,A=>{for(let P in S)A.addCase(P,S[P]);for(let P of u.sliceMatchers)A.addMatcher(P.matcher,P.reducer);for(let P of k)A.addMatcher(P.matcher,P.reducer);j&&A.addDefaultCase(j)})}const h=N=>N,p=new Map,m=new WeakMap;let v;function y(N,k){return v||(v=f()),v(N,k)}function g(){return v||(v=f()),v.getInitialState()}function b(N,k=!1){function j(A){let P=A[N];return typeof P>"u"&&k&&(P=By(m,j,g)),P}function S(A=h){const P=By(p,k,()=>new WeakMap);return By(P,A,()=>{const T={};for(const[E,D]of Object.entries(a.selectors??{}))T[E]=ice(D,A,()=>By(m,A,g),k);return T})}return{reducerPath:N,getSelectors:S,get selectors(){return S(j)},selectSlice:j}}const x={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...b(o),injectInto(N,{reducerPath:k,...j}={}){const S=k??o;return N.inject({reducerPath:S,reducer:y},j),{...x,...b(S,!0)}}};return x}}function ice(e,t,n,r){function a(i,...o){let s=t(i);return typeof s>"u"&&r&&(s=n()),e(s,...o)}return a.unwrapped=e,a}var Ko=ace();function oce(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function sce({type:e,reducerName:t,createNotation:n},r,a){let i,o;if("reducer"in r){if(n&&!uce(r))throw new Error(ao(17));i=r.reducer,o=r.prepare}else i=r;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?$o(e,o):$o(e))}function lce(e){return e._reducerDefinitionType==="asyncThunk"}function uce(e){return e._reducerDefinitionType==="reducerWithPrepare"}function cce({type:e,reducerName:t},n,r,a){if(!a)throw new Error(ao(18));const{payloadCreator:i,fulfilled:o,pending:s,rejected:l,settled:u,options:c}=n,f=a(e,i,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),s&&r.addCase(f.pending,s),l&&r.addCase(f.rejected,l),u&&r.addMatcher(f.settled,u),r.exposeCaseReducer(t,{fulfilled:o||Fy,pending:s||Fy,rejected:l||Fy,settled:u||Fy})}function Fy(){}var dce="task",KF="listener",YF="completed",zj="cancelled",fce=`task-${zj}`,hce=`task-${YF}`,Gk=`${KF}-${zj}`,pce=`${KF}-${YF}`,O2=class{constructor(e){Gw(this,"name","TaskAbortError");Gw(this,"message");this.code=e,this.message=`${dce} ${zj} (reason: ${e})`}},Uj=(e,t)=>{if(typeof e!="function")throw new TypeError(ao(32))},Rx=()=>{},XF=(e,t=Rx)=>(e.catch(t),e),JF=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Cd=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ed=e=>{if(e.aborted){const{reason:t}=e;throw new O2(t)}};function QF(e,t){let n=Rx;return new Promise((r,a)=>{const i=()=>a(new O2(e.reason));if(e.aborted){i();return}n=JF(e,i),t.finally(()=>n()).then(r,a)}).finally(()=>{n=Rx})}var mce=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof O2?"cancelled":"rejected",error:n}}finally{t==null||t()}},Bx=e=>t=>XF(QF(e,t).then(n=>(Ed(e),n))),ZF=e=>{const t=Bx(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:$h}=Object,cP={},T2="listenerMiddleware",gce=(e,t)=>{const n=r=>JF(e,()=>Cd(r,e.reason));return(r,a)=>{Uj(r);const i=new AbortController;n(i);const o=mce(async()=>{Ed(e),Ed(i.signal);const s=await r({pause:Bx(i.signal),delay:ZF(i.signal),signal:i.signal});return Ed(i.signal),s},()=>Cd(i,hce));return a!=null&&a.autoJoin&&t.push(o.catch(Rx)),{result:Bx(e)(o),cancel(){Cd(i,fce)}}}},vce=(e,t)=>{const n=async(r,a)=>{Ed(t);let i=()=>{};const s=[new Promise((l,u)=>{let c=e({predicate:r,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});i=()=>{c(),u()}})];a!=null&&s.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await QF(t,Promise.race(s));return Ed(t),l}finally{i()}};return(r,a)=>XF(n(r,a))},e9=e=>{let{type:t,actionCreator:n,matcher:r,predicate:a,effect:i}=e;if(t)a=$o(t).match;else if(n)t=n.type,a=n.match;else if(r)a=r;else if(!a)throw new Error(ao(21));return Uj(i),{predicate:a,type:t,effect:i}},t9=$h(e=>{const{type:t,predicate:n,effect:r}=e9(e);return{id:tce(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ao(22))}}},{withTypes:()=>t9}),dP=(e,t)=>{const{type:n,effect:r,predicate:a}=e9(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===a)&&i.effect===r)},Kk=e=>{e.pending.forEach(t=>{Cd(t,Gk)})},yce=e=>()=>{e.forEach(Kk),e.clear()},fP=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},n9=$h($o(`${T2}/add`),{withTypes:()=>n9}),bce=$o(`${T2}/removeAll`),r9=$h($o(`${T2}/remove`),{withTypes:()=>r9}),xce=(...e)=>{console.error(`${T2}/error`,...e)},Zv=(e={})=>{const t=new Map,{extra:n,onError:r=xce}=e;Uj(r);const a=c=>(c.unsubscribe=()=>t.delete(c.id),t.set(c.id,c),f=>{c.unsubscribe(),f!=null&&f.cancelActive&&Kk(c)}),i=c=>{const f=dP(t,c)??t9(c);return a(f)};$h(i,{withTypes:()=>i});const o=c=>{const f=dP(t,c);return f&&(f.unsubscribe(),c.cancelActive&&Kk(f)),!!f};$h(o,{withTypes:()=>o});const s=async(c,f,h,p)=>{const m=new AbortController,v=vce(i,m.signal),y=[];try{c.pending.add(m),await Promise.resolve(c.effect(f,$h({},h,{getOriginalState:p,condition:(g,b)=>v(g,b).then(Boolean),take:v,delay:ZF(m.signal),pause:Bx(m.signal),extra:n,signal:m.signal,fork:gce(m.signal,y),unsubscribe:c.unsubscribe,subscribe:()=>{t.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((g,b,x)=>{g!==m&&(Cd(g,Gk),x.delete(g))})},cancel:()=>{Cd(m,Gk),c.pending.delete(m)},throwIfCancelled:()=>{Ed(m.signal)}})))}catch(g){g instanceof O2||fP(r,g,{raisedBy:"effect"})}finally{await Promise.all(y),Cd(m,pce),c.pending.delete(m)}},l=yce(t);return{middleware:c=>f=>h=>{if(!RF(h))return f(h);if(n9.match(h))return i(h.payload);if(bce.match(h)){l();return}if(r9.match(h))return o(h.payload);let p=c.getState();const m=()=>{if(p===cP)throw new Error(ao(23));return p};let v;try{if(v=f(h),t.size>0){const y=c.getState(),g=Array.from(t.values());for(const b of g){let x=!1;try{x=b.predicate(h,y,p)}catch(N){x=!1,fP(r,N,{raisedBy:"predicate"})}x&&s(b,h,c,m)}}}finally{p=cP}return v},startListening:i,stopListening:o,clearListeners:l}};function ao(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wce={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},a9=Ko({name:"chartLayout",initialState:wce,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Nce,setLayout:Sce,setChartSize:kce,setScale:_ce}=a9.actions,jce=a9.reducer;function hP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(n),!0).forEach(function(r){Ace(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ace(e,t,n){return(t=Cce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cce(e){var t=Ece(e,"string");return typeof t=="symbol"?t:t+""}function Ece(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fx=Math.PI/180,Dce=e=>e*180/Math.PI,Na=(e,t,n,r)=>({x:e+Math.cos(-Fx*r)*n,y:t+Math.sin(-Fx*r)*n}),Pce=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Oce=(e,t)=>{var{x:n,y:r}=e,{x:a,y:i}=t;return Math.sqrt((n-a)**2+(r-i)**2)},Tce=(e,t)=>{var{x:n,y:r}=e,{cx:a,cy:i}=t,o=Oce({x:n,y:r},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(n-a)/o,l=Math.acos(s);return r>i&&(l=2*Math.PI-l),{radius:o,angle:Dce(l),angleInRadian:l}},Mce=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:t-i*360,endAngle:n-i*360}},Lce=(e,t)=>{var{startAngle:n,endAngle:r}=t,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return e+o*360},Ice=(e,t)=>{var{x:n,y:r}=e,{radius:a,angle:i}=Tce({x:n,y:r},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s||a===0)return null;var{startAngle:l,endAngle:u}=Mce(t),c=i,f;if(l<=u){for(;c>u;)c-=360;for(;c<l;)c+=360;f=c>=l&&c<=u}else{for(;c>l;)c-=360;for(;c<u;)c+=360;f=c>=u&&c<=l}return f?pP(pP({},t),{},{radius:a,angle:Lce(c,t)}):null};function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Mo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(r){Rce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rce(e,t,n){return(t=Bce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bce(e){var t=Fce(e,"string");return typeof t=="symbol"?t:t+""}function Fce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function io(e,t,n){return Cr(e)||Cr(t)?n:tl(t)?Gd(e,t,n):typeof t=="function"?t(e):n}var zce=(e,t,n,r,a)=>{var i,o=-1,s=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(s<=1||e==null)return 0;if(r==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<s;l++){var u=l>0?n[l-1].coordinate:n[s-1].coordinate,c=n[l].coordinate,f=l>=s-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(vi(c-u)!==vi(f-c)){var p=[];if(vi(f-c)===vi(a[1]-a[0])){h=f;var m=c+a[1]-a[0];p[0]=Math.min(m,(m+u)/2),p[1]=Math.max(m,(m+u)/2)}else{h=u;var v=f+a[1]-a[0];p[0]=Math.min(c,(v+c)/2),p[1]=Math.max(c,(v+c)/2)}var y=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){({index:o}=n[l]);break}}else{var g=Math.min(u,f),b=Math.max(u,f);if(e>(g+c)/2&&e<=(b+c)/2){({index:o}=n[l]);break}}}else if(t){for(var x=0;x<s;x++)if(x===0&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x>0&&x<s-1&&e>(t[x].coordinate+t[x-1].coordinate)/2&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x===s-1&&e>(t[x].coordinate+t[x-1].coordinate)/2){({index:o}=t[x]);break}}return o},Uce=(e,t,n)=>{if(t&&n){var{width:r,height:a}=n,{align:i,verticalAlign:o,layout:s}=t;if((s==="vertical"||s==="horizontal"&&o==="middle")&&i!=="center"&&st(e[i]))return Mo(Mo({},e),{},{[i]:e[i]+(r||0)});if((s==="horizontal"||s==="vertical"&&i==="center")&&o!=="middle"&&st(e[o]))return Mo(Mo({},e),{},{[o]:e[o]+(a||0)})}return e},ff=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",i9=(e,t,n,r)=>{if(r)return e.map(s=>s.coordinate);var a,i,o=e.map(s=>(s.coordinate===t&&(a=!0),s.coordinate===n&&(i=!0),s.coordinate));return a||o.push(t),i||o.push(n),o},o9=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:a,range:i,scale:o,realScaleType:s,isCategorical:l,categoricalDomain:u,tickCount:c,ticks:f,niceTicks:h,axisType:p}=e;if(!o)return null;var m=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=a==="category"&&o.bandwidth?o.bandwidth()/m:0;if(v=p==="angleAxis"&&i&&i.length>=2?vi(i[0]-i[1])*2*v:v,f||h){var y=(f||h||[]).map((g,b)=>{var x=r?r.indexOf(g):g;return{coordinate:o(x)+v,value:g,offset:v,index:b}});return y.filter(g=>!lo(g.coordinate))}return l&&u?u.map((g,b)=>({coordinate:o(g)+v,value:g,index:b,offset:v})):o.ticks&&!n&&c!=null?o.ticks(c).map((g,b)=>({coordinate:o(g)+v,value:g,offset:v,index:b})):o.domain().map((g,b)=>({coordinate:o(g)+v,value:r?r[g]:g,index:b,offset:v}))},gP=1e-4,Wce=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-gP,i=Math.max(r[0],r[1])+gP,o=e(t[0]),s=e(t[n-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[n-1]])}},qce=(e,t)=>{if(!t||t.length!==2||!st(t[0])||!st(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!st(e[0])||e[0]<n)&&(a[0]=n),(!st(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a},Hce=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,i=0,o=0;o<t;++o){var s=lo(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1]):(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1])}},$ce=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,i=0;i<t;++i){var o=lo(e[i][n][1])?e[i][n][0]:e[i][n][1];o>=0?(e[i][n][0]=a,e[i][n][1]=a+o,a=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}},Vce={sign:Hce,expand:Ele,none:fp,silhouette:Dle,wiggle:Ple,positive:$ce},Gce=(e,t,n)=>{var r=Vce[n],a=Cle().keys(t).value((i,o)=>+io(i,o,0)).order(Bk).offset(r);return a(e)};function s9(e){return e==null?void 0:String(e)}var vP=e=>{var{axis:t,ticks:n,offset:r,bandSize:a,entry:i,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+r:null;var s=io(i,t.dataKey,t.scale.domain()[o]);return Cr(s)?null:t.scale(s)-a/2+r},Kce=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]},Yce=e=>{var t=e.flat(2).filter(st);return[Math.min(...t),Math.max(...t)]},Xce=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Jce=(e,t,n)=>{if(e!=null)return Xce(Object.keys(e).reduce((r,a)=>{var i=e[a],{stackedData:o}=i,s=o.reduce((l,u)=>{var c=Yce(u.slice(t,n+1));return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]))},yP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Wj=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=A2(t,c=>c.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var l=a[o],u=a[o-1];i=Math.min((l.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function xP(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:a,name:i}=e;return Mo(Mo({},t),{},{dataKey:n,payload:r,value:a,name:i})}function l9(e,t){if(e)return String(e);if(typeof t=="string")return t}function Qce(e,t,n,r,a){if(n==="horizontal"||n==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return r?Ice({x:e,y:t},r):null}var Zce=(e,t,n,r)=>{var a=t.find(u=>u&&u.index===n);if(a){if(e==="horizontal")return{x:a.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=r;return Mo(Mo(Mo({},r),Na(r.cx,r.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:l}=r;return Mo(Mo(Mo({},r),Na(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return{x:0,y:0}},ede=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,su=e=>e.layout.width,lu=e=>e.layout.height,tde=e=>e.layout.scale,u9=e=>e.layout.margin,qj=Be(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Hj=Be(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nde="data-recharts-item-index",rde="data-recharts-item-data-key",M2=60;function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(r){ade(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ade(e,t,n){return(t=ide(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ide(e){var t=ode(e,"string");return typeof t=="symbol"?t:t+""}function ode(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sde=e=>e.brush.height,oa=Be([su,lu,u9,sde,qj,Hj,TF,jue],(e,t,n,r,a,i,o,s)=>{var l=i.reduce((m,v)=>{var{orientation:y}=v;if(!v.mirror&&!v.hide){var g=typeof v.width=="number"?v.width:M2;return Tu(Tu({},m),{},{[y]:m[y]+g})}return m},{left:n.left||0,right:n.right||0}),u=a.reduce((m,v)=>{var{orientation:y}=v;return!v.mirror&&!v.hide?Tu(Tu({},m),{},{[y]:Gd(m,"".concat(y))+v.height}):m},{top:n.top||0,bottom:n.bottom||0}),c=Tu(Tu({},u),l),f=c.bottom;c.bottom+=r,c=Uce(c,o,s);var h=e-c.left-c.right,p=t-c.top-c.bottom;return Tu(Tu({brushBottom:f},c),{},{width:Math.max(h,0),height:Math.max(p,0)})}),lde=Be(oa,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),c9=Be(su,lu,(e,t)=>({x:0,y:0,width:e,height:t})),ude=M.createContext(null),ji=()=>M.useContext(ude)!=null,L2=e=>e.brush,I2=Be([L2,oa,u9],(e,t,n)=>({height:e.height,x:st(e.x)?e.x:t.left,y:st(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:st(e.width)?e.width:t.width})),$j=()=>{var e,t=ji(),n=yt(lde),r=yt(I2),a=(e=yt(L2))===null||e===void 0?void 0:e.padding;return!t||!r||!a?n:{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,x:a.left,y:a.top}},cde={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},d9=()=>{var e;return(e=yt(oa))!==null&&e!==void 0?e:cde},Vj=()=>yt(su),Gj=()=>yt(lu),dde={top:0,right:0,bottom:0,left:0},fde=()=>{var e;return(e=yt(t=>t.layout.margin))!==null&&e!==void 0?e:dde},En=e=>e.layout.layoutType,Kj=()=>yt(En),hde={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},f9=Ko({name:"legend",initialState:hde,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=ql(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:NP,setLegendSettings:pde,addLegendPayload:mde,removeLegendPayload:gde}=f9.actions,vde=f9.reducer,yde=["contextPayload"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yk.apply(null,arguments)}function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){Yj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yj(e,t,n){return(t=bde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bde(e){var t=xde(e,"string");return typeof t=="symbol"?t:t+""}function xde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wde(e,t){if(e==null)return{};var n,r,a=Nde(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Nde(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Sde(e){return e.value}function kde(e){var{contextPayload:t}=e,n=wde(e,yde),r=NF(t,e.payloadUniqBy,Sde),a=mp(mp({},n),{},{payload:r});return M.isValidElement(e.content)?M.cloneElement(e.content,a):typeof e.content=="function"?M.createElement(e.content,a):M.createElement(jj,a)}function _de(e,t,n,r,a,i){var{layout:o,align:s,verticalAlign:l}=t,u,c;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(s==="center"&&o==="vertical"?u={left:((r||0)-i.width)/2}:u=s==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?c={top:((a||0)-i.height)/2}:c=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),mp(mp({},u),c)}function jde(e){var t=br();return M.useEffect(()=>{t(pde(e))},[t,e]),null}function Ade(e){var t=br();return M.useEffect(()=>(t(NP(e)),()=>{t(NP({width:0,height:0}))}),[t,e]),null}function Cde(e){var t=Eue(),n=Qse(),r=fde(),{width:a,height:i,wrapperStyle:o,portal:s}=e,[l,u]=MF([t]),c=Vj(),f=Gj(),h=c-(r.left||0)-(r.right||0),p=R2.getWidthOrHeight(e.layout,i,a,h),m=s?o:mp(mp({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||i||"auto"},_de(o,e,r,c,f,l)),o),v=s??n;if(v==null)return null;var y=M.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:u},M.createElement(jde,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),M.createElement(Ade,{width:l.width,height:l.height}),M.createElement(kde,Yk({},e,p,{margin:r,chartWidth:c,chartHeight:f,contextPayload:t})));return R_.createPortal(y,v)}class R2 extends M.PureComponent{static getWidthOrHeight(t,n,r,a){return t==="vertical"&&st(n)?{height:n}:t==="horizontal"?{width:r||a}:null}render(){return M.createElement(Cde,this.props)}}Yj(R2,"displayName","Legend");Yj(R2,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xk.apply(null,arguments)}function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(n),!0).forEach(function(r){Ede(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ede(e,t,n){return(t=Dde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dde(e){var t=Pde(e,"string");return typeof t=="symbol"?t:t+""}function Pde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ode(e){return Array.isArray(e)&&tl(e[0])&&tl(e[1])?e.join(" ~ "):e}var Tde=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:a={},payload:i,formatter:o,itemSorter:s,wrapperClassName:l,labelClassName:u,label:c,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(i&&i.length){var k={padding:0,margin:0},j=(s?A2(i,s):i).map((S,A)=>{if(S.type==="none")return null;var P=S.formatter||o||Ode,{value:T,name:E}=S,D=T,R=E;if(P){var F=P(T,E,S,A,i);if(Array.isArray(F))[D,R]=F;else if(F!=null)D=F;else return null}var H=wN({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},r);return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:H},tl(R)?M.createElement("span",{className:"recharts-tooltip-item-name"},R):null,tl(R)?M.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,M.createElement("span",{className:"recharts-tooltip-item-value"},D),M.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:k},j)}return null},m=wN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=wN({margin:0},a),y=!Cr(c),g=y?c:"",b=cn("recharts-default-tooltip",l),x=cn("recharts-tooltip-label",u);y&&f&&i!==void 0&&i!==null&&(g=f(c,i));var N=h?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",Xk({className:b,style:m},N),M.createElement("p",{className:x,style:v},M.isValidElement(g)?g:"".concat(g)),p())},Lm="recharts-tooltip-wrapper",Mde={visibility:"hidden"};function Lde(e){var{coordinate:t,translateX:n,translateY:r}=e;return cn(Lm,{["".concat(Lm,"-right")]:st(n)&&t&&st(t.x)&&n>=t.x,["".concat(Lm,"-left")]:st(n)&&t&&st(t.x)&&n<t.x,["".concat(Lm,"-bottom")]:st(r)&&t&&st(t.y)&&r>=t.y,["".concat(Lm,"-top")]:st(r)&&t&&st(t.y)&&r<t.y})}function _P(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:l,viewBoxDimension:u}=e;if(i&&st(i[r]))return i[r];var c=n[r]-s-(a>0?a:0),f=n[r]+a;if(t[r])return o[r]?c:f;var h=l[r];if(h==null)return 0;if(o[r]){var p=c,m=h;return p<m?Math.max(f,h):Math.max(c,h)}if(u==null)return 0;var v=f+s,y=h+u;return v>y?Math.max(c,h):Math.max(f,h)}function Ide(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Rde(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:s,viewBox:l}=e,u,c,f;return o.height>0&&o.width>0&&n?(c=_P({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=_P({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=Ide({translateX:c,translateY:f,useTranslate3d:s})):u=Mde,{cssProperties:u,cssClasses:Lde({translateX:c,translateY:f,coordinate:n})}}function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(r){Jk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jk(e,t,n){return(t=Bde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bde(e){var t=Fde(e,"string");return typeof t=="symbol"?t:t+""}function Fde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zde extends M.PureComponent{constructor(){super(...arguments),Jk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Jk(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:a,children:i,coordinate:o,hasPayload:s,isAnimationActive:l,offset:u,position:c,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:m,lastBoundingBox:v,innerRef:y,hasPortalFromProps:g}=this.props,{cssClasses:b,cssProperties:x}=Rde({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:u,position:c,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:p}),N=g?{}:zy(zy({transition:l&&t?"transform ".concat(r,"ms ").concat(a):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),k=zy(zy({},N),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},m);return M.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:k,ref:y},i)}}var Ude=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),e0={isSsr:Ude()},h9=()=>yt(e=>e.rootProps.accessibilityLayer);function fo(e){return Number.isFinite(e)}function zx(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Qk(){return Qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qk.apply(null,arguments)}function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function CP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){Wde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wde(e,t,n){return(t=qde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qde(e){var t=Hde(e,"string");return typeof t=="symbol"?t:t+""}function Hde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EP={curveBasisClosed:vle,curveBasisOpen:yle,curveBasis:gle,curveBumpX:nle,curveBumpY:rle,curveLinearClosed:ble,curveLinear:x2,curveMonotoneX:xle,curveMonotoneY:wle,curveNatural:Nle,curveStep:Sle,curveStepAfter:_le,curveStepBefore:kle},Uy=e=>fo(e.x)&&fo(e.y),Im=e=>e.x,Rm=e=>e.y,$de=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Qv(e));return(n==="curveMonotone"||n==="curveBump")&&t?EP["".concat(n).concat(t==="vertical"?"Y":"X")]:EP[n]||x2},Vde=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:a,connectNulls:i=!1}=e,o=$de(t,a),s=i?n.filter(Uy):n,l;if(Array.isArray(r)){var u=i?r.filter(f=>Uy(f)):r,c=s.map((f,h)=>CP(CP({},f),{},{base:u[h]}));return a==="vertical"?l=Ly().y(Rm).x1(Im).x0(f=>f.base.x):l=Ly().x(Im).y1(Rm).y0(f=>f.base.y),l.defined(Uy).curve(o),l(c)}return a==="vertical"&&st(r)?l=Ly().y(Rm).x1(Im).x0(r):st(r)?l=Ly().x(Im).y1(Rm).y0(r):l=YB().x(Im).y(Rm),l.defined(Uy).curve(o),l(s)},Gde=e=>{var{className:t,points:n,path:r,pathRef:a}=e;if((!n||!n.length)&&!r)return null;var i=n&&n.length?Vde(e):r;return M.createElement("path",Qk({},Hn(e,!1),qse(e),{className:cn("recharts-curve",t),d:i===null?void 0:i,ref:a}))},Kde=["x","y","top","left","width","height","className"];function Zk(){return Zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zk.apply(null,arguments)}function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){Xde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xde(e,t,n){return(t=Jde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jde(e){var t=Qde(e,"string");return typeof t=="symbol"?t:t+""}function Qde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zde(e,t){if(e==null)return{};var n,r,a=efe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function efe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tfe=(e,t,n,r,a,i)=>"M".concat(e,",").concat(a,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n),nfe=e=>{var{x:t=0,y:n=0,top:r=0,left:a=0,width:i=0,height:o=0,className:s}=e,l=Zde(e,Kde),u=Yde({x:t,y:n,top:r,left:a,width:i,height:o},l);return!st(t)||!st(n)||!st(i)||!st(o)||!st(r)||!st(a)?null:M.createElement("path",Zk({},Hn(u,!0),{className:cn("recharts-cross",s),d:tfe(t,n,i,o,r,a)}))};function rfe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function PP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function afe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(n),!0).forEach(function(r){ife(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ife(e,t,n){return(t=ofe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ofe(e){var t=sfe(e,"string");return typeof t=="symbol"?t:t+""}function sfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tc(e,t){var n=afe({},e),r=t,a=Object.keys(t),i=a.reduce((o,s)=>(o[s]===void 0&&r[s]!==void 0&&(o[s]=r[s]),o),n);return i}var p9={},m9={},g9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t})(g9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g9,n=Oj,r=k2,a=_2,i=S2;function o(u,c,f){return s(u,c,void 0,void 0,void 0,void 0,f)}function s(u,c,f,h,p,m,v){const y=v(u,c,f,h,p,m);if(y!==void 0)return y;if(typeof u==typeof c)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===c;case"number":return u===c||Object.is(u,c);case"function":return u===c;case"object":return l(u,c,m,v)}return l(u,c,m,v)}function l(u,c,f,h){if(Object.is(u,c))return!0;let p=r.getTag(u),m=r.getTag(c);if(p===a.argumentsTag&&(p=a.objectTag),m===a.argumentsTag&&(m=a.objectTag),p!==m)return!1;switch(p){case a.stringTag:return u.toString()===c.toString();case a.numberTag:{const g=u.valueOf(),b=c.valueOf();return i.eq(g,b)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),c.valueOf());case a.regexpTag:return u.source===c.source&&u.flags===c.flags;case a.functionTag:return u===c}f=f??new Map;const v=f.get(u),y=f.get(c);if(v!=null&&y!=null)return v===c;f.set(u,c),f.set(c,u);try{switch(p){case a.mapTag:{if(u.size!==c.size)return!1;for(const[g,b]of u.entries())if(!c.has(g)||!s(b,c.get(g),g,u,c,f,h))return!1;return!0}case a.setTag:{if(u.size!==c.size)return!1;const g=Array.from(u.values()),b=Array.from(c.values());for(let x=0;x<g.length;x++){const N=g[x],k=b.findIndex(j=>s(N,j,void 0,u,c,f,h));if(k===-1)return!1;b.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(c)||u.length!==c.length)return!1;for(let g=0;g<u.length;g++)if(!s(u[g],c[g],g,u,c,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==c.byteLength?!1:l(new Uint8Array(u),new Uint8Array(c),f,h);case a.dataViewTag:return u.byteLength!==c.byteLength||u.byteOffset!==c.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(c),f,h);case a.errorTag:return u.name===c.name&&u.message===c.message;case a.objectTag:{if(!(l(u.constructor,c.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(c)))return!1;const b=[...Object.keys(u),...n.getSymbols(u)],x=[...Object.keys(c),...n.getSymbols(c)];if(b.length!==x.length)return!1;for(let N=0;N<b.length;N++){const k=b[N],j=u[k];if(!Object.hasOwn(c,k))return!1;const S=c[k];if(!s(j,S,k,u,c,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(c)}}e.isEqualWith=o})(m9);var v9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(v9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m9,n=v9;function r(a,i){return t.isEqualWith(a,i,n.noop)}e.isEqual=r})(p9);var lfe=p9.isEqual;const ufe=ms(lfe);function cfe(e){var t={},n=()=>null,r=!1,a=null,i=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,[l,...u]=s;if(typeof l=="number"){a=e.setTimeout(i.bind(null,u),l);return}i(l),a=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,a&&(a(),a=null),i(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}var Ux=1e-4,y9=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],b9=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),OP=(e,t)=>n=>{var r=y9(e,t);return b9(r,n)},dfe=(e,t)=>n=>{var r=y9(e,t),a=[...r.map((i,o)=>i*o).slice(1),0];return b9(a,n)},TP=function(){for(var t,n,r,a,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[t,r,n,a]=[0,0,1,1];break;case"ease":[t,r,n,a]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,a]=[.42,0,1,1];break;case"ease-out":[t,r,n,a]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,a]=[0,0,.58,1];break;default:{var l=o[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,r,n,a]=l[1].split(")")[0].split(",").map(m=>parseFloat(m)))}}else o.length===4&&([t,r,n,a]=o);var u=OP(t,n),c=OP(r,a),f=dfe(t,n),h=m=>m>1?1:m<0?0:m,p=m=>{for(var v=m>1?1:m,y=v,g=0;g<8;++g){var b=u(y)-v,x=f(y);if(Math.abs(b-v)<Ux||x<Ux)return c(y);y=h(y-b/x)}return c(y)};return p.isStepper=!1,p},ffe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:a=17}=t,i=(o,s,l)=>{var u=-(o-s)*n,c=l*r,f=l+(u-c)*a/1e3,h=l*a/1e3+o;return Math.abs(h-s)<Ux&&Math.abs(f)<Ux?[s,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},hfe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return TP(e);case"spring":return ffe();default:if(e.split("(")[0]==="cubic-bezier")return TP(e)}return typeof e=="function"?e:null};function MP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function LP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(n),!0).forEach(function(r){pfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pfe(e,t,n){return(t=mfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mfe(e){var t=gfe(e,"string");return typeof t=="symbol"?t:t+""}function gfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vfe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),yfe=(e,t,n)=>e.map(r=>"".concat(vfe(r)," ").concat(t,"ms ").concat(n)).join(","),bfe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(a=>r.includes(a))),av=(e,t)=>Object.keys(t).reduce((n,r)=>LP(LP({},n),{},{[r]:e(r,t[r])}),{});function IP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(n),!0).forEach(function(r){xfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xfe(e,t,n){return(t=wfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wfe(e){var t=Nfe(e,"string");return typeof t=="symbol"?t:t+""}function Nfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wx=(e,t,n)=>e+(t-e)*n,e_=e=>{var{from:t,to:n}=e;return t!==n},x9=(e,t,n)=>{var r=av((a,i)=>{if(e_(i)){var[o,s]=e(i.from,i.to,i.velocity);return va(va({},i),{},{from:o,velocity:s})}return i},t);return n<1?av((a,i)=>e_(i)?va(va({},i),{},{velocity:Wx(i.velocity,r[a].velocity,n),from:Wx(i.from,r[a].from,n)}):i,t):x9(e,r,n-1)};function Sfe(e,t,n,r,a,i){var o,s=r.reduce((h,p)=>va(va({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>av((h,p)=>p.from,s),u=()=>!Object.values(s).filter(e_).length,c=null,f=h=>{o||(o=h);var p=h-o,m=p/n.dt;s=x9(n,s,m),a(va(va(va({},e),t),l())),o=h,u()||(c=i.setTimeout(f))};return()=>(c=i.setTimeout(f),()=>{c()})}function kfe(e,t,n,r,a,i,o){var s=null,l=a.reduce((f,h)=>va(va({},f),{},{[h]:[e[h],t[h]]}),{}),u,c=f=>{u||(u=f);var h=(f-u)/r,p=av((v,y)=>Wx(...y,n(h)),l);if(i(va(va(va({},e),t),p)),h<1)s=o.setTimeout(c);else{var m=av((v,y)=>Wx(...y,n(1)),l);i(va(va(va({},e),t),m))}};return()=>(s=o.setTimeout(c),()=>{s()})}const _fe=(e,t,n,r,a,i)=>{var o=bfe(e,t);return n.isStepper===!0?Sfe(e,t,n,o,a,i):kfe(e,t,n,r,o,a,i)};class jfe{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),a=null,i=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}var Afe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function t_(){return t_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t_.apply(null,arguments)}function Cfe(e,t){if(e==null)return{};var n,r,a=Efe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Efe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Mu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(n),!0).forEach(function(r){fd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fd(e,t,n){return(t=Dfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dfe(e){var t=Pfe(e,"string");return typeof t=="symbol"?t:t+""}function Pfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ofe(){return cfe(new jfe)}class Xj extends M.PureComponent{constructor(t,n){super(t,n),fd(this,"mounted",!1),fd(this,"manager",null),fd(this,"stopJSAnimation",null),fd(this,"unSubscribe",null);var{isActive:r,attributeName:a,from:i,to:o,children:s,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||l<=0){this.state={style:{}},typeof s=="function"&&(this.state={style:o});return}if(i){if(typeof s=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:r,attributeName:a,shouldReAnimate:i,to:o,from:s}=this.props,{style:l}=this.state;if(r){if(!n){var u={style:a?{[a]:o}:o};this.state&&l&&(a&&l[a]!==o||!a&&l!==o)&&this.setState(u);return}if(!(ufe(t.to,o)&&t.canBegin&&t.isActive)){var c=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=c||i?s:t.to;if(this.state&&l){var h={style:a?{[a]:f}:f};(a&&l[a]!==f||!a&&l!==f)&&this.setState(h)}this.runAnimation(Mu(Mu({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:r,duration:a,easing:i,begin:o,onAnimationEnd:s,onAnimationStart:l}=t,u=_fe(n,r,hfe(i),a,this.changeStyle,this.manager.getTimeoutController()),c=()=>{this.stopJSAnimation=u()};this.manager.start([l,o,c,a,s])}runAnimation(t){var{begin:n,duration:r,attributeName:a,to:i,easing:o,onAnimationStart:s,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var c=a?{[a]:i}:i,f=yfe(Object.keys(c),r,o);this.manager.start([s,n,Mu(Mu({},c),{},{transition:f}),r,l])}render(){var t=this.props,{children:n,begin:r,duration:a,attributeName:i,easing:o,isActive:s,from:l,to:u,canBegin:c,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:m}=t,v=Cfe(t,Afe),y=M.Children.count(n),g=this.state.style;if(typeof n=="function")return n(g);if(!s||y===0||a<=0)return n;var b=x=>{var{style:N={},className:k}=x.props,j=M.cloneElement(x,Mu(Mu({},v),{},{style:Mu(Mu({},N),g),className:k}));return j};return y===1?b(M.Children.only(n)):M.createElement("div",null,M.Children.map(n,x=>b(x)))}}fd(Xj,"displayName","Animate");fd(Xj,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var Tfe=M.createContext(null);function gp(e){var t,n,r=M.useContext(Tfe);return M.createElement(Xj,t_({},e,{animationManager:(t=(n=e.animationManager)!==null&&n!==void 0?n:r)!==null&&t!==void 0?t:Ofe()}))}function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(null,arguments)}var BP=(e,t,n,r,a)=>{var i=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,s=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,u;if(i>0&&a instanceof Array){for(var c=[0,0,0,0],f=0,h=4;f<h;f++)c[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+o*c[0]),c[0]>0&&(u+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(e+s*c[0],",").concat(t)),u+="L ".concat(e+n-s*c[1],",").concat(t),c[1]>0&&(u+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,`,
        `).concat(e+n,",").concat(t+o*c[1])),u+="L ".concat(e+n,",").concat(t+r-o*c[2]),c[2]>0&&(u+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,`,
        `).concat(e+n-s*c[2],",").concat(t+r)),u+="L ".concat(e+s*c[3],",").concat(t+r),c[3]>0&&(u+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+r-o*c[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var p=Math.min(i,a);u="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+s*p,",").concat(t,`
            L `).concat(e+n-s*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+n,",").concat(t+o*p,`
            L `).concat(e+n,",").concat(t+r-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+n-s*p,",").concat(t+r,`
            L `).concat(e+s*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+r-o*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return u},Mfe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w9=e=>{var t=Tc(e,Mfe),n=M.useRef(null),[r,a]=M.useState(-1);M.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var g=n.current.getTotalLength();g&&a(g)}catch{}},[]);var{x:i,y:o,width:s,height:l,radius:u,className:c}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:m,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||s!==+s||l!==+l||s===0||l===0)return null;var y=cn("recharts-rectangle",c);return v?M.createElement(gp,{canBegin:r>0,from:{width:s,height:l,x:i,y:o},to:{width:s,height:l,x:i,y:o},duration:h,animationEasing:f,isActive:v},g=>{var{width:b,height:x,x:N,y:k}=g;return M.createElement(gp,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:m,easing:f},M.createElement("path",qx({},Hn(t,!0),{className:y,d:BP(N,k,b,x,u),ref:n})))}):M.createElement("path",qx({},Hn(t,!0),{className:y,d:BP(i,o,s,l,u)}))};function N9(e){var{cx:t,cy:n,radius:r,startAngle:a,endAngle:i}=e,o=Na(t,n,r,a),s=Na(t,n,r,i);return{points:[o,s],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n_.apply(null,arguments)}var Lfe=(e,t)=>{var n=vi(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Wy=e=>{var{cx:t,cy:n,radius:r,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:l}=e,u=s*(o?1:-1)+r,c=Math.asin(s/u)/Fx,f=l?a:a+i*c,h=Na(t,n,u,f),p=Na(t,n,r,f),m=l?a-i*c:a,v=Na(t,n,u*Math.cos(c*Fx),m);return{center:h,circleTangency:p,lineTangency:v,theta:c}},S9=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:i,endAngle:o}=e,s=Lfe(i,o),l=i+s,u=Na(t,n,a,i),c=Na(t,n,a,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(i>l),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(r>0){var h=Na(t,n,r,i),p=Na(t,n,r,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(i<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(n," Z");return f},Ife=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:l,endAngle:u}=e,c=vi(u-l),{circleTangency:f,lineTangency:h,theta:p}=Wy({cx:t,cy:n,radius:a,angle:l,sign:c,cornerRadius:i,cornerIsExternal:s}),{circleTangency:m,lineTangency:v,theta:y}=Wy({cx:t,cy:n,radius:a,angle:u,sign:-c,cornerRadius:i,cornerIsExternal:s}),g=s?Math.abs(l-u):Math.abs(l-u)-p-y;if(g<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):S9({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:u});var b="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(g>180),",").concat(+(c<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(v.x,",").concat(v.y,`
  `);if(r>0){var{circleTangency:x,lineTangency:N,theta:k}=Wy({cx:t,cy:n,radius:r,angle:l,sign:c,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:j,lineTangency:S,theta:A}=Wy({cx:t,cy:n,radius:r,angle:u,sign:-c,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),P=s?Math.abs(l-u):Math.abs(l-u)-k-A;if(P<0&&i===0)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(P>180),",").concat(+(c>0),",").concat(x.x,",").concat(x.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b},Rfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},k9=e=>{var t=Tc(e,Rfe),{cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:u,endAngle:c,className:f}=t;if(i<a||u===c)return null;var h=cn("recharts-sector",f),p=i-a,m=ps(o,p,0,!0),v;return m>0&&Math.abs(u-c)<360?v=Ife({cx:n,cy:r,innerRadius:a,outerRadius:i,cornerRadius:Math.min(m,p/2),forceCornerRadius:s,cornerIsExternal:l,startAngle:u,endAngle:c}):v=S9({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:c}),M.createElement("path",n_({},Hn(t,!0),{className:h,d:v}))};function Bfe(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:s,cy:l,innerRadius:u,outerRadius:c,angle:f}=t,h=Na(s,l,u,f),p=Na(s,l,c,f);r=h.x,a=h.y,i=p.x,o=p.y}else return N9(t);return[{x:r,y:a},{x:i,y:o}]}var _9={},j9={},A9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lj;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(A9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A9;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(j9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ij,n=j9;function r(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=n.toFinite(a),i===void 0?(i=a,a=0):i=n.toFinite(i),o=o===void 0?a<i?1:-1:n.toFinite(o);const s=Math.max(Math.ceil((i-a)/(o||1)),0),l=new Array(s);for(let u=0;u<s;u++)l[u]=a,a+=o;return l}e.range=r})(_9);var Ffe=_9.range;const C9=ms(Ffe);function pc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zfe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jj(e){let t,n,r;e.length!==2?(t=pc,n=(s,l)=>pc(e(s),l),r=(s,l)=>e(s)-l):(t=e===pc||e===zfe?e:Ufe,n=e,r=e);function a(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function i(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=a(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:a,center:o,right:i}}function Ufe(){return 0}function E9(e){return e===null?NaN:+e}function*Wfe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const qfe=Jj(pc),t0=qfe.right;Jj(E9).center;class FP extends Map{constructor(t,n=Vfe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(zP(this,t))}has(t){return super.has(zP(this,t))}set(t,n){return super.set(Hfe(this,t),n)}delete(t){return super.delete($fe(this,t))}}function zP({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Hfe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function $fe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Vfe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Gfe(e=pc){if(e===pc)return D9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function D9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Kfe=Math.sqrt(50),Yfe=Math.sqrt(10),Xfe=Math.sqrt(2);function Hx(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=Kfe?10:i>=Yfe?5:i>=Xfe?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?Hx(e,t,n*2):[s,l,u]}function r_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?Hx(t,e,n):Hx(e,t,n);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function a_(e,t,n){return t=+t,e=+e,n=+n,Hx(e,t,n)[2]}function i_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?a_(t,e,n):a_(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function UP(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function WP(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function P9(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?D9:Gfe(a);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(t-u*f/l+h)),m=Math.min(r,Math.floor(t+(l-u)*f/l+h));P9(e,t,p,m,a)}const i=e[t];let o=n,s=r;for(Bm(e,n,t),a(e[r],i)>0&&Bm(e,n,r);o<s;){for(Bm(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[n],i)===0?Bm(e,n,s):(++s,Bm(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Bm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Jfe(e,t,n){if(e=Float64Array.from(Wfe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return WP(e);if(t>=1)return UP(e);var r,a=(r-1)*t,i=Math.floor(a),o=UP(P9(e,i).subarray(0,i+1)),s=WP(e.subarray(i+1));return o+(s-o)*(a-i)}}function Qfe(e,t,n=E9){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function Zfe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Yo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function uu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const o_=Symbol("implicit");function Qj(){var e=new FP,t=[],n=[],r=o_;function a(i){let o=e.get(i);if(o===void 0){if(r!==o_)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new FP;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Qj(t,n).unknown(r)},Yo.apply(a,arguments),a}function Zj(){var e=Qj().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,s=!1,l=0,u=0,c=.5;delete e.unknown;function f(){var h=t().length,p=a<r,m=p?a:r,v=p?r:a;i=(v-m)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),m+=(v-m-i*(h-l))*c,o=i*(1-l),s&&(m=Math.round(m),o=Math.round(o));var y=Zfe(h).map(function(g){return m+i*g});return n(p?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,f()):[r,a]},e.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Zj(t(),[r,a]).round(s).paddingInner(l).paddingOuter(u).align(c)},Yo.apply(f(),arguments)}function O9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return O9(t())},e}function ehe(){return O9(Zj.apply(null,arguments).paddingInner(1))}function eA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function T9(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function n0(){}var iv=.7,$x=1/iv,Vh="\\s*([+-]?\\d+)\\s*",ov="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",the=/^#([0-9a-f]{3,8})$/,nhe=new RegExp(`^rgb\\(${Vh},${Vh},${Vh}\\)$`),rhe=new RegExp(`^rgb\\(${Xs},${Xs},${Xs}\\)$`),ahe=new RegExp(`^rgba\\(${Vh},${Vh},${Vh},${ov}\\)$`),ihe=new RegExp(`^rgba\\(${Xs},${Xs},${Xs},${ov}\\)$`),ohe=new RegExp(`^hsl\\(${ov},${Xs},${Xs}\\)$`),she=new RegExp(`^hsla\\(${ov},${Xs},${Xs},${ov}\\)$`),qP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eA(n0,sv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HP,formatHex:HP,formatHex8:lhe,formatHsl:uhe,formatRgb:$P,toString:$P});function HP(){return this.rgb().formatHex()}function lhe(){return this.rgb().formatHex8()}function uhe(){return M9(this).formatHsl()}function $P(){return this.rgb().formatRgb()}function sv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=the.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?VP(t):n===3?new yi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nhe.exec(e))?new yi(t[1],t[2],t[3],1):(t=rhe.exec(e))?new yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ahe.exec(e))?qy(t[1],t[2],t[3],t[4]):(t=ihe.exec(e))?qy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ohe.exec(e))?YP(t[1],t[2]/100,t[3]/100,1):(t=she.exec(e))?YP(t[1],t[2]/100,t[3]/100,t[4]):qP.hasOwnProperty(e)?VP(qP[e]):e==="transparent"?new yi(NaN,NaN,NaN,0):null}function VP(e){return new yi(e>>16&255,e>>8&255,e&255,1)}function qy(e,t,n,r){return r<=0&&(e=t=n=NaN),new yi(e,t,n,r)}function che(e){return e instanceof n0||(e=sv(e)),e?(e=e.rgb(),new yi(e.r,e.g,e.b,e.opacity)):new yi}function s_(e,t,n,r){return arguments.length===1?che(e):new yi(e,t,n,r??1)}function yi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}eA(yi,s_,T9(n0,{brighter(e){return e=e==null?$x:Math.pow($x,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?iv:Math.pow(iv,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yi(Dd(this.r),Dd(this.g),Dd(this.b),Vx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GP,formatHex:GP,formatHex8:dhe,formatRgb:KP,toString:KP}));function GP(){return`#${hd(this.r)}${hd(this.g)}${hd(this.b)}`}function dhe(){return`#${hd(this.r)}${hd(this.g)}${hd(this.b)}${hd((isNaN(this.opacity)?1:this.opacity)*255)}`}function KP(){const e=Vx(this.opacity);return`${e===1?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${e===1?")":`, ${e})`}`}function Vx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hd(e){return e=Dd(e),(e<16?"0":"")+e.toString(16)}function YP(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ls(e,t,n,r)}function M9(e){if(e instanceof ls)return new ls(e.h,e.s,e.l,e.opacity);if(e instanceof n0||(e=sv(e)),!e)return new ls;if(e instanceof ls)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new ls(o,s,l,e.opacity)}function fhe(e,t,n,r){return arguments.length===1?M9(e):new ls(e,t,n,r??1)}function ls(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}eA(ls,fhe,T9(n0,{brighter(e){return e=e==null?$x:Math.pow($x,e),new ls(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?iv:Math.pow(iv,e),new ls(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new yi(NN(e>=240?e-240:e+120,a,r),NN(e,a,r),NN(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new ls(XP(this.h),Hy(this.s),Hy(this.l),Vx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vx(this.opacity);return`${e===1?"hsl(":"hsla("}${XP(this.h)}, ${Hy(this.s)*100}%, ${Hy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XP(e){return e=(e||0)%360,e<0?e+360:e}function Hy(e){return Math.max(0,Math.min(1,e||0))}function NN(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tA=e=>()=>e;function hhe(e,t){return function(n){return e+n*t}}function phe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mhe(e){return(e=+e)==1?L9:function(t,n){return n-t?phe(t,n,e):tA(isNaN(t)?n:t)}}function L9(e,t){var n=t-e;return n?hhe(e,n):tA(isNaN(e)?t:e)}const JP=function e(t){var n=mhe(t);function r(a,i){var o=n((a=s_(a)).r,(i=s_(i)).r),s=n(a.g,i.g),l=n(a.b,i.b),u=L9(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r}(1);function ghe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function vhe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yhe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=zp(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function bhe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gx(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xhe(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=zp(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var l_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SN=new RegExp(l_.source,"g");function whe(e){return function(){return e}}function Nhe(e){return function(t){return e(t)+""}}function She(e,t){var n=l_.lastIndex=SN.lastIndex=0,r,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=l_.exec(e))&&(a=SN.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:Gx(r,a)})),n=SN.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?Nhe(l[0].x):whe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function zp(e,t){var n=typeof t,r;return t==null||n==="boolean"?tA(t):(n==="number"?Gx:n==="string"?(r=sv(t))?(t=r,JP):She:t instanceof sv?JP:t instanceof Date?bhe:vhe(t)?ghe:Array.isArray(t)?yhe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xhe:Gx)(e,t)}function nA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function khe(e,t){t===void 0&&(t=e,e=zp);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[s](o-s)}}function _he(e){return function(){return e}}function Kx(e){return+e}var QP=[0,1];function Ja(e){return e}function u_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:_he(isNaN(t)?NaN:.5)}function jhe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ahe(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=u_(a,r),i=n(o,i)):(r=u_(r,a),i=n(i,o)),function(s){return i(r(s))}}function Che(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=u_(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(s){var l=t0(e,s,1,r)-1;return i[l](a[l](s))}}function r0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B2(){var e=QP,t=QP,n=zp,r,a,i,o=Ja,s,l,u;function c(){var h=Math.min(e.length,t.length);return o!==Ja&&(o=jhe(e[0],e[h-1])),s=h>2?Che:Ahe,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(a((u||(u=s(t,e.map(r),Gx)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Kx),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=nA,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Ja,c()):o!==Ja},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return r=h,a=p,c()}}function rA(){return B2()(Ja,Ja)}function Ehe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vp(e){return e=Yx(Math.abs(e)),e?e[1]:NaN}function Dhe(e,t){return function(n,r){for(var a=n.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(n.substring(a-=s,a+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Phe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ohe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lv(e){if(!(t=Ohe.exec(e)))throw new Error("invalid format: "+e);var t;return new aA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lv.prototype=aA.prototype;function aA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}aA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function The(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var I9;function Mhe(e,t){var n=Yx(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(I9=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Yx(e,Math.max(0,t+i-1))[0]}function ZP(e,t){var n=Yx(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const eO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ehe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZP(e*100,t),r:ZP,s:Mhe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tO(e){return e}var nO=Array.prototype.map,rO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lhe(e){var t=e.grouping===void 0||e.thousands===void 0?tO:Dhe(nO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?tO:Phe(nO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=lv(f);var h=f.fill,p=f.align,m=f.sign,v=f.symbol,y=f.zero,g=f.width,b=f.comma,x=f.precision,N=f.trim,k=f.type;k==="n"?(b=!0,k="g"):eO[k]||(x===void 0&&(x=12),N=!0,k="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var j=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=v==="$"?r:/[%p]/.test(k)?o:"",A=eO[k],P=/[defgprs%]/.test(k);x=x===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function T(E){var D=j,R=S,F,H,B;if(k==="c")R=A(E)+R,E="";else{E=+E;var U=E<0||1/E<0;if(E=isNaN(E)?l:A(Math.abs(E),x),N&&(E=The(E)),U&&+E==0&&m!=="+"&&(U=!1),D=(U?m==="("?m:s:m==="-"||m==="("?"":m)+D,R=(k==="s"?rO[8+I9/3]:"")+R+(U&&m==="("?")":""),P){for(F=-1,H=E.length;++F<H;)if(B=E.charCodeAt(F),48>B||B>57){R=(B===46?a+E.slice(F+1):E.slice(F))+R,E=E.slice(0,F);break}}}b&&!y&&(E=t(E,1/0));var W=D.length+E.length+R.length,z=W<g?new Array(g-W+1).join(h):"";switch(b&&y&&(E=t(z+E,z.length?g-R.length:1/0),z=""),p){case"<":E=D+E+R+z;break;case"=":E=D+z+E+R;break;case"^":E=z.slice(0,W=z.length>>1)+D+E+R+z.slice(W);break;default:E=z+D+E+R;break}return i(E)}return T.toString=function(){return f+""},T}function c(f,h){var p=u((f=lv(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(vp(h)/3)))*3,v=Math.pow(10,-m),y=rO[8+m/3];return function(g){return p(v*g)+y}}return{format:u,formatPrefix:c}}var $y,iA,R9;Ihe({thousands:",",grouping:[3],currency:["$",""]});function Ihe(e){return $y=Lhe(e),iA=$y.format,R9=$y.formatPrefix,$y}function Rhe(e){return Math.max(0,-vp(Math.abs(e)))}function Bhe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vp(t)/3)))*3-vp(Math.abs(e)))}function Fhe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vp(t)-vp(e))+1}function B9(e,t,n,r){var a=i_(e,t,n),i;switch(r=lv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=Bhe(a,o))&&(r.precision=i),R9(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Fhe(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Rhe(a))&&(r.precision=i-(r.type==="%")*2);break}}return iA(r)}function Mc(e){var t=e.domain;return e.ticks=function(n){var r=t();return r_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return B9(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],s=r[i],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);c-- >0;){if(u=a_(o,s,n),u===l)return r[a]=o,r[i]=s,t(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function F9(){var e=rA();return e.copy=function(){return r0(e,F9())},Yo.apply(e,arguments),Mc(e)}function z9(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Kx),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return z9(e).unknown(t)},e=arguments.length?Array.from(e,Kx):[0,1],Mc(n)}function U9(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function aO(e){return Math.log(e)}function iO(e){return Math.exp(e)}function zhe(e){return-Math.log(-e)}function Uhe(e){return-Math.exp(-e)}function Whe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qhe(e){return e===10?Whe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Hhe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oO(e){return(t,n)=>-e(-t,n)}function oA(e){const t=e(aO,iO),n=t.domain;let r=10,a,i;function o(){return a=Hhe(r),i=qhe(r),n()[0]<0?(a=oO(a),i=oO(i),e(zhe,Uhe)):e(aO,iO),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=a(u),p=a(c),m,v;const y=s==null?10:+s;let g=[];if(!(r%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<r;++m)if(v=h<0?m/i(-h):m*i(h),!(v<u)){if(v>c)break;g.push(v)}}else for(;h<=p;++h)for(m=r-1;m>=1;--m)if(v=h>0?m/i(-h):m*i(h),!(v<u)){if(v>c)break;g.push(v)}g.length*2<y&&(g=r_(u,c,y))}else g=r_(h,p,Math.min(p-h,y)).map(i);return f?g.reverse():g},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=lv(l)).precision==null&&(l.trim=!0),l=iA(l)),s===1/0)return l;const u=Math.max(1,r*s/t.ticks().length);return c=>{let f=c/i(Math.round(a(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(U9(n(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function W9(){const e=oA(B2()).domain([1,10]);return e.copy=()=>r0(e,W9()).base(e.base()),Yo.apply(e,arguments),e}function sO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sA(e){var t=1,n=e(sO(t),lO(t));return n.constant=function(r){return arguments.length?e(sO(t=+r),lO(t)):t},Mc(n)}function q9(){var e=sA(B2());return e.copy=function(){return r0(e,q9()).constant(e.constant())},Yo.apply(e,arguments)}function uO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $he(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Vhe(e){return e<0?-e*e:e*e}function lA(e){var t=e(Ja,Ja),n=1;function r(){return n===1?e(Ja,Ja):n===.5?e($he,Vhe):e(uO(n),uO(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Mc(t)}function uA(){var e=lA(B2());return e.copy=function(){return r0(e,uA()).exponent(e.exponent())},Yo.apply(e,arguments),e}function Ghe(){return uA.apply(null,arguments).exponent(.5)}function cO(e){return Math.sign(e)*e*e}function Khe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function H9(){var e=rA(),t=[0,1],n=!1,r;function a(i){var o=Khe(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(cO(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Kx)).map(cO)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return H9(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Yo.apply(a,arguments),Mc(a)}function $9(){var e=[],t=[],n=[],r;function a(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=Qfe(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?r:t[t0(n,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(pc),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return $9().domain(e).range(t).unknown(r)},Yo.apply(i,arguments)}function V9(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[t0(r,l,0,n)]:i}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(n=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return V9().domain([e,t]).range(a).unknown(i)},Yo.apply(Mc(o),arguments)}function G9(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[t0(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return G9().domain(e).range(t).unknown(n)},Yo.apply(a,arguments)}const kN=new Date,_N=new Date;function Hr(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>Hr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(kN.setTime(+i),_N.setTime(+o),e(kN),e(_N),Math.floor(n(kN,_N))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Xx=Hr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xx);Xx.range;const Bl=1e3,zo=Bl*60,Fl=zo*60,Xl=Fl*24,cA=Xl*7,dO=Xl*30,jN=Xl*365,pd=Hr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Bl)},(e,t)=>(t-e)/Bl,e=>e.getUTCSeconds());pd.range;const dA=Hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bl)},(e,t)=>{e.setTime(+e+t*zo)},(e,t)=>(t-e)/zo,e=>e.getMinutes());dA.range;const fA=Hr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zo)},(e,t)=>(t-e)/zo,e=>e.getUTCMinutes());fA.range;const hA=Hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bl-e.getMinutes()*zo)},(e,t)=>{e.setTime(+e+t*Fl)},(e,t)=>(t-e)/Fl,e=>e.getHours());hA.range;const pA=Hr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fl)},(e,t)=>(t-e)/Fl,e=>e.getUTCHours());pA.range;const a0=Hr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zo)/Xl,e=>e.getDate()-1);a0.range;const F2=Hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xl,e=>e.getUTCDate()-1);F2.range;const K9=Hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xl,e=>Math.floor(e/Xl));K9.range;function hf(e){return Hr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*zo)/cA)}const z2=hf(0),Jx=hf(1),Yhe=hf(2),Xhe=hf(3),yp=hf(4),Jhe=hf(5),Qhe=hf(6);z2.range;Jx.range;Yhe.range;Xhe.range;yp.range;Jhe.range;Qhe.range;function pf(e){return Hr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/cA)}const U2=pf(0),Qx=pf(1),Zhe=pf(2),epe=pf(3),bp=pf(4),tpe=pf(5),npe=pf(6);U2.range;Qx.range;Zhe.range;epe.range;bp.range;tpe.range;npe.range;const mA=Hr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mA.range;const gA=Hr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gA.range;const Jl=Hr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Jl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Jl.range;const Ql=Hr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ql.range;function Y9(e,t,n,r,a,i){const o=[[pd,1,Bl],[pd,5,5*Bl],[pd,15,15*Bl],[pd,30,30*Bl],[i,1,zo],[i,5,5*zo],[i,15,15*zo],[i,30,30*zo],[a,1,Fl],[a,3,3*Fl],[a,6,6*Fl],[a,12,12*Fl],[r,1,Xl],[r,2,2*Xl],[n,1,cA],[t,1,dO],[t,3,3*dO],[e,1,jN]];function s(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const p=f&&typeof f.range=="function"?f:l(u,c,f),m=p?p.range(u,+c+1):[];return h?m.reverse():m}function l(u,c,f){const h=Math.abs(c-u)/f,p=Jj(([,,y])=>y).right(o,h);if(p===o.length)return e.every(i_(u/jN,c/jN,f));if(p===0)return Xx.every(Math.max(i_(u,c,f),1));const[m,v]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return m.every(v)}return[s,l]}const[rpe,ape]=Y9(Ql,gA,U2,K9,pA,fA),[ipe,ope]=Y9(Jl,mA,z2,a0,hA,dA);function AN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function CN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function spe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=zm(a),c=Um(a),f=zm(i),h=Um(i),p=zm(o),m=Um(o),v=zm(s),y=Um(s),g=zm(l),b=Um(l),x={a:U,A:W,b:z,B:J,c:null,d:vO,e:vO,f:Dpe,g:zpe,G:Wpe,H:Ape,I:Cpe,j:Epe,L:X9,m:Ppe,M:Ope,p:ee,q:L,Q:xO,s:wO,S:Tpe,u:Mpe,U:Lpe,V:Ipe,w:Rpe,W:Bpe,x:null,X:null,y:Fpe,Y:Upe,Z:qpe,"%":bO},N={a:q,A:Y,b:te,B:K,c:null,d:yO,e:yO,f:Gpe,g:rme,G:ime,H:Hpe,I:$pe,j:Vpe,L:Q9,m:Kpe,M:Ype,p:ce,q:he,Q:xO,s:wO,S:Xpe,u:Jpe,U:Qpe,V:Zpe,w:eme,W:tme,x:null,X:null,y:nme,Y:ame,Z:ome,"%":bO},k={a:T,A:E,b:D,B:R,c:F,d:mO,e:mO,f:Spe,g:pO,G:hO,H:gO,I:gO,j:bpe,L:Npe,m:ype,M:xpe,p:P,q:vpe,Q:_pe,s:jpe,S:wpe,u:fpe,U:hpe,V:ppe,w:dpe,W:mpe,x:H,X:B,y:pO,Y:hO,Z:gpe,"%":kpe};x.x=j(n,x),x.X=j(r,x),x.c=j(t,x),N.x=j(n,N),N.X=j(r,N),N.c=j(t,N);function j($,X){return function(ae){var le=[],Se=-1,Ee=0,me=$.length,ie,Ve,be;for(ae instanceof Date||(ae=new Date(+ae));++Se<me;)$.charCodeAt(Se)===37&&(le.push($.slice(Ee,Se)),(Ve=fO[ie=$.charAt(++Se)])!=null?ie=$.charAt(++Se):Ve=ie==="e"?" ":"0",(be=X[ie])&&(ie=be(ae,Ve)),le.push(ie),Ee=Se+1);return le.push($.slice(Ee,Se)),le.join("")}}function S($,X){return function(ae){var le=Fm(1900,void 0,1),Se=A(le,$,ae+="",0),Ee,me;if(Se!=ae.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(X&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Ee=CN(Fm(le.y,0,1)),me=Ee.getUTCDay(),Ee=me>4||me===0?Qx.ceil(Ee):Qx(Ee),Ee=F2.offset(Ee,(le.V-1)*7),le.y=Ee.getUTCFullYear(),le.m=Ee.getUTCMonth(),le.d=Ee.getUTCDate()+(le.w+6)%7):(Ee=AN(Fm(le.y,0,1)),me=Ee.getDay(),Ee=me>4||me===0?Jx.ceil(Ee):Jx(Ee),Ee=a0.offset(Ee,(le.V-1)*7),le.y=Ee.getFullYear(),le.m=Ee.getMonth(),le.d=Ee.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),me="Z"in le?CN(Fm(le.y,0,1)).getUTCDay():AN(Fm(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(me+5)%7:le.w+le.U*7-(me+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,CN(le)):AN(le)}}function A($,X,ae,le){for(var Se=0,Ee=X.length,me=ae.length,ie,Ve;Se<Ee;){if(le>=me)return-1;if(ie=X.charCodeAt(Se++),ie===37){if(ie=X.charAt(Se++),Ve=k[ie in fO?X.charAt(Se++):ie],!Ve||(le=Ve($,ae,le))<0)return-1}else if(ie!=ae.charCodeAt(le++))return-1}return le}function P($,X,ae){var le=u.exec(X.slice(ae));return le?($.p=c.get(le[0].toLowerCase()),ae+le[0].length):-1}function T($,X,ae){var le=p.exec(X.slice(ae));return le?($.w=m.get(le[0].toLowerCase()),ae+le[0].length):-1}function E($,X,ae){var le=f.exec(X.slice(ae));return le?($.w=h.get(le[0].toLowerCase()),ae+le[0].length):-1}function D($,X,ae){var le=g.exec(X.slice(ae));return le?($.m=b.get(le[0].toLowerCase()),ae+le[0].length):-1}function R($,X,ae){var le=v.exec(X.slice(ae));return le?($.m=y.get(le[0].toLowerCase()),ae+le[0].length):-1}function F($,X,ae){return A($,t,X,ae)}function H($,X,ae){return A($,n,X,ae)}function B($,X,ae){return A($,r,X,ae)}function U($){return o[$.getDay()]}function W($){return i[$.getDay()]}function z($){return l[$.getMonth()]}function J($){return s[$.getMonth()]}function ee($){return a[+($.getHours()>=12)]}function L($){return 1+~~($.getMonth()/3)}function q($){return o[$.getUTCDay()]}function Y($){return i[$.getUTCDay()]}function te($){return l[$.getUTCMonth()]}function K($){return s[$.getUTCMonth()]}function ce($){return a[+($.getUTCHours()>=12)]}function he($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var X=j($+="",x);return X.toString=function(){return $},X},parse:function($){var X=S($+="",!1);return X.toString=function(){return $},X},utcFormat:function($){var X=j($+="",N);return X.toString=function(){return $},X},utcParse:function($){var X=S($+="",!0);return X.toString=function(){return $},X}}}var fO={"-":"",_:" ",0:"0"},sa=/^\s*\d+/,lpe=/^%/,upe=/[\\^$*+?|[\]().{}]/g;function en(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function cpe(e){return e.replace(upe,"\\$&")}function zm(e){return new RegExp("^(?:"+e.map(cpe).join("|")+")","i")}function Um(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dpe(e,t,n){var r=sa.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function fpe(e,t,n){var r=sa.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hpe(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ppe(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function mpe(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hO(e,t,n){var r=sa.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pO(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gpe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vpe(e,t,n){var r=sa.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ype(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mO(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function bpe(e,t,n){var r=sa.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gO(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xpe(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function wpe(e,t,n){var r=sa.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Npe(e,t,n){var r=sa.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Spe(e,t,n){var r=sa.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kpe(e,t,n){var r=lpe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _pe(e,t,n){var r=sa.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function jpe(e,t,n){var r=sa.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function vO(e,t){return en(e.getDate(),t,2)}function Ape(e,t){return en(e.getHours(),t,2)}function Cpe(e,t){return en(e.getHours()%12||12,t,2)}function Epe(e,t){return en(1+a0.count(Jl(e),e),t,3)}function X9(e,t){return en(e.getMilliseconds(),t,3)}function Dpe(e,t){return X9(e,t)+"000"}function Ppe(e,t){return en(e.getMonth()+1,t,2)}function Ope(e,t){return en(e.getMinutes(),t,2)}function Tpe(e,t){return en(e.getSeconds(),t,2)}function Mpe(e){var t=e.getDay();return t===0?7:t}function Lpe(e,t){return en(z2.count(Jl(e)-1,e),t,2)}function J9(e){var t=e.getDay();return t>=4||t===0?yp(e):yp.ceil(e)}function Ipe(e,t){return e=J9(e),en(yp.count(Jl(e),e)+(Jl(e).getDay()===4),t,2)}function Rpe(e){return e.getDay()}function Bpe(e,t){return en(Jx.count(Jl(e)-1,e),t,2)}function Fpe(e,t){return en(e.getFullYear()%100,t,2)}function zpe(e,t){return e=J9(e),en(e.getFullYear()%100,t,2)}function Upe(e,t){return en(e.getFullYear()%1e4,t,4)}function Wpe(e,t){var n=e.getDay();return e=n>=4||n===0?yp(e):yp.ceil(e),en(e.getFullYear()%1e4,t,4)}function qpe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+en(t/60|0,"0",2)+en(t%60,"0",2)}function yO(e,t){return en(e.getUTCDate(),t,2)}function Hpe(e,t){return en(e.getUTCHours(),t,2)}function $pe(e,t){return en(e.getUTCHours()%12||12,t,2)}function Vpe(e,t){return en(1+F2.count(Ql(e),e),t,3)}function Q9(e,t){return en(e.getUTCMilliseconds(),t,3)}function Gpe(e,t){return Q9(e,t)+"000"}function Kpe(e,t){return en(e.getUTCMonth()+1,t,2)}function Ype(e,t){return en(e.getUTCMinutes(),t,2)}function Xpe(e,t){return en(e.getUTCSeconds(),t,2)}function Jpe(e){var t=e.getUTCDay();return t===0?7:t}function Qpe(e,t){return en(U2.count(Ql(e)-1,e),t,2)}function Z9(e){var t=e.getUTCDay();return t>=4||t===0?bp(e):bp.ceil(e)}function Zpe(e,t){return e=Z9(e),en(bp.count(Ql(e),e)+(Ql(e).getUTCDay()===4),t,2)}function eme(e){return e.getUTCDay()}function tme(e,t){return en(Qx.count(Ql(e)-1,e),t,2)}function nme(e,t){return en(e.getUTCFullYear()%100,t,2)}function rme(e,t){return e=Z9(e),en(e.getUTCFullYear()%100,t,2)}function ame(e,t){return en(e.getUTCFullYear()%1e4,t,4)}function ime(e,t){var n=e.getUTCDay();return e=n>=4||n===0?bp(e):bp.ceil(e),en(e.getUTCFullYear()%1e4,t,4)}function ome(){return"+0000"}function bO(){return"%"}function xO(e){return+e}function wO(e){return Math.floor(+e/1e3)}var Qf,ez,tz;sme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sme(e){return Qf=spe(e),ez=Qf.format,Qf.parse,tz=Qf.utcFormat,Qf.utcParse,Qf}function lme(e){return new Date(e)}function ume(e){return e instanceof Date?+e:+new Date(+e)}function vA(e,t,n,r,a,i,o,s,l,u){var c=rA(),f=c.invert,h=c.domain,p=u(".%L"),m=u(":%S"),v=u("%I:%M"),y=u("%I %p"),g=u("%a %d"),b=u("%b %d"),x=u("%B"),N=u("%Y");function k(j){return(l(j)<j?p:s(j)<j?m:o(j)<j?v:i(j)<j?y:r(j)<j?a(j)<j?g:b:n(j)<j?x:N)(j)}return c.invert=function(j){return new Date(f(j))},c.domain=function(j){return arguments.length?h(Array.from(j,ume)):h().map(lme)},c.ticks=function(j){var S=h();return e(S[0],S[S.length-1],j??10)},c.tickFormat=function(j,S){return S==null?k:u(S)},c.nice=function(j){var S=h();return(!j||typeof j.range!="function")&&(j=t(S[0],S[S.length-1],j??10)),j?h(U9(S,j)):c},c.copy=function(){return r0(c,vA(e,t,n,r,a,i,o,s,l,u))},c}function cme(){return Yo.apply(vA(ipe,ope,Jl,mA,z2,a0,hA,dA,pd,ez).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dme(){return Yo.apply(vA(rpe,ape,Ql,gA,U2,F2,pA,fA,pd,tz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function W2(){var e=0,t=1,n,r,a,i,o=Ja,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(a===0?.5:(f=(i(f)-n)*a,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(h){var p,m;return arguments.length?([p,m]=h,o=f(p,m),u):[o(0),o(1)]}}return u.range=c(zp),u.rangeRound=c(nA),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return i=f,n=f(e),r=f(t),a=n===r?0:1/(r-n),u}}function Lc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nz(){var e=Mc(W2()(Ja));return e.copy=function(){return Lc(e,nz())},uu.apply(e,arguments)}function rz(){var e=oA(W2()).domain([1,10]);return e.copy=function(){return Lc(e,rz()).base(e.base())},uu.apply(e,arguments)}function az(){var e=sA(W2());return e.copy=function(){return Lc(e,az()).constant(e.constant())},uu.apply(e,arguments)}function yA(){var e=lA(W2());return e.copy=function(){return Lc(e,yA()).exponent(e.exponent())},uu.apply(e,arguments)}function fme(){return yA.apply(null,arguments).exponent(.5)}function iz(){var e=[],t=Ja;function n(r){if(r!=null&&!isNaN(r=+r))return t((t0(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(pc),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>Jfe(e,i/r))},n.copy=function(){return iz(t).domain(e)},uu.apply(n,arguments)}function q2(){var e=0,t=.5,n=1,r=1,a,i,o,s,l,u=Ja,c,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+c(v))-i)*(r*v<r*i?s:l),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,n]=v,a=c(e=+e),i=c(t=+t),o=c(n=+n),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),r=i<a?-1:1,p):[e,t,n]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function m(v){return function(y){var g,b,x;return arguments.length?([g,b,x]=y,u=khe(v,[g,b,x]),p):[u(0),u(.5),u(1)]}}return p.range=m(zp),p.rangeRound=m(nA),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return c=v,a=v(e),i=v(t),o=v(n),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),r=i<a?-1:1,p}}function oz(){var e=Mc(q2()(Ja));return e.copy=function(){return Lc(e,oz())},uu.apply(e,arguments)}function sz(){var e=oA(q2()).domain([.1,1,10]);return e.copy=function(){return Lc(e,sz()).base(e.base())},uu.apply(e,arguments)}function lz(){var e=sA(q2());return e.copy=function(){return Lc(e,lz()).constant(e.constant())},uu.apply(e,arguments)}function bA(){var e=lA(q2());return e.copy=function(){return Lc(e,bA()).exponent(e.exponent())},uu.apply(e,arguments)}function hme(){return bA.apply(null,arguments).exponent(.5)}const Jm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zj,scaleDiverging:oz,scaleDivergingLog:sz,scaleDivergingPow:bA,scaleDivergingSqrt:hme,scaleDivergingSymlog:lz,scaleIdentity:z9,scaleImplicit:o_,scaleLinear:F9,scaleLog:W9,scaleOrdinal:Qj,scalePoint:ehe,scalePow:uA,scaleQuantile:$9,scaleQuantize:V9,scaleRadial:H9,scaleSequential:nz,scaleSequentialLog:rz,scaleSequentialPow:yA,scaleSequentialQuantile:iz,scaleSequentialSqrt:fme,scaleSequentialSymlog:az,scaleSqrt:Ghe,scaleSymlog:q9,scaleThreshold:G9,scaleTime:cme,scaleUtc:dme,tickFormat:B9},Symbol.toStringTag,{value:"Module"}));var mf=e=>e.chartData,pme=Be([mf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),uz=(e,t,n,r)=>r?pme(e):mf(e);function xp(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(fo(t)&&fo(n))return!0}return!1}function NO(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function mme(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,a,i;if(fo(n))a=n;else if(typeof n=="function")return;if(fo(r))i=r;else if(typeof r=="function")return;var o=[a,i];if(xp(o))return o}}function gme(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(xp(r))return NO(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,s;if(a==="auto")t!=null&&(o=Math.min(...t));else if(st(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&yP.test(a)){var l=yP.exec(a);if(l==null||t==null)o=void 0;else{var u=+l[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(s=Math.max(...t));else if(st(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&bP.test(i)){var c=bP.exec(i);if(c==null||t==null)s=void 0;else{var f=+c[1];s=t[1]+f}}else s=t==null?void 0:t[1];var h=[o,s];if(xp(h))return t==null?h:NO(h,t,n)}}}var Up=1e9,vme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wA,Vn=!0,Vo="[DecimalError] ",Pd=Vo+"Invalid argument: ",xA=Vo+"Exponent out of range: ",Wp=Math.floor,od=Math.pow,yme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ki,Jr=1e7,Bn=7,cz=9007199254740991,Zx=Wp(cz/Bn),it={};it.absoluteValue=it.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};it.comparedTo=it.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};it.decimalPlaces=it.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Bn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};it.dividedBy=it.div=function(e){return Hl(this,new this.constructor(e))};it.dividedToIntegerBy=it.idiv=function(e){var t=this,n=t.constructor;return Cn(Hl(t,new n(e),0,1),n.precision)};it.equals=it.eq=function(e){return!this.cmp(e)};it.exponent=function(){return Er(this)};it.greaterThan=it.gt=function(e){return this.cmp(e)>0};it.greaterThanOrEqualTo=it.gte=function(e){return this.cmp(e)>=0};it.isInteger=it.isint=function(){return this.e>this.d.length-2};it.isNegative=it.isneg=function(){return this.s<0};it.isPositive=it.ispos=function(){return this.s>0};it.isZero=function(){return this.s===0};it.lessThan=it.lt=function(e){return this.cmp(e)<0};it.lessThanOrEqualTo=it.lte=function(e){return this.cmp(e)<1};it.logarithm=it.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ki))throw Error(Vo+"NaN");if(n.s<1)throw Error(Vo+(n.s?"NaN":"-Infinity"));return n.eq(Ki)?new r(0):(Vn=!1,t=Hl(uv(n,i),uv(e,i),i),Vn=!0,Cn(t,a))};it.minus=it.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hz(t,e):dz(t,(e.s=-e.s,e))};it.modulo=it.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Vo+"NaN");return n.s?(Vn=!1,t=Hl(n,e,0,1).times(e),Vn=!0,n.minus(t)):Cn(new r(n),a)};it.naturalExponential=it.exp=function(){return fz(this)};it.naturalLogarithm=it.ln=function(){return uv(this)};it.negated=it.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};it.plus=it.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dz(t,e):hz(t,(e.s=-e.s,e))};it.precision=it.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Pd+e);if(t=Er(a)+1,r=a.d.length-1,n=r*Bn+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};it.squareRoot=it.sqrt=function(){var e,t,n,r,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Vo+"NaN")}for(e=Er(s),Vn=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Ws(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Wp((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(a.toString()),n=l.precision,a=o=n+3;;)if(i=r,r=i.plus(Hl(s,i,o+2)).times(.5),Ws(i.d).slice(0,o)===(t=Ws(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Cn(i,n+1,0),i.times(i).eq(s)){r=i;break}}else if(t!="9999")break;o+=4}return Vn=!0,Cn(r,n)};it.times=it.mul=function(e){var t,n,r,a,i,o,s,l,u,c=this,f=c.constructor,h=c.d,p=(e=new f(e)).d;if(!c.s||!e.s)return new f(0);for(e.s*=c.s,n=c.e+e.e,l=h.length,u=p.length,l<u&&(i=h,h=p,p=i,o=l,l=u,u=o),i=[],o=l+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=l+r;a>r;)s=i[a]+p[r]*h[a-r-1]+t,i[a--]=s%Jr|0,t=s/Jr|0;i[a]=(i[a]+t)%Jr|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Vn?Cn(e,f.precision):e};it.toDecimalPlaces=it.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(rl(e,0,Up),t===void 0?t=r.rounding:rl(t,0,8),Cn(n,e+Er(n)+1,t))};it.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Xd(r,!0):(rl(e,0,Up),t===void 0?t=a.rounding:rl(t,0,8),r=Cn(new a(r),e+1,t),n=Xd(r,!0,e+1)),n};it.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?Xd(a):(rl(e,0,Up),t===void 0?t=i.rounding:rl(t,0,8),r=Cn(new i(a),e+Er(a)+1,t),n=Xd(r.abs(),!1,e+Er(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};it.toInteger=it.toint=function(){var e=this,t=e.constructor;return Cn(new t(e),Er(e)+1,t.rounding)};it.toNumber=function(){return+this};it.toPower=it.pow=function(e){var t,n,r,a,i,o,s=this,l=s.constructor,u=12,c=+(e=new l(e));if(!e.s)return new l(Ki);if(s=new l(s),!s.s){if(e.s<1)throw Error(Vo+"Infinity");return s}if(s.eq(Ki))return s;if(r=l.precision,e.eq(Ki))return Cn(s,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=s.s,o){if((n=c<0?-c:c)<=cz){for(a=new l(Ki),t=Math.ceil(r/Bn+4),Vn=!1;n%2&&(a=a.times(s),kO(a.d,t)),n=Wp(n/2),n!==0;)s=s.times(s),kO(s.d,t);return Vn=!0,e.s<0?new l(Ki).div(a):Cn(a,r)}}else if(i<0)throw Error(Vo+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Vn=!1,a=e.times(uv(s,r+u)),Vn=!0,a=fz(a),a.s=i,a};it.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=Er(a),r=Xd(a,n<=i.toExpNeg||n>=i.toExpPos)):(rl(e,1,Up),t===void 0?t=i.rounding:rl(t,0,8),a=Cn(new i(a),e,t),n=Er(a),r=Xd(a,e<=n||n<=i.toExpNeg,e)),r};it.toSignificantDigits=it.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(rl(e,1,Up),t===void 0?t=r.rounding:rl(t,0,8)),Cn(new r(n),e,t)};it.toString=it.valueOf=it.val=it.toJSON=it[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Er(e),n=e.constructor;return Xd(e,t<=n.toExpNeg||t>=n.toExpPos)};function dz(e,t){var n,r,a,i,o,s,l,u,c=e.constructor,f=c.precision;if(!e.s||!t.s)return t.s||(t=new c(e)),Vn?Cn(t,f):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(r=l,i=-i,s=u.length):(r=u,a=o,s=l.length),o=Math.ceil(f/Bn),s=o>s?o+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,r=u,u=l,l=r),n=0;i;)n=(l[--i]=l[i]+u[i]+n)/Jr|0,l[i]%=Jr;for(n&&(l.unshift(n),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,Vn?Cn(t,f):t}function rl(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Pd+e)}function Ws(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Bn-r.length,n&&(i+=zu(n)),i+=r;o=e[t],r=o+"",n=Bn-r.length,n&&(i+=zu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Hl=function(){function e(r,a){var i,o=0,s=r.length;for(r=r.slice();s--;)i=r[s]*a+o,r[s]=i%Jr|0,o=i/Jr|0;return o&&r.unshift(o),r}function t(r,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(r[s]!=a[s]){l=r[s]>a[s]?1:-1;break}return l}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*Jr+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A,P=r.constructor,T=r.s==a.s?1:-1,E=r.d,D=a.d;if(!r.s)return new P(r);if(!a.s)throw Error(Vo+"Division by zero");for(l=r.e-a.e,S=D.length,k=E.length,p=new P(T),m=p.d=[],u=0;D[u]==(E[u]||0);)++u;if(D[u]>(E[u]||0)&&--l,i==null?b=i=P.precision:o?b=i+(Er(r)-Er(a))+1:b=i,b<0)return new P(0);if(b=b/Bn+2|0,u=0,S==1)for(c=0,D=D[0],b++;(u<k||c)&&b--;u++)x=c*Jr+(E[u]||0),m[u]=x/D|0,c=x%D|0;else{for(c=Jr/(D[0]+1)|0,c>1&&(D=e(D,c),E=e(E,c),S=D.length,k=E.length),N=S,v=E.slice(0,S),y=v.length;y<S;)v[y++]=0;A=D.slice(),A.unshift(0),j=D[0],D[1]>=Jr/2&&++j;do c=0,s=t(D,v,S,y),s<0?(g=v[0],S!=y&&(g=g*Jr+(v[1]||0)),c=g/j|0,c>1?(c>=Jr&&(c=Jr-1),f=e(D,c),h=f.length,y=v.length,s=t(f,v,h,y),s==1&&(c--,n(f,S<h?A:D,h))):(c==0&&(s=c=1),f=D.slice()),h=f.length,h<y&&f.unshift(0),n(v,f,y),s==-1&&(y=v.length,s=t(D,v,S,y),s<1&&(c++,n(v,S<y?A:D,y))),y=v.length):s===0&&(c++,v=[0]),m[u++]=c,s&&v[0]?v[y++]=E[N]||0:(v=[E[N]],y=1);while((N++<k||v[0]!==void 0)&&b--)}return m[0]||m.shift(),p.e=l,Cn(p,o?i+Er(p)+1:i)}}();function fz(e,t){var n,r,a,i,o,s,l=0,u=0,c=e.constructor,f=c.precision;if(Er(e)>16)throw Error(xA+Er(e));if(!e.s)return new c(Ki);for(t==null?(Vn=!1,s=f):s=t,o=new c(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(od(2,u))/Math.LN10*2+5|0,s+=r,n=a=i=new c(Ki),c.precision=s;;){if(a=Cn(a.times(e),s),n=n.times(++l),o=i.plus(Hl(a,n,s)),Ws(o.d).slice(0,s)===Ws(i.d).slice(0,s)){for(;u--;)i=Cn(i.times(i),s);return c.precision=f,t==null?(Vn=!0,Cn(i,f)):i}i=o}}function Er(e){for(var t=e.e*Bn,n=e.d[0];n>=10;n/=10)t++;return t}function EN(e,t,n){if(t>e.LN10.sd())throw Vn=!0,n&&(e.precision=n),Error(Vo+"LN10 precision limit exceeded");return Cn(new e(e.LN10),t)}function zu(e){for(var t="";e--;)t+="0";return t}function uv(e,t){var n,r,a,i,o,s,l,u,c,f=1,h=10,p=e,m=p.d,v=p.constructor,y=v.precision;if(p.s<1)throw Error(Vo+(p.s?"NaN":"-Infinity"));if(p.eq(Ki))return new v(0);if(t==null?(Vn=!1,u=y):u=t,p.eq(10))return t==null&&(Vn=!0),EN(v,u);if(u+=h,v.precision=u,n=Ws(m),r=n.charAt(0),i=Er(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Ws(p.d),r=n.charAt(0),f++;i=Er(p),r>1?(p=new v("0."+n),i++):p=new v(r+"."+n.slice(1))}else return l=EN(v,u+2,y).times(i+""),p=uv(new v(r+"."+n.slice(1)),u-h).plus(l),v.precision=y,t==null?(Vn=!0,Cn(p,y)):p;for(s=o=p=Hl(p.minus(Ki),p.plus(Ki),u),c=Cn(p.times(p),u),a=3;;){if(o=Cn(o.times(c),u),l=s.plus(Hl(o,new v(a),u)),Ws(l.d).slice(0,u)===Ws(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(EN(v,u+2,y).times(i+""))),s=Hl(s,new v(f),u),v.precision=y,t==null?(Vn=!0,Cn(s,y)):s;s=l,a+=2}}function SO(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Wp(n/Bn),e.d=[],r=(n+1)%Bn,n<0&&(r+=Bn),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Bn;r<a;)e.d.push(+t.slice(r,r+=Bn));t=t.slice(r),r=Bn-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Vn&&(e.e>Zx||e.e<-Zx))throw Error(xA+n)}else e.s=0,e.e=0,e.d=[0];return e}function Cn(e,t,n){var r,a,i,o,s,l,u,c,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Bn,a=t,u=f[c=0];else{if(c=Math.ceil((r+1)/Bn),i=f.length,c>=i)return e;for(u=i=f[c],o=1;i>=10;i/=10)o++;r%=Bn,a=r-Bn+o}if(n!==void 0&&(i=od(10,o-a-1),s=u/i%10|0,l=t<0||f[c+1]!==void 0||u%i,l=n<4?(s||l)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?a>0?u/od(10,o-a):0:f[c-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return l?(i=Er(e),f.length=1,t=t-i-1,f[0]=od(10,(Bn-t%Bn)%Bn),e.e=Wp(-t/Bn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=c,i=1,c--):(f.length=c+1,i=od(10,Bn-r),f[c]=a>0?(u/od(10,o-a)%od(10,a)|0)*i:0),l)for(;;)if(c==0){(f[0]+=i)==Jr&&(f[0]=1,++e.e);break}else{if(f[c]+=i,f[c]!=Jr)break;f[c--]=0,i=1}for(r=f.length;f[--r]===0;)f.pop();if(Vn&&(e.e>Zx||e.e<-Zx))throw Error(xA+Er(e));return e}function hz(e,t){var n,r,a,i,o,s,l,u,c,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Vn?Cn(t,p):t;if(l=e.d,f=t.d,r=t.e,u=e.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,s=f.length):(n=f,r=u,s=l.length),a=Math.max(Math.ceil(p/Bn),s)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=l.length,s=f.length,c=a<s,c&&(s=a),a=0;a<s;a++)if(l[a]!=f[a]){c=l[a]<f[a];break}o=0}for(c&&(n=l,l=f,f=n,t.s=-t.s),s=l.length,a=f.length-s;a>0;--a)l[s++]=0;for(a=f.length;a>o;){if(l[--a]<f[a]){for(i=a;i&&l[--i]===0;)l[i]=Jr-1;--l[i],l[a]+=Jr}l[a]-=f[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,Vn?Cn(t,p):t):new h(0)}function Xd(e,t,n){var r,a=Er(e),i=Ws(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+zu(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+zu(-a-1)+i,n&&(r=n-o)>0&&(i+=zu(r))):a>=o?(i+=zu(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+zu(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=zu(r))),e.s<0?"-"+i:i}function kO(e,t){if(e.length>t)return e.length=t,!0}function pz(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Pd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return SO(o,i.toString())}else if(typeof i!="string")throw Error(Pd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,yme.test(i))SO(o,i);else throw Error(Pd+i)}if(a.prototype=it,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=pz,a.config=a.set=bme,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function bme(e){if(!e||typeof e!="object")throw Error(Vo+"Object expected");var t,n,r,a=["precision",1,Up,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Wp(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Pd+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Pd+n+": "+r);return this}var wA=pz(vme);Ki=new wA(1);const gn=wA;var xme=e=>e,mz={"@@functional/placeholder":!0},gz=e=>e===mz,_O=e=>function t(){return arguments.length===0||arguments.length===1&&gz(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},vz=(e,t)=>e===1?t:_O(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.filter(o=>o!==mz).length;return i>=e?t(...r):vz(e-i,_O(function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var u=r.map(c=>gz(c)?s.shift():c);return t(...u,...s)}))}),H2=e=>vz(e.length,e),c_=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},wme=H2((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Nme=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return xme;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((s,l)=>l(s),i(...arguments))}},d_=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),yz=e=>{var t=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t&&a.every((o,s)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[s])})||(t=a,n=e(...a)),n}};function bz(e){var t;return e===0?t=1:t=Math.floor(new gn(e).abs().log(10).toNumber())+1,t}function xz(e,t,n){for(var r=new gn(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}H2((e,t,n)=>{var r=+e,a=+t;return r+n*(a-r)});H2((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});H2((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var wz=e=>{var[t,n]=e,[r,a]=[t,n];return t>n&&([r,a]=[n,t]),[r,a]},Nz=(e,t,n)=>{if(e.lte(0))return new gn(0);var r=bz(e.toNumber()),a=new gn(10).pow(r),i=e.div(a),o=r!==1?.05:.1,s=new gn(Math.ceil(i.div(o).toNumber())).add(n).mul(o),l=s.mul(a);return t?new gn(l.toNumber()):new gn(Math.ceil(l.toNumber()))},Sme=(e,t,n)=>{var r=new gn(1),a=new gn(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new gn(10).pow(bz(e)-1),a=new gn(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new gn(Math.floor(e)))}else e===0?a=new gn(Math.floor((t-1)/2)):n||(a=new gn(Math.floor(e)));var o=Math.floor((t-1)/2),s=Nme(wme(l=>a.add(new gn(l-o).mul(r)).toNumber()),c_);return s(0,t)},Sz=function(t,n,r,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new gn(0),tickMin:new gn(0),tickMax:new gn(0)};var o=Nz(new gn(n).sub(t).div(r-1),a,i),s;t<=0&&n>=0?s=new gn(0):(s=new gn(t).add(n).div(2),s=s.sub(new gn(s).mod(o)));var l=Math.ceil(s.sub(t).div(o).toNumber()),u=Math.ceil(new gn(n).sub(s).div(o).toNumber()),c=l+u+1;return c>r?Sz(t,n,r,a,i+1):(c<r&&(u=n>0?u+(r-c):u,l=n>0?l:l+(r-c)),{step:o,tickMin:s.sub(new gn(l).mul(o)),tickMax:s.add(new gn(u).mul(o))})};function kme(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(r,2),[o,s]=wz([t,n]);if(o===-1/0||s===1/0){var l=s===1/0?[o,...c_(0,r-1).map(()=>1/0)]:[...c_(0,r-1).map(()=>-1/0),s];return t>n?d_(l):l}if(o===s)return Sme(o,r,a);var{step:u,tickMin:c,tickMax:f}=Sz(o,s,i,a,0),h=xz(c,f.add(new gn(.1).mul(u)),u);return t>n?d_(h):h}function _me(e,t){var[n,r]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=wz([n,r]);if(i===-1/0||o===1/0)return[n,r];if(i===o)return[i];var s=Math.max(t,2),l=Nz(new gn(o).sub(i).div(s-1),a,0),u=[...xz(new gn(i),new gn(o),l),o];return a===!1&&(u=u.map(c=>Math.round(c))),n>r?d_(u):u}var jme=yz(kme),Ame=yz(_me),kz=e=>e.rootProps.maxBarSize,Cme=e=>e.rootProps.barGap,_z=e=>e.rootProps.barCategoryGap,Eme=e=>e.rootProps.barSize,$2=e=>e.rootProps.stackOffset,NA=e=>e.options.chartName,SA=e=>e.rootProps.syncId,jz=e=>e.rootProps.syncMethod,kA=e=>e.options.eventEmitter,Dl={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Hi={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},V2=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Dme={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Dl.angleAxisId,includeHidden:!1,name:void 0,reversed:Dl.reversed,scale:Dl.scale,tick:Dl.tick,tickCount:void 0,ticks:void 0,type:Dl.type,unit:void 0},Pme={allowDataOverflow:Hi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hi.scale,tick:Hi.tick,tickCount:Hi.tickCount,ticks:void 0,type:Hi.type,unit:void 0},Ome={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Dl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dl.scale,tick:Dl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Tme={allowDataOverflow:Hi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hi.scale,tick:Hi.tick,tickCount:Hi.tickCount,ticks:void 0,type:"category",unit:void 0},_A=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Ome:Dme,jA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Tme:Pme,G2=e=>e.polarOptions,AA=Be([su,lu,oa],Pce),Az=Be([G2,AA],(e,t)=>{if(e!=null)return ps(e.innerRadius,t,0)}),Cz=Be([G2,AA],(e,t)=>{if(e!=null)return ps(e.outerRadius,t,t*.8)}),Mme=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},Ez=Be([G2],Mme);Be([_A,Ez],V2);var Dz=Be([AA,Az,Cz],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Be([jA,Dz],V2);var Lme=Be([En,G2,Az,Cz,su,lu],(e,t,n,r,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:s,startAngle:l,endAngle:u}=t;return{cx:ps(o,a,a/2),cy:ps(s,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:u,clockWise:!1}}}),la=(e,t)=>t,K2=(e,t,n)=>n;function jO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function e1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(n),!0).forEach(function(r){Ime(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ime(e,t,n){return(t=Rme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rme(e){var t=Bme(e,"string");return typeof t=="symbol"?t:t+""}function Bme(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f_=[0,"auto"],zi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},cu=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??zi},Ui={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:f_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:M2},Ic=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??Ui},Fme={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},CA=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??Fme},Ai=(e,t,n)=>{switch(t){case"xAxis":return cu(e,n);case"yAxis":return Ic(e,n);case"zAxis":return CA(e,n);case"angleAxis":return _A(e,n);case"radiusAxis":return jA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},zme=(e,t,n)=>{switch(t){case"xAxis":return cu(e,n);case"yAxis":return Ic(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},i0=(e,t,n)=>{switch(t){case"xAxis":return cu(e,n);case"yAxis":return Ic(e,n);case"angleAxis":return _A(e,n);case"radiusAxis":return jA(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Pz=e=>e.graphicalItems.countOfBars>0;function Oz(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var EA=e=>e.graphicalItems.cartesianItems,Ume=Be([la,K2],Oz),Tz=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),o0=Be([EA,Ai,Ume],Tz),Mz=e=>e.filter(t=>t.stackId===void 0),Wme=Be([o0],Mz),Lz=e=>e.map(t=>t.data).filter(Boolean).flat(1),qme=Be([o0],Lz),Iz=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:a}=t;return e.length>0?e:n.slice(r,a+1)},Y2=Be([qme,uz],Iz),Rz=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:io(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(a=>({value:io(a,r)}))):e.map(r=>({value:r})),X2=Be([Y2,Ai,o0],Rz);function Bz(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function gf(e){return e.filter(t=>tl(t)||t instanceof Date).map(Number).filter(t=>lo(t)===!1)}function Hme(e,t,n){return!n||typeof t!="number"||lo(t)?[]:n.length?gf(n.flatMap(r=>{var a=io(e,r.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!fo(i)||!fo(o)))return[t-i,t+o]})):[]}var Fz=(e,t,n)=>{var r={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),r);return Object.fromEntries(Object.entries(a).map(i=>{var[o,s]=i,l=s.map(u=>u.dataKey);return[o,{stackedData:Gce(e,l,n),graphicalItems:s}]}))},h_=Be([Y2,o0,$2],Fz),zz=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:a}=t;if(n!=="zAxis"){var i=Jce(e,r,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},$me=Be([h_,mf,la],zz),Uz=(e,t,n,r)=>n.length>0?e.flatMap(a=>n.flatMap(i=>{var o,s,l=(o=i.errorBars)===null||o===void 0?void 0:o.filter(c=>Bz(r,c)),u=io(a,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:u,errorDomain:Hme(a,u,l)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:io(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),Vme=Be(Y2,Ai,Wme,la,Uz);function Gme(e){var{value:t}=e;if(tl(t)||t instanceof Date)return t}var Kme=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=gf(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Yme=(e,t,n)=>{var r=e.map(Gme).filter(a=>a!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&UB(r))?C9(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},DA=e=>{var t;if(e==null||!("domain"in e))return f_;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=gf(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:f_},PA=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),s=Math.max(...i);return[o,s]}},Wz=e=>e.referenceElements.dots,qp=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Xme=Be([Wz,la,K2],qp),qz=e=>e.referenceElements.areas,Jme=Be([qz,la,K2],qp),Hz=e=>e.referenceElements.lines,Qme=Be([Hz,la,K2],qp),$z=(e,t)=>{var n=gf(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Zme=Be(Xme,la,$z),Vz=(e,t)=>{var n=gf(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ege=Be([Jme,la],Vz),Gz=(e,t)=>{var n=gf(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},tge=Be(Qme,la,Gz),nge=Be(Zme,tge,ege,(e,t,n)=>PA(e,n,t)),rge=Be([Ai],DA),Kz=(e,t,n,r,a)=>{var i=mme(t,e.allowDataOverflow);return i??gme(t,PA(n,a,Kme(r)),e.allowDataOverflow)},age=Be([Ai,rge,$me,Vme,nge],Kz),ige=[0,1],Yz=(e,t,n,r,a,i,o)=>{if(!(e==null||n==null||n.length===0)){var{dataKey:s,type:l}=e,u=ff(t,i);return u&&s==null?C9(0,n.length):l==="category"?Yme(r,e,u):a==="expand"?ige:o}},OA=Be([Ai,En,Y2,X2,$2,la,age],Yz),Xz=(e,t,n,r,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var s="scale".concat(Qv(i));return s in Jm?s:"point"}}},s0=Be([Ai,En,Pz,NA,la],Xz);function oge(e){if(e!=null){if(e in Jm)return Jm[e]();var t="scale".concat(Qv(e));if(t in Jm)return Jm[t]()}}function TA(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var a=oge(t);if(a!=null){var i=a.domain(n).range(r);return Wce(i),i}}}var Jz=(e,t,n)=>{var r=DA(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&xp(e))return jme(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xp(e))return Ame(e,t.tickCount,t.allowDecimals)}},MA=Be([OA,i0,s0],Jz),Qz=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xp(t)&&Array.isArray(n)&&n.length>0){var a=t[0],i=n[0],o=t[1],s=n[n.length-1];return[Math.min(a,i),Math.max(o,s)]}return t},sge=Be([Ai,OA,MA,la],Qz),lge=Be(X2,Ai,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(gf(e.map(s=>s.value))).sort((s,l)=>s-l);if(r.length<2)return 1/0;var a=r[r.length-1]-r[0];if(a===0)return 1/0;for(var i=0;i<r.length-1;i++){var o=r[i+1]-r[i];n=Math.min(n,o)}return n/a}}),Zz=Be(lge,En,_z,oa,(e,t,n,r)=>r,(e,t,n,r,a)=>{if(!fo(e))return 0;var i=t==="vertical"?r.height:r.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=ps(n,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),uge=(e,t)=>{var n=cu(e,t);return n==null||typeof n.padding!="string"?0:Zz(e,"xAxis",t,n.padding)},cge=(e,t)=>{var n=Ic(e,t);return n==null||typeof n.padding!="string"?0:Zz(e,"yAxis",t,n.padding)},dge=Be(cu,uge,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((n=a.left)!==null&&n!==void 0?n:0)+t,right:((r=a.right)!==null&&r!==void 0?r:0)+t}}),fge=Be(Ic,cge,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((n=a.top)!==null&&n!==void 0?n:0)+t,bottom:((r=a.bottom)!==null&&r!==void 0?r:0)+t}}),hge=Be([oa,dge,I2,L2,(e,t,n)=>n],(e,t,n,r,a)=>{var{padding:i}=r;return a?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),pge=Be([oa,En,fge,I2,L2,(e,t,n)=>n],(e,t,n,r,a,i)=>{var{padding:o}=a;return i?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),l0=(e,t,n,r)=>{var a;switch(t){case"xAxis":return hge(e,n,r);case"yAxis":return pge(e,n,r);case"zAxis":return(a=CA(e,n))===null||a===void 0?void 0:a.range;case"angleAxis":return Ez(e);case"radiusAxis":return Dz(e,n);default:return}},eU=Be([Ai,l0],V2),Hp=Be([Ai,s0,sge,eU],TA);Be(o0,la,(e,t)=>e.flatMap(n=>{var r;return(r=n.errorBars)!==null&&r!==void 0?r:[]}).filter(n=>Bz(t,n)));function tU(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var J2=(e,t)=>t,Q2=(e,t,n)=>n,mge=Be(qj,J2,Q2,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(tU)),gge=Be(Hj,J2,Q2,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(tU)),nU=(e,t)=>({width:e.width,height:t.height}),vge=(e,t)=>{var n=typeof t.width=="number"?t.width:M2;return{width:n,height:e.height}},rU=Be(oa,cu,nU),yge=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},bge=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},xge=Be(lu,oa,mge,J2,Q2,(e,t,n,r,a)=>{var i={},o;return n.forEach(s=>{var l=nU(t,s);o==null&&(o=yge(t,r,e));var u=r==="top"&&!a||r==="bottom"&&a;i[s.id]=o-Number(u)*l.height,o+=(u?-1:1)*l.height}),i}),wge=Be(su,oa,gge,J2,Q2,(e,t,n,r,a)=>{var i={},o;return n.forEach(s=>{var l=vge(t,s);o==null&&(o=bge(t,r,e));var u=r==="left"&&!a||r==="right"&&a;i[s.id]=o-Number(u)*l.width,o+=(u?-1:1)*l.width}),i}),Nge=(e,t)=>{var n=oa(e),r=cu(e,t);if(r!=null){var a=xge(e,r.orientation,r.mirror),i=a[t];return i==null?{x:n.left,y:0}:{x:n.left,y:i}}},Sge=(e,t)=>{var n=oa(e),r=Ic(e,t);if(r!=null){var a=wge(e,r.orientation,r.mirror),i=a[t];return i==null?{x:0,y:n.top}:{x:i,y:n.top}}},aU=Be(oa,Ic,(e,t)=>{var n=typeof t.width=="number"?t.width:M2;return{width:n,height:e.height}}),AO=(e,t,n)=>{switch(t){case"xAxis":return rU(e,n).width;case"yAxis":return aU(e,n).height;default:return}},iU=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=n,s=ff(e,r),l=t.map(u=>u.value);if(o&&s&&i==="category"&&a&&UB(l))return l}},LA=Be([En,X2,Ai,la],iU),oU=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:i}=n,o=ff(e,r);if(o&&(a==="number"||i!=="auto"))return t.map(s=>s.value)}},IA=Be([En,X2,i0,la],oU),CO=Be([En,zme,s0,Hp,LA,IA,l0,MA,la],(e,t,n,r,a,i,o,s,l)=>{if(t==null)return null;var u=ff(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:s,range:o,realScaleType:n,scale:r}}),kge=(e,t,n,r,a,i,o,s,l)=>{if(!(t==null||r==null)){var u=ff(e,l),{type:c,ticks:f,tickCount:h}=t,p=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,m=c==="category"&&r.bandwidth?r.bandwidth()/p:0;m=l==="angleAxis"&&i!=null&&i.length>=2?vi(i[0]-i[1])*2*m:m;var v=f||a;if(v){var y=v.map((g,b)=>{var x=o?o.indexOf(g):g;return{index:b,coordinate:r(x)+m,value:g,offset:m}});return y.filter(g=>!lo(g.coordinate))}return u&&s?s.map((g,b)=>({coordinate:r(g)+m,value:g,index:b,offset:m})):r.ticks?r.ticks(h).map(g=>({coordinate:r(g)+m,value:g,offset:m})):r.domain().map((g,b)=>({coordinate:r(g)+m,value:o?o[g]:g,index:b,offset:m}))}},sU=Be([En,i0,s0,Hp,MA,l0,LA,IA,la],kge),_ge=(e,t,n,r,a,i,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var s=ff(e,o),{tickCount:l}=t,u=0;return u=o==="angleAxis"&&(r==null?void 0:r.length)>=2?vi(r[0]-r[1])*2*u:u,s&&i?i.map((c,f)=>({coordinate:n(c)+u,value:c,index:f,offset:u})):n.ticks?n.ticks(l).map(c=>({coordinate:n(c)+u,value:c,offset:u})):n.domain().map((c,f)=>({coordinate:n(c)+u,value:a?a[c]:c,index:f,offset:u}))}},wp=Be([En,i0,Hp,l0,LA,IA,la],_ge),Sc=Be(Ai,Hp,(e,t)=>{if(!(e==null||t==null))return e1(e1({},e),{},{scale:t})}),jge=Be([Ai,s0,OA,eU],TA);Be((e,t,n)=>CA(e,n),jge,(e,t)=>{if(!(e==null||t==null))return e1(e1({},e),{},{scale:t})});var Age=Be([En,qj,Hj],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),lU=e=>e.options.defaultTooltipEventType,uU=e=>e.options.validateTooltipEventTypes;function cU(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function RA(e,t){var n=lU(e),r=uU(e);return cU(t,n,r)}function Cge(e){return yt(t=>RA(t,e))}var dU=(e,t)=>{var n,r=Number(t);if(!(lo(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Ege=e=>e.tooltip.settings,$u={active:!1,index:null,dataKey:void 0,coordinate:void 0},Dge={itemInteraction:{click:$u,hover:$u},axisInteraction:{click:$u,hover:$u},keyboardInteraction:$u,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},fU=Ko({name:"tooltip",initialState:Dge,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=ql(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Pge,removeTooltipEntrySettings:Oge,setTooltipSettingsState:Tge,setActiveMouseOverItemIndex:hU,mouseLeaveItem:Mge,mouseLeaveChart:pU,setActiveClickItemIndex:Lge,setMouseOverAxisIndex:mU,setMouseClickAxisIndex:Ige,setSyncInteraction:p_,setKeyboardInteraction:m_}=fU.actions,Rge=fU.reducer;function EO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EO(Object(n),!0).forEach(function(r){Bge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bge(e,t,n){return(t=Fge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fge(e){var t=zge(e,"string");return typeof t=="symbol"?t:t+""}function zge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uge(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Wge(e){return e.index!=null}var gU=(e,t,n,r)=>{if(t==null)return $u;var a=Uge(e,t,n);if(a==null)return $u;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Wge(a)){if(i)return Vy(Vy({},a),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Vy(Vy({},$u),{},{coordinate:a.coordinate})},BA=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!fo(r))return n;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(r,i)))},vU=(e,t,n,r,a,i,o,s)=>{if(!(i==null||s==null)){var l=o[0],u=l==null?void 0:s(l.positions,i);if(u!=null)return u;var c=a==null?void 0:a[Number(i)];if(c)switch(n){case"horizontal":return{x:c.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:c.coordinate}}}},yU=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return n==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},u0=e=>e.options.tooltipPayloadSearcher,$p=e=>e.tooltip;function DO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(n),!0).forEach(function(r){qge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qge(e,t,n){return(t=Hge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hge(e){var t=$ge(e,"string");return typeof t=="symbol"?t:t+""}function $ge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vge(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Gge(e,t){return e??t}var bU=(e,t,n,r,a,i,o)=>{if(!(t==null||i==null)){var{chartData:s,computedData:l,dataStartIndex:u,dataEndIndex:c}=n,f=[];return e.reduce((h,p)=>{var m,{dataDefinedOnItem:v,settings:y}=p,g=Gge(v,s),b=Vge(g,u,c),x=(m=y==null?void 0:y.dataKey)!==null&&m!==void 0?m:r==null?void 0:r.dataKey,N=y==null?void 0:y.nameKey,k;if(r!=null&&r.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?k=zse(b,r.dataKey,a):k=i(b,t,l,N),Array.isArray(k))k.forEach(S=>{var A=PO(PO({},y),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});h.push(xP({tooltipEntrySettings:A,dataKey:S.dataKey,payload:S.payload,value:io(S.payload,S.dataKey),name:S.name}))});else{var j;h.push(xP({tooltipEntrySettings:y,dataKey:x,payload:k,value:io(k,x),name:(j=io(k,N))!==null&&j!==void 0?j:y==null?void 0:y.name}))}return h},f)}},ua=e=>{var t=En(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Vp=e=>e.tooltip.settings.axisId,ka=e=>{var t=ua(e),n=Vp(e);return i0(e,t,n)},FA=Be([ka,En,Pz,NA,ua],Xz),Kge=Be([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Yge=Be([ua,Vp],Oz),Z2=Be([Kge,ka,Yge],Tz),Xge=Be([Z2],Lz),vf=Be([Xge,mf],Iz),zA=Be([vf,ka,Z2],Rz),Jge=Be([ka],DA),Qge=Be([vf,Z2,$2],Fz),Zge=Be([Qge,mf,ua],zz),eve=Be([Z2],Mz),tve=Be([vf,ka,eve,ua],Uz),nve=Be([Wz,ua,Vp],qp),rve=Be([nve,ua],$z),ave=Be([qz,ua,Vp],qp),ive=Be([ave,ua],Vz),ove=Be([Hz,ua,Vp],qp),sve=Be([ove,ua],Gz),lve=Be([rve,sve,ive],PA),uve=Be([ka,Jge,Zge,tve,lve],Kz),xU=Be([ka,En,vf,zA,$2,ua,uve],Yz),cve=Be([xU,ka,FA],Jz),dve=Be([ka,xU,cve,ua],Qz),wU=e=>{var t=ua(e),n=Vp(e),r=!1;return l0(e,t,n,r)},NU=Be([ka,wU],V2),SU=Be([ka,FA,dve,NU],TA),fve=Be([En,zA,ka,ua],iU),hve=Be([En,zA,ka,ua],oU),pve=(e,t,n,r,a,i,o,s)=>{if(t){var{type:l}=t,u=ff(e,s);if(r){var c=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/c:0;return f=s==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?vi(a[0]-a[1])*2*f:f,u&&o?o.map((h,p)=>({coordinate:r(h)+f,value:h,index:p,offset:f})):r.domain().map((h,p)=>({coordinate:r(h)+f,value:i?i[h]:h,index:p,offset:f}))}}},du=Be([En,ka,FA,SU,wU,fve,hve,ua],pve),UA=Be([lU,uU,Ege],(e,t,n)=>cU(n.shared,e,t)),kU=e=>e.tooltip.settings.trigger,WA=e=>e.tooltip.settings.defaultIndex,ew=Be([$p,UA,kU,WA],gU),Np=Be([ew,vf],BA),_U=Be([du,Np],dU),jU=Be([ew],e=>{if(e)return e.dataKey}),AU=Be([$p,UA,kU,WA],yU),mve=Be([su,lu,En,oa,du,WA,AU,u0],vU),gve=Be([ew,mve],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),vve=Be([ew],e=>e.active),yve=Be([AU,Np,mf,ka,_U,u0,UA],bU);Be([yve],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function OO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function TO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(n),!0).forEach(function(r){bve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bve(e,t,n){return(t=xve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xve(e){var t=wve(e,"string");return typeof t=="symbol"?t:t+""}function wve(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nve=()=>yt(ka),Sve=()=>{var e=Nve(),t=yt(du),n=yt(SU);return Wj(TO(TO({},e),{},{scale:n}),t)},kve=()=>yt(NA),qA=(e,t)=>t,CU=(e,t,n)=>n,HA=(e,t,n,r)=>r,_ve=Be(du,e=>A2(e,t=>t.coordinate)),$A=Be([$p,qA,CU,HA],gU),EU=Be([$A,vf],BA),jve=(e,t,n)=>{if(t!=null){var r=$p(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},DU=Be([$p,qA,CU,HA],yU),t1=Be([su,lu,En,oa,du,HA,DU,u0],vU),Ave=Be([$A,t1],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),PU=Be(du,EU,dU),Cve=Be([DU,EU,mf,ka,PU,u0,qA],bU),Eve=Be([$A],e=>({isActive:e.active,activeIndex:e.index})),Dve=(e,t,n,r,a,i,o,s)=>{if(!(!e||!t||!r||!a||!i)){var l=Qce(e.chartX,e.chartY,t,n,s);if(l){var u=ede(l,t),c=zce(u,o,i,r,a),f=Zce(t,i,c,l);return{activeIndex:String(c),activeCoordinate:f}}}};function g_(){return g_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g_.apply(null,arguments)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(r){Pve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pve(e,t,n){return(t=Ove(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ove(e){var t=Tve(e,"string");return typeof t=="symbol"?t:t+""}function Tve(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mve(e){var{coordinate:t,payload:n,index:r,offset:a,tooltipAxisBandSize:i,layout:o,cursor:s,tooltipEventType:l,chartName:u}=e,c=t,f=n,h=r;if(!s||!c||u!=="ScatterChart"&&l!=="axis")return null;var p,m;if(u==="ScatterChart")p=c,m=nfe;else if(u==="BarChart")p=rfe(o,c,a,i),m=w9;else if(o==="radial"){var{cx:v,cy:y,radius:g,startAngle:b,endAngle:x}=N9(c);p={cx:v,cy:y,startAngle:b,endAngle:x,innerRadius:g,outerRadius:g},m=k9}else p={points:Bfe(o,c,a)},m=Gde;var N=typeof s=="object"&&"className"in s?s.className:void 0,k=Gy(Gy(Gy(Gy({stroke:"#ccc",pointerEvents:"none"},a),p),Hn(s,!1)),{},{payload:f,payloadIndex:h,className:cn("recharts-tooltip-cursor",N)});return M.isValidElement(s)?M.cloneElement(s,k):M.createElement(m,k)}function Lve(e){var t=Sve(),n=d9(),r=Kj(),a=kve();return M.createElement(Mve,g_({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:a}))}var OU=M.createContext(null),Ive=()=>M.useContext(OU),TU={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new a(c,f||l,h),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},s.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,h,p,m){var v=n?n+u:u;if(!this._events[v])return!1;var y=this._events[v],g=arguments.length,b,x;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,f),!0;case 4:return y.fn.call(y.context,c,f,h),!0;case 5:return y.fn.call(y.context,c,f,h,p),!0;case 6:return y.fn.call(y.context,c,f,h,p,m),!0}for(x=1,b=new Array(g-1);x<g;x++)b[x-1]=arguments[x];y.fn.apply(y.context,b)}else{var N=y.length,k;for(x=0;x<N;x++)switch(y[x].once&&this.removeListener(u,y[x].fn,void 0,!0),g){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,c);break;case 3:y[x].fn.call(y[x].context,c,f);break;case 4:y[x].fn.call(y[x].context,c,f,h);break;default:if(!b)for(k=1,b=new Array(g-1);k<g;k++)b[k-1]=arguments[k];y[x].fn.apply(y[x].context,b)}}return!0},s.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!c)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===c&&(!h||m.once)&&(!f||m.context===f)&&o(this,p);else{for(var v=0,y=[],g=m.length;v<g;v++)(m[v].fn!==c||h&&!m[v].once||f&&m[v].context!==f)&&y.push(m[v]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(TU);var Rve=TU.exports;const Bve=ms(Rve);var cv=new Bve,v_="recharts.syncEvent.tooltip",LO="recharts.syncEvent.brush";function Fve(e,t){if(t){var n=Number.parseInt(t,10);if(!lo(n))return e==null?void 0:e[n]}}var zve={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},MU=Ko({name:"options",initialState:zve,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Uve=MU.reducer,{createEventEmitter:Wve}=MU.actions;function qve(e){return e.tooltip.syncInteraction}var Hve={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},LU=Ko({name:"chartData",initialState:Hve,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:IO,setDataStartEndIndexes:$ve,setComputedData:Hwe}=LU.actions,Vve=LU.reducer,IU=()=>{};function Gve(){var e=yt(SA),t=yt(kA),n=br(),r=yt(jz),a=yt(du),i=Kj(),o=$j(),s=yt(l=>l.rootProps.className);M.useEffect(()=>{if(e==null)return IU;var l=(u,c,f)=>{if(t!==f&&e===u){if(r==="index"){n(c);return}if(a!=null){var h;if(typeof r=="function"){var p={activeTooltipIndex:c.payload.index==null?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:c.payload.index==null?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},m=r(a,p);h=a[m]}else r==="value"&&(h=a.find(j=>String(j.value)===c.payload.label));var{coordinate:v}=c.payload;if(h==null||c.payload.active===!1||v==null||o==null){n(p_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:y,y:g}=v,b=Math.min(y,o.x+o.width),x=Math.min(g,o.y+o.height),N={x:i==="horizontal"?h.coordinate:b,y:i==="horizontal"?x:h.coordinate},k=p_({active:c.payload.active,coordinate:N,dataKey:c.payload.dataKey,index:String(h.index),label:c.payload.label});n(k)}}};return cv.on(v_,l),()=>{cv.off(v_,l)}},[s,n,t,e,r,a,i,o])}function Kve(){var e=yt(SA),t=yt(kA),n=br();M.useEffect(()=>{if(e==null)return IU;var r=(a,i,o)=>{t!==o&&e===a&&n($ve(i))};return cv.on(LO,r),()=>{cv.off(LO,r)}},[n,t,e])}function Yve(){var e=br();M.useEffect(()=>{e(Wve())},[e]),Gve(),Kve()}function Xve(e,t,n,r,a,i){var o=yt(h=>jve(h,e,t)),s=yt(kA),l=yt(SA),u=yt(jz),c=yt(qve),f=c==null?void 0:c.active;M.useEffect(()=>{if(!f&&l!=null&&s!=null){var h=p_({active:i,coordinate:n,dataKey:o,index:a,label:typeof r=="number"?String(r):r});cv.emit(v_,l,h,s)}},[f,n,o,a,r,s,l,u,i])}function RO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function BO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(n),!0).forEach(function(r){Jve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jve(e,t,n){return(t=Qve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qve(e){var t=Zve(e,"string");return typeof t=="symbol"?t:t+""}function Zve(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e0e(e){return e.dataKey}function t0e(e,t){return M.isValidElement(e)?M.cloneElement(e,t):typeof e=="function"?M.createElement(e,t):M.createElement(Tde,t)}var FO=[],n0e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!e0.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function r0e(e){var t=Tc(e,n0e),{active:n,allowEscapeViewBox:r,animationDuration:a,animationEasing:i,content:o,filterNull:s,isAnimationActive:l,offset:u,payloadUniqBy:c,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:m,cursor:v,shared:y,trigger:g,defaultIndex:b,portal:x,axisId:N}=t,k=br(),j=typeof b=="number"?String(b):b;M.useEffect(()=>{k(Tge({shared:y,trigger:g,axisId:N,active:n,defaultIndex:j}))},[k,y,g,N,n,j]);var S=$j(),A=h9(),P=Cge(y),{activeIndex:T,isActive:E}=yt(te=>Eve(te,P,g,j)),D=yt(te=>Cve(te,P,g,j)),R=yt(te=>PU(te,P,g,j)),F=yt(te=>Ave(te,P,g,j)),H=D,B=Ive(),U=n??E,[W,z]=MF([H,U]),J=P==="axis"?R:void 0;Xve(P,g,F,J,T,U);var ee=x??B;if(ee==null)return null;var L=H??FO;U||(L=FO),s&&L.length&&(L=NF(H.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),c,e0e));var q=L.length>0,Y=M.createElement(zde,{allowEscapeViewBox:r,animationDuration:a,animationEasing:i,isAnimationActive:l,active:U,coordinate:F,hasPayload:q,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:S,wrapperStyle:m,lastBoundingBox:W,innerRef:z,hasPortalFromProps:!!x},t0e(o,BO(BO({},t),{},{payload:L,label:J,active:U,coordinate:F,accessibilityLayer:A})));return M.createElement(M.Fragment,null,R_.createPortal(Y,ee),U&&M.createElement(Lve,{cursor:v,tooltipEventType:P,coordinate:F,payload:H,index:T}))}var RU={},BU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=0,a={}){typeof a!="object"&&(a={});let i=null,o=null,s=null,l=0,u=null,c;const{leading:f=!1,trailing:h=!0,maxWait:p}=a,m="maxWait"in a,v=m?Math.max(Number(p)||0,r):0,y=S=>(i!==null&&(c=n.apply(o,i)),i=o=null,l=S,c),g=S=>(l=S,u=setTimeout(k,r),f&&i!==null?y(S):c),b=S=>(u=null,h&&i!==null?y(S):c),x=S=>{if(s===null)return!0;const A=S-s,P=A>=r||A<0,T=m&&S-l>=v;return P||T},N=S=>{const A=s===null?0:S-s,P=r-A,T=v-(S-l);return m?Math.min(P,T):P},k=()=>{const S=Date.now();if(x(S))return b(S);u=setTimeout(k,N(S))},j=function(...S){const A=Date.now(),P=x(A);if(i=S,o=this,s=A,P){if(u===null)return g(A);if(m)return clearTimeout(u),u=setTimeout(k,r),y(A)}return u===null&&(u=setTimeout(k,r)),c};return j.cancel=()=>{u!==null&&clearTimeout(u),l=0,s=i=o=u=null},j.flush=()=>u===null?c:b(Date.now()),j}e.debounce=t})(BU);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BU;function n(r,a=0,i={}){const{leading:o=!0,trailing:s=!0}=i;return t.debounce(r,a,{leading:o,maxWait:a,trailing:s})}e.throttle=n})(RU);var a0e=RU.throttle;const i0e=ms(a0e);var bg=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(n),!0).forEach(function(r){o0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o0e(e,t,n){return(t=s0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s0e(e){var t=l0e(e,"string");return typeof t=="symbol"?t:t+""}function l0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u0e=M.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:o=0,minHeight:s,maxHeight:l,children:u,debounce:c=0,id:f,className:h,onResize:p,style:m={}}=e,v=M.useRef(null),y=M.useRef();y.current=p,M.useImperativeHandle(t,()=>v.current);var[g,b]=M.useState({containerWidth:r.width,containerHeight:r.height}),x=M.useCallback((k,j)=>{b(S=>{var A=Math.round(k),P=Math.round(j);return S.containerWidth===A&&S.containerHeight===P?S:{containerWidth:A,containerHeight:P}})},[]);M.useEffect(()=>{var k=P=>{var T,{width:E,height:D}=P[0].contentRect;x(E,D),(T=y.current)===null||T===void 0||T.call(y,E,D)};c>0&&(k=i0e(k,c,{trailing:!0,leading:!1}));var j=new ResizeObserver(k),{width:S,height:A}=v.current.getBoundingClientRect();return x(S,A),j.observe(v.current),()=>{j.disconnect()}},[x,c]);var N=M.useMemo(()=>{var{containerWidth:k,containerHeight:j}=g;if(k<0||j<0)return null;bg(dd(a)||dd(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,i),bg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var S=dd(a)?k:a,A=dd(i)?j:i;return n&&n>0&&(S?A=S/n:A&&(S=A*n),l&&A>l&&(A=l)),bg(S>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,A,a,i,o,s,n),M.Children.map(u,P=>M.cloneElement(P,{width:S,height:A,style:DN({width:S,height:A},P.props.style)}))},[n,u,i,l,s,o,g,a]);return M.createElement("div",{id:f?"".concat(f):void 0,className:cn("recharts-responsive-container",h),style:DN(DN({},m),{},{width:a,height:i,minWidth:o,minHeight:s,maxHeight:l}),ref:v},M.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),FU=e=>null;FU.displayName="Cell";function UO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function y_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(n),!0).forEach(function(r){c0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c0e(e,t,n){return(t=d0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d0e(e){var t=f0e(e,"string");return typeof t=="symbol"?t:t+""}function f0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zf={widthCache:{},cacheCount:0},h0e=2e3,p0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WO="recharts_measurement_span";function m0e(e){var t=y_({},e);return Object.keys(t).forEach(n=>{t[n]||delete t[n]}),t}var xg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||e0.isSsr)return{width:0,height:0};var r=m0e(n),a=JSON.stringify({text:t,copyStyle:r});if(Zf.widthCache[a])return Zf.widthCache[a];try{var i=document.getElementById(WO);i||(i=document.createElement("span"),i.setAttribute("id",WO),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=y_(y_({},p0e),r);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Zf.widthCache[a]=l,++Zf.cacheCount>h0e&&(Zf.cacheCount=0,Zf.widthCache={}),l}catch{return{width:0,height:0}}},qO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,v0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},y0e=Object.keys(zU),_h="NaN";function b0e(e,t){return e*zU[t]}class pi{static parse(t){var n,[,r,a]=(n=v0e.exec(t))!==null&&n!==void 0?n:[];return new pi(parseFloat(r),a??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,lo(t)&&(this.unit=""),n!==""&&!g0e.test(n)&&(this.num=NaN,this.unit=""),y0e.includes(n)&&(this.num=b0e(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new pi(NaN,""):new pi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new pi(NaN,""):new pi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pi(NaN,""):new pi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pi(NaN,""):new pi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return lo(this.num)}}function UU(e){if(e.includes(_h))return _h;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,a,i]=(n=qO.exec(t))!==null&&n!==void 0?n:[],o=pi.parse(r??""),s=pi.parse(i??""),l=a==="*"?o.multiply(s):o.divide(s);if(l.isNaN())return _h;t=t.replace(qO,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,c,f,h]=(u=HO.exec(t))!==null&&u!==void 0?u:[],p=pi.parse(c??""),m=pi.parse(h??""),v=f==="+"?p.add(m):p.subtract(m);if(v.isNaN())return _h;t=t.replace(HO,v.toString())}return t}var $O=/\(([^()]*)\)/;function x0e(e){for(var t=e,n;(n=$O.exec(t))!=null;){var[,r]=n;t=t.replace($O,UU(r))}return t}function w0e(e){var t=e.replace(/\s+/g,"");return t=x0e(t),t=UU(t),t}function N0e(e){try{return w0e(e)}catch{return _h}}function PN(e){var t=N0e(e.slice(5,-1));return t===_h?"":t}var S0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],k0e=["dx","dy","angle","className","breakAll"];function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b_.apply(null,arguments)}function VO(e,t){if(e==null)return{};var n,r,a=_0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _0e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var WU=/[ \f\n\r\t\v\u2028\u2029]+/,qU=e=>{var{children:t,breakAll:n,style:r}=e;try{var a=[];Cr(t)||(n?a=t.toString().split(""):a=t.toString().split(WU));var i=a.map(s=>({word:s,width:xg(s,r).width})),o=n?0:xg("",r).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},j0e=(e,t,n,r,a)=>{var{maxLines:i,children:o,style:s,breakAll:l}=e,u=st(i),c=o,f=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E.reduce((D,R)=>{var{word:F,width:H}=R,B=D[D.length-1];if(B&&(r==null||a||B.width+H+n<Number(r)))B.words.push(F),B.width+=H+n;else{var U={words:[F],width:H};D.push(U)}return D},[])},h=f(t),p=T=>T.reduce((E,D)=>E.width>D.width?E:D);if(!u||a)return h;var m=h.length>i||p(h).width>Number(r);if(!m)return h;for(var v="",y=T=>{var E=c.slice(0,T),D=qU({breakAll:l,style:s,children:E+v}).wordsWithComputedWidth,R=f(D),F=R.length>i||p(R).width>Number(r);return[F,R]},g=0,b=c.length-1,x=0,N;g<=b&&x<=c.length-1;){var k=Math.floor((g+b)/2),j=k-1,[S,A]=y(j),[P]=y(k);if(!S&&!P&&(g=k+1),S&&P&&(b=k-1),!S&&P){N=A;break}x++}return N||h},GO=e=>{var t=Cr(e)?[]:e.toString().split(WU);return[{words:t}]},A0e=e=>{var{width:t,scaleToFit:n,children:r,style:a,breakAll:i,maxLines:o}=e;if((t||n)&&!e0.isSsr){var s,l,u=qU({breakAll:i,children:r,style:a});if(u){var{wordsWithComputedWidth:c,spaceWidth:f}=u;s=c,l=f}else return GO(r);return j0e({breakAll:i,children:r,maxLines:o,style:a},s,l,t,n)}return GO(r)},KO="#808080",VA=M.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:l="end",fill:u=KO}=e,c=VO(e,S0e),f=M.useMemo(()=>A0e({breakAll:c.breakAll,children:c.children,maxLines:c.maxLines,scaleToFit:o,style:c.style,width:c.width}),[c.breakAll,c.children,c.maxLines,o,c.style,c.width]),{dx:h,dy:p,angle:m,className:v,breakAll:y}=c,g=VO(c,k0e);if(!tl(n)||!tl(r))return null;var b=n+(st(h)?h:0),x=r+(st(p)?p:0),N;switch(l){case"start":N=PN("calc(".concat(i,")"));break;case"middle":N=PN("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:N=PN("calc(".concat(f.length-1," * -").concat(a,")"));break}var k=[];if(o){var j=f[0].width,{width:S}=c;k.push("scale(".concat(st(S)?S/j:1,")"))}return m&&k.push("rotate(".concat(m,", ").concat(b,", ").concat(x,")")),k.length&&(g.transform=k.join(" ")),M.createElement("text",b_({},Hn(g,!0),{ref:t,x:b,y:x,className:cn("recharts-text",v),textAnchor:s,fill:u.includes("url")?KO:u}),f.map((A,P)=>{var T=A.words.join(y?"":" ");return M.createElement("tspan",{x:b,dy:P===0?N:a,key:"".concat(T,"-").concat(P)},T)}))});VA.displayName="Text";var C0e=["offset"],E0e=["labelRef"];function YO(e,t){if(e==null)return{};var n,r,a=D0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function D0e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(n),!0).forEach(function(r){P0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P0e(e,t,n){return(t=O0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O0e(e){var t=T0e(e,"string");return typeof t=="symbol"?t:t+""}function T0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pl(){return Pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl.apply(null,arguments)}var M0e=e=>{var{value:t,formatter:n}=e,r=Cr(e.children)?t:e.children;return typeof n=="function"?n(r):r},GA=e=>e!=null&&typeof e=="function",L0e=(e,t)=>{var n=vi(t-e),r=Math.min(Math.abs(t-e),360);return n*r},I0e=(e,t,n)=>{var{position:r,viewBox:a,offset:i,className:o}=e,{cx:s,cy:l,innerRadius:u,outerRadius:c,startAngle:f,endAngle:h,clockWise:p}=a,m=(u+c)/2,v=L0e(f,h),y=v>=0?1:-1,g,b;r==="insideStart"?(g=f+y*i,b=p):r==="insideEnd"?(g=h-y*i,b=!p):r==="end"&&(g=h+y*i,b=p),b=v<=0?b:!b;var x=Na(s,l,m,g),N=Na(s,l,m,g+(b?1:-1)*359),k="M".concat(x.x,",").concat(x.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(b?0:1,`,
    `).concat(N.x,",").concat(N.y),j=Cr(e.id)?tv("recharts-radial-line-"):e.id;return M.createElement("text",Pl({},n,{dominantBaseline:"central",className:cn("recharts-radial-bar-label",o)}),M.createElement("defs",null,M.createElement("path",{id:j,d:k})),M.createElement("textPath",{xlinkHref:"#".concat(j)},t))},R0e=e=>{var{viewBox:t,offset:n,position:r}=e,{cx:a,cy:i,innerRadius:o,outerRadius:s,startAngle:l,endAngle:u}=t,c=(l+u)/2;if(r==="outside"){var{x:f,y:h}=Na(a,i,s+n,c);return{x:f,y:h,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+s)/2,{x:m,y:v}=Na(a,i,p,c);return{x:m,y:v,textAnchor:"middle",verticalAnchor:"middle"}},B0e=(e,t)=>{var{parentViewBox:n,offset:r,position:a}=e,{x:i,y:o,width:s,height:l}=t,u=l>=0?1:-1,c=u*r,f=u>0?"end":"start",h=u>0?"start":"end",p=s>=0?1:-1,m=p*r,v=p>0?"end":"start",y=p>0?"start":"end";if(a==="top"){var g={x:i+s/2,y:o-u*r,textAnchor:"middle",verticalAnchor:f};return kr(kr({},g),n?{height:Math.max(o-n.y,0),width:s}:{})}if(a==="bottom"){var b={x:i+s/2,y:o+l+c,textAnchor:"middle",verticalAnchor:h};return kr(kr({},b),n?{height:Math.max(n.y+n.height-(o+l),0),width:s}:{})}if(a==="left"){var x={x:i-m,y:o+l/2,textAnchor:v,verticalAnchor:"middle"};return kr(kr({},x),n?{width:Math.max(x.x-n.x,0),height:l}:{})}if(a==="right"){var N={x:i+s+m,y:o+l/2,textAnchor:y,verticalAnchor:"middle"};return kr(kr({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:l}:{})}var k=n?{width:s,height:l}:{};return a==="insideLeft"?kr({x:i+m,y:o+l/2,textAnchor:y,verticalAnchor:"middle"},k):a==="insideRight"?kr({x:i+s-m,y:o+l/2,textAnchor:v,verticalAnchor:"middle"},k):a==="insideTop"?kr({x:i+s/2,y:o+c,textAnchor:"middle",verticalAnchor:h},k):a==="insideBottom"?kr({x:i+s/2,y:o+l-c,textAnchor:"middle",verticalAnchor:f},k):a==="insideTopLeft"?kr({x:i+m,y:o+c,textAnchor:y,verticalAnchor:h},k):a==="insideTopRight"?kr({x:i+s-m,y:o+c,textAnchor:v,verticalAnchor:h},k):a==="insideBottomLeft"?kr({x:i+m,y:o+l-c,textAnchor:y,verticalAnchor:f},k):a==="insideBottomRight"?kr({x:i+s-m,y:o+l-c,textAnchor:v,verticalAnchor:f},k):a&&typeof a=="object"&&(st(a.x)||dd(a.x))&&(st(a.y)||dd(a.y))?kr({x:i+ps(a.x,s),y:o+ps(a.y,l),textAnchor:"end",verticalAnchor:"end"},k):kr({x:i+s/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},k)},F0e=e=>"cx"in e&&st(e.cx);function Vi(e){var{offset:t=5}=e,n=YO(e,C0e),r=kr({offset:t},n),{viewBox:a,position:i,value:o,children:s,content:l,className:u="",textBreakAll:c,labelRef:f}=r,h=$j(),p=a||h;if(!p||Cr(o)&&Cr(s)&&!M.isValidElement(l)&&typeof l!="function")return null;if(M.isValidElement(l)){var m=YO(r,E0e);return M.cloneElement(l,m)}var v;if(typeof l=="function"){if(v=M.createElement(l,r),M.isValidElement(v))return v}else v=M0e(r);var y=F0e(p),g=Hn(r,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return I0e(r,v,g);var b=y?R0e(r):B0e(r,p);return M.createElement(VA,Pl({ref:f,className:cn("recharts-label",u)},g,b,{breakAll:c}),v)}Vi.displayName="Label";var HU=e=>{var{cx:t,cy:n,angle:r,startAngle:a,endAngle:i,r:o,radius:s,innerRadius:l,outerRadius:u,x:c,y:f,top:h,left:p,width:m,height:v,clockWise:y,labelViewBox:g}=e;if(g)return g;if(st(m)&&st(v)){if(st(c)&&st(f))return{x:c,y:f,width:m,height:v};if(st(h)&&st(p))return{x:h,y:p,width:m,height:v}}if(st(c)&&st(f))return{x:c,y:f,width:0,height:0};if(st(t)&&st(n))return{cx:t,cy:n,startAngle:a||r||0,endAngle:i||r||0,innerRadius:l||0,outerRadius:u||s||o||0,clockWise:y};if(e.viewBox)return e.viewBox},z0e=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?M.createElement(Vi,Pl({key:"label-implicit"},r)):tl(e)?M.createElement(Vi,Pl({key:"label-implicit",value:e},r)):M.isValidElement(e)?e.type===Vi?M.cloneElement(e,kr({key:"label-implicit"},r)):M.createElement(Vi,Pl({key:"label-implicit",content:e},r)):GA(e)?M.createElement(Vi,Pl({key:"label-implicit",content:e},r)):e&&typeof e=="object"?M.createElement(Vi,Pl({},e,{key:"label-implicit"},r)):null},U0e=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var{children:a,labelRef:i}=t,o=HU(t),s=bj(a,Vi).map((u,c)=>M.cloneElement(u,{viewBox:n||o,key:"label-".concat(c)}));if(!r)return s;var l=z0e(t.label,n||o,i);return[l,...s]};Vi.parseViewBox=HU;Vi.renderCallByParent=U0e;var $U={},VU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(VU);var GU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(GU);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VU,n=GU,r=N2;function a(i){if(r.isArrayLike(i))return t.last(n.toArray(i))}e.last=a})($U);var W0e=$U.last;const q0e=ms(W0e);var H0e=["valueAccessor"],$0e=["data","dataKey","clockWise","id","textBreakAll"];function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(null,arguments)}function JO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function QO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(n),!0).forEach(function(r){V0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V0e(e,t,n){return(t=G0e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G0e(e){var t=K0e(e,"string");return typeof t=="symbol"?t:t+""}function K0e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZO(e,t){if(e==null)return{};var n,r,a=Y0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Y0e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var X0e=e=>Array.isArray(e.value)?q0e(e.value):e.value;function Od(e){var{valueAccessor:t=X0e}=e,n=ZO(e,H0e),{data:r,dataKey:a,clockWise:i,id:o,textBreakAll:s}=n,l=ZO(n,$0e);return!r||!r.length?null:M.createElement(nl,{className:"recharts-label-list"},r.map((u,c)=>{var f=Cr(a)?t(u,c):io(u&&u.payload,a),h=Cr(o)?{}:{id:"".concat(o,"-").concat(c)};return M.createElement(Vi,n1({},Hn(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:s,viewBox:Vi.parseViewBox(Cr(i)?u:QO(QO({},u),{},{clockWise:i})),key:"label-".concat(c),index:c}))}))}Od.displayName="LabelList";function J0e(e,t){return e?e===!0?M.createElement(Od,{key:"labelList-implicit",data:t}):M.isValidElement(e)||GA(e)?M.createElement(Od,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?M.createElement(Od,n1({data:t},e,{key:"labelList-implicit"})):null:null}function Q0e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:r}=e,a=bj(r,Od).map((o,s)=>M.cloneElement(o,{data:t,key:"labelList-".concat(s)}));if(!n)return a;var i=J0e(e.label,t);return[i,...a]}Od.renderCallByParent=Q0e;var Z0e={radiusAxis:{},angleAxis:{}},eye=Ko({name:"polarAxis",initialState:Z0e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),tye=eye.reducer,nye={countOfBars:0,cartesianItems:[],polarItems:[]},KU=Ko({name:"graphicalItems",initialState:nye,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,a=ql(e).cartesianItems.indexOf(n);a>-1&&(e.cartesianItems[a]=r)},removeCartesianGraphicalItem(e,t){var n=ql(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=ql(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addBar:rye,removeBar:aye,addCartesianGraphicalItem:iye,replaceCartesianGraphicalItem:oye,removeCartesianGraphicalItem:sye,addPolarGraphicalItem:$we,removePolarGraphicalItem:Vwe}=KU.actions,lye=KU.reducer;function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(r){uye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uye(e,t,n){return(t=cye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cye(e){var t=dye(e,"string");return typeof t=="symbol"?t:t+""}function dye(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fye(e){var t=br(),n=M.useRef(null);return M.useEffect(()=>{var r=tT(tT({},e),{},{stackId:s9(e.stackId)});n.current===null?t(iye(r)):n.current!==r&&t(oye({prev:n.current,next:r})),n.current=r},[t,e]),M.useEffect(()=>()=>{n.current&&(t(sye(n.current)),n.current=null)},[t]),null}var YU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var a;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&a.writable)?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(YU);var hye=YU.isPlainObject;const pye=ms(hye);function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r1.apply(null,arguments)}var nT=(e,t,n,r,a)=>{var i=n-r,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-i/2,",").concat(t+a),o+="L ".concat(e+n-i/2-r,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},mye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gye=e=>{var t=Tc(e,mye),n=M.useRef(),[r,a]=M.useState(-1);M.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:i,y:o,upperWidth:s,lowerWidth:l,height:u,className:c}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t;if(i!==+i||o!==+o||s!==+s||l!==+l||u!==+u||s===0&&l===0||u===0)return null;var v=cn("recharts-trapezoid",c);return m?M.createElement(gp,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:s,lowerWidth:l,height:u,x:i,y:o},duration:h,animationEasing:f,isActive:m},y=>{var{upperWidth:g,lowerWidth:b,height:x,x:N,y:k}=y;return M.createElement(gp,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},M.createElement("path",r1({},Hn(t,!0),{className:v,d:nT(N,k,g,b,x),ref:n})))}):M.createElement("g",null,M.createElement("path",r1({},Hn(t,!0),{className:v,d:nT(i,o,s,l,u)})))},vye=["option","shapeType","propTransformer","activeClassName","isActive"];function yye(e,t){if(e==null)return{};var n,r,a=bye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function bye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function a1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(r){xye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xye(e,t,n){return(t=wye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wye(e){var t=Nye(e,"string");return typeof t=="symbol"?t:t+""}function Nye(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sye(e,t){return a1(a1({},t),e)}function kye(e,t){return e==="symbols"}function aT(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return M.createElement(w9,n);case"trapezoid":return M.createElement(gye,n);case"sector":return M.createElement(k9,n);case"symbols":if(kye(t))return M.createElement(kj,n);break;default:return null}}function _ye(e){return M.isValidElement(e)?e.props:e}function jye(e){var{option:t,shapeType:n,propTransformer:r=Sye,activeClassName:a="recharts-active-shape",isActive:i}=e,o=yye(e,vye),s;if(M.isValidElement(t))s=M.cloneElement(t,a1(a1({},o),_ye(t)));else if(typeof t=="function")s=t(o);else if(pye(t)&&typeof t!="boolean"){var l=r(t,o);s=M.createElement(aT,{shapeType:n,elementProps:l})}else{var u=o;s=M.createElement(aT,{shapeType:n,elementProps:u})}return i?M.createElement(nl,{className:a},s):s}var XU=(e,t)=>{var n=br();return(r,a)=>i=>{e==null||e(r,a,i),n(hU({activeIndex:String(a),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},JU=e=>{var t=br();return(n,r)=>a=>{e==null||e(n,r,a),t(Mge())}},QU=(e,t)=>{var n=br();return(r,a)=>i=>{e==null||e(r,a,i),n(Lge({activeIndex:String(a),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function Aye(e){var{fn:t,args:n}=e,r=br(),a=ji();return M.useEffect(()=>{if(!a){var i=t(n);return r(Pge(i)),()=>{r(Oge(i))}}},[t,n,r,a]),null}var Cye=()=>{};function Eye(e){var{legendPayload:t}=e,n=br(),r=ji();return M.useEffect(()=>r?Cye:(n(mde(t)),()=>{n(gde(t))}),[n,r,t]),null}function Dye(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=M.useRef(tv(t)),r=M.useRef(e);return r.current!==e&&(n.current=tv(t),r.current=e),n.current}var Pye=Be([oa],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Oye=Be([Pye,su,lu],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Tye=e=>{var t=ji();return yt(n=>Sc(n,"xAxis",e,t))},Mye=e=>{var t=ji();return yt(n=>Sc(n,"yAxis",e,t))},ZU=()=>yt(Oye),Lye=()=>{var e=br();return M.useEffect(()=>(e(rye()),()=>{e(aye())})),null},Iye=["children"];function Rye(e,t){if(e==null)return{};var n,r,a=Bye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iT=()=>{},eW=M.createContext({addErrorBar:iT,removeErrorBar:iT}),Fye={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},tW=M.createContext(Fye);function zye(e){var{children:t}=e,n=Rye(e,Iye);return M.createElement(tW.Provider,{value:n},t)}var Uye=()=>M.useContext(tW),Wye=e=>{var{children:t,xAxisId:n,yAxisId:r,zAxisId:a,dataKey:i,data:o,stackId:s,hide:l,type:u,barSize:c}=e,[f,h]=M.useState([]),p=M.useCallback(y=>{h(g=>[...g,y])},[h]),m=M.useCallback(y=>{h(g=>g.filter(b=>b!==y))},[h]),v=ji();return M.createElement(eW.Provider,{value:{addErrorBar:p,removeErrorBar:m}},M.createElement(fye,{type:u,data:o,xAxisId:n,yAxisId:r,zAxisId:a,dataKey:i,errorBars:f,stackId:s,hide:l,barSize:c,isPanorama:v}),t)};function qye(e){var{addErrorBar:t,removeErrorBar:n}=M.useContext(eW);return M.useEffect(()=>(t(e),()=>{n(e)}),[t,n,e]),null}var Hye=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function nW(e,t,n){return(t=$ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ye(e){var t=Vye(e,"string");return typeof t=="symbol"?t:t+""}function Vye(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(null,arguments)}function Gye(e,t){if(e==null)return{};var n,r,a=Kye(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Kye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Yye(e){var{direction:t,width:n,dataKey:r,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:s}=e,l=Gye(e,Hye),u=Hn(l,!1),{data:c,dataPointFormatter:f,xAxisId:h,yAxisId:p,errorBarOffset:m}=Uye(),v=Tye(h),y=Mye(p);if((v==null?void 0:v.scale)==null||(y==null?void 0:y.scale)==null||c==null||t==="x"&&v.type!=="number")return null;var g=c.map(b=>{var{x,y:N,value:k,errorVal:j}=f(b,r,t);if(!j)return null;var S=[],A,P;if(Array.isArray(j)?[A,P]=j:A=P=j,t==="x"){var{scale:T}=v,E=N+m,D=E+n,R=E-n,F=T(k-A),H=T(k+P);S.push({x1:H,y1:D,x2:H,y2:R}),S.push({x1:F,y1:E,x2:H,y2:E}),S.push({x1:F,y1:D,x2:F,y2:R})}else if(t==="y"){var{scale:B}=y,U=x+m,W=U-n,z=U+n,J=B(k-A),ee=B(k+P);S.push({x1:W,y1:ee,x2:z,y2:ee}),S.push({x1:U,y1:J,x2:U,y2:ee}),S.push({x1:W,y1:J,x2:z,y2:J})}var L="".concat(x+m,"px ").concat(N+m,"px");return M.createElement(nl,dv({className:"recharts-errorBar",key:"bar-".concat(S.map(q=>"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)))},u),S.map(q=>{var Y=a?{transformOrigin:"".concat(q.x1-5,"px")}:void 0;return M.createElement(gp,{from:{transform:"scaleY(0)",transformOrigin:L},to:{transform:"scaleY(1)",transformOrigin:L},begin:i,easing:s,isActive:a,duration:o,key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2),style:{transformOrigin:L}},M.createElement("line",dv({},q,{style:Y})))}))});return M.createElement(nl,{className:"recharts-errorBars"},g)}var rW=M.createContext(void 0);function Xye(e){var t=M.useContext(rW);return e??t??"x"}function Jye(e){var{direction:t,children:n}=e;return M.createElement(rW.Provider,{value:t},n)}var aW={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function Qye(e){var t=Xye(e.direction),{width:n,isAnimationActive:r,animationBegin:a,animationDuration:i,animationEasing:o}=Tc(e,aW);return M.createElement(M.Fragment,null,M.createElement(qye,{dataKey:e.dataKey,direction:t}),M.createElement(Yye,dv({},e,{direction:t,width:n,isAnimationActive:r,animationBegin:a,animationDuration:i,animationEasing:o})))}class iW extends M.Component{render(){return M.createElement(Qye,this.props)}}nW(iW,"defaultProps",aW);nW(iW,"displayName","ErrorBar");var Zye="Invariant failed";function ebe(e,t){throw new Error(Zye)}var tbe=["x","y"];function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x_.apply(null,arguments)}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(r){nbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nbe(e,t,n){return(t=rbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rbe(e){var t=abe(e,"string");return typeof t=="symbol"?t:t+""}function abe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ibe(e,t){if(e==null)return{};var n,r,a=obe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function obe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function sbe(e,t){var{x:n,y:r}=e,a=ibe(e,tbe),i="".concat(n),o=parseInt(i,10),s="".concat(r),l=parseInt(s,10),u="".concat(t.height||a.height),c=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Wm(Wm(Wm(Wm(Wm({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:c,width:h,name:t.name,radius:t.radius})}function oW(e){return M.createElement(jye,x_({shapeType:"rectangle",propTransformer:sbe,activeClassName:"recharts-active-bar"},e))}var lbe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,a)=>{if(st(t))return t;var i=st(r)||Cr(r);return i?t(r,a):(i||ebe(),n)}};function sW(e,t){var n,r,a=yt(u=>cu(u,e)),i=yt(u=>Ic(u,t)),o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:zi.allowDataOverflow,s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Ui.allowDataOverflow,l=o||s;return{needClip:l,needClipX:o,needClipY:s}}function ube(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,a=ZU(),{needClipX:i,needClipY:o,needClip:s}=sW(t,n);if(!s)return null;var{x:l,y:u,width:c,height:f}=a;return M.createElement("clipPath",{id:"clipPath-".concat(r)},M.createElement("rect",{x:i?l:l-c/2,y:o?u:u-f/2,width:i?c:c*2,height:o?f:f*2}))}var cbe=["onMouseEnter","onMouseLeave","onClick"],dbe=["value","background","tooltipPosition"],fbe=["onMouseEnter","onClick","onMouseLeave"];function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fv.apply(null,arguments)}function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(n),!0).forEach(function(r){tw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tw(e,t,n){return(t=hbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hbe(e){var t=pbe(e,"string");return typeof t=="symbol"?t:t+""}function pbe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w_(e,t){if(e==null)return{};var n,r,a=mbe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function mbe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gbe=e=>{var{dataKey:t,name:n,fill:r,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:r,value:l9(n,t),payload:e}]};function vbe(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:a,name:i,hide:o,unit:s}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:a,dataKey:t,nameKey:void 0,name:l9(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:s}}}function ybe(e){var t=yt(Np),{data:n,dataKey:r,background:a,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:s,onClick:l}=i,u=w_(i,cbe),c=XU(o,r),f=JU(s),h=QU(l,r);if(!a||n==null)return null;var p=Hn(a,!1);return M.createElement(M.Fragment,null,n.map((m,v)=>{var{value:y,background:g,tooltipPosition:b}=m,x=w_(m,dbe);if(!g)return null;var N=c(m,v),k=f(m,v),j=h(m,v),S=Ma(Ma(Ma(Ma(Ma({option:a,isActive:String(v)===t},x),{},{fill:"#eee"},g),p),y2(u,m,v)),{},{onMouseEnter:N,onMouseLeave:k,onClick:j,dataKey:r,index:v,className:"recharts-bar-background-rectangle"});return M.createElement(oW,fv({key:"background-bar-".concat(v)},S))}))}function lW(e){var{data:t,props:n,showLabels:r}=e,a=Hn(n,!1),{shape:i,dataKey:o,activeBar:s}=n,l=yt(Np),u=yt(jU),{onMouseEnter:c,onClick:f,onMouseLeave:h}=n,p=w_(n,fbe),m=XU(c,o),v=JU(h),y=QU(f,o);return t?M.createElement(M.Fragment,null,t.map((g,b)=>{var x=s&&String(b)===l&&(u==null||o===u),N=x?s:i,k=Ma(Ma(Ma({},a),g),{},{isActive:x,option:N,index:b,dataKey:o});return M.createElement(nl,fv({className:"recharts-bar-rectangle"},y2(p,g,b),{onMouseEnter:m(g,b),onMouseLeave:v(g,b),onClick:y(g,b),key:"rectangle-".concat(g==null?void 0:g.x,"-").concat(g==null?void 0:g.y,"-").concat(g==null?void 0:g.value,"-").concat(b)}),M.createElement(oW,k))}),r&&Od.renderCallByParent(n,t)):null}function bbe(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:a,isAnimationActive:i,animationBegin:o,animationDuration:s,animationEasing:l,onAnimationEnd:u,onAnimationStart:c}=t,f=n.current,h=Dye(t,"recharts-bar-"),[p,m]=M.useState(!1),v=M.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),y=M.useCallback(()=>{typeof c=="function"&&c(),m(!0)},[c]);return M.createElement(gp,{begin:o,duration:s,isActive:i,easing:l,from:{t:0},to:{t:1},onAnimationEnd:v,onAnimationStart:y,key:h},g=>{var{t:b}=g,x=b===1?r:r.map((N,k)=>{var j=f&&f[k];if(j){var S=Jf(j.x,N.x),A=Jf(j.y,N.y),P=Jf(j.width,N.width),T=Jf(j.height,N.height);return Ma(Ma({},N),{},{x:S(b),y:A(b),width:P(b),height:T(b)})}if(a==="horizontal"){var E=Jf(0,N.height),D=E(b);return Ma(Ma({},N),{},{y:N.y+N.height-D,height:D})}var R=Jf(0,N.width),F=R(b);return Ma(Ma({},N),{},{width:F})});return b>0&&(n.current=x),M.createElement(nl,null,M.createElement(lW,{props:t,data:x,showLabels:!p}))})}function xbe(e){var{data:t,isAnimationActive:n}=e,r=M.useRef(null);return n&&t&&t.length&&(r.current==null||r.current!==t)?M.createElement(bbe,{previousRectanglesRef:r,props:e}):M.createElement(lW,{props:e,data:t,showLabels:!0})}var uW=0,wbe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:io(e,t)}};class Nbe extends M.PureComponent{constructor(){super(...arguments),tw(this,"id",tv("recharts-bar-"))}render(){var{hide:t,data:n,dataKey:r,className:a,xAxisId:i,yAxisId:o,needClip:s,background:l,id:u,layout:c}=this.props;if(t)return null;var f=cn("recharts-bar",a),h=Cr(u)?this.id:u;return M.createElement(nl,{className:f},s&&M.createElement("defs",null,M.createElement(ube,{clipPathId:h,xAxisId:i,yAxisId:o})),M.createElement(nl,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(h,")"):null},M.createElement(ybe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),M.createElement(xbe,this.props)),M.createElement(Jye,{direction:c==="horizontal"?"y":"x"},this.props.children))}}var cW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!e0.isSsr,legendType:"rect",minPointSize:uW,xAxisId:0,yAxisId:0};function Sbe(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:a,minPointSize:i,activeBar:o,animationBegin:s,animationDuration:l,animationEasing:u,isAnimationActive:c}=Tc(e,cW),{needClip:f}=sW(t,n),h=Kj(),p=ji(),m=M.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:s9(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),v=bj(e.children,FU),y=yt(x=>Jbe(x,t,n,p,m,v));if(h!=="vertical"&&h!=="horizontal")return null;var g,b=y==null?void 0:y[0];return b==null||b.height==null||b.width==null?g=0:g=h==="vertical"?b.height/2:b.width/2,M.createElement(zye,{xAxisId:t,yAxisId:n,data:y,dataPointFormatter:wbe,errorBarOffset:g},M.createElement(Nbe,fv({},e,{layout:h,needClip:f,data:y,xAxisId:t,yAxisId:n,hide:r,legendType:a,minPointSize:i,activeBar:o,animationBegin:s,animationDuration:l,animationEasing:u,isAnimationActive:c})))}function kbe(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:a,bandSize:i,xAxis:o,yAxis:s,xAxisTicks:l,yAxisTicks:u,stackedData:c,displayedData:f,offset:h,cells:p}=e,m=t==="horizontal"?s:o,v=c?m.scale.domain():null,y=Kce({numericAxis:m});return f.map((g,b)=>{var x,N,k,j,S,A;c?x=qce(c[b],v):(x=io(g,n),Array.isArray(x)||(x=[y,x]));var P=lbe(r,uW)(x[1],b);if(t==="horizontal"){var T,[E,D]=[s.scale(x[0]),s.scale(x[1])];N=vP({axis:o,ticks:l,bandSize:i,offset:a.offset,entry:g,index:b}),k=(T=D??E)!==null&&T!==void 0?T:void 0,j=a.size;var R=E-D;if(S=lo(R)?0:R,A={x:N,y:h.top,width:j,height:h.height},Math.abs(P)>0&&Math.abs(S)<Math.abs(P)){var F=vi(S||P)*(Math.abs(P)-Math.abs(S));k-=F,S+=F}}else{var[H,B]=[o.scale(x[0]),o.scale(x[1])];if(N=H,k=vP({axis:s,ticks:u,bandSize:i,offset:a.offset,entry:g,index:b}),j=B-H,S=a.size,A={x:h.left,y:k,width:h.width,height:S},Math.abs(P)>0&&Math.abs(j)<Math.abs(P)){var U=vi(j||P)*(Math.abs(P)-Math.abs(j));j+=U}}var W=Ma(Ma({},g),{},{x:N,y:k,width:j,height:S,value:c?x:x[1],payload:g,background:A,tooltipPosition:{x:N+j/2,y:k+S/2}},p&&p[b]&&p[b].props);return W})}class wg extends M.PureComponent{render(){return M.createElement(Wye,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},M.createElement(Lye,null),M.createElement(Eye,{legendPayload:gbe(this.props)}),M.createElement(Aye,{fn:vbe,args:this.props}),M.createElement(Sbe,this.props))}}tw(wg,"displayName","Bar");tw(wg,"defaultProps",cW);function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ky(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(n),!0).forEach(function(r){_be(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _be(e,t,n){return(t=jbe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jbe(e){var t=Abe(e,"string");return typeof t=="symbol"?t:t+""}function Abe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cbe=(e,t)=>t,Ebe=(e,t,n)=>n,Dbe=(e,t,n,r)=>r,KA=(e,t,n,r,a)=>a,Pbe=(e,t,n,r,a)=>a.maxBarSize,Obe=(e,t,n,r,a,i)=>i,uT=(e,t,n)=>{var r=n??e;if(!Cr(r))return ps(r,t,0)},Tbe=Be([En,EA,Cbe,Ebe,Dbe],(e,t,n,r,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Mbe=(e,t,n,r)=>{var a=En(e);return a==="horizontal"?h_(e,"yAxis",n,r):h_(e,"xAxis",t,r)},Lbe=(e,t,n)=>{var r=En(e);return r==="horizontal"?AO(e,"xAxis",t):AO(e,"yAxis",n)};function Ibe(e){return e.stackId!=null&&e.dataKey!=null}var Rbe=(e,t,n)=>{var r={},a=e.filter(Ibe),i=e.filter(u=>u.stackId==null),o=a.reduce((u,c)=>(u[c.stackId]||(u[c.stackId]=[]),u[c.stackId].push(c),u),r),s=Object.entries(o).map(u=>{var[c,f]=u,h=f.map(m=>m.dataKey),p=uT(t,n,f[0].barSize);return{stackId:c,dataKeys:h,barSize:p}}),l=i.map(u=>{var c=[u.dataKey].filter(h=>h!=null),f=uT(t,n,u.barSize);return{stackId:void 0,dataKeys:c,barSize:f}});return[...s,...l]},Bbe=Be([Tbe,Eme,Lbe],Rbe),Fbe=(e,t,n,r,a)=>{var i,o,s=En(e),l=kz(e),{maxBarSize:u}=a,c=Cr(u)?l:u,f,h;return s==="horizontal"?(f=Sc(e,"xAxis",t,r),h=wp(e,"xAxis",t,r)):(f=Sc(e,"yAxis",n,r),h=wp(e,"yAxis",n,r)),(i=(o=Wj(f,h,!0))!==null&&o!==void 0?o:c)!==null&&i!==void 0?i:0},dW=(e,t,n,r)=>{var a=En(e),i,o;return a==="horizontal"?(i=Sc(e,"xAxis",t,r),o=wp(e,"xAxis",t,r)):(i=Sc(e,"yAxis",n,r),o=wp(e,"yAxis",n,r)),Wj(i,o)};function zbe(e,t,n,r,a){var i=r.length;if(!(i<1)){var o=ps(e,n,0,!0),s,l=[];if(fo(r[0].barSize)){var u=!1,c=n/i,f=r.reduce((g,b)=>g+(b.barSize||0),0);f+=(i-1)*o,f>=n&&(f-=(i-1)*o,o=0),f>=n&&c>0&&(u=!0,c*=.9,f=i*c);var h=(n-f)/2>>0,p={offset:h-o,size:0};s=r.reduce((g,b)=>{var x,N={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:p.offset+p.size+o,size:u?c:(x=b.barSize)!==null&&x!==void 0?x:0}},k=[...g,N];return p=k[k.length-1].position,k},l)}else{var m=ps(t,n,0,!0);n-2*m-(i-1)*o<=0&&(o=0);var v=(n-2*m-(i-1)*o)/i;v>1&&(v>>=0);var y=fo(a)?Math.min(v,a):v;s=r.reduce((g,b,x)=>[...g,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m+(v+o)*x+(v-y)/2,size:y}}],l)}return s}}var Ube=(e,t,n,r,a,i,o)=>{var s=Cr(o)?t:o,l=zbe(n,r,a!==i?a:i,e,s);return a!==i&&l!=null&&(l=l.map(u=>Ky(Ky({},u),{},{position:Ky(Ky({},u.position),{},{offset:u.position.offset-a/2})}))),l},Wbe=Be([Bbe,kz,Cme,_z,Fbe,dW,Pbe],Ube),qbe=(e,t,n,r)=>Sc(e,"xAxis",t,r),Hbe=(e,t,n,r)=>Sc(e,"yAxis",n,r),$be=(e,t,n,r)=>wp(e,"xAxis",t,r),Vbe=(e,t,n,r)=>wp(e,"yAxis",n,r),Gbe=Be([Wbe,KA],(e,t)=>{if(e!=null){var n=e.find(r=>r.stackId===t.stackId&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),Kbe=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:n}=t;if(n!=null){var r=e[n];if(r){var{stackedData:a}=r;if(a){var i=a.find(o=>o.key===t.dataKey);return i}}}}},Ybe=Be([EA,KA],(e,t)=>{if(e.some(n=>n.type==="bar"&&t.dataKey===n.dataKey&&t.stackId===n.stackId&&t.stackId===n.stackId))return t}),Xbe=Be([Mbe,KA],Kbe),Jbe=Be([oa,qbe,Hbe,$be,Vbe,Gbe,En,uz,dW,Xbe,Ybe,Obe],(e,t,n,r,a,i,o,s,l,u,c,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:m}=s;if(!(c==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||n==null||r==null||a==null||l==null)){var{data:v}=c,y;if(v!=null&&v.length>0?y=v:y=h==null?void 0:h.slice(p,m+1),y!=null)return kbe({layout:o,barSettings:c,pos:i,bandSize:l,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:a,stackedData:u,displayedData:y,offset:e,cells:f})}}),Qbe=e=>{var{chartData:t}=e,n=br(),r=ji();return M.useEffect(()=>r?()=>{}:(n(IO(t)),()=>{n(IO(void 0))}),[t,n,r]),null},cT={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Zbe=Ko({name:"brush",initialState:cT,reducers:{setBrushSettings(e,t){return t.payload==null?cT:t.payload}}}),exe=Zbe.reducer;function txe(e,t,n){return(t=nxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nxe(e){var t=rxe(e,"string");return typeof t=="symbol"?t:t+""}function rxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YA{static create(t){return new YA(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],a=n[n.length-1];return r<=a?t>=r&&t<=a:t>=a&&t<=r}}txe(YA,"EPS",1e-4);function axe(e){return(e%180+180)%180}var ixe=function(t){var{width:n,height:r}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=axe(a),o=i*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},oxe={dots:[],areas:[],lines:[]},sxe=Ko({name:"referenceElements",initialState:oxe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ql(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ql(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ql(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),lxe=sxe.reducer,uxe=M.createContext(void 0),cxe=e=>{var{children:t}=e,[n]=M.useState("".concat(tv("recharts"),"-clip")),r=ZU();if(r==null)return null;var{x:a,y:i,width:o,height:s}=r;return M.createElement(uxe.Provider,{value:n},M.createElement("defs",null,M.createElement("clipPath",{id:n},M.createElement("rect",{x:a,y:i,height:s,width:o}))),t)};function ON(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function fW(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function dxe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return ixe(r,n)}function fxe(e,t,n){var r=n==="width",{x:a,y:i,width:o,height:s}=e;return t===1?{start:r?a:i,end:r?a+o:i+s}:{start:r?a+o:i+s,end:r?a:i}}function i1(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function hxe(e,t){return fW(e,t+1)}function pxe(e,t,n,r,a){for(var i=(r||[]).slice(),{start:o,end:s}=t,l=0,u=1,c=o,f=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:fW(r,u)};var v=l,y,g=()=>(y===void 0&&(y=n(m,v)),y),b=m.coordinate,x=l===0||i1(e,b,g,c,s);x||(l=0,c=o,u+=1),x&&(c=b+e*(g()/2+a),l+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(r){mxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mxe(e,t,n){return(t=gxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gxe(e){var t=vxe(e,"string");return typeof t=="symbol"?t:t+""}function vxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yxe(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,{start:s}=t,{end:l}=t,u=function(h){var p=i[h],m,v=()=>(m===void 0&&(m=n(p,h)),m);if(h===o-1){var y=e*(p.coordinate+e*v()/2-l);i[h]=p=Pa(Pa({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else i[h]=p=Pa(Pa({},p),{},{tickCoord:p.coordinate});var g=i1(e,p.tickCoord,v,s,l);g&&(l=p.tickCoord-e*(v()/2+a),i[h]=Pa(Pa({},p),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return i}function bxe(e,t,n,r,a,i){var o=(r||[]).slice(),s=o.length,{start:l,end:u}=t;if(i){var c=r[s-1],f=n(c,s-1),h=e*(c.coordinate+e*f/2-u);o[s-1]=c=Pa(Pa({},c),{},{tickCoord:h>0?c.coordinate-h*e:c.coordinate});var p=i1(e,c.tickCoord,()=>f,l,u);p&&(u=c.tickCoord-e*(f/2+a),o[s-1]=Pa(Pa({},c),{},{isShow:!0}))}for(var m=i?s-1:s,v=function(b){var x=o[b],N,k=()=>(N===void 0&&(N=n(x,b)),N);if(b===0){var j=e*(x.coordinate-e*k()/2-l);o[b]=x=Pa(Pa({},x),{},{tickCoord:j<0?x.coordinate-j*e:x.coordinate})}else o[b]=x=Pa(Pa({},x),{},{tickCoord:x.coordinate});var S=i1(e,x.tickCoord,k,l,u);S&&(l=x.tickCoord+e*(k()/2+a),o[b]=Pa(Pa({},x),{},{isShow:!0}))},y=0;y<m;y++)v(y);return o}function XA(e,t,n){var{tick:r,ticks:a,viewBox:i,minTickGap:o,orientation:s,interval:l,tickFormatter:u,unit:c,angle:f}=e;if(!a||!a.length||!r)return[];if(st(l)||e0.isSsr){var h;return(h=hxe(a,st(l)?l:0))!==null&&h!==void 0?h:[]}var p=[],m=s==="top"||s==="bottom"?"width":"height",v=c&&m==="width"?xg(c,{fontSize:t,letterSpacing:n}):{width:0,height:0},y=(x,N)=>{var k=typeof u=="function"?u(x.value,N):x.value;return m==="width"?dxe(xg(k,{fontSize:t,letterSpacing:n}),v,f):xg(k,{fontSize:t,letterSpacing:n})[m]},g=a.length>=2?vi(a[1].coordinate-a[0].coordinate):1,b=fxe(i,g,m);return l==="equidistantPreserveStart"?pxe(g,b,y,a,o):(l==="preserveStart"||l==="preserveStartEnd"?p=bxe(g,b,y,a,o,l==="preserveStartEnd"):p=yxe(g,b,y,a,o),p.filter(x=>x.isShow))}var xxe=["viewBox"],wxe=["viewBox"];function jh(){return jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jh.apply(null,arguments)}function fT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(n),!0).forEach(function(r){JA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hT(e,t){if(e==null)return{};var n,r,a=Nxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Nxe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function JA(e,t,n){return(t=Sxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sxe(e){var t=kxe(e,"string");return typeof t=="symbol"?t:t+""}function kxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Rc extends M.Component{constructor(t){super(t),this.tickRefs=M.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,a=hT(t,xxe),i=this.props,{viewBox:o}=i,s=hT(i,wxe);return!ON(r,o)||!ON(a,s)||!ON(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:a,height:i,orientation:o,tickSize:s,mirror:l,tickMargin:u}=this.props,c,f,h,p,m,v,y=l?-1:1,g=t.tickSize||s,b=st(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":c=f=t.coordinate,p=r+ +!l*i,h=p-y*g,v=h-y*u,m=b;break;case"left":h=p=t.coordinate,f=n+ +!l*a,c=f-y*g,m=c-y*u,v=b;break;case"right":h=p=t.coordinate,f=n+ +l*a,c=f+y*g,m=c+y*u,v=b;break;default:c=f=t.coordinate,p=r+ +l*i,h=p+y*g,v=h+y*u,m=b;break}return{line:{x1:c,y1:h,x2:f,y2:p},tick:{x:m,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,r;switch(t){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:a,orientation:i,mirror:o,axisLine:s}=this.props,l=Tr(Tr(Tr({},Hn(this.props,!1)),Hn(s,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);l=Tr(Tr({},l),{},{x1:t,y1:n+u*a,x2:t+r,y2:n+u*a})}else{var c=+(i==="left"&&!o||i==="right"&&o);l=Tr(Tr({},l),{},{x1:t+c*r,y1:n,x2:t+c*r,y2:n+a})}return M.createElement("line",jh({},l,{className:cn("recharts-cartesian-axis-line",Gd(s,"className"))}))}static renderTickItem(t,n,r){var a,i=cn(n.className,"recharts-cartesian-axis-tick-value");if(M.isValidElement(t))a=M.cloneElement(t,Tr(Tr({},n),{},{className:i}));else if(typeof t=="function")a=t(Tr(Tr({},n),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=cn(o,t.className)),a=M.createElement(VA,jh({},n,{className:o}),r)}return a}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:o,tickFormatter:s,unit:l}=this.props,u=XA(Tr(Tr({},this.props),{},{ticks:r}),t,n),c=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),h=Hn(this.props,!1),p=Hn(o,!1),m=Tr(Tr({},h),{},{fill:"none"},Hn(a,!1)),v=u.map((y,g)=>{var{line:b,tick:x}=this.getTickLineCoord(y),N=Tr(Tr(Tr(Tr({textAnchor:c,verticalAnchor:f},h),{},{stroke:"none",fill:i},p),x),{},{index:g,payload:y,visibleTicksCount:u.length,tickFormatter:s});return M.createElement(nl,jh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},y2(this.props,y,g)),a&&M.createElement("line",jh({},m,b,{className:cn("recharts-cartesian-axis-tick-line",Gd(a,"className"))})),o&&Rc.renderTickItem(o,N,"".concat(typeof s=="function"?s(y.value,g):y.value).concat(l||"")))});return v.length>0?M.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:n,height:r,className:a,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:M.createElement(nl,{className:cn("recharts-cartesian-axis",a),ref:s=>{if(s){var l=s.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var c=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(c!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Vi.renderCallByParent(this.props))}}JA(Rc,"displayName","CartesianAxis");JA(Rc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _xe=["x1","y1","x2","y2","key"],jxe=["offset"],Axe=["xAxisId","yAxisId"],Cxe=["xAxisId","yAxisId"];function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(n),!0).forEach(function(r){Exe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Exe(e,t,n){return(t=Dxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dxe(e){var t=Pxe(e,"string");return typeof t=="symbol"?t:t+""}function Pxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},md.apply(null,arguments)}function o1(e,t){if(e==null)return{};var n,r,a=Oxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Oxe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Txe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:a,width:i,height:o,ry:s}=e;return M.createElement("rect",{x:r,y:a,ry:s,width:i,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function hW(e,t){var n;if(M.isValidElement(e))n=M.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:a,x2:i,y2:o,key:s}=t,l=o1(t,_xe),u=Hn(l,!1),c=o1(u,jxe);n=M.createElement("line",md({},c,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:s}))}return n}function Mxe(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:a}=e;if(!r||!a||!a.length)return null;var i=o1(e,Axe),o=a.map((s,l)=>{var u=La(La({},i),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(l),index:l});return hW(r,u)});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Lxe(e){var{y:t,height:n,vertical:r=!0,verticalPoints:a}=e;if(!r||!a||!a.length)return null;var i=o1(e,Cxe),o=a.map((s,l)=>{var u=La(La({},i),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(l),index:l});return hW(r,u)});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Ixe(e){var{horizontalFill:t,fillOpacity:n,x:r,y:a,width:i,height:o,horizontalPoints:s,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=s.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var c=u.map((f,h)=>{var p=!u[h+1],m=p?a+o-f:u[h+1]-f;if(m<=0)return null;var v=h%t.length;return M.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:m,width:i,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function Rxe(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:a,y:i,width:o,height:s,verticalPoints:l}=e;if(!t||!n||!n.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var c=u.map((f,h)=>{var p=!u[h+1],m=p?a+o-f:u[h+1]-f;if(m<=0)return null;var v=h%n.length;return M.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:m,height:s,stroke:"none",fill:n[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var Bxe=(e,t)=>{var{xAxis:n,width:r,height:a,offset:i}=e;return i9(XA(La(La(La({},Rc.defaultProps),n),{},{ticks:o9(n),viewBox:{x:0,y:0,width:r,height:a}})),i.left,i.left+i.width,t)},Fxe=(e,t)=>{var{yAxis:n,width:r,height:a,offset:i}=e;return i9(XA(La(La(La({},Rc.defaultProps),n),{},{ticks:o9(n),viewBox:{x:0,y:0,width:r,height:a}})),i.top,i.top+i.height,t)},zxe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function pW(e){var t=Vj(),n=Gj(),r=d9(),a=La(La({},Tc(e,zxe)),{},{x:st(e.x)?e.x:r.left,y:st(e.y)?e.y:r.top,width:st(e.width)?e.width:r.width,height:st(e.height)?e.height:r.height}),{xAxisId:i,yAxisId:o,x:s,y:l,width:u,height:c,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,m=ji(),v=yt(P=>CO(P,"xAxis",i,m)),y=yt(P=>CO(P,"yAxis",o,m));if(!st(u)||u<=0||!st(c)||c<=0||!st(s)||s!==+s||!st(l)||l!==+l)return null;var g=a.verticalCoordinatesGenerator||Bxe,b=a.horizontalCoordinatesGenerator||Fxe,{horizontalPoints:x,verticalPoints:N}=a;if((!x||!x.length)&&typeof b=="function"){var k=h&&h.length,j=b({yAxis:y?La(La({},y),{},{ticks:k?h:y.ticks}):void 0,width:t,height:n,offset:r},k?!0:f);bg(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(x=j)}if((!N||!N.length)&&typeof g=="function"){var S=p&&p.length,A=g({xAxis:v?La(La({},v),{},{ticks:S?p:v.ticks}):void 0,width:t,height:n,offset:r},S?!0:f);bg(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(N=A)}return M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(Txe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),M.createElement(Ixe,md({},a,{horizontalPoints:x})),M.createElement(Rxe,md({},a,{verticalPoints:N})),M.createElement(Mxe,md({},a,{offset:r,horizontalPoints:x,xAxis:v,yAxis:y})),M.createElement(Lxe,md({},a,{offset:r,verticalPoints:N,xAxis:v,yAxis:y})))}pW.displayName="CartesianGrid";function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(n),!0).forEach(function(r){Uxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uxe(e,t,n){return(t=Wxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wxe(e){var t=qxe(e,"string");return typeof t=="symbol"?t:t+""}function qxe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hxe={xAxis:{},yAxis:{},zAxis:{}},mW=Ko({name:"cartesianAxis",initialState:Hxe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=gT(gT({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:$xe,removeXAxis:Vxe,addYAxis:Gxe,removeYAxis:Kxe,addZAxis:Gwe,removeZAxis:Kwe,updateYAxisWidth:Yxe}=mW.actions,Xxe=mW.reducer,Jxe=["children"],Qxe=["dangerouslySetInnerHTML","ticks"];function gW(e,t,n){return(t=Zxe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zxe(e){var t=e1e(e,"string");return typeof t=="symbol"?t:t+""}function e1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N_.apply(null,arguments)}function vW(e,t){if(e==null)return{};var n,r,a=t1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function t1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function n1e(e){var t=br(),n=M.useMemo(()=>{var i=vW(e,Jxe);return i},[e]),r=yt(i=>cu(i,n.id)),a=n===r;return M.useEffect(()=>(t($xe(n)),()=>{t(Vxe(n))}),[n,t]),a?e.children:null}var r1e=e=>{var{xAxisId:t,className:n}=e,r=yt(c9),a=ji(),i="xAxis",o=yt(f=>Hp(f,i,t,a)),s=yt(f=>sU(f,i,t,a)),l=yt(f=>rU(f,t)),u=yt(f=>Nge(f,t));if(l==null||u==null)return null;var c=vW(e,Qxe);return M.createElement(Rc,N_({},c,{scale:o,x:u.x,y:u.y,width:l.width,height:l.height,className:cn("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:s}))},a1e=e=>{var t,n,r,a,i;return M.createElement(n1e,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},M.createElement(r1e,e))};class QA extends M.Component{render(){return M.createElement(a1e,this.props)}}gW(QA,"displayName","XAxis");gW(QA,"defaultProps",{allowDataOverflow:zi.allowDataOverflow,allowDecimals:zi.allowDecimals,allowDuplicatedCategory:zi.allowDuplicatedCategory,height:zi.height,hide:!1,mirror:zi.mirror,orientation:zi.orientation,padding:zi.padding,reversed:zi.reversed,scale:zi.scale,tickCount:zi.tickCount,type:zi.type,xAxisId:0});var i1e=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(c=>{if(c){var f=c.getBoundingClientRect();f.width>o&&(o=f.width)}});var s=n?n.getBoundingClientRect().width:0,l=a+i,u=o+l+s+(n?r:0);return Math.round(u)}return 0},o1e=["dangerouslySetInnerHTML","ticks"];function yW(e,t,n){return(t=s1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s1e(e){var t=l1e(e,"string");return typeof t=="symbol"?t:t+""}function l1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S_.apply(null,arguments)}function u1e(e,t){if(e==null)return{};var n,r,a=c1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function d1e(e){var t=br();return M.useEffect(()=>(t(Gxe(e)),()=>{t(Kxe(e))}),[e,t]),null}var f1e=e=>{var t,{yAxisId:n,className:r,width:a,label:i}=e,o=M.useRef(null),s=M.useRef(null),l=yt(c9),u=ji(),c=br(),f="yAxis",h=yt(g=>Hp(g,f,n,u)),p=yt(g=>aU(g,n)),m=yt(g=>Sge(g,n)),v=yt(g=>sU(g,f,n,u));if(M.useLayoutEffect(()=>{var g;if(!(a!=="auto"||!p||GA(i)||M.isValidElement(i))){var b=o.current,x=b==null||(g=b.tickRefs)===null||g===void 0?void 0:g.current,{tickSize:N,tickMargin:k}=b.props,j=i1e({ticks:x,label:s.current,labelGapWithTick:5,tickSize:N,tickMargin:k});Math.round(p.width)!==Math.round(j)&&c(Yxe({id:n,width:j}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,c,i,n,a]),p==null||m==null)return null;var y=u1e(e,o1e);return M.createElement(Rc,S_({},y,{ref:o,labelRef:s,scale:h,x:m.x,y:m.y,width:p.width,height:p.height,className:cn("recharts-".concat(f," ").concat(f),r),viewBox:l,ticks:v}))},h1e=e=>{var t,n,r,a,i;return M.createElement(M.Fragment,null,M.createElement(d1e,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),M.createElement(f1e,e))},p1e={allowDataOverflow:Ui.allowDataOverflow,allowDecimals:Ui.allowDecimals,allowDuplicatedCategory:Ui.allowDuplicatedCategory,hide:!1,mirror:Ui.mirror,orientation:Ui.orientation,padding:Ui.padding,reversed:Ui.reversed,scale:Ui.scale,tickCount:Ui.tickCount,type:Ui.type,width:Ui.width,yAxisId:0};class ZA extends M.Component{render(){return M.createElement(h1e,this.props)}}yW(ZA,"displayName","YAxis");yW(ZA,"defaultProps",p1e);var m1e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0=M;function g1e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var v1e=typeof Object.is=="function"?Object.is:g1e,y1e=c0.useSyncExternalStore,b1e=c0.useRef,x1e=c0.useEffect,w1e=c0.useMemo,N1e=c0.useDebugValue;m1e.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var i=b1e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=w1e(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),a!==void 0&&o.hasValue){var m=o.value;if(a(m,p))return f=m}return f=p}if(m=f,v1e(c,p))return m;var v=r(p);return a!==void 0&&a(m,v)?(c=p,m):(c=p,f=v)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,a]);var s=y1e(e,i[0],i[1]);return x1e(function(){o.hasValue=!0,o.value=s},[s]),N1e(s),s};function S1e(e){e()}function k1e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){S1e(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!r||e===null||(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var vT={notify(){},get:()=>[]};function _1e(e,t){let n,r=vT,a=0,i=!1;function o(v){c();const y=r.subscribe(v);let g=!1;return()=>{g||(g=!0,y(),f())}}function s(){r.notify()}function l(){m.onStateChange&&m.onStateChange()}function u(){return i}function c(){a++,n||(n=e.subscribe(l),r=k1e())}function f(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=vT)}function h(){i||(i=!0,c())}function p(){i&&(i=!1,f())}const m={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return m}var j1e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A1e=j1e(),C1e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",E1e=C1e(),D1e=()=>A1e||E1e?M.useLayoutEffect:M.useEffect,P1e=D1e(),TN=Symbol.for("react-redux-context"),MN=typeof globalThis<"u"?globalThis:{};function O1e(){if(!M.createContext)return{};const e=MN[TN]??(MN[TN]=new Map);let t=e.get(M.createContext);return t||(t=M.createContext(null),e.set(M.createContext,t)),t}var T1e=O1e();function M1e(e){const{children:t,context:n,serverState:r,store:a}=e,i=M.useMemo(()=>{const l=_1e(a);return{store:a,subscription:l,getServerState:r?()=>r:void 0}},[a,r]),o=M.useMemo(()=>a.getState(),[a]);P1e(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const s=n||T1e;return M.createElement(s.Provider,{value:i},t)}var L1e=M1e,I1e=(e,t)=>t,eC=Be([I1e,En,Lme,ua,NU,du,_ve,oa],Dve),tC=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},bW=$o("mouseClick"),xW=Zv();xW.startListening({actionCreator:bW,effect:(e,t)=>{var n=e.payload,r=eC(t.getState(),tC(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(Ige({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var k_=$o("mouseMove"),wW=Zv();wW.startListening({actionCreator:k_,effect:(e,t)=>{var n=e.payload,r=t.getState(),a=RA(r,r.tooltip.settings.shared),i=eC(r,tC(n));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(mU({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(pU()))}});function R1e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var yT={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},NW=Ko({name:"rootProps",initialState:yT,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:yT.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),B1e=NW.reducer,{updateOptions:F1e}=NW.actions,z1e=Ko({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),U1e=z1e.reducer,SW=$o("keyDown"),kW=$o("focus"),nC=Zv();nC.startListening({actionCreator:SW,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(BA(a,vf(n))),s=du(n);if(i==="Enter"){var l=t1(n,"axis","hover",String(a.index));t.dispatch(m_({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var u=Age(n),c=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=o+f*c;if(!(s==null||h>=s.length||h<0)){var p=t1(n,"axis","hover",String(h));t.dispatch(m_({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});nC.startListening({actionCreator:kW,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var i="0",o=t1(n,"axis","hover",String(i));t.dispatch(m_({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Co=$o("externalEvent"),_W=Zv();_W.startListening({actionCreator:Co,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:gve(n),activeDataKey:jU(n),activeIndex:Np(n),activeLabel:_U(n),activeTooltipIndex:Np(n),isTooltipActive:vve(n)};e.payload.handler(r,e.payload.reactEvent)}}});var W1e=Be([$p],e=>e.tooltipItemPayloads),q1e=Be([W1e,u0,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var a=e.find(s=>s.settings.dataKey===r);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,n);return o}}}),jW=$o("touchMove"),AW=Zv();AW.startListening({actionCreator:jW,effect:(e,t)=>{var n=e.payload,r=t.getState(),a=RA(r,r.tooltip.settings.shared);if(a==="axis"){var i=eC(r,tC({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(mU({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,s=n.touches[0],l=document.elementFromPoint(s.clientX,s.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(nde),c=(o=l.getAttribute(rde))!==null&&o!==void 0?o:void 0,f=q1e(t.getState(),u,c);t.dispatch(hU({activeDataKey:c,activeIndex:u,activeCoordinate:f}))}}});var H1e=IF({brush:exe,cartesianAxis:Xxe,chartData:Vve,graphicalItems:lye,layout:jce,legend:vde,options:Uve,polarAxis:tye,polarOptions:U1e,referenceElements:lxe,rootProps:B1e,tooltip:Rge}),$1e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Jue({reducer:H1e,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([xW.middleware,wW.middleware,nC.middleware,_W.middleware,AW.middleware]),devTools:{serialize:{replacer:R1e},name:"recharts-".concat(n)}})};function V1e(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,a=ji(),i=M.useRef(null);if(a)return n;i.current==null&&(i.current=$1e(t,r));var o=Mj;return M.createElement(L1e,{context:o,store:i.current},n)}function G1e(e){var{layout:t,width:n,height:r,margin:a}=e,i=br(),o=ji();return M.useEffect(()=>{o||(i(Sce(t)),i(kce({width:n,height:r})),i(Nce(a)))},[i,o,t,n,r,a]),null}function K1e(e){var t=br();return M.useEffect(()=>{t(F1e(e))},[t,e]),null}var Y1e=["children"];function X1e(e,t){if(e==null)return{};var n,r,a=J1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function J1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s1.apply(null,arguments)}var Q1e={width:"100%",height:"100%"},Z1e=M.forwardRef((e,t)=>{var n=Vj(),r=Gj(),a=h9();if(!zx(n)||!zx(r))return null;var{children:i,otherAttributes:o,title:s,desc:l}=e,u,c;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?c=o.role:c=a?"application":void 0,M.createElement(xj,s1({},o,{title:s,desc:l,role:c,tabIndex:u,width:n,height:r,style:Q1e,ref:t}),i)}),e2e=e=>{var{children:t}=e,n=yt(I2);if(!n)return null;var{width:r,height:a,y:i,x:o}=n;return M.createElement(xj,{width:r,height:a,x:o,y:i},t)},bT=M.forwardRef((e,t)=>{var{children:n}=e,r=X1e(e,Y1e),a=ji();return a?M.createElement(e2e,null,n):M.createElement(Z1e,s1({ref:t},r),n)});function t2e(){var e=br(),[t,n]=M.useState(null),r=yt(tde);return M.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;fo(i)&&i!==r&&e(_ce(i))}},[t,e,r]),n}function xT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function n2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(n),!0).forEach(function(r){r2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r2e(e,t,n){return(t=a2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a2e(e){var t=i2e(e,"string");return typeof t=="symbol"?t:t+""}function i2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o2e=M.forwardRef((e,t)=>{var{children:n,className:r,height:a,onClick:i,onContextMenu:o,onDoubleClick:s,onMouseDown:l,onMouseEnter:u,onMouseLeave:c,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:m,onTouchStart:v,style:y,width:g}=e,b=br(),[x,N]=M.useState(null),[k,j]=M.useState(null);Yve();var S=t2e(),A=M.useCallback(L=>{S(L),typeof t=="function"&&t(L),N(L),j(L)},[S,t,N,j]),P=M.useCallback(L=>{b(bW(L)),b(Co({handler:i,reactEvent:L}))},[b,i]),T=M.useCallback(L=>{b(k_(L)),b(Co({handler:u,reactEvent:L}))},[b,u]),E=M.useCallback(L=>{b(pU()),b(Co({handler:c,reactEvent:L}))},[b,c]),D=M.useCallback(L=>{b(k_(L)),b(Co({handler:f,reactEvent:L}))},[b,f]),R=M.useCallback(()=>{b(kW())},[b]),F=M.useCallback(L=>{b(SW(L.key))},[b]),H=M.useCallback(L=>{b(Co({handler:o,reactEvent:L}))},[b,o]),B=M.useCallback(L=>{b(Co({handler:s,reactEvent:L}))},[b,s]),U=M.useCallback(L=>{b(Co({handler:l,reactEvent:L}))},[b,l]),W=M.useCallback(L=>{b(Co({handler:h,reactEvent:L}))},[b,h]),z=M.useCallback(L=>{b(Co({handler:v,reactEvent:L}))},[b,v]),J=M.useCallback(L=>{b(jW(L)),b(Co({handler:m,reactEvent:L}))},[b,m]),ee=M.useCallback(L=>{b(Co({handler:p,reactEvent:L}))},[b,p]);return M.createElement(OU.Provider,{value:x},M.createElement(qB.Provider,{value:k},M.createElement("div",{className:cn("recharts-wrapper",r),style:n2e({position:"relative",cursor:"default",width:g,height:a},y),onClick:P,onContextMenu:H,onDoubleClick:B,onFocus:R,onKeyDown:F,onMouseDown:U,onMouseEnter:T,onMouseLeave:E,onMouseMove:D,onMouseUp:W,onTouchEnd:ee,onTouchMove:J,onTouchStart:z,ref:A},n)))}),s2e=["children","className","width","height","style","compact","title","desc"];function l2e(e,t){if(e==null)return{};var n,r,a=u2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var c2e=M.forwardRef((e,t)=>{var{children:n,className:r,width:a,height:i,style:o,compact:s,title:l,desc:u}=e,c=l2e(e,s2e),f=Hn(c,!1);return s?M.createElement(bT,{otherAttributes:f,title:l,desc:u},n):M.createElement(o2e,{className:r,style:o,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},M.createElement(bT,{otherAttributes:f,title:l,desc:u,ref:t},M.createElement(cxe,null,n)))}),d2e=["width","height"];function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__.apply(null,arguments)}function f2e(e,t){if(e==null)return{};var n,r,a=h2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var p2e={top:5,right:5,bottom:5,left:5},m2e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:p2e,reverseStackOrder:!1,syncMethod:"index"},g2e=M.forwardRef(function(t,n){var r,a=Tc(t.categoricalChartProps,m2e),{width:i,height:o}=a,s=f2e(a,d2e);if(!zx(i)||!zx(o))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return M.createElement(V1e,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:l},M.createElement(Qbe,{chartData:h.data}),M.createElement(G1e,{width:i,height:o,layout:a.layout,margin:a.margin}),M.createElement(K1e,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),M.createElement(c2e,__({},s,{width:i,height:o,ref:n})))}),v2e=["axis","item"],y2e=M.forwardRef((e,t)=>M.createElement(g2e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:v2e,tooltipPayloadSearcher:Fve,categoricalChartProps:e,ref:t}));function yn(e){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(e)}var Ba=Uint8Array,Qi=Uint16Array,rC=Int32Array,nw=new Ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rw=new Ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j_=new Ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CW=function(e,t){for(var n=new Qi(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var a=new rC(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return{b:n,r:a}},EW=CW(nw,2),DW=EW.b,A_=EW.r;DW[28]=258,A_[258]=28;var PW=CW(rw,0),b2e=PW.b,wT=PW.r,C_=new Qi(32768);for(var Fn=0;Fn<32768;++Fn){var Lu=(Fn&43690)>>1|(Fn&21845)<<1;Lu=(Lu&52428)>>2|(Lu&13107)<<2,Lu=(Lu&61680)>>4|(Lu&3855)<<4,C_[Fn]=((Lu&65280)>>8|(Lu&255)<<8)>>1}var Js=function(e,t,n){for(var r=e.length,a=0,i=new Qi(t);a<r;++a)e[a]&&++i[e[a]-1];var o=new Qi(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var s;if(n){s=new Qi(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],c=t-e[a],f=o[e[a]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)s[C_[f]>>l]=u}else for(s=new Qi(r),a=0;a<r;++a)e[a]&&(s[a]=C_[o[e[a]-1]++]>>15-e[a]);return s},kc=new Ba(288);for(var Fn=0;Fn<144;++Fn)kc[Fn]=8;for(var Fn=144;Fn<256;++Fn)kc[Fn]=9;for(var Fn=256;Fn<280;++Fn)kc[Fn]=7;for(var Fn=280;Fn<288;++Fn)kc[Fn]=8;var hv=new Ba(32);for(var Fn=0;Fn<32;++Fn)hv[Fn]=5;var x2e=Js(kc,9,0),w2e=Js(kc,9,1),N2e=Js(hv,5,0),S2e=Js(hv,5,1),LN=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ns=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},IN=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},aC=function(e){return(e+7)/8|0},OW=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ba(e.subarray(t,n))},k2e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],as=function(e,t,n){var r=new Error(t||k2e[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,as),!n)throw r;return r},_2e=function(e,t,n,r){var a=e.length,i=0;if(!a||t.f&&!t.l)return n||new Ba(0);var o=!n,s=o||t.i!=2,l=t.i;o&&(n=new Ba(a*3));var u=function(ae){var le=n.length;if(ae>le){var Se=new Ba(Math.max(le*2,ae));Se.set(n),n=Se}},c=t.f||0,f=t.p||0,h=t.b||0,p=t.l,m=t.d,v=t.m,y=t.n,g=a*8;do{if(!p){c=ns(e,f,1);var b=ns(e,f+1,3);if(f+=3,b)if(b==1)p=w2e,m=S2e,v=9,y=5;else if(b==2){var j=ns(e,f,31)+257,S=ns(e,f+10,15)+4,A=j+ns(e,f+5,31)+1;f+=14;for(var P=new Ba(A),T=new Ba(19),E=0;E<S;++E)T[j_[E]]=ns(e,f+E*3,7);f+=S*3;for(var D=LN(T),R=(1<<D)-1,F=Js(T,D,1),E=0;E<A;){var H=F[ns(e,f,R)];f+=H&15;var x=H>>4;if(x<16)P[E++]=x;else{var B=0,U=0;for(x==16?(U=3+ns(e,f,3),f+=2,B=P[E-1]):x==17?(U=3+ns(e,f,7),f+=3):x==18&&(U=11+ns(e,f,127),f+=7);U--;)P[E++]=B}}var W=P.subarray(0,j),z=P.subarray(j);v=LN(W),y=LN(z),p=Js(W,v,1),m=Js(z,y,1)}else as(1);else{var x=aC(f)+4,N=e[x-4]|e[x-3]<<8,k=x+N;if(k>a){l&&as(0);break}s&&u(h+N),n.set(e.subarray(x,k),h),t.b=h+=N,t.p=f=k*8,t.f=c;continue}if(f>g){l&&as(0);break}}s&&u(h+131072);for(var J=(1<<v)-1,ee=(1<<y)-1,L=f;;L=f){var B=p[IN(e,f)&J],q=B>>4;if(f+=B&15,f>g){l&&as(0);break}if(B||as(2),q<256)n[h++]=q;else if(q==256){L=f,p=null;break}else{var Y=q-254;if(q>264){var E=q-257,te=nw[E];Y=ns(e,f,(1<<te)-1)+DW[E],f+=te}var K=m[IN(e,f)&ee],ce=K>>4;K||as(3),f+=K&15;var z=b2e[ce];if(ce>3){var te=rw[ce];z+=IN(e,f)&(1<<te)-1,f+=te}if(f>g){l&&as(0);break}s&&u(h+131072);var he=h+Y;if(h<z){var $=i-z,X=Math.min(z,he);for($+h<0&&as(3);h<X;++h)n[h]=r[$+h]}for(;h<he;++h)n[h]=n[h-z]}}t.l=p,t.p=L,t.b=h,t.f=c,p&&(c=1,t.m=v,t.d=m,t.n=y)}while(!c);return h!=n.length&&o?OW(n,0,h):n.subarray(0,h)},_l=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},qm=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},RN=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return{t:MW,l:0};if(a==1){var o=new Ba(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(k,j){return k.f-j.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,f=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=a-1;)s=n[n[u].f<n[f].f?u++:f++],l=n[u!=c&&n[u].f<n[f].f?u++:f++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=i[0].s,r=1;r<a;++r)i[r].s>h&&(h=i[r].s);var p=new Qi(h+1),m=E_(n[c-1],p,0);if(m>t){var r=0,v=0,y=m-t,g=1<<y;for(i.sort(function(j,S){return p[S.s]-p[j.s]||j.f-S.f});r<a;++r){var b=i[r].s;if(p[b]>t)v+=g-(1<<m-p[b]),p[b]=t;else break}for(v>>=y;v>0;){var x=i[r].s;p[x]<t?v-=1<<t-p[x]++-1:++r}for(;r>=0&&v;--r){var N=i[r].s;p[N]==t&&(--p[N],++v)}m=t}return{t:new Ba(p),l:m}},E_=function(e,t,n){return e.s==-1?Math.max(E_(e.l,t,n+1),E_(e.r,t,n+1)):t[e.s]=n},NT=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Qi(++t),r=0,a=e[0],i=1,o=function(l){n[r++]=l},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[s]}return{c:n.subarray(0,r),n:t}},Hm=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},TW=function(e,t,n){var r=n.length,a=aC(t+2);e[a]=r&255,e[a+1]=r>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<r;++i)e[a+i+4]=n[i];return(a+4+r)*8},ST=function(e,t,n,r,a,i,o,s,l,u,c){_l(t,c++,n),++a[256];for(var f=RN(a,15),h=f.t,p=f.l,m=RN(i,15),v=m.t,y=m.l,g=NT(h),b=g.c,x=g.n,N=NT(v),k=N.c,j=N.n,S=new Qi(19),A=0;A<b.length;++A)++S[b[A]&31];for(var A=0;A<k.length;++A)++S[k[A]&31];for(var P=RN(S,7),T=P.t,E=P.l,D=19;D>4&&!T[j_[D-1]];--D);var R=u+5<<3,F=Hm(a,kc)+Hm(i,hv)+o,H=Hm(a,h)+Hm(i,v)+o+14+3*D+Hm(S,T)+2*S[16]+3*S[17]+7*S[18];if(l>=0&&R<=F&&R<=H)return TW(t,c,e.subarray(l,l+u));var B,U,W,z;if(_l(t,c,1+(H<F)),c+=2,H<F){B=Js(h,p,0),U=h,W=Js(v,y,0),z=v;var J=Js(T,E,0);_l(t,c,x-257),_l(t,c+5,j-1),_l(t,c+10,D-4),c+=14;for(var A=0;A<D;++A)_l(t,c+3*A,T[j_[A]]);c+=3*D;for(var ee=[b,k],L=0;L<2;++L)for(var q=ee[L],A=0;A<q.length;++A){var Y=q[A]&31;_l(t,c,J[Y]),c+=T[Y],Y>15&&(_l(t,c,q[A]>>5&127),c+=q[A]>>12)}}else B=x2e,U=kc,W=N2e,z=hv;for(var A=0;A<s;++A){var te=r[A];if(te>255){var Y=te>>18&31;qm(t,c,B[Y+257]),c+=U[Y+257],Y>7&&(_l(t,c,te>>23&31),c+=nw[Y]);var K=te&31;qm(t,c,W[K]),c+=z[K],K>3&&(qm(t,c,te>>5&8191),c+=rw[K])}else qm(t,c,B[te]),c+=U[te]}return qm(t,c,B[256]),c+U[256]},j2e=new rC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MW=new Ba(0),A2e=function(e,t,n,r,a,i){var o=i.z||e.length,s=new Ba(r+o+5*(1+Math.ceil(o/7e3))+a),l=s.subarray(r,s.length-a),u=i.l,c=(i.r||0)&7;if(t){c&&(l[0]=i.r>>3);for(var f=j2e[t-1],h=f>>13,p=f&8191,m=(1<<n)-1,v=i.p||new Qi(32768),y=i.h||new Qi(m+1),g=Math.ceil(n/3),b=2*g,x=function(Ee){return(e[Ee]^e[Ee+1]<<g^e[Ee+2]<<b)&m},N=new rC(25e3),k=new Qi(288),j=new Qi(32),S=0,A=0,P=i.i||0,T=0,E=i.w||0,D=0;P+2<o;++P){var R=x(P),F=P&32767,H=y[R];if(v[F]=H,y[R]=F,E<=P){var B=o-P;if((S>7e3||T>24576)&&(B>423||!u)){c=ST(e,l,0,N,k,j,A,T,D,P-D,c),T=S=A=0,D=P;for(var U=0;U<286;++U)k[U]=0;for(var U=0;U<30;++U)j[U]=0}var W=2,z=0,J=p,ee=F-H&32767;if(B>2&&R==x(P-ee))for(var L=Math.min(h,B)-1,q=Math.min(32767,P),Y=Math.min(258,B);ee<=q&&--J&&F!=H;){if(e[P+W]==e[P+W-ee]){for(var te=0;te<Y&&e[P+te]==e[P+te-ee];++te);if(te>W){if(W=te,z=ee,te>L)break;for(var K=Math.min(ee,te-2),ce=0,U=0;U<K;++U){var he=P-ee+U&32767,$=v[he],X=he-$&32767;X>ce&&(ce=X,H=he)}}}F=H,H=v[F],ee+=F-H&32767}if(z){N[T++]=268435456|A_[W]<<18|wT[z];var ae=A_[W]&31,le=wT[z]&31;A+=nw[ae]+rw[le],++k[257+ae],++j[le],E=P+W,++S}else N[T++]=e[P],++k[e[P]]}}for(P=Math.max(P,E);P<o;++P)N[T++]=e[P],++k[e[P]];c=ST(e,l,u,N,k,j,A,T,D,P-D,c),u||(i.r=c&7|l[c/8|0]<<3,c-=7,i.h=y,i.p=v,i.i=P,i.w=E)}else{for(var P=i.w||0;P<o+u;P+=65535){var Se=P+65535;Se>=o&&(l[c/8|0]=u,Se=o),c=TW(l,c+1,e.subarray(P,Se))}i.i=o}return OW(s,0,r+aC(c)+a)},LW=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=n.length|0,o=0;o!=i;){for(var s=Math.min(o+2655,i);o<s;++o)a+=r+=n[o];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}e=r,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},C2e=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Ba(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return A2e(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,a)},IW=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},E2e=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=LW();a.p(t.dictionary),IW(e,2,a.d())}},D2e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&as(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&as(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function D_(e,t){t||(t={});var n=LW();n.p(e);var r=C2e(e,t,t.dictionary?6:2,4);return E2e(r,t),IW(r,r.length-4,n.d()),r}function P2e(e,t){return _2e(e.subarray(D2e(e,t),-4),{i:2},t,t)}var O2e=typeof TextDecoder<"u"&&new TextDecoder,T2e=0;try{O2e.decode(MW,{stream:!0}),T2e=1}catch{}var St=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function BN(){St.console&&typeof St.console.log=="function"&&St.console.log.apply(St.console,arguments)}var jn={log:BN,warn:function(e){St.console&&(typeof St.console.warn=="function"?St.console.warn.apply(St.console,arguments):BN.call(null,arguments))},error:function(e){St.console&&(typeof St.console.error=="function"?St.console.error.apply(St.console,arguments):BN(e))}};function FN(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){sd(r.response,t,n)},r.onerror=function(){jn.error("could not download file")},r.send()}function kT(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Yy(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ng,P_,sd=St.saveAs||((typeof window>"u"?"undefined":yn(window))!=="object"||window!==St?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=St.URL||St.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?kT(a.href)?FN(e,t,n):Yy(a,a.target="_blank"):Yy(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Yy(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(kT(e))FN(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Yy(r)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:yn(i)!=="object"&&(jn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return FN(e,t,n);var a=e.type==="application/octet-stream",i=/constructor/i.test(St.HTMLElement)||St.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":yn(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var c=s.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},s.readAsDataURL(e)}else{var l=St.URL||St.webkitURL,u=l.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function RW(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,i=n[r].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zN(e,t){var n=e[0],r=e[1],a=e[2],i=e[3];n=Aa(n,r,a,i,t[0],7,-680876936),i=Aa(i,n,r,a,t[1],12,-389564586),a=Aa(a,i,n,r,t[2],17,606105819),r=Aa(r,a,i,n,t[3],22,-1044525330),n=Aa(n,r,a,i,t[4],7,-176418897),i=Aa(i,n,r,a,t[5],12,1200080426),a=Aa(a,i,n,r,t[6],17,-1473231341),r=Aa(r,a,i,n,t[7],22,-45705983),n=Aa(n,r,a,i,t[8],7,1770035416),i=Aa(i,n,r,a,t[9],12,-1958414417),a=Aa(a,i,n,r,t[10],17,-42063),r=Aa(r,a,i,n,t[11],22,-1990404162),n=Aa(n,r,a,i,t[12],7,1804603682),i=Aa(i,n,r,a,t[13],12,-40341101),a=Aa(a,i,n,r,t[14],17,-1502002290),n=Ca(n,r=Aa(r,a,i,n,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Ca(i,n,r,a,t[6],9,-1069501632),a=Ca(a,i,n,r,t[11],14,643717713),r=Ca(r,a,i,n,t[0],20,-373897302),n=Ca(n,r,a,i,t[5],5,-701558691),i=Ca(i,n,r,a,t[10],9,38016083),a=Ca(a,i,n,r,t[15],14,-660478335),r=Ca(r,a,i,n,t[4],20,-405537848),n=Ca(n,r,a,i,t[9],5,568446438),i=Ca(i,n,r,a,t[14],9,-1019803690),a=Ca(a,i,n,r,t[3],14,-187363961),r=Ca(r,a,i,n,t[8],20,1163531501),n=Ca(n,r,a,i,t[13],5,-1444681467),i=Ca(i,n,r,a,t[2],9,-51403784),a=Ca(a,i,n,r,t[7],14,1735328473),n=Ea(n,r=Ca(r,a,i,n,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ea(i,n,r,a,t[8],11,-2022574463),a=Ea(a,i,n,r,t[11],16,1839030562),r=Ea(r,a,i,n,t[14],23,-35309556),n=Ea(n,r,a,i,t[1],4,-1530992060),i=Ea(i,n,r,a,t[4],11,1272893353),a=Ea(a,i,n,r,t[7],16,-155497632),r=Ea(r,a,i,n,t[10],23,-1094730640),n=Ea(n,r,a,i,t[13],4,681279174),i=Ea(i,n,r,a,t[0],11,-358537222),a=Ea(a,i,n,r,t[3],16,-722521979),r=Ea(r,a,i,n,t[6],23,76029189),n=Ea(n,r,a,i,t[9],4,-640364487),i=Ea(i,n,r,a,t[12],11,-421815835),a=Ea(a,i,n,r,t[15],16,530742520),n=Da(n,r=Ea(r,a,i,n,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Da(i,n,r,a,t[7],10,1126891415),a=Da(a,i,n,r,t[14],15,-1416354905),r=Da(r,a,i,n,t[5],21,-57434055),n=Da(n,r,a,i,t[12],6,1700485571),i=Da(i,n,r,a,t[3],10,-1894986606),a=Da(a,i,n,r,t[10],15,-1051523),r=Da(r,a,i,n,t[1],21,-2054922799),n=Da(n,r,a,i,t[8],6,1873313359),i=Da(i,n,r,a,t[15],10,-30611744),a=Da(a,i,n,r,t[6],15,-1560198380),r=Da(r,a,i,n,t[13],21,1309151649),n=Da(n,r,a,i,t[4],6,-145523070),i=Da(i,n,r,a,t[11],10,-1120210379),a=Da(a,i,n,r,t[2],15,718787259),r=Da(r,a,i,n,t[9],21,-343485551),e[0]=nc(n,e[0]),e[1]=nc(r,e[1]),e[2]=nc(a,e[2]),e[3]=nc(i,e[3])}function aw(e,t,n,r,a,i){return t=nc(nc(t,e),nc(r,i)),nc(t<<a|t>>>32-a,n)}function Aa(e,t,n,r,a,i,o){return aw(t&n|~t&r,e,t,a,i,o)}function Ca(e,t,n,r,a,i,o){return aw(t&r|n&~r,e,t,a,i,o)}function Ea(e,t,n,r,a,i,o){return aw(t^n^r,e,t,a,i,o)}function Da(e,t,n,r,a,i,o){return aw(n^(t|~r),e,t,a,i,o)}function BW(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)zN(r,M2e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(zN(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,zN(r,a),r}function M2e(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Ng=St.atob.bind(St),P_=St.btoa.bind(St);var _T="0123456789abcdef".split("");function L2e(e){for(var t="",n=0;n<4;n++)t+=_T[e>>8*n+4&15]+_T[e>>8*n&15];return t}function I2e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function O_(e){return BW(e).map(I2e).join("")}var R2e=function(e){for(var t=0;t<e.length;t++)e[t]=L2e(e[t]);return e.join("")}(BW("hello"))!="5d41402abc4b2a76b9719d911017c592";function nc(e,t){if(R2e){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function T_(e,t){var n,r,a,i;if(e!==n){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var c=s[l];u=(u+c+o.charCodeAt(l))%256,s[l]=s[u],s[u]=c}n=e,r=s}else s=r;var f=t.length,h=0,p=0,m="";for(l=0;l<f;l++)p=(p+(c=s[h=(h+1)%256]))%256,s[h]=s[p],s[p]=c,o=s[(s[h]+s[p])%256],m+=String.fromCharCode(t.charCodeAt(l)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var jT={print:4,modify:8,copy:16,"annot-forms":32};function uh(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach(function(s){if(jT.perm!==void 0)throw new Error("Invalid permission: "+s);a+=jT[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=O_(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=T_(this.encryptionKey,this.padding)}function ch(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[r]}return t}function AT(e){if(yn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!a],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,r)}catch(s){St.console&&jn.error("jsPDF PubSub Error",s.message,s)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function pv(e){if(!(this instanceof pv))return new pv(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function FW(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vu(e,t,n,r,a){if(!(this instanceof Vu))return new Vu(e,t,n,r,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,FW.call(this,r,a)}function gd(e,t,n,r,a){if(!(this instanceof gd))return new gd(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,FW.call(this,r,a)}function wt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],i=arguments[3],o=[],s=1,l=16,u="S",c=null;yn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,a=e.format||a,i=e.compress||e.compressPdf||i,(c=e.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=AT;var m="1.3",v=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(C){m=C};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return y};var g=p.__private__.getPageFormat=function(C){return y[C]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},x=b.COMPAT;function N(){this.saveGraphicsState(),ie(new bt(Ke,0,0,-Ke,0,vu()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),u="n",x=b.ADVANCED}function k(){this.restoreGraphicsState(),u="S",x=b.COMPAT}var j=p.__private__.combineFontStyleAndFontWeight=function(C,G){if(C=="bold"&&G=="normal"||C=="bold"&&G==400||C=="normal"&&G=="italic"||C=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(C=G==400||G==="normal"?C==="italic"?"italic":"normal":G!=700&&G!=="bold"||C!=="normal"?(G==700?"bold":G)+""+C:"bold"),C};p.advancedAPI=function(C){var G=x===b.COMPAT;return G&&N.call(this),typeof C!="function"||(C(this),G&&k.call(this)),this},p.compatAPI=function(C){var G=x===b.ADVANCED;return G&&k.call(this),typeof C!="function"||(C(this),G&&N.call(this)),this},p.isAdvancedAPI=function(){return x===b.ADVANCED};var S,A=function(C){if(x!==b.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=p.roundToPrecision=p.__private__.roundToPrecision=function(C,G){var de=t||G;if(isNaN(C)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(de).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf=typeof l=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return P(C,l)}:l==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return P(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return P(C,16)};var T=p.f2=p.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return P(C,2)},E=p.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return P(C,3)},D=p.scale=p.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return x===b.COMPAT?C*Ke:x===b.ADVANCED?C:void 0},R=function(C){return x===b.COMPAT?vu()-C:x===b.ADVANCED?C:void 0},F=function(C){return D(R(C))};p.__private__.setPrecision=p.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var H,B="00000000000000000000000000000000",U=p.__private__.getFileId=function(){return B},W=p.__private__.setFileId=function(C){return B=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(_a=new uh(c.userPermissions,c.userPassword,c.ownerPassword,B)),B};p.setFileId=function(C){return W(C),this},p.getFileId=function(){return U()};var z=p.__private__.convertDateToPDFDate=function(C){var G=C.getTimezoneOffset(),de=G<0?"+":"-",ge=Math.floor(Math.abs(G/60)),ke=Math.abs(G%60),Le=[de,Y(ge),"'",Y(ke),"'"].join("");return["D:",C.getFullYear(),Y(C.getMonth()+1),Y(C.getDate()),Y(C.getHours()),Y(C.getMinutes()),Y(C.getSeconds()),Le].join("")},J=p.__private__.convertPDFDateToDate=function(C){var G=parseInt(C.substr(2,4),10),de=parseInt(C.substr(6,2),10)-1,ge=parseInt(C.substr(8,2),10),ke=parseInt(C.substr(10,2),10),Le=parseInt(C.substr(12,2),10),$e=parseInt(C.substr(14,2),10);return new Date(G,de,ge,ke,Le,$e,0)},ee=p.__private__.setCreationDate=function(C){var G;if(C===void 0&&(C=new Date),C instanceof Date)G=z(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=C}return H=G},L=p.__private__.getCreationDate=function(C){var G=H;return C==="jsDate"&&(G=J(H)),G};p.setCreationDate=function(C){return ee(C),this},p.getCreationDate=function(C){return L(C)};var q,Y=p.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},te=p.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},K=0,ce=[],he=[],$=0,X=[],ae=[],le=!1,Se=he,Ee=function(){K=0,$=0,he=[],ce=[],X=[],Pi=Wn(),ai=Wn()};p.__private__.setCustomOutputDestination=function(C){le=!0,Se=C};var me=function(C){le||(Se=C)};p.__private__.resetCustomOutputDestination=function(){le=!1,Se=he};var ie=p.__private__.out=function(C){return C=C.toString(),$+=C.length+1,Se.push(C),Se},Ve=p.__private__.write=function(C){return ie(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},be=p.__private__.getArrayBuffer=function(C){for(var G=C.length,de=new ArrayBuffer(G),ge=new Uint8Array(de);G--;)ge[G]=C.charCodeAt(G);return de},fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return fe};var _e=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(C){return _e=x===b.ADVANCED?C/Ke:C,this};var je,Re=p.__private__.getFontSize=p.getFontSize=function(){return x===b.COMPAT?_e:_e*Ke},Ge=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(C){return Ge=C,this},p.__private__.getR2L=p.getR2L=function(){return Ge};var Je,Ye=p.__private__.setZoomMode=function(C){var G=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))je=C;else if(isNaN(C)){if(G.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');je=C}else je=parseInt(C,10)};p.__private__.getZoomMode=function(){return je};var ct,dt=p.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');Je=C};p.__private__.getPageMode=function(){return Je};var At=p.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');ct=C};p.__private__.getLayoutMode=function(){return ct},p.__private__.setDisplayMode=p.setDisplayMode=function(C,G,de){return Ye(C),At(G),dt(de),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(C){if(Object.keys(Qe).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[C]},p.__private__.getDocumentProperties=function(){return Qe},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(C){for(var G in Qe)Qe.hasOwnProperty(G)&&C[G]&&(Qe[G]=C[G]);return this},p.__private__.setDocumentProperty=function(C,G){if(Object.keys(Qe).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[C]=G};var rt,Ke,xr,Lt,$r,Jt={},kn={},Ei=[],Gt={},dl={},In={},Di={},go=null,Ft=0,gt=[],$t=new AT(p),tn=e.hotfixes||[],xn={},vo={},ti=[],bt=function C(G,de,ge,ke,Le,$e){if(!(this instanceof C))return new C(G,de,ge,ke,Le,$e);isNaN(G)&&(G=1),isNaN(de)&&(de=0),isNaN(ge)&&(ge=0),isNaN(ke)&&(ke=1),isNaN(Le)&&(Le=0),isNaN($e)&&($e=0),this._matrix=[G,de,ge,ke,Le,$e]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(C)},bt.prototype.multiply=function(C){var G=C.sx*this.sx+C.shy*this.shx,de=C.sx*this.shy+C.shy*this.sy,ge=C.shx*this.sx+C.sy*this.shx,ke=C.shx*this.shy+C.sy*this.sy,Le=C.tx*this.sx+C.ty*this.shx+this.tx,$e=C.tx*this.shy+C.ty*this.sy+this.ty;return new bt(G,de,ge,ke,Le,$e)},bt.prototype.decompose=function(){var C=this.sx,G=this.shy,de=this.shx,ge=this.sy,ke=this.tx,Le=this.ty,$e=Math.sqrt(C*C+G*G),tt=(C/=$e)*de+(G/=$e)*ge;de-=C*tt,ge-=G*tt;var vt=Math.sqrt(de*de+ge*ge);return tt/=vt,C*(ge/=vt)<G*(de/=vt)&&(C=-C,G=-G,tt=-tt,$e=-$e),{scale:new bt($e,0,0,vt,0,0),translate:new bt(1,0,0,1,ke,Le),rotate:new bt(C,G,-G,C,0,0),skew:new bt(1,0,tt,1,0,0)}},bt.prototype.toString=function(C){return this.join(" ")},bt.prototype.inversed=function(){var C=this.sx,G=this.shy,de=this.shx,ge=this.sy,ke=this.tx,Le=this.ty,$e=1/(C*ge-G*de),tt=ge*$e,vt=-G*$e,Tt=-de*$e,Dt=C*$e;return new bt(tt,vt,Tt,Dt,-tt*ke-Tt*Le,-vt*ke-Dt*Le)},bt.prototype.applyToPoint=function(C){var G=C.x*this.sx+C.y*this.shx+this.tx,de=C.x*this.shy+C.y*this.sy+this.ty;return new Af(G,de)},bt.prototype.applyToRectangle=function(C){var G=this.applyToPoint(C),de=this.applyToPoint(new Af(C.x+C.w,C.y+C.h));return new rm(G.x,G.y,de.x-G.x,de.y-G.y)},bt.prototype.clone=function(){var C=this.sx,G=this.shy,de=this.shx,ge=this.sy,ke=this.tx,Le=this.ty;return new bt(C,G,de,ge,ke,Le)},p.Matrix=bt;var ni=p.matrixMult=function(C,G){return G.multiply(C)},ri=new bt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ri;var Dr=function(C,G){if(!dl[C]){var de=(G instanceof Vu?"Sh":"P")+(Object.keys(Gt).length+1).toString(10);G.id=de,dl[C]=de,Gt[de]=G,$t.publish("addPattern",G)}};p.ShadingPattern=Vu,p.TilingPattern=gd,p.addShadingPattern=function(C,G){return A("addShadingPattern()"),Dr(C,G),this},p.beginTilingPattern=function(C){A("beginTilingPattern()"),E0(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},p.endTilingPattern=function(C,G){A("endTilingPattern()"),G.stream=ae[q].join(`
`),Dr(C,G),$t.publish("endTilingPattern",G),ti.pop().restore()};var Kn=p.__private__.newObject=function(){var C=Wn();return ca(C,!0),C},Wn=p.__private__.newObjectDeferred=function(){return K++,ce[K]=function(){return $},K},ca=function(C,G){return G=typeof G=="boolean"&&G,ce[C]=$,G&&ie(C+" 0 obj"),C},fu=p.__private__.newAdditionalObject=function(){var C={objId:Wn(),content:""};return X.push(C),C},Pi=Wn(),ai=Wn(),Oi=p.__private__.decodeColorString=function(C){var G=C.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length===5&&(G[4]==="k"||G[4]==="K")&&(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var de=parseFloat(G[0]);G=[de,de,de,"r"]}for(var ge="#",ke=0;ke<3;ke++)ge+=("0"+Math.floor(255*parseFloat(G[ke])).toString(16)).slice(-2);return ge},Ti=p.__private__.encodeColorString=function(C){var G;typeof C=="string"&&(C={ch1:C});var de=C.ch1,ge=C.ch2,ke=C.ch3,Le=C.ch4,$e=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var tt=new RW(de);if(tt.ok)de=tt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var vt=parseInt(de.substr(1),16);de=vt>>16&255,ge=vt>>8&255,ke=255&vt}if(ge===void 0||Le===void 0&&de===ge&&ge===ke)if(typeof de=="string")G=de+" "+$e[0];else switch(C.precision){case 2:G=T(de/255)+" "+$e[0];break;case 3:default:G=E(de/255)+" "+$e[0]}else if(Le===void 0||yn(Le)==="object"){if(Le&&!isNaN(Le.a)&&Le.a===0)return G=["1.","1.","1.",$e[1]].join(" ");if(typeof de=="string")G=[de,ge,ke,$e[1]].join(" ");else switch(C.precision){case 2:G=[T(de/255),T(ge/255),T(ke/255),$e[1]].join(" ");break;default:case 3:G=[E(de/255),E(ge/255),E(ke/255),$e[1]].join(" ")}}else if(typeof de=="string")G=[de,ge,ke,Le,$e[2]].join(" ");else switch(C.precision){case 2:G=[T(de),T(ge),T(ke),T(Le),$e[2]].join(" ");break;case 3:default:G=[E(de),E(ge),E(ke),E(Le),$e[2]].join(" ")}return G},_t=p.__private__.getFilters=function(){return o},Vt=p.__private__.putStream=function(C){var G=(C=C||{}).data||"",de=C.filters||_t(),ge=C.alreadyAppliedFilters||[],ke=C.addLength1||!1,Le=G.length,$e=C.objectId,tt=function(ja){return ja};if(c!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(tt=_a.encryptor($e,0));var vt={};de===!0&&(de=["FlateEncode"]);var Tt=C.additionalKeyValues||[],Dt=(vt=wt.API.processDataByFilters!==void 0?wt.API.processDataByFilters(G,de):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(vt.data.length!==0&&(Tt.push({key:"Length",value:vt.data.length}),ke===!0&&Tt.push({key:"Length1",value:Le})),Dt.length!=0)if(Dt.split("/").length-1==1)Tt.push({key:"Filter",value:Dt});else{Tt.push({key:"Filter",value:"["+Dt+"]"});for(var Kt=0;Kt<Tt.length;Kt+=1)if(Tt[Kt].key==="DecodeParms"){for(var Yn=[],tr=0;tr<vt.reverseChain.split("/").length-1;tr+=1)Yn.push("null");Yn.push(Tt[Kt].value),Tt[Kt].value="["+Yn.join(" ")+"]"}}ie("<<");for(var wr=0;wr<Tt.length;wr++)ie("/"+Tt[wr].key+" "+Tt[wr].value);ie(">>"),vt.data.length!==0&&(ie("stream"),ie(tt(vt.data)),ie("endstream"))},nn=p.__private__.putPage=function(C){var G=C.number,de=C.data,ge=C.objId,ke=C.contentsObjId;ca(ge,!0),ie("<</Type /Page"),ie("/Parent "+C.rootDictionaryObjId+" 0 R"),ie("/Resources "+C.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(S(C.mediaBox.bottomLeftX))+" "+parseFloat(S(C.mediaBox.bottomLeftY))+" "+S(C.mediaBox.topRightX)+" "+S(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ie("/CropBox ["+S(C.cropBox.bottomLeftX)+" "+S(C.cropBox.bottomLeftY)+" "+S(C.cropBox.topRightX)+" "+S(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ie("/BleedBox ["+S(C.bleedBox.bottomLeftX)+" "+S(C.bleedBox.bottomLeftY)+" "+S(C.bleedBox.topRightX)+" "+S(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ie("/TrimBox ["+S(C.trimBox.bottomLeftX)+" "+S(C.trimBox.bottomLeftY)+" "+S(C.trimBox.topRightX)+" "+S(C.trimBox.topRightY)+"]"),C.artBox!==null&&ie("/ArtBox ["+S(C.artBox.bottomLeftX)+" "+S(C.artBox.bottomLeftY)+" "+S(C.artBox.topRightX)+" "+S(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ie("/UserUnit "+C.userUnit),$t.publish("putPage",{objId:ge,pageContext:gt[G],pageNumber:G,page:de}),ie("/Contents "+ke+" 0 R"),ie(">>"),ie("endobj");var Le=de.join(`
`);return x===b.ADVANCED&&(Le+=`
Q`),ca(ke,!0),Vt({data:Le,filters:_t(),objectId:ke}),ie("endobj"),ge},Pr=p.__private__.putPages=function(){var C,G,de=[];for(C=1;C<=Ft;C++)gt[C].objId=Wn(),gt[C].contentsObjId=Wn();for(C=1;C<=Ft;C++)de.push(nn({number:C,data:ae[C],objId:gt[C].objId,contentsObjId:gt[C].contentsObjId,mediaBox:gt[C].mediaBox,cropBox:gt[C].cropBox,bleedBox:gt[C].bleedBox,trimBox:gt[C].trimBox,artBox:gt[C].artBox,userUnit:gt[C].userUnit,rootDictionaryObjId:Pi,resourceDictionaryObjId:ai}));ca(Pi,!0),ie("<</Type /Pages");var ge="/Kids [";for(G=0;G<Ft;G++)ge+=de[G]+" 0 R ";ie(ge+"]"),ie("/Count "+Ft),ie(">>"),ie("endobj"),$t.publish("postPutPages")},Vr=function(C){$t.publish("putFont",{font:C,out:ie,newObject:Kn,putStream:Vt}),C.isAlreadyPutted!==!0&&(C.objectNumber=Kn(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+ch(C.postScriptName)),ie("/Subtype /Type1"),typeof C.encoding=="string"&&ie("/Encoding /"+C.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Ss=function(){for(var C in Jt)Jt.hasOwnProperty(C)&&(f===!1||f===!0&&h.hasOwnProperty(C))&&Vr(Jt[C])},hu=function(C){C.objectNumber=Kn();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[S(C.x),S(C.y),S(C.x+C.width),S(C.y+C.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var de=C.pages[1].join(`
`);Vt({data:de,additionalKeyValues:G,objectId:C.objectNumber}),ie("endobj")},pu=function(){for(var C in xn)xn.hasOwnProperty(C)&&hu(xn[C])},d0=function(C,G){var de,ge=[],ke=1/(G-1);for(de=0;de<1;de+=ke)ge.push(de);if(ge.push(1),C[0].offset!=0){var Le={offset:0,color:C[0].color};C.unshift(Le)}if(C[C.length-1].offset!=1){var $e={offset:1,color:C[C.length-1].color};C.push($e)}for(var tt="",vt=0,Tt=0;Tt<ge.length;Tt++){for(de=ge[Tt];de>C[vt+1].offset;)vt++;var Dt=C[vt].offset,Kt=(de-Dt)/(C[vt+1].offset-Dt),Yn=C[vt].color,tr=C[vt+1].color;tt+=te(Math.round((1-Kt)*Yn[0]+Kt*tr[0]).toString(16))+te(Math.round((1-Kt)*Yn[1]+Kt*tr[1]).toString(16))+te(Math.round((1-Kt)*Yn[2]+Kt*tr[2]).toString(16))}return tt.trim()},iw=function(C,G){G||(G=21);var de=Kn(),ge=d0(C.colors,G),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+G+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vt({data:ge,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),ie("endobj"),C.objectNumber=Kn(),ie("<< /ShadingType "+C.type),ie("/ColorSpace /DeviceRGB");var Le="/Coords ["+S(parseFloat(C.coords[0]))+" "+S(parseFloat(C.coords[1]))+" ";C.type===2?Le+=S(parseFloat(C.coords[2]))+" "+S(parseFloat(C.coords[3])):Le+=S(parseFloat(C.coords[2]))+" "+S(parseFloat(C.coords[3]))+" "+S(parseFloat(C.coords[4]))+" "+S(parseFloat(C.coords[5])),ie(Le+="]"),C.matrix&&ie("/Matrix ["+C.matrix.toString()+"]"),ie("/Function "+de+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},ow=function(C,G){var de=Wn(),ge=Kn();G.push({resourcesOid:de,objectOid:ge}),C.objectNumber=ge;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+C.boundingBox.map(S).join(" ")+"]"}),ke.push({key:"XStep",value:S(C.xStep)}),ke.push({key:"YStep",value:S(C.yStep)}),ke.push({key:"Resources",value:de+" 0 R"}),C.matrix&&ke.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),Vt({data:C.stream,additionalKeyValues:ke,objectId:C.objectNumber}),ie("endobj")},bf=function(C){var G;for(G in Gt)Gt.hasOwnProperty(G)&&(Gt[G]instanceof Vu?iw(Gt[G]):Gt[G]instanceof gd&&ow(Gt[G],C))},f0=function(C){for(var G in C.objectNumber=Kn(),ie("<<"),C)switch(G){case"opacity":ie("/ca "+T(C[G]));break;case"stroke-opacity":ie("/CA "+T(C[G]))}ie(">>"),ie("endobj")},sw=function(){var C;for(C in In)In.hasOwnProperty(C)&&f0(In[C])},Gp=function(){for(var C in ie("/XObject <<"),xn)xn.hasOwnProperty(C)&&xn[C].objectNumber>=0&&ie("/"+C+" "+xn[C].objectNumber+" 0 R");$t.publish("putXobjectDict"),ie(">>")},lw=function(){_a.oid=Kn(),ie("<<"),ie("/Filter /Standard"),ie("/V "+_a.v),ie("/R "+_a.r),ie("/U <"+_a.toHexString(_a.U)+">"),ie("/O <"+_a.toHexString(_a.O)+">"),ie("/P "+_a.P),ie(">>"),ie("endobj")},h0=function(){for(var C in ie("/Font <<"),Jt)Jt.hasOwnProperty(C)&&(f===!1||f===!0&&h.hasOwnProperty(C))&&ie("/"+C+" "+Jt[C].objectNumber+" 0 R");ie(">>")},uw=function(){if(Object.keys(Gt).length>0){for(var C in ie("/Shading <<"),Gt)Gt.hasOwnProperty(C)&&Gt[C]instanceof Vu&&Gt[C].objectNumber>=0&&ie("/"+C+" "+Gt[C].objectNumber+" 0 R");$t.publish("putShadingPatternDict"),ie(">>")}},xf=function(C){if(Object.keys(Gt).length>0){for(var G in ie("/Pattern <<"),Gt)Gt.hasOwnProperty(G)&&Gt[G]instanceof p.TilingPattern&&Gt[G].objectNumber>=0&&Gt[G].objectNumber<C&&ie("/"+G+" "+Gt[G].objectNumber+" 0 R");$t.publish("putTilingPatternDict"),ie(">>")}},cw=function(){if(Object.keys(In).length>0){var C;for(C in ie("/ExtGState <<"),In)In.hasOwnProperty(C)&&In[C].objectNumber>=0&&ie("/"+C+" "+In[C].objectNumber+" 0 R");$t.publish("putGStateDict"),ie(">>")}},lr=function(C){ca(C.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),h0(),uw(),xf(C.objectOid),cw(),Gp(),ie(">>"),ie("endobj")},p0=function(){var C=[];Ss(),sw(),pu(),bf(C),$t.publish("putResources"),C.forEach(lr),lr({resourcesOid:ai,objectOid:Number.MAX_SAFE_INTEGER}),$t.publish("postPutResources")},m0=function(){$t.publish("putAdditionalObjects");for(var C=0;C<X.length;C++){var G=X[C];ca(G.objId,!0),ie(G.content),ie("endobj")}$t.publish("postPutAdditionalObjects")},g0=function(C){kn[C.fontName]=kn[C.fontName]||{},kn[C.fontName][C.fontStyle]=C.id},Kp=function(C,G,de,ge,ke){var Le={id:"F"+(Object.keys(Jt).length+1).toString(10),postScriptName:C,fontName:G,fontStyle:de,encoding:ge,isStandardFont:ke||!1,metadata:{}};return $t.publish("addFont",{font:Le,instance:this}),Jt[Le.id]=Le,g0(Le),Le.id},dw=function(C){for(var G=0,de=fe.length;G<de;G++){var ge=Kp.call(this,C[G][0],C[G][1],C[G][2],fe[G][3],!0);f===!1&&(h[ge]=!0);var ke=C[G][0].split("-");g0({id:ge,fontName:ke[0],fontStyle:ke[1]||""})}$t.publish("addFonts",{fonts:Jt,dictionary:kn})},Xo=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(ge){var G=ge.stack||"";~G.indexOf(" at ")&&(G=G.split(" at ")[1]);var de="Error in function "+G.split(`
`)[0].split("<")[0]+": "+ge.message;if(!St.console)throw new Error(de);St.console.error(de,ge),St.alert&&alert(de)}},C.foo.bar=C,C.foo},wf=function(C,G){var de,ge,ke,Le,$e,tt,vt,Tt,Dt;if(ke=(G=G||{}).sourceEncoding||"Unicode",$e=G.outputEncoding,(G.autoencode||$e)&&Jt[rt].metadata&&Jt[rt].metadata[ke]&&Jt[rt].metadata[ke].encoding&&(Le=Jt[rt].metadata[ke].encoding,!$e&&Jt[rt].encoding&&($e=Jt[rt].encoding),!$e&&Le.codePages&&($e=Le.codePages[0]),typeof $e=="string"&&($e=Le[$e]),$e)){for(vt=!1,tt=[],de=0,ge=C.length;de<ge;de++)(Tt=$e[C.charCodeAt(de)])?tt.push(String.fromCharCode(Tt)):tt.push(C[de]),tt[de].charCodeAt(0)>>8&&(vt=!0);C=tt.join("")}for(de=C.length;vt===void 0&&de!==0;)C.charCodeAt(de-1)>>8&&(vt=!0),de--;if(!vt)return C;for(tt=G.noBOM?[]:[254,255],de=0,ge=C.length;de<ge;de++){if((Dt=(Tt=C.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");tt.push(Dt),tt.push(Tt-(Dt<<8))}return String.fromCharCode.apply(void 0,tt)},ii=p.__private__.pdfEscape=p.pdfEscape=function(C,G){return wf(C,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yp=p.__private__.beginPage=function(C){ae[++Ft]=[],gt[Ft]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},y0(Ft),me(ae[q])},v0=function(C,G){var de,ge,ke;switch(n=G||n,typeof C=="string"&&(de=g(C.toLowerCase()),Array.isArray(de)&&(ge=de[0],ke=de[1])),Array.isArray(C)&&(ge=C[0]*Ke,ke=C[1]*Ke),isNaN(ge)&&(ge=a[0],ke=a[1]),(ge>14400||ke>14400)&&(jn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),ke=Math.min(14400,ke)),a=[ge,ke],n.substr(0,1)){case"l":ke>ge&&(a=[ke,ge]);break;case"p":ge>ke&&(a=[ke,ge])}Yp(a),k0(Zp),ie(Jo),tm!==0&&ie(tm+" J"),nm!==0&&ie(nm+" j"),$t.publish("addPage",{pageNumber:Ft})},fw=function(C){C>0&&C<=Ft&&(ae.splice(C,1),gt.splice(C,1),Ft--,q>Ft&&(q=Ft),this.setPage(q))},y0=function(C){C>0&&C<=Ft&&(q=C)},hw=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ae.length-1},b0=function(C,G,de){var ge,ke=void 0;return de=de||{},C=C!==void 0?C:Jt[rt].fontName,G=G!==void 0?G:Jt[rt].fontStyle,ge=C.toLowerCase(),kn[ge]!==void 0&&kn[ge][G]!==void 0?ke=kn[ge][G]:kn[C]!==void 0&&kn[C][G]!==void 0?ke=kn[C][G]:de.disableWarning===!1&&jn.warn("Unable to look up font label for font '"+C+"', '"+G+"'. Refer to getFontList() for available fonts."),ke||de.noFallback||(ke=kn.times[G])==null&&(ke=kn.times.normal),ke},pw=p.__private__.putInfo=function(){var C=Kn(),G=function(ge){return ge};for(var de in c!==null&&(G=_a.encryptor(C,0)),ie("<<"),ie("/Producer ("+ii(G("jsPDF "+wt.version))+")"),Qe)Qe.hasOwnProperty(de)&&Qe[de]&&ie("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+ii(G(Qe[de]))+")");ie("/CreationDate ("+ii(G(H))+")"),ie(">>"),ie("endobj")},Xp=p.__private__.putCatalog=function(C){var G=(C=C||{}).rootDictionaryObjId||Pi;switch(Kn(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+G+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+je;de.substr(de.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+T(je)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}Je&&ie("/PageMode /"+Je),$t.publish("putCatalog"),ie(">>"),ie("endobj")},mw=p.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(K+1)),ie("/Root "+K+" 0 R"),ie("/Info "+(K-1)+" 0 R"),c!==null&&ie("/Encrypt "+_a.oid+" 0 R"),ie("/ID [ <"+B+"> <"+B+"> ]"),ie(">>")},gw=p.__private__.putHeader=function(){ie("%PDF-"+m),ie("%")},vw=p.__private__.putXRef=function(){var C="0000000000";ie("xref"),ie("0 "+(K+1)),ie("0000000000 65535 f ");for(var G=1;G<=K;G++)typeof ce[G]=="function"?ie((C+ce[G]()).slice(-10)+" 00000 n "):ce[G]!==void 0?ie((C+ce[G]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},fl=p.__private__.buildDocument=function(){Ee(),me(he),$t.publish("buildDocument"),gw(),Pr(),m0(),p0(),c!==null&&lw(),pw(),Xp();var C=$;return vw(),mw(),ie("startxref"),ie(""+C),ie("%%EOF"),me(ae[q]),he.join(`
`)},Nf=p.__private__.getBlob=function(C){return new Blob([be(C)],{type:"application/pdf"})},Sf=p.output=p.__private__.output=Xo(function(C,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",C){case void 0:return fl();case"save":p.save(G.filename);break;case"arraybuffer":return be(fl());case"blob":return Nf(fl());case"bloburi":case"bloburl":if(St.URL!==void 0&&typeof St.URL.createObjectURL=="function")return St.URL&&St.URL.createObjectURL(Nf(fl()))||void 0;jn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",ge=fl();try{de=P_(ge)}catch{de=P_(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+G.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Le=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(ke=G.pdfObjectUrl,Le="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Le+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",tt=St.open();return tt!==null&&tt.document.write($e),tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',Tt=St.open();if(Tt!==null){Tt.document.write(vt);var Dt=this;Tt.document.documentElement.querySelector("#pdfViewer").onload=function(){Tt.document.title=G.filename,Tt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Dt.output("bloburl"))}}return Tt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(St)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',Yn=St.open();if(Yn!==null&&(Yn.document.write(Kt),Yn.document.title=G.filename),Yn||typeof safari>"u")return Yn;break;case"datauri":case"dataurl":return St.document.location.href=this.output("datauristring",G);default:return null}}),x0=function(C){return Array.isArray(tn)===!0&&tn.indexOf(C)>-1};switch(r){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=x0("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ke=r}var _a=null;ee(),W();var yw=function(C){return c!==null?_a.encryptor(C,0):function(G){return G}},w0=p.__private__.getPageInfo=p.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[C].objId,pageNumber:C,pageContext:gt[C]}},Ct=p.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in gt)if(gt[G].objId===C)break;return w0(G)},bw=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:gt[q].objId,pageNumber:q,pageContext:gt[q]}};p.addPage=function(){return v0.apply(this,arguments),this},p.setPage=function(){return y0.apply(this,arguments),me.call(this,ae[q]),this},p.insertPage=function(C){return this.addPage(),this.movePage(q,C),this},p.movePage=function(C,G){var de,ge;if(C>G){de=ae[C],ge=gt[C];for(var ke=C;ke>G;ke--)ae[ke]=ae[ke-1],gt[ke]=gt[ke-1];ae[G]=de,gt[G]=ge,this.setPage(G)}else if(C<G){de=ae[C],ge=gt[C];for(var Le=C;Le<G;Le++)ae[Le]=ae[Le+1],gt[Le]=gt[Le+1];ae[G]=de,gt[G]=ge,this.setPage(G)}return this},p.deletePage=function(){return fw.apply(this,arguments),this},p.__private__.text=p.text=function(C,G,de,ge,ke){var Le,$e,tt,vt,Tt,Dt,Kt,Yn,tr,wr=(ge=ge||{}).scope||this;if(typeof C=="number"&&typeof G=="number"&&(typeof de=="string"||Array.isArray(de))){var ja=de;de=G,G=C,C=ja}if(arguments[3]instanceof bt?(A("The transform parameter of text() with a Matrix value"),tr=ke):(tt=arguments[4],vt=arguments[5],yn(Kt=arguments[3])==="object"&&Kt!==null||(typeof tt=="string"&&(vt=tt,tt=null),typeof Kt=="string"&&(vt=Kt,Kt=null),typeof Kt=="number"&&(tt=Kt,Kt=null),ge={flags:Kt,angle:tt,align:vt})),isNaN(G)||isNaN(de)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return wr;var Gr="",Qo=!1,Mi=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:zc,js=wr.internal.scaleFactor;function D0(Dn){return Dn=Dn.split("	").join(Array(ge.TabLen||9).join(" ")),ii(Dn,Kt)}function sm(Dn){for(var Pn,cr=Dn.concat(),Or=[],vl=cr.length;vl--;)typeof(Pn=cr.shift())=="string"?Or.push(Pn):Array.isArray(Dn)&&(Pn.length===1||Pn[1]===void 0&&Pn[2]===void 0)?Or.push(Pn[0]):Or.push([Pn[0],Pn[1],Pn[2]]);return Or}function lm(Dn,Pn){var cr;if(typeof Dn=="string")cr=Pn(Dn)[0];else if(Array.isArray(Dn)){for(var Or,vl,gm=Dn.concat(),Bf=[],L0=gm.length;L0--;)typeof(Or=gm.shift())=="string"?Bf.push(Pn(Or)[0]):Array.isArray(Or)&&typeof Or[0]=="string"&&(vl=Pn(Or[0],Or[1],Or[2]),Bf.push([vl[0],vl[1],vl[2]]));cr=Bf}return cr}var Ef=!1,um=!0;if(typeof C=="string")Ef=!0;else if(Array.isArray(C)){var cm=C.concat();$e=[];for(var Df,da=cm.length;da--;)(typeof(Df=cm.shift())!="string"||Array.isArray(Df)&&typeof Df[0]!="string")&&(um=!1);Ef=um}if(Ef===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var Pf=_e/wr.internal.scaleFactor,Of=Pf*(Mi-1);switch(ge.baseline){case"bottom":de-=Of;break;case"top":de+=Pf-Of;break;case"hanging":de+=Pf-2*Of;break;case"middle":de+=Pf/2-Of}if((Dt=ge.maxWidth||0)>0&&(typeof C=="string"?C=wr.splitTextToSize(C,Dt):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Dn,Pn){return Dn.concat(wr.splitTextToSize(Pn,Dt))},[]))),Le={text:C,x:G,y:de,options:ge,mutex:{pdfEscape:ii,activeFontKey:rt,fonts:Jt,activeFontSize:_e}},$t.publish("preProcessText",Le),C=Le.text,tt=(ge=Le.options).angle,!(tr instanceof bt)&&tt&&typeof tt=="number"){tt*=Math.PI/180,ge.rotationDirection===0&&(tt=-tt),x===b.ADVANCED&&(tt=-tt);var Tf=Math.cos(tt),dm=Math.sin(tt);tr=new bt(Tf,dm,-dm,Tf,0,0)}else tt&&tt instanceof bt&&(tr=tt);x!==b.ADVANCED||tr||(tr=ri),(Tt=ge.charSpace||jf)!==void 0&&(Gr+=S(D(Tt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yn=ge.horizontalScale)!==void 0&&(Gr+=S(100*Yn)+` Tz
`),ge.lang;var oi=-1,Ew=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,fm=wr.internal.getCurrentPageInfo().pageContext;switch(Ew){case 0:case!1:case"fill":oi=0;break;case 1:case!0:case"stroke":oi=1;break;case 2:case"fillThenStroke":oi=2;break;case 3:case"invisible":oi=3;break;case 4:case"fillAndAddForClipping":oi=4;break;case 5:case"strokeAndAddPathForClipping":oi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":oi=6;break;case 7:case"addToPathForClipping":oi=7}var P0=fm.usedRenderingMode!==void 0?fm.usedRenderingMode:-1;oi!==-1?Gr+=oi+` Tr
`:P0!==-1&&(Gr+=`0 Tr
`),oi!==-1&&(fm.usedRenderingMode=oi),vt=ge.align||"left";var yo,Mf=_e*Mi,O0=wr.internal.pageSize.getWidth(),T0=Jt[rt];Tt=ge.charSpace||jf,Dt=ge.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var yu=[],qc=function(Dn){return wr.getStringUnitWidth(Dn,{font:T0,charSpace:Tt,fontSize:_e,doKerning:!1})*_e/js};if(Object.prototype.toString.call(C)==="[object Array]"){var si;$e=sm(C),vt!=="left"&&(yo=$e.map(qc));var Va,bu=0;if(vt==="right"){G-=yo[0],C=[],da=$e.length;for(var pl=0;pl<da;pl++)pl===0?(Va=_s(G),si=hl(de)):(Va=D(bu-yo[pl]),si=-Mf),C.push([$e[pl],Va,si]),bu=yo[pl]}else if(vt==="center"){G-=yo[0]/2,C=[],da=$e.length;for(var ml=0;ml<da;ml++)ml===0?(Va=_s(G),si=hl(de)):(Va=D((bu-yo[ml])/2),si=-Mf),C.push([$e[ml],Va,si]),bu=yo[ml]}else if(vt==="left"){C=[],da=$e.length;for(var Lf=0;Lf<da;Lf++)C.push($e[Lf])}else if(vt==="justify"&&T0.encoding==="Identity-H"){C=[],da=$e.length,Dt=Dt!==0?Dt:O0;for(var gl=0,ur=0;ur<da;ur++)if(si=ur===0?hl(de):-Mf,Va=ur===0?_s(G):gl,ur<da-1){var hm=D((Dt-yo[ur])/($e[ur].split(" ").length-1)),Ga=$e[ur].split(" ");C.push([Ga[0]+" ",Va,si]),gl=0;for(var bo=1;bo<Ga.length;bo++){var If=(qc(Ga[bo-1]+" "+Ga[bo])-qc(Ga[bo]))*js+hm;bo==Ga.length-1?C.push([Ga[bo],If,0]):C.push([Ga[bo]+" ",If,0]),gl-=If}}else C.push([$e[ur],Va,si]);C.push(["",gl,0])}else{if(vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],da=$e.length,Dt=Dt!==0?Dt:O0,ur=0;ur<da;ur++)si=ur===0?hl(de):-Mf,Va=ur===0?_s(G):0,ur<da-1?yu.push(S(D((Dt-yo[ur])/($e[ur].split(" ").length-1)))):yu.push(0),C.push([$e[ur],Va,si])}}var M0=typeof ge.R2L=="boolean"?ge.R2L:Ge;M0===!0&&(C=lm(C,function(Dn,Pn,cr){return[Dn.split("").reverse().join(""),Pn,cr]})),Le={text:C,x:G,y:de,options:ge,mutex:{pdfEscape:ii,activeFontKey:rt,fonts:Jt,activeFontSize:_e}},$t.publish("postProcessText",Le),C=Le.text,Qo=Le.mutex.isHex||!1;var pm=Jt[rt].encoding;pm!=="WinAnsiEncoding"&&pm!=="StandardEncoding"||(C=lm(C,function(Dn,Pn,cr){return[D0(Dn),Pn,cr]})),$e=sm(C),C=[];for(var Hc,$c,xu,Vc=0,Rf=1,Gc=Array.isArray($e[0])?Rf:Vc,wu="",mm=function(Dn,Pn,cr){var Or="";return cr instanceof bt?(cr=typeof ge.angle=="number"?ni(cr,new bt(1,0,0,1,Dn,Pn)):ni(new bt(1,0,0,1,Dn,Pn),cr),x===b.ADVANCED&&(cr=ni(new bt(1,0,0,-1,0,0),cr)),Or=cr.join(" ")+` Tm
`):Or=S(Dn)+" "+S(Pn)+` Td
`,Or},xo=0;xo<$e.length;xo++){switch(wu="",Gc){case Rf:xu=(Qo?"<":"(")+$e[xo][0]+(Qo?">":")"),Hc=parseFloat($e[xo][1]),$c=parseFloat($e[xo][2]);break;case Vc:xu=(Qo?"<":"(")+$e[xo]+(Qo?">":")"),Hc=_s(G),$c=hl(de)}yu!==void 0&&yu[xo]!==void 0&&(wu=yu[xo]+` Tw
`),xo===0?C.push(wu+mm(Hc,$c,tr)+xu):Gc===Vc?C.push(wu+xu):Gc===Rf&&C.push(wu+mm(Hc,$c,tr)+xu)}C=Gc===Vc?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var wo=`BT
/`;return wo+=rt+" "+_e+` Tf
`,wo+=S(_e*Mi)+` TL
`,wo+=Uc+`
`,wo+=Gr,wo+=C,ie(wo+="ET"),h[rt]=!0,wr};var xw=p.__private__.clip=p.clip=function(C){return ie(C==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return xw("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ie("n"),this};var ks=p.__private__.isValidStyle=function(C){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(G=!0),G};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(C){return ks(C)&&(u=C),this};var N0=p.__private__.getStyle=p.getStyle=function(C){var G=u;switch(C){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=C}return G},S0=p.close=function(){return ie("h"),this};p.stroke=function(){return ie("S"),this},p.fill=function(C){return kf("f",C),this},p.fillEvenOdd=function(C){return kf("f*",C),this},p.fillStroke=function(C){return kf("B",C),this},p.fillStrokeEvenOdd=function(C){return kf("B*",C),this};var kf=function(C,G){yn(G)==="object"?Nw(G,C):ie(C)},Jp=function(C){C===null||x===b.ADVANCED&&C===void 0||(C=N0(C),ie(C))};function ww(C,G,de,ge,ke){var Le=new gd(G||this.boundingBox,de||this.xStep,ge||this.yStep,this.gState,ke||this.matrix);Le.stream=this.stream;var $e=C+"$$"+this.cloneIndex+++"$$";return Dr($e,Le),Le}var Nw=function(C,G){var de=dl[C.key],ge=Gt[de];if(ge instanceof Vu)ie("q"),ie(Sw(G)),ge.gState&&p.setGState(ge.gState),ie(C.matrix.toString()+" cm"),ie("/"+de+" sh"),ie("Q");else if(ge instanceof gd){var ke=new bt(1,0,0,-1,0,vu());C.matrix&&(ke=ke.multiply(C.matrix||ri),de=ww.call(ge,C.key,C.boundingBox,C.xStep,C.yStep,ke).id),ie("q"),ie("/Pattern cs"),ie("/"+de+" scn"),ge.gState&&p.setGState(ge.gState),ie(G),ie("Q")}},Sw=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qp=p.moveTo=function(C,G){return ie(S(D(C))+" "+S(F(G))+" m"),this},Fc=p.lineTo=function(C,G){return ie(S(D(C))+" "+S(F(G))+" l"),this},mu=p.curveTo=function(C,G,de,ge,ke,Le){return ie([S(D(C)),S(F(G)),S(D(de)),S(F(ge)),S(D(ke)),S(F(Le)),"c"].join(" ")),this};p.__private__.line=p.line=function(C,G,de,ge,ke){if(isNaN(C)||isNaN(G)||isNaN(de)||isNaN(ge)||!ks(ke))throw new Error("Invalid arguments passed to jsPDF.line");return x===b.COMPAT?this.lines([[de-C,ge-G]],C,G,[1,1],ke||"S"):this.lines([[de-C,ge-G]],C,G,[1,1]).stroke()},p.__private__.lines=p.lines=function(C,G,de,ge,ke,Le){var $e,tt,vt,Tt,Dt,Kt,Yn,tr,wr,ja,Gr,Qo;if(typeof C=="number"&&(Qo=de,de=G,G=C,C=Qo),ge=ge||[1,1],Le=Le||!1,isNaN(G)||isNaN(de)||!Array.isArray(C)||!Array.isArray(ge)||!ks(ke)||typeof Le!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qp(G,de),$e=ge[0],tt=ge[1],Tt=C.length,ja=G,Gr=de,vt=0;vt<Tt;vt++)(Dt=C[vt]).length===2?(ja=Dt[0]*$e+ja,Gr=Dt[1]*tt+Gr,Fc(ja,Gr)):(Kt=Dt[0]*$e+ja,Yn=Dt[1]*tt+Gr,tr=Dt[2]*$e+ja,wr=Dt[3]*tt+Gr,ja=Dt[4]*$e+ja,Gr=Dt[5]*tt+Gr,mu(Kt,Yn,tr,wr,ja,Gr));return Le&&S0(),Jp(ke),this},p.path=function(C){for(var G=0;G<C.length;G++){var de=C[G],ge=de.c;switch(de.op){case"m":Qp(ge[0],ge[1]);break;case"l":Fc(ge[0],ge[1]);break;case"c":mu.apply(this,ge);break;case"h":S0()}}return this},p.__private__.rect=p.rect=function(C,G,de,ge,ke){if(isNaN(C)||isNaN(G)||isNaN(de)||isNaN(ge)||!ks(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return x===b.COMPAT&&(ge=-ge),ie([S(D(C)),S(F(G)),S(D(de)),S(D(ge)),"re"].join(" ")),Jp(ke),this},p.__private__.triangle=p.triangle=function(C,G,de,ge,ke,Le,$e){if(isNaN(C)||isNaN(G)||isNaN(de)||isNaN(ge)||isNaN(ke)||isNaN(Le)||!ks($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-C,ge-G],[ke-de,Le-ge],[C-ke,G-Le]],C,G,[1,1],$e,!0),this},p.__private__.roundedRect=p.roundedRect=function(C,G,de,ge,ke,Le,$e){if(isNaN(C)||isNaN(G)||isNaN(de)||isNaN(ge)||isNaN(ke)||isNaN(Le)||!ks($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*de),Le=Math.min(Le,.5*ge),this.lines([[de-2*ke,0],[ke*tt,0,ke,Le-Le*tt,ke,Le],[0,ge-2*Le],[0,Le*tt,-ke*tt,Le,-ke,Le],[2*ke-de,0],[-ke*tt,0,-ke,-Le*tt,-ke,-Le],[0,2*Le-ge],[0,-Le*tt,ke*tt,-Le,ke,-Le]],C+ke,G,[1,1],$e,!0),this},p.__private__.ellipse=p.ellipse=function(C,G,de,ge,ke){if(isNaN(C)||isNaN(G)||isNaN(de)||isNaN(ge)||!ks(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Le=4/3*(Math.SQRT2-1)*de,$e=4/3*(Math.SQRT2-1)*ge;return Qp(C+de,G),mu(C+de,G-$e,C+Le,G-ge,C,G-ge),mu(C-Le,G-ge,C-de,G-$e,C-de,G),mu(C-de,G+$e,C-Le,G+ge,C,G+ge),mu(C+Le,G+ge,C+de,G+$e,C+de,G),Jp(ke),this},p.__private__.circle=p.circle=function(C,G,de,ge){if(isNaN(C)||isNaN(G)||isNaN(de)||!ks(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,G,de,de,ge)},p.setFont=function(C,G,de){return de&&(G=j(G,de)),rt=b0(C,G,{disableWarning:!1}),this};var kw=p.__private__.getFont=p.getFont=function(){return Jt[b0.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var C,G,de={};for(C in kn)if(kn.hasOwnProperty(C))for(G in de[C]=[],kn[C])kn[C].hasOwnProperty(G)&&de[C].push(G);return de},p.addFont=function(C,G,de,ge,ke){var Le=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Le.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Le.indexOf(arguments[3])==-1&&(de=j(de,ge)),ke=ke||"Identity-H",Kp.call(this,C,G,de,ke)};var zc,Zp=e.lineWidth||.200025,_f=p.__private__.getLineWidth=p.getLineWidth=function(){return Zp},k0=p.__private__.setLineWidth=p.setLineWidth=function(C){return Zp=C,ie(S(D(C))+" w"),this};p.__private__.setLineDash=wt.API.setLineDash=wt.API.setLineDashPattern=function(C,G){if(C=C||[],G=G||0,isNaN(G)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(de){return S(D(de))}).join(" "),G=S(D(G)),ie("["+C+"] "+G+" d"),this};var _0=p.__private__.getLineHeight=p.getLineHeight=function(){return _e*zc};p.__private__.getLineHeight=p.getLineHeight=function(){return _e*zc};var j0=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(zc=C),this},A0=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return zc};j0(e.lineHeight);var _s=p.__private__.getHorizontalCoordinate=function(C){return D(C)},hl=p.__private__.getVerticalCoordinate=function(C){return x===b.ADVANCED?C:gt[q].mediaBox.topRightY-gt[q].mediaBox.bottomLeftY-D(C)},_w=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(C){return S(_s(C))},gu=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(C){return S(hl(C))},Jo=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Oi(Jo)},p.__private__.setStrokeColor=p.setDrawColor=function(C,G,de,ge){return Jo=Ti({ch1:C,ch2:G,ch3:de,ch4:ge,pdfColorType:"draw",precision:2}),ie(Jo),this};var em=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Oi(em)},p.__private__.setFillColor=p.setFillColor=function(C,G,de,ge){return em=Ti({ch1:C,ch2:G,ch3:de,ch4:ge,pdfColorType:"fill",precision:2}),ie(em),this};var Uc=e.textColor||"0 g",jw=p.__private__.getTextColor=p.getTextColor=function(){return Oi(Uc)};p.__private__.setTextColor=p.setTextColor=function(C,G,de,ge){return Uc=Ti({ch1:C,ch2:G,ch3:de,ch4:ge,pdfColorType:"text",precision:3}),this};var jf=e.charSpace,Aw=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(jf||0)};p.__private__.setCharSpace=p.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return jf=C,this};var tm=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(C){var G=p.CapJoinStyles[C];if(G===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tm=G,ie(G+" J"),this};var nm=0;p.__private__.setLineJoin=p.setLineJoin=function(C){var G=p.CapJoinStyles[C];if(G===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nm=G,ie(G+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(S(D(C))+" M"),this},p.GState=pv,p.setGState=function(C){(C=typeof C=="string"?In[Di[C]]:C0(null,C)).equals(go)||(ie("/"+C.id+" gs"),go=C)};var C0=function(C,G){if(!C||!Di[C]){var de=!1;for(var ge in In)if(In.hasOwnProperty(ge)&&In[ge].equals(G)){de=!0;break}if(de)G=In[ge];else{var ke="GS"+(Object.keys(In).length+1).toString(10);In[ke]=G,G.id=ke}return C&&(Di[C]=G.id),$t.publish("addGState",G),G}};p.addGState=function(C,G){return C0(C,G),this},p.saveGraphicsState=function(){return ie("q"),Ei.push({key:rt,size:_e,color:Uc}),this},p.restoreGraphicsState=function(){ie("Q");var C=Ei.pop();return rt=C.key,_e=C.size,Uc=C.color,go=null,this},p.setCurrentTransformationMatrix=function(C){return ie(C.toString()+" cm"),this},p.comment=function(C){return ie("#"+C),this};var Af=function(C,G){var de=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Le){isNaN(Le)||(de=parseFloat(Le))}});var ge=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Le){isNaN(Le)||(ge=parseFloat(Le))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Le){ke=Le.toString()}}),this},rm=function(C,G,de,ge){Af.call(this,C,G),this.type="rect";var ke=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function($e){isNaN($e)||(ke=parseFloat($e))}});var Le=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Le},set:function($e){isNaN($e)||(Le=parseFloat($e))}}),this},am=function(){this.page=Ft,this.currentPage=q,this.pages=ae.slice(0),this.pagesContext=gt.slice(0),this.x=xr,this.y=Lt,this.matrix=$r,this.width=Wc(q),this.height=vu(q),this.outputDestination=Se,this.id="",this.objectNumber=-1};am.prototype.restore=function(){Ft=this.page,q=this.currentPage,gt=this.pagesContext,ae=this.pages,xr=this.x,Lt=this.y,$r=this.matrix,im(q,this.width),om(q,this.height),Se=this.outputDestination};var E0=function(C,G,de,ge,ke){ti.push(new am),Ft=q=0,ae=[],xr=C,Lt=G,$r=ke,Yp([de,ge])},Cw=function(C){if(vo[C])ti.pop().restore();else{var G=new am,de="Xo"+(Object.keys(xn).length+1).toString(10);G.id=de,vo[C]=de,xn[de]=G,$t.publish("addFormObject",G),ti.pop().restore()}};for(var Cf in p.beginFormObject=function(C,G,de,ge,ke){return E0(C,G,de,ge,ke),this},p.endFormObject=function(C){return Cw(C),this},p.doFormObject=function(C,G){var de=xn[vo[C]];return ie("q"),ie(G.toString()+" cm"),ie("/"+de.id+" Do"),ie("Q"),this},p.getFormObject=function(C){var G=xn[vo[C]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},p.save=function(C,G){return C=C||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(sd(Nf(fl()),C),typeof sd.unload=="function"&&St.setTimeout&&setTimeout(sd.unload,911),this):new Promise(function(de,ge){try{var ke=sd(Nf(fl()),C);typeof sd.unload=="function"&&St.setTimeout&&setTimeout(sd.unload,911),de(ke)}catch(Le){ge(Le.message)}})},wt.API)wt.API.hasOwnProperty(Cf)&&(Cf==="events"&&wt.API.events.length?function(C,G){var de,ge,ke;for(ke=G.length-1;ke!==-1;ke--)de=G[ke][0],ge=G[ke][1],C.subscribe.apply(C,[de].concat(typeof ge=="function"?[ge]:ge))}($t,wt.API.events):p[Cf]=wt.API[Cf]);var Wc=p.getPageWidth=function(C){return(gt[C=C||q].mediaBox.topRightX-gt[C].mediaBox.bottomLeftX)/Ke},im=p.setPageWidth=function(C,G){gt[C].mediaBox.topRightX=G*Ke+gt[C].mediaBox.bottomLeftX},vu=p.getPageHeight=function(C){return(gt[C=C||q].mediaBox.topRightY-gt[C].mediaBox.bottomLeftY)/Ke},om=p.setPageHeight=function(C,G){gt[C].mediaBox.topRightY=G*Ke+gt[C].mediaBox.bottomLeftY};return p.internal={pdfEscape:ii,getStyle:N0,getFont:kw,getFontSize:Re,getCharSpace:Aw,getTextColor:jw,getLineHeight:_0,getLineHeightFactor:A0,getLineWidth:_f,write:Ve,getHorizontalCoordinate:_s,getVerticalCoordinate:hl,getCoordinateString:_w,getVerticalCoordinateString:gu,collections:{},newObject:Kn,newAdditionalObject:fu,newObjectDeferred:Wn,newObjectDeferredBegin:ca,getFilters:_t,putStream:Vt,events:$t,scaleFactor:Ke,pageSize:{getWidth:function(){return Wc(q)},setWidth:function(C){im(q,C)},getHeight:function(){return vu(q)},setHeight:function(C){om(q,C)}},encryptionOptions:c,encryption:_a,getEncryptor:yw,output:Sf,getNumberOfPages:hw,pages:ae,out:ie,f2:T,f3:E,getPageInfo:w0,getPageInfoByObjId:Ct,getCurrentPageInfo:bw,getPDFVersion:v,Point:Af,Rectangle:rm,Matrix:bt,hasHotfix:x0},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Wc(q)},set:function(C){im(q,C)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return vu(q)},set:function(C){om(q,C)},enumerable:!0,configurable:!0}),dw.call(p,fe),rt="F1",v0(a,n),$t.publish("initialized"),p}uh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},uh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},uh.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},uh.prototype.processOwnerPassword=function(e,t){return T_(O_(t).substr(0,5),e)},uh.prototype.encryptor=function(e,t){var n=O_(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return T_(n,r)}},pv.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||yn(e)!==yn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},wt.API={events:[]},wt.version="2.5.2";var ir=wt.API,iC=1,yf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},eh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ot=function(e){return e.toFixed(2)},Iu=function(e){return e.toFixed(5)};ir.__acroform__={};var Ci=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},CT=function(e){return e*iC},Ps=function(e){var t=new UW,n=ot.internal.getHeight(e)||0,r=ot.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ot(r)),Number(Ot(n))],t},B2e=ir.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},F2e=ir.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},z2e=ir.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},pr=ir.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return z2e(e,t-1)},mr=ir.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return B2e(e,t-1)},gr=ir.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return F2e(e,t-1)},U2e=ir.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=n(a)||0,l.lowerLeft_Y=r(i+s)||0,l.upperRight_X=n(a+o)||0,l.upperRight_Y=r(i)||0,[Number(Ot(l.lowerLeft_X)),Number(Ot(l.lowerLeft_Y)),Number(Ot(l.upperRight_X)),Number(Ot(l.upperRight_Y))]},W2e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=M_(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Ot(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ps(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},M_=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var i=n,o=ot.internal.getHeight(e)||0;o=o<0?-o:o;var s=ot.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(E,D,R){if(E+1<a.length){var F=D+" "+a[E+1][0];return Xy(F,e,R).width<=s-4}return!1};i++;e:for(;i>0;){t="",i--;var u,c,f=Xy("3",e,i).height,h=e.multiline?o-i:(o-f)/2,p=h+=2,m=0,v=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Xy(t,e,i=12).width+", FieldWidth:"+s+`
`;break}for(var g="",b=0,x=0;x<a.length;x++)if(a.hasOwnProperty(x)){var N=!1;if(a[x].length!==1&&y!==a[x].length-1){if((f+2)*(b+2)+2>o)continue e;g+=a[x][y],N=!0,v=x,x--}else{g=(g+=a[x][y]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var k=parseInt(x),j=l(k,g,i),S=x>=a.length-1;if(j&&!S){g+=" ",y=0;continue}if(j||S){if(S)v=k;else if(e.multiline&&(f+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(b+2)+2>o)continue e;v=k}}for(var A="",P=m;P<=v;P++){var T=a[P];if(e.multiline){if(P===v){A+=T[y]+" ",y=(y+1)%T.length;continue}if(P===m){A+=T[T.length-1]+" ";continue}}A+=T[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,c=Xy(A,e,i).width,e.textAlign){case"right":u=s-c-2;break;case"center":u=(s-c)/2;break;case"left":default:u=2}t+=Ot(u)+" "+Ot(p)+` Td
`,t+="("+yf(A)+`) Tj
`,t+=-Ot(u)+` 0 Td
`,p=-(i+2),c=0,m=N?v:v+1,b++,g=""}break}return r.text=t,r.fontSize=i,r},Xy=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},q2e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},H2e=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},$2e=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),yn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[r]}},V2e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ws.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(q2e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");iC=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new WW,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];i.objId=void 0,i.hasAnnotation&&H2e(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,a){var i=!r;for(var o in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],l=[],u=s.Rect;if(s.Rect&&(s.Rect=U2e(s.Rect,a)),a.internal.newObjectDeferredBegin(s.objId,!0),s.DA=ot.createDefaultAppearanceStream(s),yn(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var c=W2e(s);l.push({key:"AP",value:"<</N "+c+">>"}),a.internal.acroformPlugin.xForms.push(c)}if(s.appearanceStreamContent){var f="";for(var h in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(h)){var p=s.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var m=p[o];typeof m=="function"&&(m=m.call(a,s)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=p)=="function"&&(m=m.call(a,s)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:s.objId}),a.internal.out("endobj")}i&&$2e(a.internal.acroformPlugin.xForms,a)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},zW=ir.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),yn(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),a+="("+yf(r(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},UN=function(e,t,n){var r=function(a){return a};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+yf(r(e))+")"},qs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qs.prototype.toString=function(){return this.objId+" 0 R"},qs.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},qs.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:zW(a,this.objId,this.scope)}):a instanceof qs?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:r,value:a}))}return e};var UW=function(){qs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Ci(UW,qs);var WW=function(){qs.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+yf(n(e))+")"}},set:function(n){e=n}})};Ci(WW,qs);var ws=function e(){qs.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');t=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!pr(t,3)},set:function(g){g?this.F=mr(t,3):this.F=gr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');n=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof l1)return;i="FieldObject"+e.FieldNum++}var g=function(b){return b};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+yf(g(i))+")"},set:function(g){i=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(g){i=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/iC:u},set:function(g){u=g}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof l1||this instanceof mc))return UN(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=g}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Lr?h:UN(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=this instanceof Lr?g:g.substr(0,1)==="("?eh(g.substr(1,g.length-2)):eh(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?eh(h.substr(1,h.length-1)):h},set:function(g){g=g.toString(),h=this instanceof Lr?"/"+g:g}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Lr?p:UN(p,this.objId,this.scope)},set:function(g){g=g.toString(),p=this instanceof Lr?g:g.substr(0,1)==="("?eh(g.substr(1,g.length-2)):eh(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Lr?eh(p.substr(1,p.length-1)):p},set:function(g){g=g.toString(),p=this instanceof Lr?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(g){g=!!g,v=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(g){m=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,1)},set:function(g){g?this.Ff=mr(this.Ff,1):this.Ff=gr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,2)},set:function(g){g?this.Ff=mr(this.Ff,2):this.Ff=gr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,3)},set:function(g){g?this.Ff=mr(this.Ff,3):this.Ff=gr(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');y=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(y){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};Ci(ws,qs);var Td=function(){ws.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return zW(t,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=function(i,o,s){s||(s=1);for(var l,u=[];l=o.exec(i);)u.push(l[s]);return u}(r,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,18)},set:function(n){n?this.Ff=mr(this.Ff,18):this.Ff=gr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=mr(this.Ff,19):this.Ff=gr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,20)},set:function(n){n?(this.Ff=mr(this.Ff,20),t.sort()):this.Ff=gr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,22)},set:function(n){n?this.Ff=mr(this.Ff,22):this.Ff=gr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,23)},set:function(n){n?this.Ff=mr(this.Ff,23):this.Ff=gr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,27)},set:function(n){n?this.Ff=mr(this.Ff,27):this.Ff=gr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ci(Td,ws);var Md=function(){Td.call(this),this.fontName="helvetica",this.combo=!1};Ci(Md,Td);var Ld=function(){Md.call(this),this.combo=!0};Ci(Ld,Md);var Sg=function(){Ld.call(this),this.edit=!0};Ci(Sg,Ld);var Lr=function(){ws.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,15)},set:function(n){n?this.Ff=mr(this.Ff,15):this.Ff=gr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,16)},set:function(n){n?this.Ff=mr(this.Ff,16):this.Ff=gr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,17)},set:function(n){n?this.Ff=mr(this.Ff,17):this.Ff=gr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,26)},set:function(n){n?this.Ff=mr(this.Ff,26):this.Ff=gr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,a=[];for(r in a.push("<<"),t)a.push("/"+r+" ("+yf(n(t[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){yn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Ci(Lr,ws);var kg=function(){Lr.call(this),this.pushButton=!0};Ci(kg,Lr);var Id=function(){Lr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ci(Id,Lr);var l1=function(){var e,t;ws.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(s){return s};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+yf(a(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){yn(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ci(l1,ws),Id.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Id.prototype.createOption=function(e){var t=new l1;return t.Parent=this,t.optionName=e,this.Kids.push(t),G2e.call(this.scope,t),t};var _g=function(){Lr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ot.CheckBox.createAppearanceStream()};Ci(_g,Lr);var mc=function(){ws.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,13)},set:function(t){t?this.Ff=mr(this.Ff,13):this.Ff=gr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,21)},set:function(t){t?this.Ff=mr(this.Ff,21):this.Ff=gr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,23)},set:function(t){t?this.Ff=mr(this.Ff,23):this.Ff=gr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,24)},set:function(t){t?this.Ff=mr(this.Ff,24):this.Ff=gr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,25)},set:function(t){t?this.Ff=mr(this.Ff,25):this.Ff=gr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,26)},set:function(t){t?this.Ff=mr(this.Ff,26):this.Ff=gr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ci(mc,ws);var jg=function(){mc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,14)},set:function(e){e?this.Ff=mr(this.Ff,14):this.Ff=gr(this.Ff,14)}}),this.password=!0};Ci(jg,mc);var ot={CheckBox:{createAppearanceStream:function(){return{N:{On:ot.CheckBox.YesNormal},D:{On:ot.CheckBox.YesPushDown,Off:ot.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=M_(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ot(ot.internal.getWidth(e))+" "+Ot(ot.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ot(i.fontSize)+" Tf "+a),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ps(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],i=ot.internal.getHeight(e),o=ot.internal.getWidth(e),s=M_(e,e.caption);return a.push("1 g"),a.push("0 0 "+Ot(o)+" "+Ot(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ot(o-1)+" "+Ot(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+Ot(s.fontSize)+" Tf "+r),a.push(s.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ot(ot.internal.getWidth(e))+" "+Ot(ot.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ot.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ot.RadioButton.Circle.YesNormal,t.D[e]=ot.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=ot.internal.getWidth(e)<=ot.internal.getHeight(e)?ot.internal.getWidth(e)/4:ot.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=ot.internal.Bezier_C,i=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Iu(ot.internal.getWidth(e)/2)+" "+Iu(ot.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=ot.internal.getWidth(e)<=ot.internal.getHeight(e)?ot.internal.getWidth(e)/4:ot.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*ot.internal.Bezier_C).toFixed(5)),o=Number((r*ot.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Iu(ot.internal.getWidth(e)/2)+" "+Iu(ot.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Iu(ot.internal.getWidth(e)/2)+" "+Iu(ot.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=ot.internal.getWidth(e)<=ot.internal.getHeight(e)?ot.internal.getWidth(e)/4:ot.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*ot.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Iu(ot.internal.getWidth(e)/2)+" "+Iu(ot.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ot.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ot.RadioButton.Cross.YesNormal,t.D[e]=ot.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ps(e);t.scope=e.scope;var n=[],r=ot.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ot(ot.internal.getWidth(e)-2)+" "+Ot(ot.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ot(r.x1.x)+" "+Ot(r.x1.y)+" m"),n.push(Ot(r.x2.x)+" "+Ot(r.x2.y)+" l"),n.push(Ot(r.x4.x)+" "+Ot(r.x4.y)+" m"),n.push(Ot(r.x3.x)+" "+Ot(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=ot.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ot(ot.internal.getWidth(e))+" "+Ot(ot.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ot(ot.internal.getWidth(e)-2)+" "+Ot(ot.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ot(n.x1.x)+" "+Ot(n.x1.y)+" m"),r.push(Ot(n.x2.x)+" "+Ot(n.x2.y)+" l"),r.push(Ot(n.x4.x)+" "+Ot(n.x4.y)+" m"),r.push(Ot(n.x3.x)+" "+Ot(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ps(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ot(ot.internal.getWidth(e))+" "+Ot(ot.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};ot.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ot.internal.getWidth(e),n=ot.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},ot.internal.getWidth=function(e){var t=0;return yn(e)==="object"&&(t=CT(e.Rect[2])),t},ot.internal.getHeight=function(e){var t=0;return yn(e)==="object"&&(t=CT(e.Rect[3])),t};var G2e=ir.addField=function(e){if(V2e(this,e),!(e instanceof ws))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ir.AcroFormChoiceField=Td,ir.AcroFormListBox=Md,ir.AcroFormComboBox=Ld,ir.AcroFormEditBox=Sg,ir.AcroFormButton=Lr,ir.AcroFormPushButton=kg,ir.AcroFormRadioButton=Id,ir.AcroFormCheckBox=_g,ir.AcroFormTextField=mc,ir.AcroFormPasswordField=jg,ir.AcroFormAppearance=ot,ir.AcroForm={ChoiceField:Td,ListBox:Md,ComboBox:Ld,EditBox:Sg,Button:Lr,PushButton:kg,RadioButton:Id,CheckBox:_g,TextField:mc,PasswordField:jg,Appearance:ot},wt.AcroForm={ChoiceField:Td,ListBox:Md,ComboBox:Ld,EditBox:Sg,Button:Lr,PushButton:kg,RadioButton:Id,CheckBox:_g,TextField:mc,PasswordField:jg,Appearance:ot};var K2e=wt.AcroForm;function qW(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(E,D){var R,F,H,B,U,W=t;if((D=D||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(j(E))for(U in n)for(H=n[U],R=0;R<H.length;R+=1){for(B=!0,F=0;F<H[R].length;F+=1)if(H[R][F]!==void 0&&H[R][F]!==E[F]){B=!1;break}if(B===!0){W=U;break}}else for(U in n)for(H=n[U],R=0;R<H.length;R+=1){for(B=!0,F=0;F<H[R].length;F+=1)if(H[R][F]!==void 0&&H[R][F]!==E.charCodeAt(F)){B=!1;break}if(B===!0){W=U;break}}return W===t&&D!==t&&(W=D),W},a=function E(D){for(var R=this.internal.write,F=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:D.width}),B.push({key:"Height",value:D.height}),D.colorSpace===y.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===y.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var U="",W=0,z=D.transparency.length;W<z;W++)U+=D.transparency[W]+" "+D.transparency[W]+" ";B.push({key:"Mask",value:"["+U+"]"})}D.sMask!==void 0&&B.push({key:"SMask",value:D.objectId+1+" 0 R"});var J=D.filter!==void 0?["/"+D.filter]:void 0;if(F({data:D.data,additionalKeyValues:B,alreadyAppliedFilters:J,objectId:D.objectId}),R("endobj"),"sMask"in D&&D.sMask!==void 0){var ee="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,L={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:ee,data:D.sMask};"filter"in D&&(L.filter=D.filter),E.call(this,L)}if(D.colorSpace===y.INDEXED){var q=this.internal.newObject();F({data:A(new Uint8Array(D.palette)),objectId:q}),R("endobj")}},i=function(){var E=this.internal.collections.addImage_images;for(var D in E)a.call(this,E[D])},o=function(){var E,D=this.internal.collections.addImage_images,R=this.internal.write;for(var F in D)R("/I"+(E=D[F]).index,E.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var E=this.internal.collections.addImage_images;return s.call(this),E},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(E){return typeof e["process"+E.toUpperCase()]=="function"},f=function(E){return yn(E)==="object"&&E.nodeType===1},h=function(E,D){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var R=""+E.getAttribute("src");if(R.indexOf("data:image/")===0)return Ng(unescape(R).split("base64,").pop());var F=e.loadFile(R,!0);if(F!==void 0)return F}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var H;switch(D){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;case"JPEG":case"JPG":default:H="image/jpeg"}return Ng(E.toDataURL(H,1).split("base64,").pop())}},p=function(E){var D=this.internal.collections.addImage_images;if(D){for(var R in D)if(E===D[R].alias)return D[R]}},m=function(E,D,R){return E||D||(E=-96,D=-96),E<0&&(E=-1*R.width*72/E/this.internal.scaleFactor),D<0&&(D=-1*R.height*72/D/this.internal.scaleFactor),E===0&&(E=D*R.width/R.height),D===0&&(D=E*R.height/R.width),[E,D]},v=function(E,D,R,F,H,B){var U=m.call(this,R,F,H),W=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,J=l.call(this);if(R=U[0],F=U[1],J[H.index]=H,B){B*=Math.PI/180;var ee=Math.cos(B),L=Math.sin(B),q=function(te){return te.toFixed(4)},Y=[q(ee),q(L),q(-1*L),q(ee),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,W(E),z(D+F),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([W(R),"0","0",W(F),"0","0","cm"].join(" "))):this.internal.write([W(R),"0","0",W(F),W(E),z(D+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(E){var D,R,F=0;if(typeof E=="string")for(R=E.length,D=0;D<R;D++)F=(F<<5)-F+E.charCodeAt(D),F|=0;else if(j(E))for(R=E.byteLength/2,D=0;D<R;D++)F=(F<<5)-F+E[D],F|=0;return F},x=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var D=!0;return E.length===0&&(D=!1),E.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(D=!1),D},N=e.__addimage__.extractImageFromDataUrl=function(E){var D=(E=E||"").split("base64,"),R=null;if(D.length===2){var F=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(F)&&(R={mimeType:F[1],charset:F[2],data:D[1]})}return R},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(E){return k()&&E instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(E){return k()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},S=e.__addimage__.binaryStringToUint8Array=function(E){for(var D=E.length,R=new Uint8Array(D),F=0;F<D;F++)R[F]=E.charCodeAt(F);return R},A=e.__addimage__.arrayBufferToBinaryString=function(E){for(var D="",R=j(E)?E:new Uint8Array(E),F=0;F<R.length;F+=8192)D+=String.fromCharCode.apply(null,R.subarray(F,F+8192));return D};e.addImage=function(){var E,D,R,F,H,B,U,W,z;if(typeof arguments[1]=="number"?(D=t,R=arguments[1],F=arguments[2],H=arguments[3],B=arguments[4],U=arguments[5],W=arguments[6],z=arguments[7]):(D=arguments[1],R=arguments[2],F=arguments[3],H=arguments[4],B=arguments[5],U=arguments[6],W=arguments[7],z=arguments[8]),yn(E=arguments[0])==="object"&&!f(E)&&"imageData"in E){var J=E;E=J.imageData,D=J.format||D||t,R=J.x||R||0,F=J.y||F||0,H=J.w||J.width||H,B=J.h||J.height||B,U=J.alias||U,W=J.compression||W,z=J.rotation||J.angle||z}var ee=this.internal.getFilters();if(W===void 0&&ee.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(R)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var L=P.call(this,E,D,U,W);return v.call(this,R,F,H,B,L,z),this};var P=function(E,D,R,F){var H,B,U;if(typeof E=="string"&&r(E)===t){E=unescape(E);var W=T(E,!1);(W!==""||(W=e.loadFile(E,!0))!==void 0)&&(E=W)}if(f(E)&&(E=h(E,D)),D=r(E,D),!c(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((U=R)==null||U.length===0)&&(R=function(z){return typeof z=="string"||j(z)?b(z):j(z.data)?b(z.data):null}(E)),(H=p.call(this,R))||(k()&&(E instanceof Uint8Array||D==="RGBA"||(B=E,E=S(E))),H=this["process"+D.toUpperCase()](E,u.call(this),R,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:g.NONE}(F),B)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},T=e.__addimage__.convertBase64ToBinaryString=function(E,D){var R;D=typeof D!="boolean"||D;var F,H="";if(typeof E=="string"){F=(R=N(E))!==null?R.data:E;try{H=Ng(F)}catch(B){if(D)throw x(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};e.getImageProperties=function(E){var D,R,F="";if(f(E)&&(E=h(E)),typeof E=="string"&&r(E)===t&&((F=T(E,!1))===""&&(F=e.loadFile(E)||""),E=F),R=r(E),!c(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!k()||E instanceof Uint8Array||(E=S(E)),!(D=this["process"+R.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=R,D}})(wt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};wt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,a,i,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,f=0;f<u.length&&!c;f++)switch((r=u[f]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){r=u[h];var p=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(v.objId),b=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+p(g(r.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+p(g(b))+") >>",v.content=i;var x=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+x,r.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(v.objId,"0 R",y.objId,"0 R");break;case"freetext":a="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(m(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var j=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+j+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,a,i,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+a),h:u(r+i)},options:o,type:"link"})},e.textWithLink=function(n,r,a,i){var o,s,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){s=i.maxWidth;var c=this.splitTextToSize(n,s).length;o=Math.ceil(u*c)}else s=l,o=u;return this.text(n,r,a,i),a+=.2*u,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,a-u,s,o,i),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(wt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&a.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var c=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var y=0,g=n,b="",x=0;for(y=0;y<v.length;y+=1)g[v.charCodeAt(y)]!==void 0?(x++,typeof(g=g[v.charCodeAt(y)])=="number"&&(b+=String.fromCharCode(g),g=n,x=0),y===v.length-1&&(g=n,b+=v.charAt(y-(x-1)),y-=x-1,x=0)):(g=n,b+=v.charAt(y-x),y-=x,x=0);return b};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&r[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,y,g){return o(v)?i(v)===!1?-1:!u(v)||!o(y)&&!o(g)||!o(g)&&s(y)||s(v)&&!o(y)||s(v)&&l(y)||s(v)&&s(y)?0:c(v)&&o(y)&&!s(y)&&o(g)&&u(g)?3:s(v)||!o(g)?1:2:-1},p=function(v){var y=0,g=0,b=0,x="",N="",k="",j=(v=v||"").split("\\s+"),S=[];for(y=0;y<j.length;y+=1){for(S.push(""),g=0;g<j[y].length;g+=1)x=j[y][g],N=j[y][g-1],k=j[y][g+1],o(x)?(b=h(x,N,k),S[y]+=b!==-1?String.fromCharCode(t[x.charCodeAt(0)][b]):x):S[y]+=x;S[y]=f(S[y])}return S.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var v,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(y)){var b=0;for(g=[],b=0;b<y.length;b+=1)Array.isArray(y[b])?g.push([p(y[b][0]),y[b][1],y[b][2]]):g.push([p(y[b])]);v=g}else v=p(y);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",m])}(wt.API),wt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(s){n=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(s){a=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(s){i=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(wt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,m=0,v=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=u.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,N){return x.concat(y.splitTextToSize(N,g))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)p<(v=this.getStringUnitWidth(l[b],{font:f})*c)&&(p=v);return p!==0&&(m=l.length),{w:p/=h,h:Math.max((m*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};e.table=function(l,u,c,f,h){if(r.call(this),!c)throw new Error("No data for PDF table.");var p,m,v,y,g=[],b=[],x=[],N={},k={},j=[],S=[],A=(h=h||{}).autoSize||!1,P=h.printHeaders!==!1,T=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,E=h.margins||Object.assign({width:this.getPageWidth()},t),D=typeof h.padding=="number"?h.padding:3,R=h.headerBackgroundColor||"#c8c8c8",F=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=F,this.setFontSize(T),f==null)b=g=Object.keys(c[0]),x=g.map(function(){return"left"});else if(Array.isArray(f)&&yn(f[0])==="object")for(g=f.map(function(J){return J.name}),b=f.map(function(J){return J.prompt||J.name||""}),x=f.map(function(J){return J.align||"left"}),p=0;p<f.length;p+=1)k[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(b=g=f,x=g.map(function(){return"left"}));if(A||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<g.length;p+=1){for(N[y=g[p]]=c.map(function(J){return J[y]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=N[y],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)j.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[y]=Math.max.apply(null,j)+D+D,j=[]}if(P){var H={};for(p=0;p<g.length;p+=1)H[g[p]]={},H[g[p]].text=b[p],H[g[p]].align=x[p];var B=s.call(this,H,k);S=g.map(function(J){return new i(l,u,k[J],B,H[J].text,void 0,H[J].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var U=f.reduce(function(J,ee){return J[ee.name]=ee.align,J},{});for(p=0;p<c.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:c[p]},this);var W=s.call(this,c[p],k);for(v=0;v<g.length;v+=1){var z=c[p][g[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:z},this),o.call(this,new i(l,u,k[g[v]],W,z,p+2,U[g[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var c=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var m=l[p];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[p]-c-c)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+c+c},this).reduce(function(p,m){return Math.max(p,m)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){c=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(wt.API);var HW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},$W=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L_=qW($W),VW=[100,200,300,400,500,600,700,800,900],Y2e=qW(VW);function I_(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return HW[i=i||"normal"]?i:"normal"}(e.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof L_[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function ET(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var X2e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},DT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function PT(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function J2e(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},X2e,n.genericFontFamilies||{}),i=null,o=null,s=0;s<t.length;++s)if(a[(i=I_(t[s])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+PT(i)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var c=L_[l],f=c<=L_.normal?-1:1,h=ET(u,$W,c,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(i.stretch,o),o=function(l,u){if(u[l])return u[l];for(var c=HW[l],f=0;f<c.length;++f)if(u[c[f]])return u[c[f]];throw new Error("Could not find a matching font-style for "+l)}(i.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=Y2e[l],f=ET(u,VW,c,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+PT(i)+"'.");return o}function OT(e){return e.trimLeft()}function Q2e(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Z2e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Jy,TT,MT,WN=["times"];(function(e){var t,n,r,a,i,o,s,l,u,c=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=L;Object.defineProperty(this,"pdf",{get:function(){return q}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(me){Y=!!me}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(me){te=!!me}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(me){isNaN(me)||(K=me)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(me){isNaN(me)||(ce=me)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(me){var ie;typeof me=="number"?ie=[me,me,me,me]:((ie=new Array(4))[0]=me[0],ie[1]=me.length>=2?me[1]:ie[0],ie[2]=me.length>=3?me[2]:ie[0],ie[3]=me.length>=4?me[3]:ie[1]),u.margin=ie}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(me){he=me}});var $=0;Object.defineProperty(this,"lastBreak",{get:function(){return $},set:function(me){$=me}});var X=[];Object.defineProperty(this,"pageBreaks",{get:function(){return X},set:function(me){X=me}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(me){me instanceof c&&(u=me)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(me){u.path=me}});var ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return ae},set:function(me){ae=me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(me){var ie;ie=h(me),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(me){var ie=h(me);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(me){["butt","round","square"].indexOf(me)!==-1&&(this.ctx.lineCap=me,this.pdf.setLineCap(me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(me){isNaN(me)||(this.ctx.lineWidth=me,this.pdf.setLineWidth(me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(me){["bevel","round","miter"].indexOf(me)!==-1&&(this.ctx.lineJoin=me,this.pdf.setLineJoin(me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(me){isNaN(me)||(this.ctx.miterLimit=me,this.pdf.setMiterLimit(me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(me){this.ctx.textBaseline=me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(me){["right","end","center","left","start"].indexOf(me)!==-1&&(this.ctx.textAlign=me)}});var le=null;function Se(me,ie){if(le===null){var Ve=function(be){var fe=[];return Object.keys(be).forEach(function(_e){be[_e].forEach(function(je){var Re=null;switch(je){case"bold":Re={family:_e,weight:"bold"};break;case"italic":Re={family:_e,style:"italic"};break;case"bolditalic":Re={family:_e,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:_e}}Re!==null&&(Re.ref={name:_e,style:je},fe.push(Re))})}),fe}(me.getFontList());le=function(be){for(var fe={},_e=0;_e<be.length;++_e){var je=I_(be[_e]),Re=je.family,Ge=je.stretch,Je=je.style,Ye=je.weight;fe[Re]=fe[Re]||{},fe[Re][Ge]=fe[Re][Ge]||{},fe[Re][Ge][Je]=fe[Re][Ge][Je]||{},fe[Re][Ge][Je][Ye]=je}return fe}(Ve.concat(ie))}return le}var Ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ee},set:function(me){le=null,Ee=me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(me){var ie;if(this.ctx.font=me,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(me))!==null){var Ve=ie[1],be=(ie[2],ie[3]),fe=ie[4],_e=(ie[5],ie[6]),je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fe)[2];fe=Math.floor(je==="px"?parseFloat(fe)*this.pdf.internal.scaleFactor:je==="em"?parseFloat(fe)*this.pdf.getFontSize():parseFloat(fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fe);var Re=function(Qe){var rt,Ke,xr=[],Lt=Qe.trim();if(Lt==="")return WN;if(Lt in DT)return[DT[Lt]];for(;Lt!=="";){switch(Ke=null,rt=(Lt=OT(Lt)).charAt(0)){case'"':case"'":Ke=Q2e(Lt.substring(1),rt);break;default:Ke=Z2e(Lt)}if(Ke===null||(xr.push(Ke[0]),(Lt=OT(Ke[1]))!==""&&Lt.charAt(0)!==","))return WN;Lt=Lt.replace(/^,/,"")}return xr}(_e);if(this.fontFaces){var Ge=J2e(Se(this.pdf,this.fontFaces),Re.map(function(Qe){return{family:Qe,stretch:"normal",weight:be,style:Ve}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Je="";(be==="bold"||parseInt(be,10)>=700||Ve==="bold")&&(Je="bold"),Ve==="italic"&&(Je+="italic"),Je.length===0&&(Je="normal");for(var Ye="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<Re.length;dt++){if(this.pdf.internal.getFont(Re[dt],Je,{noFallback:!0,disableWarning:!0})!==void 0){Ye=Re[dt];break}if(Je==="bolditalic"&&this.pdf.internal.getFont(Re[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ye=Re[dt],Je="bold";else if(this.pdf.internal.getFont(Re[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ye=Re[dt],Je="normal";break}}if(Ye===""){for(var At=0;At<Re.length;At++)if(ct[Re[At]]){Ye=ct[Re[At]];break}}Ye=Ye===""?"Times":Ye,this.pdf.setFont(Ye,Je)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(me){this.ctx.globalCompositeOperation=me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(me){this.ctx.globalAlpha=me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(me){this.ctx.lineDashOffset=me,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(me){this.ctx.lineDash=me,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(me){this.ctx.ignoreClearRect=!!me}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,q){if(isNaN(L)||isNaN(q))throw jn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(L,q)},f.prototype.closePath=function(){var L=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&yn(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){L=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},f.prototype.lineTo=function(L,q){if(isNaN(L)||isNaN(q))throw jn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,q,Y,te){if(isNaN(Y)||isNaN(te)||isNaN(L)||isNaN(q))throw jn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(Y,te)),ce=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},f.prototype.bezierCurveTo=function(L,q,Y,te,K,ce){if(isNaN(K)||isNaN(ce)||isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te))throw jn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(K,ce)),$=this.ctx.transform.applyToPoint(new o(L,q)),X=this.ctx.transform.applyToPoint(new o(Y,te));this.path.push({type:"bct",x1:$.x,y1:$.y,x2:X.x,y2:X.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},f.prototype.arc=function(L,q,Y,te,K,ce){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te)||isNaN(K))throw jn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(L,q));L=he.x,q=he.y;var $=this.ctx.transform.applyToPoint(new o(0,Y)),X=this.ctx.transform.applyToPoint(new o(0,0));Y=Math.sqrt(Math.pow($.x-X.x,2)+Math.pow($.y-X.y,2))}Math.abs(K-te)>=2*Math.PI&&(te=0,K=2*Math.PI),this.path.push({type:"arc",x:L,y:q,radius:Y,startAngle:te,endAngle:K,counterclockwise:ce})},f.prototype.arcTo=function(L,q,Y,te,K){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,q,Y,te){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te))throw jn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,q),this.lineTo(L+Y,q),this.lineTo(L+Y,q+te),this.lineTo(L,q+te),this.lineTo(L,q),this.lineTo(L+Y,q),this.lineTo(L,q)},f.prototype.fillRect=function(L,q,Y,te){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te))throw jn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,q,Y,te),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},f.prototype.strokeRect=function(L,q,Y,te){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te))throw jn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(L,q,Y,te),this.stroke())},f.prototype.clearRect=function(L,q,Y,te){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te))throw jn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,q,Y,te))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(q),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var q,Y,te,K;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))q=0,Y=0,te=0,K=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(ce!==null)q=parseInt(ce[1]),Y=parseInt(ce[2]),te=parseInt(ce[3]),K=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)q=parseInt(ce[1]),Y=parseInt(ce[2]),te=parseInt(ce[3]),K=parseFloat(ce[4]);else{if(K=1,typeof L=="string"&&L.charAt(0)!=="#"){var he=new RW(L);L=he.ok?he.toHex():"#000000"}L.length===4?(q=L.substring(1,2),q+=q,Y=L.substring(2,3),Y+=Y,te=L.substring(3,4),te+=te):(q=L.substring(1,3),Y=L.substring(3,5),te=L.substring(5,7)),q=parseInt(q,16),Y=parseInt(Y,16),te=parseInt(te,16)}}return{r:q,g:Y,b:te,a:K,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,q,Y,te){if(isNaN(q)||isNaN(Y)||typeof L!="string")throw jn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var K=W(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;D.call(this,{text:L,x:q,y:Y,scale:ce,angle:K,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(L,q,Y,te){if(isNaN(q)||isNaN(Y)||typeof L!="string")throw jn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){te=isNaN(te)?void 0:te;var K=W(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;D.call(this,{text:L,x:q,y:Y,scale:ce,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(L){if(typeof L!="string")throw jn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Y=this.pdf.internal.scaleFactor,te=q.internal.getFontSize(),K=q.getStringUnitWidth(L)*te/q.internal.scaleFactor,ce=function(he){var $=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return $}}),this};return new ce({width:K*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(L,q){if(isNaN(L)||isNaN(q))throw jn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(L,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(L){if(isNaN(L))throw jn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(L,q){if(isNaN(L)||isNaN(q))throw jn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,L,q);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(L,q,Y,te,K,ce){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(te)||isNaN(K)||isNaN(ce))throw jn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(L,q,Y,te,K,ce);this.ctx.transform=this.ctx.transform.multiply(he)},f.prototype.setTransform=function(L,q,Y,te,K,ce){L=isNaN(L)?1:L,q=isNaN(q)?0:q,Y=isNaN(Y)?0:Y,te=isNaN(te)?1:te,K=isNaN(K)?0:K,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(L,q,Y,te,K,ce)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,q,Y,te,K,ce,he,$,X){var ae=this.pdf.getImageProperties(L),le=1,Se=1,Ee=1,me=1;te!==void 0&&$!==void 0&&(Ee=$/te,me=X/K,le=ae.width/te*$/te,Se=ae.height/K*X/K),ce===void 0&&(ce=q,he=Y,q=0,Y=0),te!==void 0&&$===void 0&&($=te,X=K),te===void 0&&$===void 0&&($=ae.width,X=ae.height);for(var ie,Ve=this.ctx.transform.decompose(),be=W(Ve.rotate.shx),fe=new l,_e=(fe=(fe=(fe=fe.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale)).applyToRectangle(new s(ce-q*Ee,he-Y*me,te*le,K*Se)),je=y.call(this,_e),Re=[],Ge=0;Ge<je.length;Ge+=1)Re.indexOf(je[Ge])===-1&&Re.push(je[Ge]);if(x(Re),this.autoPaging)for(var Je=Re[0],Ye=Re[Re.length-1],ct=Je;ct<Ye+1;ct++){this.pdf.setPage(ct);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=ct===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=ct===1?0:Qe+(ct-2)*rt;if(this.ctx.clip_path.length!==0){var xr=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ie,this.posX+this.margin[3],-Ke+At+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=xr}var Lt=JSON.parse(JSON.stringify(_e));Lt=b([Lt],this.posX+this.margin[3],-Ke+At+this.ctx.prevPageLastElemOffset)[0];var $r=(ct>Je||ct<Ye)&&v.call(this);$r&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,rt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,be),$r&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,be)};var y=function(L,q,Y){var te=[];q=q||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":te.push(Math.floor((L.y+K)/Y)+1);break;case"arc":te.push(Math.floor((L.y+K-L.radius)/Y)+1),te.push(Math.floor((L.y+K+L.radius)/Y)+1);break;case"qct":var ce=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);te.push(Math.floor((ce.y+K)/Y)+1),te.push(Math.floor((ce.y+ce.h+K)/Y)+1);break;case"bct":var he=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);te.push(Math.floor((he.y+K)/Y)+1),te.push(Math.floor((he.y+he.h+K)/Y)+1);break;case"rect":te.push(Math.floor((L.y+K)/Y)+1),te.push(Math.floor((L.y+L.h+K)/Y)+1)}for(var $=0;$<te.length;$+=1)for(;this.pdf.internal.getNumberOfPages()<te[$];)g.call(this);return te},g=function(){var L=this.fillStyle,q=this.strokeStyle,Y=this.font,te=this.lineCap,K=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=q,this.font=Y,this.lineCap=te,this.lineWidth=K,this.lineJoin=ce},b=function(L,q,Y){for(var te=0;te<L.length;te++)switch(L[te].type){case"bct":L[te].x2+=q,L[te].y2+=Y;case"qct":L[te].x1+=q,L[te].y1+=Y;case"mt":case"lt":case"arc":default:L[te].x+=q,L[te].y+=Y}return L},x=function(L){return L.sort(function(q,Y){return q-Y})},N=function(L,q){for(var Y,te,K=this.fillStyle,ce=this.strokeStyle,he=this.lineCap,$=this.lineWidth,X=Math.abs($*this.ctx.transform.scaleX),ae=this.lineJoin,le=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),Ee=[],me=0;me<Se.length;me++)if(Se[me].x!==void 0)for(var ie=y.call(this,Se[me]),Ve=0;Ve<ie.length;Ve+=1)Ee.indexOf(ie[Ve])===-1&&Ee.push(ie[Ve]);for(var be=0;be<Ee.length;be++)for(;this.pdf.internal.getNumberOfPages()<Ee[be];)g.call(this);if(x(Ee),this.autoPaging)for(var fe=Ee[0],_e=Ee[Ee.length-1],je=fe;je<_e+1;je++){this.pdf.setPage(je),this.fillStyle=K,this.strokeStyle=ce,this.lineCap=he,this.lineWidth=X,this.lineJoin=ae;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=je===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=je===1?0:Je+(je-2)*Ye;if(this.ctx.clip_path.length!==0){var dt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Y,this.posX+this.margin[3],-ct+Ge+this.ctx.prevPageLastElemOffset),k.call(this,L,!0),this.path=dt}if(te=JSON.parse(JSON.stringify(le)),this.path=b(te,this.posX+this.margin[3],-ct+Ge+this.ctx.prevPageLastElemOffset),q===!1||je===0){var At=(je>fe||je<_e)&&v.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,Ye,null).clip().discardPath()),k.call(this,L,q),At&&this.pdf.restoreGraphicsState()}this.lineWidth=$}else this.lineWidth=X,k.call(this,L,q),this.lineWidth=$;this.path=le},k=function(L,q){if((L!=="stroke"||q||!m.call(this))&&(L==="stroke"||q||!p.call(this))){for(var Y,te,K=[],ce=this.path,he=0;he<ce.length;he++){var $=ce[he];switch($.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:$,deltas:[],abs:[]});break;case"lt":var X=K.length;if(ce[he-1]&&!isNaN(ce[he-1].x)&&(Y=[$.x-ce[he-1].x,$.y-ce[he-1].y],X>0)){for(;X>=0;X--)if(K[X-1].close!==!0&&K[X-1].begin!==!0){K[X-1].deltas.push(Y),K[X-1].abs.push($);break}}break;case"bct":Y=[$.x1-ce[he-1].x,$.y1-ce[he-1].y,$.x2-ce[he-1].x,$.y2-ce[he-1].y,$.x-ce[he-1].x,$.y-ce[he-1].y],K[K.length-1].deltas.push(Y);break;case"qct":var ae=ce[he-1].x+2/3*($.x1-ce[he-1].x),le=ce[he-1].y+2/3*($.y1-ce[he-1].y),Se=$.x+2/3*($.x1-$.x),Ee=$.y+2/3*($.y1-$.y),me=$.x,ie=$.y;Y=[ae-ce[he-1].x,le-ce[he-1].y,Se-ce[he-1].x,Ee-ce[he-1].y,me-ce[he-1].x,ie-ce[he-1].y],K[K.length-1].deltas.push(Y);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push($)}}te=q?null:L==="stroke"?"stroke":"fill";for(var Ve=!1,be=0;be<K.length;be++)if(K[be].arc)for(var fe=K[be].abs,_e=0;_e<fe.length;_e++){var je=fe[_e];je.type==="arc"?A.call(this,je.x,je.y,je.radius,je.startAngle,je.endAngle,je.counterclockwise,void 0,q,!Ve):R.call(this,je.x,je.y),Ve=!0}else if(K[be].close===!0)this.pdf.internal.out("h"),Ve=!1;else if(K[be].begin!==!0){var Re=K[be].start.x,Ge=K[be].start.y;F.call(this,K[be].deltas,Re,Ge),Ve=!0}te&&P.call(this,te),q&&T.call(this)}},j=function(L){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-Y;case"top":return L+q-Y;case"hanging":return L+q-2*Y;case"middle":return L+q/2-Y;case"ideographic":return L;case"alphabetic":default:return L}},S=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(q,Y){this.colorStops.push([q,Y])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(L,q,Y,te,K,ce,he,$,X){for(var ae=B.call(this,Y,te,K,ce),le=0;le<ae.length;le++){var Se=ae[le];le===0&&(X?E.call(this,Se.x1+L,Se.y1+q):R.call(this,Se.x1+L,Se.y1+q)),H.call(this,L,q,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}$?T.call(this):P.call(this,he)},P=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(L,q){this.pdf.internal.out(n(L)+" "+r(q)+" m")},D=function(L){var q;switch(L.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Y=this.pdf.getTextDimensions(L.text),te=j.call(this,L.y),K=S.call(this,te)-Y.h,ce=this.ctx.transform.applyToPoint(new o(L.x,te)),he=this.ctx.transform.decompose(),$=new l;$=($=($=$.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var X,ae,le,Se=this.ctx.transform.applyToRectangle(new s(L.x,te,Y.w,Y.h)),Ee=$.applyToRectangle(new s(L.x,K,Y.w,Y.h)),me=y.call(this,Ee),ie=[],Ve=0;Ve<me.length;Ve+=1)ie.indexOf(me[Ve])===-1&&ie.push(me[Ve]);if(x(ie),this.autoPaging)for(var be=ie[0],fe=ie[ie.length-1],_e=be;_e<fe+1;_e++){this.pdf.setPage(_e);var je=_e===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],Je=Ge-this.margin[0],Ye=this.pdf.internal.pageSize.width-this.margin[1],ct=Ye-this.margin[3],dt=_e===1?0:Re+(_e-2)*Je;if(this.ctx.clip_path.length!==0){var At=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(X,this.posX+this.margin[3],-1*dt+je),k.call(this,"fill",!0),this.path=At}var Qe=b([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-dt+je+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*L.scale),le=this.lineWidth,this.lineWidth=le*L.scale);var rt=this.autoPaging!=="text";if(rt||Qe.y+Qe.h<=Ge){if(rt||Qe.y>=je&&Qe.x<=Ye){var Ke=rt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ye-Qe.x)[0],xr=b([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-dt+je+this.ctx.prevPageLastElemOffset)[0],Lt=rt&&(_e>be||_e<fe)&&v.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Je,null).clip().discardPath()),this.pdf.text(Ke,xr.x,xr.y,{angle:L.angle,align:q,renderingMode:L.renderingMode}),Lt&&this.pdf.restoreGraphicsState()}}else Qe.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Qe.y);L.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=le)}else L.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*L.scale),le=this.lineWidth,this.lineWidth=le*L.scale),this.pdf.text(L.text,ce.x+this.posX,ce.y+this.posY,{angle:L.angle,align:q,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=le)},R=function(L,q,Y,te){Y=Y||0,te=te||0,this.pdf.internal.out(n(L+Y)+" "+r(q+te)+" l")},F=function(L,q,Y){return this.pdf.lines(L,q,Y,null,null)},H=function(L,q,Y,te,K,ce,he,$){this.pdf.internal.out([t(a(Y+L)),t(i(te+q)),t(a(K+L)),t(i(ce+q)),t(a(he+L)),t(i($+q)),"c"].join(" "))},B=function(L,q,Y,te){for(var K=2*Math.PI,ce=Math.PI/2;q>Y;)q-=K;var he=Math.abs(Y-q);he<K&&te&&(he=K-he);for(var $=[],X=te?-1:1,ae=q;he>1e-5;){var le=ae+X*Math.min(he,ce);$.push(U.call(this,L,ae,le)),he-=Math.abs(le-ae),ae=le}return $},U=function(L,q,Y){var te=(Y-q)/2,K=L*Math.cos(te),ce=L*Math.sin(te),he=K,$=-ce,X=he*he+$*$,ae=X+he*K+$*ce,le=4/3*(Math.sqrt(2*X*ae)-ae)/(he*ce-$*K),Se=he-le*$,Ee=$+le*he,me=Se,ie=-Ee,Ve=te+q,be=Math.cos(Ve),fe=Math.sin(Ve);return{x1:L*Math.cos(q),y1:L*Math.sin(q),x2:Se*be-Ee*fe,y2:Se*fe+Ee*be,x3:me*be-ie*fe,y3:me*fe+ie*be,x4:L*Math.cos(Y),y4:L*Math.sin(Y)}},W=function(L){return 180*L/Math.PI},z=function(L,q,Y,te,K,ce){var he=L+.5*(Y-L),$=q+.5*(te-q),X=K+.5*(Y-K),ae=ce+.5*(te-ce),le=Math.min(L,K,he,X),Se=Math.max(L,K,he,X),Ee=Math.min(q,ce,$,ae),me=Math.max(q,ce,$,ae);return new s(le,Ee,Se-le,me-Ee)},J=function(L,q,Y,te,K,ce,he,$){var X,ae,le,Se,Ee,me,ie,Ve,be,fe,_e,je,Re,Ge,Je=Y-L,Ye=te-q,ct=K-Y,dt=ce-te,At=he-K,Qe=$-ce;for(ae=0;ae<41;ae++)be=(ie=(le=L+(X=ae/40)*Je)+X*((Ee=Y+X*ct)-le))+X*(Ee+X*(K+X*At-Ee)-ie),fe=(Ve=(Se=q+X*Ye)+X*((me=te+X*dt)-Se))+X*(me+X*(ce+X*Qe-me)-Ve),ae==0?(_e=be,je=fe,Re=be,Ge=fe):(_e=Math.min(_e,be),je=Math.min(je,fe),Re=Math.max(Re,be),Ge=Math.max(Ge,fe));return new s(Math.round(_e),Math.round(je),Math.round(Re-_e),Math.round(Ge-je))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,q,Y=(L=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:q}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(wt.API),function(e){var t=function(i){var o,s,l,u,c,f,h,p,m,v;for(s=[],l=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>l;l+=4)(c=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(f=(c=((c=((c=((c=(c-(v=c%85))/85)-(m=c%85))/85)-(p=c%85))/85)-(h=c%85))/85)%85,s.push(f+33,h+33,p+33,m+33,v+33)):s.push(122);return function(y,g){for(var b=g;b>0;b--)y.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},n=function(i){var o,s,l,u,c,f=String,h="length",p=255,m="charCodeAt",v="slice",y="replace";for(i[v](-2),i=i[v](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],u=0,c=(i+=o="uuuuu"[v](i[h]%5||5))[h];c>u;u+=5)s=52200625*(i[m](u)-33)+614125*(i[m](u+1)-33)+7225*(i[m](u+2)-33)+85*(i[m](u+3)-33)+(i[m](u+4)-33),l.push(p&s>>24,p&s>>16,p&s>>8,p&s);return function(g,b){for(var x=b;x>0;x--)g.pop()}(l,o[h]),f.fromCharCode.apply(f,l)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var s="",l=0;l<i.length;l+=2)s+=String.fromCharCode("0x"+(i[l]+i[l+1]));return s},a=function(i){for(var o=new Uint8Array(i.length),s=i.length;s--;)o[s]=i.charCodeAt(s);return i=(o=D_(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,o){var s=0,l=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(wt.API),function(e){e.loadFile=function(t,n,r){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,u,c){var f=new XMLHttpRequest,h=0,p=function(m){var v=m.length,y=[],g=String.fromCharCode;for(h=0;h<v;h+=1)y.push(g(255&m.charCodeAt(h)));return y.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?c(p(this.responseText)):c(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,i,o)}catch{}return s}(t,n,r)},e.loadImageFile=e.loadFile}(wt.API),function(e){function t(){return(St.html2canvas?Promise.resolve(St.html2canvas):HN(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(St.DOMPurify?Promise.resolve(St.DOMPurify):HN(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var s=yn(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},a=function(o,s){var l=document.createElement(o);for(var u in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[u]=s.style[u];return l},i=function o(s){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(s)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,s){return o.__proto__=s||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:a("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(u,c){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)c!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(s){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],m=p.src.find(function(v){return v.format==="truetype"});m&&l.addFont(m.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),s(this.prop.container,f)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},i.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var s=Object.keys(o||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(s)})},i.prototype.get=function(o,s){return this.then(function(){var l=o in i.template.prop?this.prop[o]:this.opt[o];return s?s(l):l})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function s(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,s,l,u){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,s,l,u){return this.setProgress(o?this.progress.val+o:null,s||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,s){var l=this;return this.thenCore(o,s,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,c).then(function(f){return l.updateProgress(1),f})})},i.prototype.thenCore=function(o,s,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),c=l.call(u,o,s);return i.convert(c,this.__proto__)},i.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},i.prototype.thenList=function(o){var s=this;return o.forEach(function(l){s=s.thenCore(l)}),s},i.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return i.convert(s,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,wt.getPageSize=function(o,s,l){if(yn(o)==="object"){var u=o;o=u.orientation,s=u.unit||s,l=u.format||l}s=s||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var c,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+s}var p,m=0,v=0;if(h.hasOwnProperty(f))m=h[f][1]/c,v=h[f][0]/c;else try{m=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",v>m&&(p=v,v=m,m=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>v&&(p=v,v=m,m=p)}return{width:v,height:m,unit:s,k:c,orientation:o}},e.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(I_):null;var l=new i(s);return s.worker?l:l.from(o).doCallback()}}(wt.API),wt.API.addJS=function(e){return MT=e,this.internal.events.subscribe("postPutResources",function(){Jy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),TT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+MT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Jy!==void 0&&TT!==void 0&&this.internal.out("/Names <</JavaScript "+Jy+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],s=r.exec(o);if(s!=null){var l=s[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(i=0;i<u;i++){var f=n.internal.newObject();c.push(f);var h=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<c.length;i++)n.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,i){var o={title:a,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var i=0;i<a.children.length;i++)r.count++,this.count_r(r,a.children[i]);return r.count}}])}(wt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,a,i,o,s){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,v={width:0,height:0,numcomponents:1},y=4;y<m;y+=2){if(y+=p,t.indexOf(f.charCodeAt(y+1))!==-1){h=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),v={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:h,numcomponents:f.charCodeAt(y+9)};break}p=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return v}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:r,alias:a}}return c}}(wt.API);var th,Qy,LT,IT,RT,ewe=function(){var e,t,n;function r(i){var o,s,l,u,c,f,h,p,m,v,y,g,b,x;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),m=(function(){var N,k;for(k=[],N=0;N<4;++N)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*c/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,o-=4),i=(f!=null?f.data:void 0)||this.imgData,g=0;0<=o?g<o:g>o;0<=o?++g:--g)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(b=0;0<=v?b<v:b>v;0<=v?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(y=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,y.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,s;for(s=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)s.push(this.data[this.pos++]);return s},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),l=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function c(f,h,p,m){var v,y,g,b,x,N,k,j,S,A,P,T,E,D,R,F,H,B,U,W,z,J=Math.ceil((u.width-f)/p),ee=Math.ceil((u.height-h)/m),L=u.width==J&&u.height==ee;for(D=o*J,T=L?s:new Uint8Array(D*ee),N=i.length,E=0,y=0;E<ee&&l<N;){switch(i[l++]){case 0:for(b=H=0;H<D;b=H+=1)T[y++]=i[l++];break;case 1:for(b=B=0;B<D;b=B+=1)v=i[l++],x=b<o?0:T[y-o],T[y++]=(v+x)%256;break;case 2:for(b=U=0;U<D;b=U+=1)v=i[l++],g=(b-b%o)/o,R=E&&T[(E-1)*D+g*o+b%o],T[y++]=(R+v)%256;break;case 3:for(b=W=0;W<D;b=W+=1)v=i[l++],g=(b-b%o)/o,x=b<o?0:T[y-o],R=E&&T[(E-1)*D+g*o+b%o],T[y++]=(v+Math.floor((x+R)/2))%256;break;case 4:for(b=z=0;z<D;b=z+=1)v=i[l++],g=(b-b%o)/o,x=b<o?0:T[y-o],E===0?R=F=0:(R=T[(E-1)*D+g*o+b%o],F=g&&T[(E-1)*D+(g-1)*o+b%o]),k=x+R-F,j=Math.abs(k-x),A=Math.abs(k-R),P=Math.abs(k-F),S=j<=A&&j<=P?x:A<=P?R:F,T[y++]=(v+S)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!L){var q=((h+E*m)*u.width+f)*o,Y=E*D;for(b=0;b<J;b+=1){for(var te=0;te<o;te+=1)s[q++]=T[Y++];q+=(p-1)*o}}E++}}return i=P2e(i),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),s},r.prototype.decodePalette=function(){var i,o,s,l,u,c,f,h,p;for(s=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+s.length),l=0,i=0,o=f=0,h=s.length;f<h;o=f+=3)u[l++]=s[o],u[l++]=s[o+1],u[l++]=s[o+2],u[l++]=(p=c[i++])!=null?p:255;return u},r.prototype.copyToImageData=function(i,o){var s,l,u,c,f,h,p,m,v,y,g;if(l=this.colors,v=null,s=this.hasAlphaChannel,this.palette.length&&(v=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,s=!0),m=(u=i.data||i).length,f=v||o,c=h=0,l===1)for(;c<m;)p=v?4*o[c/4]:h,y=f[p++],u[c++]=y,u[c++]=y,u[c++]=y,u[c++]=s?f[p++]:255,h=p;else for(;c<m;)p=v?4*o[c/4]:h,u[c++]=f[p++],u[c++]=f[p++],u[c++]=f[p++],u[c++]=s?f[p++]:255,h=p},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(St)==="[object Window]"){try{t=St.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,s,l,u,c,f,h,p;if(this.animation){for(p=[],s=c=0,f=(h=this.animation.frames).length;c<f;s=++c)o=h[s],l=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,p.push(o.image=e(l));return p}},r.prototype.renderFrame=function(i,o){var s,l,u;return s=(l=this.animation.frames)[o],u=l[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),s.blendOp===0&&i.clearRect(s.xOffset,s.yOffset,s.width,s.height),i.drawImage(s.image,s.xOffset,s.yOffset)},r.prototype.animate=function(i){var o,s,l,u,c,f,h=this;return s=0,f=this.animation,u=f.numFrames,l=f.frames,c=f.numPlays,(o=function(){var p,m;if(p=s++%u,m=l[p],h.renderFrame(i,p),u>1&&s/u<c)return h.animation._timeout=setTimeout(o,m.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,s;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function twe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var s=null,l=null;i&&(s=t,l=o,t+=3*o);var u=!0,c=[],f=0,h=null,p=0,m=null;for(this.width=n,this.height=r;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],!(1&v)&&(h=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,N=e[t++],k=N>>6&1,j=1<<(7&N)+1,S=s,A=l,P=!1;N>>7&&(P=!0,S=t,A=j,t+=3*j);var T=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}c.push({x:y,y:g,width:b,height:x,has_local_palette:P,palette_offset:S,palette_size:A,data_offset:T,data_length:t-T,transparent_index:h,interlaced:!!k,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return m},this.frameInfo=function(D){if(D<0||D>=c.length)throw new Error("Frame index out of range.");return c[D]},this.decodeAndBlitFrameBGRA=function(D,R){var F=this.frameInfo(D),H=F.width*F.height,B=new Uint8Array(H);BT(e,F.data_offset,B,H);var U=F.palette_offset,W=F.transparent_index;W===null&&(W=256);var z=F.width,J=n-z,ee=z,L=4*(F.y*n+F.x),q=4*((F.y+F.height)*n+F.x),Y=L,te=4*J;F.interlaced===!0&&(te+=4*n*7);for(var K=8,ce=0,he=B.length;ce<he;++ce){var $=B[ce];if(ee===0&&(ee=z,(Y+=te)>=q&&(te=4*J+4*n*(K-1),Y=L+(z+J)*(K<<1),K>>=1)),$===W)Y+=4;else{var X=e[U+3*$],ae=e[U+3*$+1],le=e[U+3*$+2];R[Y++]=le,R[Y++]=ae,R[Y++]=X,R[Y++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(D,R){var F=this.frameInfo(D),H=F.width*F.height,B=new Uint8Array(H);BT(e,F.data_offset,B,H);var U=F.palette_offset,W=F.transparent_index;W===null&&(W=256);var z=F.width,J=n-z,ee=z,L=4*(F.y*n+F.x),q=4*((F.y+F.height)*n+F.x),Y=L,te=4*J;F.interlaced===!0&&(te+=4*n*7);for(var K=8,ce=0,he=B.length;ce<he;++ce){var $=B[ce];if(ee===0&&(ee=z,(Y+=te)>=q&&(te=4*J+4*n*(K-1),Y=L+(z+J)*(K<<1),K>>=1)),$===W)Y+=4;else{var X=e[U+3*$],ae=e[U+3*$+1],le=e[U+3*$+2];R[Y++]=X,R[Y++]=ae,R[Y++]=le,R[Y++]=255}--ee}}}function BT(e,t,n,r){for(var a=e[t++],i=1<<a,o=i+1,s=o+1,l=a+1,u=(1<<l)-1,c=0,f=0,h=0,p=e[t++],m=new Int32Array(4096),v=null;;){for(;c<16&&p!==0;)f|=e[t++]<<c,c+=8,p===1?p=e[t++]:--p;if(c<l)break;var y=f&u;if(f>>=l,c-=l,y!==i){if(y===o)break;for(var g=y<s?y:v,b=0,x=g;x>i;)x=m[x]>>8,++b;var N=x;if(h+b+(g!==y?1:0)>r)return void jn.log("Warning, gif stream longer than expected.");n[h++]=N;var k=h+=b;for(g!==y&&(n[h++]=N),x=g;b--;)x=m[x],n[--k]=255&x,x>>=8;v!==null&&s<4096&&(m[s++]=v<<8|N,s>=u+1&&l<12&&(++l,u=u<<1|1)),v=y}else s=o+1,u=(1<<(l=a+1))-1,v=null}return h!==r&&jn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function qN(e){var t,n,r,a,i,o=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),m=new Array(64),v=[],y=0,g=7,b=new Array(64),x=new Array(64),N=new Array(64),k=new Array(256),j=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(L,q){for(var Y=0,te=0,K=new Array,ce=1;ce<=16;ce++){for(var he=1;he<=L[ce];he++)K[q[te]]=[],K[q[te]][0]=Y,K[q[te]][1]=ce,te++,Y++;Y*=2}return K}function U(L){for(var q=L[0],Y=L[1]-1;Y>=0;)q&1<<Y&&(y|=1<<g),Y--,--g<0&&(y==255?(W(255),W(0)):W(y),g=7,y=0)}function W(L){v.push(L)}function z(L){W(L>>8&255),W(255&L)}function J(L,q,Y,te,K){for(var ce,he=K[0],$=K[240],X=function(fe,_e){var je,Re,Ge,Je,Ye,ct,dt,At,Qe,rt,Ke=0;for(Qe=0;Qe<8;++Qe){je=fe[Ke],Re=fe[Ke+1],Ge=fe[Ke+2],Je=fe[Ke+3],Ye=fe[Ke+4],ct=fe[Ke+5],dt=fe[Ke+6];var xr=je+(At=fe[Ke+7]),Lt=je-At,$r=Re+dt,Jt=Re-dt,kn=Ge+ct,Ei=Ge-ct,Gt=Je+Ye,dl=Je-Ye,In=xr+Gt,Di=xr-Gt,go=$r+kn,Ft=$r-kn;fe[Ke]=In+go,fe[Ke+4]=In-go;var gt=.707106781*(Ft+Di);fe[Ke+2]=Di+gt,fe[Ke+6]=Di-gt;var $t=.382683433*((In=dl+Ei)-(Ft=Jt+Lt)),tn=.5411961*In+$t,xn=1.306562965*Ft+$t,vo=.707106781*(go=Ei+Jt),ti=Lt+vo,bt=Lt-vo;fe[Ke+5]=bt+tn,fe[Ke+3]=bt-tn,fe[Ke+1]=ti+xn,fe[Ke+7]=ti-xn,Ke+=8}for(Ke=0,Qe=0;Qe<8;++Qe){je=fe[Ke],Re=fe[Ke+8],Ge=fe[Ke+16],Je=fe[Ke+24],Ye=fe[Ke+32],ct=fe[Ke+40],dt=fe[Ke+48];var ni=je+(At=fe[Ke+56]),ri=je-At,Dr=Re+dt,Kn=Re-dt,Wn=Ge+ct,ca=Ge-ct,fu=Je+Ye,Pi=Je-Ye,ai=ni+fu,Oi=ni-fu,Ti=Dr+Wn,_t=Dr-Wn;fe[Ke]=ai+Ti,fe[Ke+32]=ai-Ti;var Vt=.707106781*(_t+Oi);fe[Ke+16]=Oi+Vt,fe[Ke+48]=Oi-Vt;var nn=.382683433*((ai=Pi+ca)-(_t=Kn+ri)),Pr=.5411961*ai+nn,Vr=1.306562965*_t+nn,Ss=.707106781*(Ti=ca+Kn),hu=ri+Ss,pu=ri-Ss;fe[Ke+40]=pu+Pr,fe[Ke+24]=pu-Pr,fe[Ke+8]=hu+Vr,fe[Ke+56]=hu-Vr,Ke++}for(Qe=0;Qe<64;++Qe)rt=fe[Qe]*_e[Qe],p[Qe]=rt>0?rt+.5|0:rt-.5|0;return p}(L,q),ae=0;ae<64;++ae)m[S[ae]]=X[ae];var le=m[0]-Y;Y=m[0],le==0?U(te[0]):(U(te[h[ce=32767+le]]),U(f[ce]));for(var Se=63;Se>0&&m[Se]==0;)Se--;if(Se==0)return U(he),Y;for(var Ee,me=1;me<=Se;){for(var ie=me;m[me]==0&&me<=Se;)++me;var Ve=me-ie;if(Ve>=16){Ee=Ve>>4;for(var be=1;be<=Ee;++be)U($);Ve&=15}ce=32767+m[me],U(K[(Ve<<4)+h[ce]]),U(f[ce]),me++}return Se!=63&&U(he),Y}function ee(L){L=Math.min(Math.max(L,1),100),i!=L&&(function(q){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var K=o((Y[te]*q+50)/100);K=Math.min(Math.max(K,1),255),s[S[te]]=K}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var $=o((ce[he]*q+50)/100);$=Math.min(Math.max($,1),255),l[S[he]]=$}for(var X=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ae=0,le=0;le<8;le++)for(var Se=0;Se<8;Se++)u[ae]=1/(s[S[ae]]*X[le]*X[Se]*8),c[ae]=1/(l[S[ae]]*X[le]*X[Se]*8),ae++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,q){q&&ee(q),v=new Array,y=0,g=7,z(65496),z(65504),z(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),z(1),z(1),W(0),W(0),function(){z(65499),z(132),W(0);for(var Re=0;Re<64;Re++)W(s[Re]);W(1);for(var Ge=0;Ge<64;Ge++)W(l[Ge])}(),function(Re,Ge){z(65472),z(17),W(8),z(Ge),z(Re),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(L.width,L.height),function(){z(65476),z(418),W(0);for(var Re=0;Re<16;Re++)W(A[Re+1]);for(var Ge=0;Ge<=11;Ge++)W(P[Ge]);W(16);for(var Je=0;Je<16;Je++)W(T[Je+1]);for(var Ye=0;Ye<=161;Ye++)W(E[Ye]);W(1);for(var ct=0;ct<16;ct++)W(D[ct+1]);for(var dt=0;dt<=11;dt++)W(R[dt]);W(17);for(var At=0;At<16;At++)W(F[At+1]);for(var Qe=0;Qe<=161;Qe++)W(H[Qe])}(),z(65498),z(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var Y=0,te=0,K=0;y=0,g=7,this.encode.displayName="_encode_";for(var ce,he,$,X,ae,le,Se,Ee,me,ie=L.data,Ve=L.width,be=L.height,fe=4*Ve,_e=0;_e<be;){for(ce=0;ce<fe;){for(ae=fe*_e+ce,Se=-1,Ee=0,me=0;me<64;me++)le=ae+(Ee=me>>3)*fe+(Se=4*(7&me)),_e+Ee>=be&&(le-=fe*(_e+1+Ee-be)),ce+Se>=fe&&(le-=ce+Se-fe+4),he=ie[le++],$=ie[le++],X=ie[le++],b[me]=(j[he]+j[$+256>>0]+j[X+512>>0]>>16)-128,x[me]=(j[he+768>>0]+j[$+1024>>0]+j[X+1280>>0]>>16)-128,N[me]=(j[he+1280>>0]+j[$+1536>>0]+j[X+1792>>0]>>16)-128;Y=J(b,u,Y,t,r),te=J(x,c,te,n,a),K=J(N,c,K,n,a),ce+=32}_e+=8}if(g>=0){var je=[];je[1]=g+1,je[0]=(1<<g+1)-1,U(je)}return z(65497),new Uint8Array(v)},e=e||50,function(){for(var L=String.fromCharCode,q=0;q<256;q++)k[q]=L(q)}(),t=B(A,P),n=B(D,R),r=B(T,E),a=B(F,H),function(){for(var L=1,q=2,Y=1;Y<=15;Y++){for(var te=L;te<q;te++)h[32767+te]=Y,f[32767+te]=[],f[32767+te][1]=Y,f[32767+te][0]=te;for(var K=-(q-1);K<=-L;K++)h[32767+K]=Y,f[32767+K]=[],f[32767+K][1]=Y,f[32767+K][0]=q-1+K;L<<=1,q<<=1}}(),function(){for(var L=0;L<256;L++)j[L]=19595*L,j[L+256>>0]=38470*L,j[L+512>>0]=7471*L+32768,j[L+768>>0]=-11059*L,j[L+1024>>0]=-21709*L,j[L+1280>>0]=32768*L+8421375,j[L+1536>>0]=-27439*L,j[L+1792>>0]=-5329*L}(),ee(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function rs(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function FT(e){function t(A){if(!A)throw Error("assert :P")}function n(A,P,T){for(var E=0;4>E;E++)if(A[P+E]!=T.charCodeAt(E))return!0;return!1}function r(A,P,T,E,D){for(var R=0;R<D;R++)A[P+R]=T[E+R]}function a(A,P,T,E){for(var D=0;D<E;D++)A[P+D]=T}function i(A){return new Int32Array(A)}function o(A,P){for(var T=[],E=0;E<A;E++)T.push(new P);return T}function s(A,P){var T=[];return function E(D,R,F){for(var H=F[R],B=0;B<H&&(D.push(F.length>R+1?[]:new P),!(F.length<R+1));B++)E(D[B],R+1,F)}(T,0,A),T}var l=function(){var A=this;function P(w,_){for(var O=1<<_-1>>>0;w&O;)O>>>=1;return O?(w&O-1)+O:w}function T(w,_,O,I,V){t(!(I%O));do w[_+(I-=O)]=V;while(0<I)}function E(w,_,O,I,V){if(t(2328>=V),512>=V)var Q=i(512);else if((Q=i(V))==null)return 0;return function(Z,ne,re,se,ve,Ae){var Ce,Ne,Ue=ne,Te=1<<re,ye=i(16),we=i(16);for(t(ve!=0),t(se!=null),t(Z!=null),t(0<re),Ne=0;Ne<ve;++Ne){if(15<se[Ne])return 0;++ye[se[Ne]]}if(ye[0]==ve)return 0;for(we[1]=0,Ce=1;15>Ce;++Ce){if(ye[Ce]>1<<Ce)return 0;we[Ce+1]=we[Ce]+ye[Ce]}for(Ne=0;Ne<ve;++Ne)Ce=se[Ne],0<se[Ne]&&(Ae[we[Ce]++]=Ne);if(we[15]==1)return(se=new D).g=0,se.value=Ae[0],T(Z,Ue,1,Te,se),Te;var Fe,He=-1,ze=Te-1,nt=0,Xe=1,xt=1,Ze=1<<re;for(Ne=0,Ce=1,ve=2;Ce<=re;++Ce,ve<<=1){if(Xe+=xt<<=1,0>(xt-=ye[Ce]))return 0;for(;0<ye[Ce];--ye[Ce])(se=new D).g=Ce,se.value=Ae[Ne++],T(Z,Ue+nt,ve,Ze,se),nt=P(nt,Ce)}for(Ce=re+1,ve=2;15>=Ce;++Ce,ve<<=1){if(Xe+=xt<<=1,0>(xt-=ye[Ce]))return 0;for(;0<ye[Ce];--ye[Ce]){if(se=new D,(nt&ze)!=He){for(Ue+=Ze,Fe=1<<(He=Ce)-re;15>He&&!(0>=(Fe-=ye[He]));)++He,Fe<<=1;Te+=Ze=1<<(Fe=He-re),Z[ne+(He=nt&ze)].g=Fe+re,Z[ne+He].value=Ue-ne-He}se.g=Ce-re,se.value=Ae[Ne++],T(Z,Ue+(nt>>re),ve,Ze,se),nt=P(nt,Ce)}}return Xe!=2*we[15]-1?0:Te}(w,_,O,I,V,Q)}function D(){this.value=this.g=0}function R(){this.value=this.g=0}function F(){this.G=o(5,D),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(da,R)}function H(w,_,O,I){t(w!=null),t(_!=null),t(2147483648>I),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=_,w.pa=O,w.Jd=_,w.Yc=O+I,w.Zc=4<=I?O+I-4+1:O,ce(w)}function B(w,_){for(var O=0;0<_--;)O|=$(w,128)<<_;return O}function U(w,_){var O=B(w,_);return he(w)?-O:O}function W(w,_,O,I){var V,Q=0;for(t(w!=null),t(_!=null),t(4294967288>I),w.Sb=I,w.Ra=0,w.u=0,w.h=0,4<I&&(I=4),V=0;V<I;++V)Q+=_[O+V]<<8*V;w.Ra=Q,w.bb=I,w.oa=_,w.pa=O}function z(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Tf-8>>>0,++w.bb,w.u-=8;Y(w)&&(w.h=1,w.u=0)}function J(w,_){if(t(0<=_),!w.h&&_<=Of){var O=q(w)&Pf[_];return w.u+=_,z(w),O}return w.h=1,w.u=0}function ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(w){return w.Ra>>>(w.u&Tf-1)>>>0}function Y(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Tf}function te(w,_){w.u=_,w.h=Y(w)}function K(w){w.u>=dm&&(t(w.u>=dm),z(w))}function ce(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function he(w){return B(w,1)}function $(w,_){var O=w.Ca;0>w.b&&ce(w);var I=w.b,V=O*_>>>8,Q=(w.I>>>I>V)+0;for(Q?(O-=V,w.I-=V+1<<I>>>0):O=V+1,I=O,V=0;256<=I;)V+=8,I>>=8;return I=7^V+oi[I],w.b-=I,w.Ca=(O<<I)-1,Q}function X(w,_,O){w[_+0]=O>>24&255,w[_+1]=O>>16&255,w[_+2]=O>>8&255,w[_+3]=O>>0&255}function ae(w,_){return w[_+0]<<0|w[_+1]<<8}function le(w,_){return ae(w,_)|w[_+2]<<16}function Se(w,_){return ae(w,_)|ae(w,_+2)<<16}function Ee(w,_){var O=1<<_;return t(w!=null),t(0<_),w.X=i(O),w.X==null?0:(w.Mb=32-_,w.Xa=_,1)}function me(w,_){t(w!=null),t(_!=null),t(w.Xa==_.Xa),r(_.X,0,w.X,0,1<<_.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function Ve(w,_,O,I){t(O!=null),t(I!=null);var V=O[0],Q=I[0];return V==0&&(V=(w*Q+_/2)/_),Q==0&&(Q=(_*V+w/2)/w),0>=V||0>=Q?0:(O[0]=V,I[0]=Q,1)}function be(w,_){return w+(1<<_)-1>>>_}function fe(w,_){return((4278255360&w)+(4278255360&_)>>>0&4278255360)+((16711935&w)+(16711935&_)>>>0&16711935)>>>0}function _e(w,_){A[_]=function(O,I,V,Q,Z,ne,re){var se;for(se=0;se<Z;++se){var ve=A[w](ne[re+se-1],V,Q+se);ne[re+se]=fe(O[I+se],ve)}}}function je(){this.ud=this.hd=this.jd=0}function Re(w,_){return((4278124286&(w^_))>>>1)+(w&_)>>>0}function Ge(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Je(w,_){return Ge(w+(w-_+.5>>1))}function Ye(w,_,O){return Math.abs(_-O)-Math.abs(w-O)}function ct(w,_,O,I,V,Q,Z){for(I=Q[Z-1],O=0;O<V;++O)Q[Z+O]=I=fe(w[_+O],I)}function dt(w,_,O,I,V){var Q;for(Q=0;Q<O;++Q){var Z=w[_+Q],ne=Z>>8&255,re=16711935&(re=(re=16711935&Z)+((ne<<16)+ne));I[V+Q]=(4278255360&Z)+re>>>0}}function At(w,_){_.jd=w>>0&255,_.hd=w>>8&255,_.ud=w>>16&255}function Qe(w,_,O,I,V,Q){var Z;for(Z=0;Z<I;++Z){var ne=_[O+Z],re=ne>>>8,se=ne,ve=255&(ve=(ve=ne>>>16)+((w.jd<<24>>24)*(re<<24>>24)>>>5));se=255&(se=(se=se+((w.hd<<24>>24)*(re<<24>>24)>>>5))+((w.ud<<24>>24)*(ve<<24>>24)>>>5)),V[Q+Z]=(4278255360&ne)+(ve<<16)+se}}function rt(w,_,O,I,V){A[_]=function(Q,Z,ne,re,se,ve,Ae,Ce,Ne){for(re=Ae;re<Ce;++re)for(Ae=0;Ae<Ne;++Ae)se[ve++]=V(ne[I(Q[Z++])])},A[w]=function(Q,Z,ne,re,se,ve,Ae){var Ce=8>>Q.b,Ne=Q.Ea,Ue=Q.K[0],Te=Q.w;if(8>Ce)for(Q=(1<<Q.b)-1,Te=(1<<Ce)-1;Z<ne;++Z){var ye,we=0;for(ye=0;ye<Ne;++ye)ye&Q||(we=I(re[se++])),ve[Ae++]=V(Ue[we&Te]),we>>=Ce}else A["VP8LMapColor"+O](re,se,Ue,Te,ve,Ae,Z,ne,Ne)}}function Ke(w,_,O,I,V){for(O=_+O;_<O;){var Q=w[_++];I[V++]=Q>>16&255,I[V++]=Q>>8&255,I[V++]=Q>>0&255}}function xr(w,_,O,I,V){for(O=_+O;_<O;){var Q=w[_++];I[V++]=Q>>16&255,I[V++]=Q>>8&255,I[V++]=Q>>0&255,I[V++]=Q>>24&255}}function Lt(w,_,O,I,V){for(O=_+O;_<O;){var Q=(Z=w[_++])>>16&240|Z>>12&15,Z=Z>>0&240|Z>>28&15;I[V++]=Q,I[V++]=Z}}function $r(w,_,O,I,V){for(O=_+O;_<O;){var Q=(Z=w[_++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;I[V++]=Q,I[V++]=Z}}function Jt(w,_,O,I,V){for(O=_+O;_<O;){var Q=w[_++];I[V++]=Q>>0&255,I[V++]=Q>>8&255,I[V++]=Q>>16&255}}function kn(w,_,O,I,V,Q){if(Q==0)for(O=_+O;_<O;)X(I,((Q=w[_++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),V+=32;else r(I,V,w,_,O)}function Ei(w,_){A[_][0]=A[w+"0"],A[_][1]=A[w+"1"],A[_][2]=A[w+"2"],A[_][3]=A[w+"3"],A[_][4]=A[w+"4"],A[_][5]=A[w+"5"],A[_][6]=A[w+"6"],A[_][7]=A[w+"7"],A[_][8]=A[w+"8"],A[_][9]=A[w+"9"],A[_][10]=A[w+"10"],A[_][11]=A[w+"11"],A[_][12]=A[w+"12"],A[_][13]=A[w+"13"],A[_][14]=A[w+"0"],A[_][15]=A[w+"0"]}function Gt(w){return w==Ow||w==Tw||w==U0||w==Mw}function dl(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Di(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dl,this.f.kb=new In,this.sd=null}function go(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ft(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gt(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function $t(w,_){var O=w.T,I=_.ba.f.RGBA,V=I.eb,Q=I.fb+w.ka*I.A,Z=So[_.ba.S],ne=w.y,re=w.O,se=w.f,ve=w.N,Ae=w.ea,Ce=w.W,Ne=_.cc,Ue=_.dc,Te=_.Mc,ye=_.Nc,we=w.ka,Fe=w.ka+w.T,He=w.U,ze=He+1>>1;for(we==0?Z(ne,re,null,null,se,ve,Ae,Ce,se,ve,Ae,Ce,V,Q,null,null,He):(Z(_.ec,_.fc,ne,re,Ne,Ue,Te,ye,se,ve,Ae,Ce,V,Q-I.A,V,Q,He),++O);we+2<Fe;we+=2)Ne=se,Ue=ve,Te=Ae,ye=Ce,ve+=w.Rc,Ce+=w.Rc,Q+=2*I.A,Z(ne,(re+=2*w.fa)-w.fa,ne,re,Ne,Ue,Te,ye,se,ve,Ae,Ce,V,Q-I.A,V,Q,He);return re+=w.fa,w.j+Fe<w.o?(r(_.ec,_.fc,ne,re,He),r(_.cc,_.dc,se,ve,ze),r(_.Mc,_.Nc,Ae,Ce,ze),O--):1&Fe||Z(ne,re,null,null,se,ve,Ae,Ce,se,ve,Ae,Ce,V,Q+I.A,null,null,He),O}function tn(w,_,O){var I=w.F,V=[w.J];if(I!=null){var Q=w.U,Z=_.ba.S,ne=Z==z0||Z==U0;_=_.ba.f.RGBA;var re=[0],se=w.ka;re[0]=w.T,w.Kb&&(se==0?--re[0]:(--se,V[0]-=w.width),w.j+w.ka+w.T==w.o&&(re[0]=w.o-w.j-se));var ve=_.eb;se=_.fb+se*_.A,w=Pn(I,V[0],w.width,Q,re,ve,se+(ne?0:3),_.A),t(O==re),w&&Gt(Z)&&wo(ve,se,ne,Q,re,_.A)}return 0}function xn(w){var _=w.ma,O=_.ba.S,I=11>O,V=O==B0||O==F0||O==z0||O==Pw||O==12||Gt(O);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!um(_.Oa,w,V?11:12))return 0;if(V&&Gt(O)&&$e(),w.da)alert("todo:use_scaling");else{if(I){if(_.Ib=gt,w.Kb){if(O=w.U+1>>1,_.memory=i(w.U+2*O),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+w.U,_.Mc=_.cc,_.Nc=_.dc+O,_.Ib=$t,$e()}}else alert("todo:EmitYUV");V&&(_.Jb=tn,I&&ke())}if(I&&!gC){for(w=0;256>w;++w)hq[w]=89858*(w-128)+q0>>W0,gq[w]=-22014*(w-128)+q0,mq[w]=-45773*(w-128),pq[w]=113618*(w-128)+q0>>W0;for(w=ym;w<Rw;++w)_=76283*(w-16)+q0>>W0,vq[w-ym]=Mi(_,255),yq[w-ym]=Mi(_+8>>4,15);gC=1}return 1}function vo(w){var _=w.ma,O=w.U,I=w.T;return t(!(1&w.ka)),0>=O||0>=I?0:(O=_.Ib(w,_),_.Jb!=null&&_.Jb(w,_,O),_.Dc+=O,1)}function ti(w){w.ma.memory=null}function bt(w,_,O,I){return J(w,8)!=47?0:(_[0]=J(w,14)+1,O[0]=J(w,14)+1,I[0]=J(w,1),J(w,3)!=0?0:!w.h)}function ni(w,_){if(4>w)return w+1;var O=w-2>>1;return(2+(1&w)<<O)+J(_,O)+1}function ri(w,_){return 120<_?_-120:1<=(O=((O=ZW[_-1])>>4)*w+(8-(15&O)))?O:1;var O}function Dr(w,_,O){var I=q(O),V=w[_+=255&I].g-8;return 0<V&&(te(O,O.u+8),I=q(O),_+=w[_].value,_+=I&(1<<V)-1),te(O,O.u+w[_].g),w[_].value}function Kn(w,_,O){return O.g+=w.g,O.value+=w.value<<_>>>0,t(8>=O.g),w.g}function Wn(w,_,O){var I=w.xc;return t((_=I==0?0:w.vc[w.md*(O>>I)+(_>>I)])<w.Wb),w.Ya[_]}function ca(w,_,O,I){var V=w.ab,Q=w.c*_,Z=w.C;_=Z+_;var ne=O,re=I;for(I=w.Ta,O=w.Ua;0<V--;){var se=w.gc[V],ve=Z,Ae=_,Ce=ne,Ne=re,Ue=(re=I,ne=O,se.Ea);switch(t(ve<Ae),t(Ae<=se.nc),se.hc){case 2:P0(Ce,Ne,(Ae-ve)*Ue,re,ne);break;case 0:var Te=ve,ye=Ae,we=re,Fe=ne,He=(Ze=se).Ea;Te==0&&(Ew(Ce,Ne,null,null,1,we,Fe),ct(Ce,Ne+1,0,0,He-1,we,Fe+1),Ne+=He,Fe+=He,++Te);for(var ze=1<<Ze.b,nt=ze-1,Xe=be(He,Ze.b),xt=Ze.K,Ze=Ze.w+(Te>>Ze.b)*Xe;Te<ye;){var rn=xt,fn=Ze,Qt=1;for(fm(Ce,Ne,we,Fe-He,1,we,Fe);Qt<He;){var Ht=(Qt&~nt)+ze;Ht>He&&(Ht=He),(0,yu[rn[fn++]>>8&15])(Ce,Ne+ +Qt,we,Fe+Qt-He,Ht-Qt,we,Fe+Qt),Qt=Ht}Ne+=He,Fe+=He,++Te&nt||(Ze+=Xe)}Ae!=se.nc&&r(re,ne-Ue,re,ne+(Ae-ve-1)*Ue,Ue);break;case 1:for(Ue=Ce,ye=Ne,He=(Ce=se.Ea)-(Fe=Ce&~(we=(Ne=1<<se.b)-1)),Te=be(Ce,se.b),ze=se.K,se=se.w+(ve>>se.b)*Te;ve<Ae;){for(nt=ze,Xe=se,xt=new je,Ze=ye+Fe,rn=ye+Ce;ye<Ze;)At(nt[Xe++],xt),qc(xt,Ue,ye,Ne,re,ne),ye+=Ne,ne+=Ne;ye<rn&&(At(nt[Xe++],xt),qc(xt,Ue,ye,He,re,ne),ye+=He,ne+=He),++ve&we||(se+=Te)}break;case 3:if(Ce==re&&Ne==ne&&0<se.b){for(ye=re,Ce=Ue=ne+(Ae-ve)*Ue-(Fe=(Ae-ve)*be(se.Ea,se.b)),Ne=re,we=ne,Te=[],Fe=(He=Fe)-1;0<=Fe;--Fe)Te[Fe]=Ne[we+Fe];for(Fe=He-1;0<=Fe;--Fe)ye[Ce+Fe]=Te[Fe];yo(se,ve,Ae,re,Ue,re,ne)}else yo(se,ve,Ae,Ce,Ne,re,ne)}ne=I,re=O}re!=O&&r(I,O,ne,re,Q)}function fu(w,_){var O=w.V,I=w.Ba+w.c*w.C,V=_-w.C;if(t(_<=w.l.o),t(16>=V),0<V){var Q=w.l,Z=w.Ta,ne=w.Ua,re=Q.width;if(ca(w,V,O,I),V=ne=[ne],t((O=w.C)<(I=_)),t(Q.v<Q.va),I>Q.o&&(I=Q.o),O<Q.j){var se=Q.j-O;O=Q.j,V[0]+=se*re}if(O>=I?O=0:(V[0]+=4*Q.v,Q.ka=O-Q.j,Q.U=Q.va-Q.v,Q.T=I-O,O=1),O){if(ne=ne[0],11>(O=w.ca).S){var ve=O.f.RGBA,Ae=(I=O.S,V=Q.U,Q=Q.T,se=ve.eb,ve.A),Ce=Q;for(ve=ve.fb+w.Ma*ve.A;0<Ce--;){var Ne=Z,Ue=ne,Te=V,ye=se,we=ve;switch(I){case R0:si(Ne,Ue,Te,ye,we);break;case B0:Va(Ne,Ue,Te,ye,we);break;case Ow:Va(Ne,Ue,Te,ye,we),wo(ye,we,0,Te,1,0);break;case oC:ml(Ne,Ue,Te,ye,we);break;case F0:kn(Ne,Ue,Te,ye,we,1);break;case Tw:kn(Ne,Ue,Te,ye,we,1),wo(ye,we,0,Te,1,0);break;case z0:kn(Ne,Ue,Te,ye,we,0);break;case U0:kn(Ne,Ue,Te,ye,we,0),wo(ye,we,1,Te,1,0);break;case Pw:bu(Ne,Ue,Te,ye,we);break;case Mw:bu(Ne,Ue,Te,ye,we),Dn(ye,we,Te,1,0);break;case sC:pl(Ne,Ue,Te,ye,we);break;default:t(0)}ne+=re,ve+=Ae}w.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=O.height)}}w.C=_,t(w.C<=w.i)}function Pi(w){var _;if(0<w.ua)return 0;for(_=0;_<w.Wb;++_){var O=w.Ya[_].G,I=w.Ya[_].H;if(0<O[1][I[1]+0].g||0<O[2][I[2]+0].g||0<O[3][I[3]+0].g)return 0}return 1}function ai(w,_,O,I,V,Q){if(w.Z!=0){var Z=w.qd,ne=w.rd;for(t(Su[w.Z]!=null);_<O;++_)Su[w.Z](Z,ne,I,V,I,V,Q),Z=I,ne=V,V+=Q;w.qd=Z,w.rd=ne}}function Oi(w,_){var O=w.l.ma,I=O.Z==0||O.Z==1?w.l.j:w.C;if(I=w.C<I?I:w.C,t(_<=w.l.o),_>I){var V=w.l.width,Q=O.ca,Z=O.tb+V*I,ne=w.V,re=w.Ba+w.c*I,se=w.gc;t(w.ab==1),t(se[0].hc==3),O0(se[0],I,_,ne,re,Q,Z),ai(O,I,_,Q,Z,V)}w.C=w.Ma=_}function Ti(w,_,O,I,V,Q,Z){var ne=w.$/I,re=w.$%I,se=w.m,ve=w.s,Ae=O+w.$,Ce=Ae;V=O+I*V;var Ne=O+I*Q,Ue=280+ve.ua,Te=w.Pb?ne:16777216,ye=0<ve.ua?ve.Wa:null,we=ve.wc,Fe=Ae<Ne?Wn(ve,re,ne):null;t(w.C<Q),t(Ne<=V);var He=!1;e:for(;;){for(;He||Ae<Ne;){var ze=0;if(ne>=Te){var nt=Ae-O;t((Te=w).Pb),Te.wd=Te.m,Te.xd=nt,0<Te.s.ua&&me(Te.s.Wa,Te.s.vb),Te=ne+tq}if(re&we||(Fe=Wn(ve,re,ne)),t(Fe!=null),Fe.Qb&&(_[Ae]=Fe.qb,He=!0),!He)if(K(se),Fe.jc){ze=se,nt=_;var Xe=Ae,xt=Fe.pd[q(ze)&da-1];t(Fe.jc),256>xt.g?(te(ze,ze.u+xt.g),nt[Xe]=xt.value,ze=0):(te(ze,ze.u+xt.g-256),t(256<=xt.value),ze=xt.value),ze==0&&(He=!0)}else ze=Dr(Fe.G[0],Fe.H[0],se);if(se.h)break;if(He||256>ze){if(!He)if(Fe.nd)_[Ae]=(Fe.qb|ze<<8)>>>0;else{if(K(se),He=Dr(Fe.G[1],Fe.H[1],se),K(se),nt=Dr(Fe.G[2],Fe.H[2],se),Xe=Dr(Fe.G[3],Fe.H[3],se),se.h)break;_[Ae]=(Xe<<24|He<<16|ze<<8|nt)>>>0}if(He=!1,++Ae,++re>=I&&(re=0,++ne,Z!=null&&ne<=Q&&!(ne%16)&&Z(w,ne),ye!=null))for(;Ce<Ae;)ze=_[Ce++],ye.X[(506832829*ze&4294967295)>>>ye.Mb]=ze}else if(280>ze){if(ze=ni(ze-256,se),nt=Dr(Fe.G[4],Fe.H[4],se),K(se),nt=ri(I,nt=ni(nt,se)),se.h)break;if(Ae-O<nt||V-Ae<ze)break e;for(Xe=0;Xe<ze;++Xe)_[Ae+Xe]=_[Ae+Xe-nt];for(Ae+=ze,re+=ze;re>=I;)re-=I,++ne,Z!=null&&ne<=Q&&!(ne%16)&&Z(w,ne);if(t(Ae<=V),re&we&&(Fe=Wn(ve,re,ne)),ye!=null)for(;Ce<Ae;)ze=_[Ce++],ye.X[(506832829*ze&4294967295)>>>ye.Mb]=ze}else{if(!(ze<Ue))break e;for(He=ze-280,t(ye!=null);Ce<Ae;)ze=_[Ce++],ye.X[(506832829*ze&4294967295)>>>ye.Mb]=ze;ze=Ae,t(!(He>>>(nt=ye).Xa)),_[ze]=nt.X[He],He=!0}He||t(se.h==Y(se))}if(w.Pb&&se.h&&Ae<V)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&me(w.s.vb,w.s.Wa);else{if(se.h)break e;Z!=null&&Z(w,ne>Q?Q:ne),w.a=0,w.$=Ae-O}return 1}return w.a=3,0}function _t(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var _=w.Wa;_!=null&&(_.X=null),w.vb=null,t(w!=null)}function Vt(){var w=new Cw;return w==null?null:(w.a=0,w.xb=cC,Ei("Predictor","VP8LPredictors"),Ei("Predictor","VP8LPredictors_C"),Ei("PredictorAdd","VP8LPredictorsAdd"),Ei("PredictorAdd","VP8LPredictorsAdd_C"),P0=dt,qc=Qe,si=Ke,Va=xr,bu=Lt,pl=$r,ml=Jt,A.VP8LMapColor32b=Mf,A.VP8LMapColor8b=T0,w)}function nn(w,_,O,I,V){var Q=1,Z=[w],ne=[_],re=I.m,se=I.s,ve=null,Ae=0;e:for(;;){if(O)for(;Q&&J(re,1);){var Ce=Z,Ne=ne,Ue=I,Te=1,ye=Ue.m,we=Ue.gc[Ue.ab],Fe=J(ye,2);if(Ue.Oc&1<<Fe)Q=0;else{switch(Ue.Oc|=1<<Fe,we.hc=Fe,we.Ea=Ce[0],we.nc=Ne[0],we.K=[null],++Ue.ab,t(4>=Ue.ab),Fe){case 0:case 1:we.b=J(ye,3)+2,Te=nn(be(we.Ea,we.b),be(we.nc,we.b),0,Ue,we.K),we.K=we.K[0];break;case 3:var He,ze=J(ye,8)+1,nt=16<ze?0:4<ze?1:2<ze?2:3;if(Ce[0]=be(we.Ea,nt),we.b=nt,He=Te=nn(ze,1,0,Ue,we.K)){var Xe,xt=ze,Ze=we,rn=1<<(8>>Ze.b),fn=i(rn);if(fn==null)He=0;else{var Qt=Ze.K[0],Ht=Ze.w;for(fn[0]=Ze.K[0][0],Xe=1;Xe<1*xt;++Xe)fn[Xe]=fe(Qt[Ht+Xe],fn[Xe-1]);for(;Xe<4*rn;++Xe)fn[Xe]=0;Ze.K[0]=null,Ze.K[0]=fn,He=1}}Te=He;break;case 2:break;default:t(0)}Q=Te}}if(Z=Z[0],ne=ne[0],Q&&J(re,1)&&!(Q=1<=(Ae=J(re,4))&&11>=Ae)){I.a=3;break e}var _n;if(_n=Q)t:{var wn,Mt,Nr,li=I,Sr=Z,ui=ne,hn=Ae,Ii=O,Ri=li.m,Kr=li.s,fa=[null],Ka=1,ko=0,As=eq[hn];n:for(;;){if(Ii&&J(Ri,1)){var Yr=J(Ri,3)+2,bl=be(Sr,Yr),Kc=be(ui,Yr),Ff=bl*Kc;if(!nn(bl,Kc,0,li,fa))break n;for(fa=fa[0],Kr.xc=Yr,wn=0;wn<Ff;++wn){var ku=fa[wn]>>8&65535;fa[wn]=ku,ku>=Ka&&(Ka=ku+1)}}if(Ri.h)break n;for(Mt=0;5>Mt;++Mt){var nr=lC[Mt];!Mt&&0<hn&&(nr+=1<<hn),ko<nr&&(ko=nr)}var Bw=o(Ka*As,D),bC=Ka,xC=o(bC,F);if(xC==null)var $0=null;else t(65536>=bC),$0=xC;var bm=i(ko);if($0==null||bm==null||Bw==null){li.a=1;break n}var V0=Bw;for(wn=Nr=0;wn<Ka;++wn){var es=$0[wn],zf=es.G,Uf=es.H,wC=0,G0=1,NC=0;for(Mt=0;5>Mt;++Mt){nr=lC[Mt],zf[Mt]=V0,Uf[Mt]=Nr,!Mt&&0<hn&&(nr+=1<<hn);a:{var K0,Fw=nr,Y0=li,xm=bm,wq=V0,Nq=Nr,zw=0,_u=Y0.m,Sq=J(_u,1);if(a(xm,0,0,Fw),Sq){var kq=J(_u,1)+1,_q=J(_u,1),SC=J(_u,_q==0?1:8);xm[SC]=1,kq==2&&(xm[SC=J(_u,8)]=1);var X0=1}else{var kC=i(19),_C=J(_u,4)+4;if(19<_C){Y0.a=3;var J0=0;break a}for(K0=0;K0<_C;++K0)kC[QW[K0]]=J(_u,3);var Uw=void 0,wm=void 0,jC=Y0,jq=kC,Q0=Fw,AC=xm,Ww=0,ju=jC.m,CC=8,EC=o(128,D);r:for(;E(EC,0,7,jq,19);){if(J(ju,1)){var Aq=2+2*J(ju,3);if((Uw=2+J(ju,Aq))>Q0)break r}else Uw=Q0;for(wm=0;wm<Q0&&Uw--;){K(ju);var DC=EC[0+(127&q(ju))];te(ju,ju.u+DC.g);var Wf=DC.value;if(16>Wf)AC[wm++]=Wf,Wf!=0&&(CC=Wf);else{var Cq=Wf==16,PC=Wf-16,Eq=XW[PC],OC=J(ju,YW[PC])+Eq;if(wm+OC>Q0)break r;for(var Dq=Cq?CC:0;0<OC--;)AC[wm++]=Dq}}Ww=1;break r}Ww||(jC.a=3),X0=Ww}(X0=X0&&!_u.h)&&(zw=E(wq,Nq,8,xm,Fw)),X0&&zw!=0?J0=zw:(Y0.a=3,J0=0)}if(J0==0)break n;if(G0&&JW[Mt]==1&&(G0=V0[Nr].g==0),wC+=V0[Nr].g,Nr+=J0,3>=Mt){var Nm,qw=bm[0];for(Nm=1;Nm<nr;++Nm)bm[Nm]>qw&&(qw=bm[Nm]);NC+=qw}}if(es.nd=G0,es.Qb=0,G0&&(es.qb=(zf[3][Uf[3]+0].value<<24|zf[1][Uf[1]+0].value<<16|zf[2][Uf[2]+0].value)>>>0,wC==0&&256>zf[0][Uf[0]+0].value&&(es.Qb=1,es.qb+=zf[0][Uf[0]+0].value<<8)),es.jc=!es.Qb&&6>NC,es.jc){var Z0,xl=es;for(Z0=0;Z0<da;++Z0){var Au=Z0,Cu=xl.pd[Au],ey=xl.G[0][xl.H[0]+Au];256<=ey.value?(Cu.g=ey.g+256,Cu.value=ey.value):(Cu.g=0,Cu.value=0,Au>>=Kn(ey,8,Cu),Au>>=Kn(xl.G[1][xl.H[1]+Au],16,Cu),Au>>=Kn(xl.G[2][xl.H[2]+Au],0,Cu),Kn(xl.G[3][xl.H[3]+Au],24,Cu))}}}Kr.vc=fa,Kr.Wb=Ka,Kr.Ya=$0,Kr.yc=Bw,_n=1;break t}_n=0}if(!(Q=_n)){I.a=3;break e}if(0<Ae){if(se.ua=1<<Ae,!Ee(se.Wa,Ae)){I.a=1,Q=0;break e}}else se.ua=0;var Hw=I,TC=Z,Pq=ne,$w=Hw.s,Vw=$w.xc;if(Hw.c=TC,Hw.i=Pq,$w.md=be(TC,Vw),$w.wc=Vw==0?-1:(1<<Vw)-1,O){I.xb=lq;break e}if((ve=i(Z*ne))==null){I.a=1,Q=0;break e}Q=(Q=Ti(I,ve,0,Z,ne,ne,null))&&!re.h;break e}return Q?(V!=null?V[0]=ve:(t(ve==null),t(O)),I.$=0,O||_t(se)):_t(se),Q}function Pr(w,_){var O=w.c*w.i,I=O+_+16*_;return t(w.c<=_),w.V=i(I),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+O+_,1)}function Vr(w,_){var O=w.C,I=_-O,V=w.V,Q=w.Ba+w.c*O;for(t(_<=w.l.o);0<I;){var Z=16<I?16:I,ne=w.l.ma,re=w.l.width,se=re*Z,ve=ne.ca,Ae=ne.tb+re*O,Ce=w.Ta,Ne=w.Ua;ca(w,Z,V,Q),cr(Ce,Ne,ve,Ae,se),ai(ne,O,O+Z,ve,Ae,re),I-=Z,V+=Z*w.c,O+=Z}t(O==_),w.C=w.Ma=_}function Ss(){this.ub=this.yd=this.td=this.Rb=0}function hu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pu(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function d0(){this.Yb=function(){var w=[];return function _(O,I,V){for(var Q=V[I],Z=0;Z<Q&&(O.push(V.length>I+1?[]:0),!(V.length<I+1));Z++)_(O[Z],I+1,V)}(w,0,[3,11]),w}()}function iw(){this.jb=i(3),this.Wc=s([4,8],d0),this.Xc=s([4,17],d0)}function ow(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function bf(){this.ld=this.La=this.dd=this.tc=0}function f0(){this.Na=this.la=0}function sw(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gp(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function lw(){this.uc=this.M=this.Nb=0,this.wa=Array(new bf),this.Y=0,this.ya=Array(new Gp),this.aa=0,this.l=new xf}function h0(){this.y=i(16),this.f=i(8),this.ea=i(8)}function uw(){this.cb=this.a=0,this.sc="",this.m=new ee,this.Od=new Ss,this.Kc=new hu,this.ed=new ow,this.Qa=new pu,this.Ic=this.$c=this.Aa=0,this.D=new lw,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ee),this.ia=0,this.pb=o(4,sw),this.Pa=new iw,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new h0),this.Hd=0,this.rb=Array(new f0),this.sb=0,this.wa=Array(new bf),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gp),this.L=this.aa=0,this.gd=s([4,2],bf),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xf(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function cw(){var w=new uw;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,vm||(vm=g0)),w}function lr(w,_,O){return w.a==0&&(w.a=_,w.sc=O,w.cb=0),0}function p0(w,_,O){return 3<=O&&w[_+0]==157&&w[_+1]==1&&w[_+2]==42}function m0(w,_){if(w==null)return 0;if(w.a=0,w.sc="OK",_==null)return lr(w,2,"null VP8Io passed to VP8GetHeaders()");var O=_.data,I=_.w,V=_.ha;if(4>V)return lr(w,7,"Truncated header.");var Q=O[I+0]|O[I+1]<<8|O[I+2]<<16,Z=w.Od;if(Z.Rb=!(1&Q),Z.td=Q>>1&7,Z.yd=Q>>4&1,Z.ub=Q>>5,3<Z.td)return lr(w,3,"Incorrect keyframe parameters.");if(!Z.yd)return lr(w,4,"Frame not displayable.");I+=3,V-=3;var ne=w.Kc;if(Z.Rb){if(7>V)return lr(w,7,"cannot parse picture header");if(!p0(O,I,V))return lr(w,3,"Bad code word");ne.c=16383&(O[I+4]<<8|O[I+3]),ne.Td=O[I+4]>>6,ne.i=16383&(O[I+6]<<8|O[I+5]),ne.Ud=O[I+6]>>6,I+=7,V-=7,w.za=ne.c+15>>4,w.Ub=ne.i+15>>4,_.width=ne.c,_.height=ne.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,a((Q=w.Pa).jb,0,255,Q.jb.length),t((Q=w.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,a(Q.Zb,0,0,Q.Zb.length),a(Q.Lb,0,0,Q.Lb)}if(Z.ub>V)return lr(w,7,"bad partition length");H(Q=w.m,O,I,Z.ub),I+=Z.ub,V-=Z.ub,Z.Rb&&(ne.Ld=he(Q),ne.Kd=he(Q)),ne=w.Qa;var re,se=w.Pa;if(t(Q!=null),t(ne!=null),ne.Cb=he(Q),ne.Cb){if(ne.Bb=he(Q),he(Q)){for(ne.Fb=he(Q),re=0;4>re;++re)ne.Zb[re]=he(Q)?U(Q,7):0;for(re=0;4>re;++re)ne.Lb[re]=he(Q)?U(Q,6):0}if(ne.Bb)for(re=0;3>re;++re)se.jb[re]=he(Q)?B(Q,8):255}else ne.Bb=0;if(Q.Ka)return lr(w,3,"cannot parse segment header");if((ne=w.ed).zd=he(Q),ne.Tb=B(Q,6),ne.wb=B(Q,3),ne.Pc=he(Q),ne.Pc&&he(Q)){for(se=0;4>se;++se)he(Q)&&(ne.vd[se]=U(Q,6));for(se=0;4>se;++se)he(Q)&&(ne.od[se]=U(Q,6))}if(w.L=ne.Tb==0?0:ne.zd?1:2,Q.Ka)return lr(w,3,"cannot parse filter header");var ve=V;if(V=re=I,I=re+ve,ne=ve,w.Xb=(1<<B(w.m,2))-1,ve<3*(se=w.Xb))O=7;else{for(re+=3*se,ne-=3*se,ve=0;ve<se;++ve){var Ae=O[V+0]|O[V+1]<<8|O[V+2]<<16;Ae>ne&&(Ae=ne),H(w.Jc[+ve],O,re,Ae),re+=Ae,ne-=Ae,V+=3}H(w.Jc[+se],O,re,ne),O=re<I?0:5}if(O!=0)return lr(w,O,"cannot parse partitions");for(O=B(re=w.m,7),V=he(re)?U(re,4):0,I=he(re)?U(re,4):0,ne=he(re)?U(re,4):0,se=he(re)?U(re,4):0,re=he(re)?U(re,4):0,ve=w.Qa,Ae=0;4>Ae;++Ae){if(ve.Cb){var Ce=ve.Zb[Ae];ve.Fb||(Ce+=O)}else{if(0<Ae){w.pb[Ae]=w.pb[0];continue}Ce=O}var Ne=w.pb[Ae];Ne.Sc[0]=Lw[Mi(Ce+V,127)],Ne.Sc[1]=Iw[Mi(Ce+0,127)],Ne.Eb[0]=2*Lw[Mi(Ce+I,127)],Ne.Eb[1]=101581*Iw[Mi(Ce+ne,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=Lw[Mi(Ce+se,117)],Ne.Qc[1]=Iw[Mi(Ce+re,127)],Ne.lc=Ce+re}if(!Z.Rb)return lr(w,4,"Not a key frame.");for(he(Q),Z=w.Pa,O=0;4>O;++O){for(V=0;8>V;++V)for(I=0;3>I;++I)for(ne=0;11>ne;++ne)se=$(Q,oq[O][V][I][ne])?B(Q,8):aq[O][V][I][ne],Z.Wc[O][V].Yb[I][ne]=se;for(V=0;17>V;++V)Z.Xc[O][V]=Z.Wc[O][sq[V]]}return w.kc=he(Q),w.kc&&(w.Bd=B(Q,8)),w.cb=1}function g0(w,_,O,I,V,Q,Z){var ne=_[V].Yb[O];for(O=0;16>V;++V){if(!$(w,ne[O+0]))return V;for(;!$(w,ne[O+1]);)if(ne=_[++V].Yb[0],O=0,V==16)return 16;var re=_[V+1].Yb;if($(w,ne[O+2])){var se=w,ve=0;if($(se,(Ce=ne)[(Ae=O)+3]))if($(se,Ce[Ae+6])){for(ne=0,Ae=2*(ve=$(se,Ce[Ae+8]))+(Ce=$(se,Ce[Ae+9+ve])),ve=0,Ce=nq[Ae];Ce[ne];++ne)ve+=ve+$(se,Ce[ne]);ve+=3+(8<<Ae)}else $(se,Ce[Ae+7])?(ve=7+2*$(se,165),ve+=$(se,145)):ve=5+$(se,159);else ve=$(se,Ce[Ae+4])?3+$(se,Ce[Ae+5]):2;ne=re[2]}else ve=1,ne=re[1];re=Z+rq[V],0>(se=w).b&&ce(se);var Ae,Ce=se.b,Ne=(Ae=se.Ca>>1)-(se.I>>Ce)>>31;--se.b,se.Ca+=Ne,se.Ca|=1,se.I-=(Ae+1&Ne)<<Ce,Q[re]=((ve^Ne)-Ne)*I[(0<V)+0]}return 16}function Kp(w){var _=w.rb[w.sb-1];_.la=0,_.Na=0,a(w.zc,0,0,w.zc.length),w.ja=0}function dw(w,_){if(w==null)return 0;if(_==null)return lr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!m0(w,_))return 0;if(t(w.cb),_.ac==null||_.ac(_)){_.ob&&(w.L=0);var O=H0[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=_.v-O>>4,w.zb=_.j-O>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=_.o+15+O>>4,w.Hb=_.va+15+O>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var I=w.ed;for(O=0;4>O;++O){var V;if(w.Qa.Cb){var Q=w.Qa.Lb[O];w.Qa.Fb||(Q+=I.Tb)}else Q=I.Tb;for(V=0;1>=V;++V){var Z=w.gd[O][V],ne=Q;if(I.Pc&&(ne+=I.vd[0],V&&(ne+=I.od[0])),0<(ne=0>ne?0:63<ne?63:ne)){var re=ne;0<I.wb&&(re=4<I.wb?re>>2:re>>1)>9-I.wb&&(re=9-I.wb),1>re&&(re=1),Z.dd=re,Z.tc=2*ne+re,Z.ld=40<=ne?2:15<=ne?1:0}else Z.tc=0;Z.La=V}}}O=0}else lr(w,6,"Frame setup failed"),O=w.a;if(O=O==0){if(O){w.$c=0,0<w.Aa||(w.Ic=xq);e:{O=w.Ic,I=4*(re=w.za);var se=32*re,ve=re+1,Ae=0<w.L?re*(0<w.Aa?2:1):0,Ce=(w.Aa==2?2:1)*re;if((Z=I+832+(V=3*(16*O+H0[w.L])/2*se)+(Q=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Z)O=0;else{if(Z>w.Vb){if(w.Vb=0,w.Ec=i(Z),w.Fc=0,w.Ec==null){O=lr(w,1,"no memory during frame initialization.");break e}w.Vb=Z}Z=w.Ec,ne=w.Fc,w.Ac=Z,w.Bc=ne,ne+=I,w.Gd=o(se,h0),w.Hd=0,w.rb=o(ve+1,f0),w.sb=1,w.wa=Ae?o(Ae,bf):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=re),t(!0),w.oc=Z,w.pc=ne,ne+=832,w.ya=o(Ce,Gp),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=re),w.R=16*re,w.B=8*re,re=(se=H0[w.L])*w.R,se=se/2*w.B,w.sa=Z,w.ta=ne+re,w.qa=w.sa,w.ra=w.ta+16*O*w.R+se,w.Ha=w.qa,w.Ia=w.ra+8*O*w.B+se,w.$c=0,ne+=V,w.mb=Q?Z:null,w.nb=Q?ne:null,t(ne+Q<=w.Fc+w.Vb),Kp(w),a(w.Ac,w.Bc,0,I),O=1}}if(O){if(_.ka=0,_.y=w.sa,_.O=w.ta,_.f=w.qa,_.N=w.ra,_.ea=w.Ha,_.Vd=w.Ia,_.fa=w.R,_.Rc=w.B,_.F=null,_.J=0,!L0){for(O=-255;255>=O;++O)Or[255+O]=0>O?-O:O;for(O=-1020;1020>=O;++O)vl[1020+O]=-128>O?-128:127<O?127:O;for(O=-112;112>=O;++O)gm[112+O]=-16>O?-16:15<O?15:O;for(O=-255;510>=O;++O)Bf[255+O]=0>O?0:255<O?255:O;L0=1}Lf=pw,gl=fw,hm=y0,Ga=hw,bo=b0,ur=v0,If=em,M0=Uc,pm=Aw,Hc=tm,$c=jw,xu=jf,Vc=nm,Rf=C0,Gc=A0,wu=_s,mm=hl,xo=_w,Zo[0]=ks,Zo[1]=mw,Zo[2]=bw,Zo[3]=xw,Zo[4]=N0,Zo[5]=kf,Zo[6]=S0,Zo[7]=Jp,Zo[8]=Nw,Zo[9]=ww,Nu[0]=x0,Nu[1]=vw,Nu[2]=fl,Nu[3]=Nf,Nu[4]=_a,Nu[5]=yw,Nu[6]=w0,yl[0]=mu,yl[1]=gw,yl[2]=Sw,yl[3]=Qp,yl[4]=zc,yl[5]=kw,yl[6]=Zp,O=1}else O=0}O&&(O=function(Ne,Ue){for(Ne.M=0;Ne.M<Ne.Va;++Ne.M){var Te,ye=Ne.Jc[Ne.M&Ne.Xb],we=Ne.m,Fe=Ne;for(Te=0;Te<Fe.za;++Te){var He=we,ze=Fe,nt=ze.Ac,Xe=ze.Bc+4*Te,xt=ze.zc,Ze=ze.ya[ze.aa+Te];if(ze.Qa.Bb?Ze.$b=$(He,ze.Pa.jb[0])?2+$(He,ze.Pa.jb[2]):$(He,ze.Pa.jb[1]):Ze.$b=0,ze.kc&&(Ze.Ad=$(He,ze.Bd)),Ze.Za=!$(He,145)+0,Ze.Za){var rn=Ze.Ob,fn=0;for(ze=0;4>ze;++ze){var Qt,Ht=xt[0+ze];for(Qt=0;4>Qt;++Qt){Ht=iq[nt[Xe+Qt]][Ht];for(var _n=uC[$(He,Ht[0])];0<_n;)_n=uC[2*_n+$(He,Ht[_n])];Ht=-_n,nt[Xe+Qt]=Ht}r(rn,fn,nt,Xe,4),fn+=4,xt[0+ze]=Ht}}else Ht=$(He,156)?$(He,128)?1:3:$(He,163)?2:0,Ze.Ob[0]=Ht,a(nt,Xe,Ht,4),a(xt,0,Ht,4);Ze.Dd=$(He,142)?$(He,114)?$(He,183)?1:3:2:0}if(Fe.m.Ka)return lr(Ne,7,"Premature end-of-partition0 encountered.");for(;Ne.ja<Ne.za;++Ne.ja){if(Fe=ye,He=(we=Ne).rb[we.sb-1],nt=we.rb[we.sb+we.ja],Te=we.ya[we.aa+we.ja],Xe=we.kc?Te.Ad:0)He.la=nt.la=0,Te.Za||(He.Na=nt.Na=0),Te.Hc=0,Te.Gc=0,Te.ia=0;else{var wn,Mt;if(He=nt,nt=Fe,Xe=we.Pa.Xc,xt=we.ya[we.aa+we.ja],Ze=we.pb[xt.$b],ze=xt.ad,rn=0,fn=we.rb[we.sb-1],Ht=Qt=0,a(ze,rn,0,384),xt.Za)var Nr=0,li=Xe[3];else{_n=i(16);var Sr=He.Na+fn.Na;if(Sr=vm(nt,Xe[1],Sr,Ze.Eb,0,_n,0),He.Na=fn.Na=(0<Sr)+0,1<Sr)Lf(_n,0,ze,rn);else{var ui=_n[0]+3>>3;for(_n=0;256>_n;_n+=16)ze[rn+_n]=ui}Nr=1,li=Xe[0]}var hn=15&He.la,Ii=15&fn.la;for(_n=0;4>_n;++_n){var Ri=1&Ii;for(ui=Mt=0;4>ui;++ui)hn=hn>>1|(Ri=(Sr=vm(nt,li,Sr=Ri+(1&hn),Ze.Sc,Nr,ze,rn))>Nr)<<7,Mt=Mt<<2|(3<Sr?3:1<Sr?2:ze[rn+0]!=0),rn+=16;hn>>=4,Ii=Ii>>1|Ri<<7,Qt=(Qt<<8|Mt)>>>0}for(li=hn,Nr=Ii>>4,wn=0;4>wn;wn+=2){for(Mt=0,hn=He.la>>4+wn,Ii=fn.la>>4+wn,_n=0;2>_n;++_n){for(Ri=1&Ii,ui=0;2>ui;++ui)Sr=Ri+(1&hn),hn=hn>>1|(Ri=0<(Sr=vm(nt,Xe[2],Sr,Ze.Qc,0,ze,rn)))<<3,Mt=Mt<<2|(3<Sr?3:1<Sr?2:ze[rn+0]!=0),rn+=16;hn>>=2,Ii=Ii>>1|Ri<<5}Ht|=Mt<<4*wn,li|=hn<<4<<wn,Nr|=(240&Ii)<<wn}He.la=li,fn.la=Nr,xt.Hc=Qt,xt.Gc=Ht,xt.ia=43690&Ht?0:Ze.ia,Xe=!(Qt|Ht)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[Te.$b][Te.Za],we.wa[we.Y+we.ja].La|=!Xe),Fe.Ka)return lr(Ne,7,"Premature end-of-file encountered.")}if(Kp(Ne),we=Ue,Fe=1,Te=(ye=Ne).D,He=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(Te.M=ye.M,Te.uc=He,lm(ye,Te),Fe=1,Te=(Mt=ye.D).Nb,He=(Ht=H0[ye.L])*ye.R,nt=Ht/2*ye.B,_n=16*Te*ye.R,ui=8*Te*ye.B,Xe=ye.sa,xt=ye.ta-He+_n,Ze=ye.qa,ze=ye.ra-nt+ui,rn=ye.Ha,fn=ye.Ia-nt+ui,Ii=(hn=Mt.M)==0,Qt=hn>=ye.Va-1,ye.Aa==2&&lm(ye,Mt),Mt.uc)for(Ri=(Sr=ye).D.M,t(Sr.D.uc),Mt=Sr.yb;Mt<Sr.Hb;++Mt){Nr=Mt,li=Ri;var Kr=(fa=(nr=Sr).D).Nb;wn=nr.R;var fa=fa.wa[fa.Y+Nr],Ka=nr.sa,ko=nr.ta+16*Kr*wn+16*Nr,As=fa.dd,Yr=fa.tc;if(Yr!=0)if(t(3<=Yr),nr.L==1)0<Nr&&wu(Ka,ko,wn,Yr+4),fa.La&&xo(Ka,ko,wn,Yr),0<li&&Gc(Ka,ko,wn,Yr+4),fa.La&&mm(Ka,ko,wn,Yr);else{var bl=nr.B,Kc=nr.qa,Ff=nr.ra+8*Kr*bl+8*Nr,ku=nr.Ha,nr=nr.Ia+8*Kr*bl+8*Nr;Kr=fa.ld,0<Nr&&(M0(Ka,ko,wn,Yr+4,As,Kr),Hc(Kc,Ff,ku,nr,bl,Yr+4,As,Kr)),fa.La&&(xu(Ka,ko,wn,Yr,As,Kr),Rf(Kc,Ff,ku,nr,bl,Yr,As,Kr)),0<li&&(If(Ka,ko,wn,Yr+4,As,Kr),pm(Kc,Ff,ku,nr,bl,Yr+4,As,Kr)),fa.La&&($c(Ka,ko,wn,Yr,As,Kr),Vc(Kc,Ff,ku,nr,bl,Yr,As,Kr))}}if(ye.ia&&alert("todo:DitherRow"),we.put!=null){if(Mt=16*hn,hn=16*(hn+1),Ii?(we.y=ye.sa,we.O=ye.ta+_n,we.f=ye.qa,we.N=ye.ra+ui,we.ea=ye.Ha,we.W=ye.Ia+ui):(Mt-=Ht,we.y=Xe,we.O=xt,we.f=Ze,we.N=ze,we.ea=rn,we.W=fn),Qt||(hn-=Ht),hn>we.o&&(hn=we.o),we.F=null,we.J=null,ye.Fa!=null&&0<ye.Fa.length&&Mt<hn&&(we.J=om(ye,we,Mt,hn-Mt),we.F=ye.mb,we.F==null&&we.F.length==0)){Fe=lr(ye,3,"Could not decode alpha data.");break e}Mt<we.j&&(Ht=we.j-Mt,Mt=we.j,t(!(1&Ht)),we.O+=ye.R*Ht,we.N+=ye.B*(Ht>>1),we.W+=ye.B*(Ht>>1),we.F!=null&&(we.J+=we.width*Ht)),Mt<hn&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=Mt-we.j,we.U=we.va-we.v,we.T=hn-Mt,Fe=we.put(we))}Te+1!=ye.Ic||Qt||(r(ye.sa,ye.ta-He,Xe,xt+16*ye.R,He),r(ye.qa,ye.ra-nt,Ze,ze+8*ye.B,nt),r(ye.Ha,ye.Ia-nt,rn,fn+8*ye.B,nt))}if(!Fe)return lr(Ne,6,"Output aborted.")}return 1}(w,_)),_.bc!=null&&_.bc(_),O&=1}return O?(w.cb=0,O):0}function Xo(w,_,O,I,V){V=w[_+O+32*I]+(V>>3),w[_+O+32*I]=-256&V?0>V?0:255:V}function wf(w,_,O,I,V,Q){Xo(w,_,0,O,I+V),Xo(w,_,1,O,I+Q),Xo(w,_,2,O,I-Q),Xo(w,_,3,O,I-V)}function ii(w){return(20091*w>>16)+w}function Yp(w,_,O,I){var V,Q=0,Z=i(16);for(V=0;4>V;++V){var ne=w[_+0]+w[_+8],re=w[_+0]-w[_+8],se=(35468*w[_+4]>>16)-ii(w[_+12]),ve=ii(w[_+4])+(35468*w[_+12]>>16);Z[Q+0]=ne+ve,Z[Q+1]=re+se,Z[Q+2]=re-se,Z[Q+3]=ne-ve,Q+=4,_++}for(V=Q=0;4>V;++V)ne=(w=Z[Q+0]+4)+Z[Q+8],re=w-Z[Q+8],se=(35468*Z[Q+4]>>16)-ii(Z[Q+12]),Xo(O,I,0,0,ne+(ve=ii(Z[Q+4])+(35468*Z[Q+12]>>16))),Xo(O,I,1,0,re+se),Xo(O,I,2,0,re-se),Xo(O,I,3,0,ne-ve),Q++,I+=32}function v0(w,_,O,I){var V=w[_+0]+4,Q=35468*w[_+4]>>16,Z=ii(w[_+4]),ne=35468*w[_+1]>>16;wf(O,I,0,V+Z,w=ii(w[_+1]),ne),wf(O,I,1,V+Q,w,ne),wf(O,I,2,V-Q,w,ne),wf(O,I,3,V-Z,w,ne)}function fw(w,_,O,I,V){Yp(w,_,O,I),V&&Yp(w,_+16,O,I+4)}function y0(w,_,O,I){gl(w,_+0,O,I,1),gl(w,_+32,O,I+128,1)}function hw(w,_,O,I){var V;for(w=w[_+0]+4,V=0;4>V;++V)for(_=0;4>_;++_)Xo(O,I,_,V,w)}function b0(w,_,O,I){w[_+0]&&Ga(w,_+0,O,I),w[_+16]&&Ga(w,_+16,O,I+4),w[_+32]&&Ga(w,_+32,O,I+128),w[_+48]&&Ga(w,_+48,O,I+128+4)}function pw(w,_,O,I){var V,Q=i(16);for(V=0;4>V;++V){var Z=w[_+0+V]+w[_+12+V],ne=w[_+4+V]+w[_+8+V],re=w[_+4+V]-w[_+8+V],se=w[_+0+V]-w[_+12+V];Q[0+V]=Z+ne,Q[8+V]=Z-ne,Q[4+V]=se+re,Q[12+V]=se-re}for(V=0;4>V;++V)Z=(w=Q[0+4*V]+3)+Q[3+4*V],ne=Q[1+4*V]+Q[2+4*V],re=Q[1+4*V]-Q[2+4*V],se=w-Q[3+4*V],O[I+0]=Z+ne>>3,O[I+16]=se+re>>3,O[I+32]=Z-ne>>3,O[I+48]=se-re>>3,I+=64}function Xp(w,_,O){var I,V=_-32,Q=Li,Z=255-w[V-1];for(I=0;I<O;++I){var ne,re=Q,se=Z+w[_-1];for(ne=0;ne<O;++ne)w[_+ne]=re[se+w[V+ne]];_+=32}}function mw(w,_){Xp(w,_,4)}function gw(w,_){Xp(w,_,8)}function vw(w,_){Xp(w,_,16)}function fl(w,_){var O;for(O=0;16>O;++O)r(w,_+32*O,w,_-32,16)}function Nf(w,_){var O;for(O=16;0<O;--O)a(w,_,w[_-1],16),_+=32}function Sf(w,_,O){var I;for(I=0;16>I;++I)a(_,O+32*I,w,16)}function x0(w,_){var O,I=16;for(O=0;16>O;++O)I+=w[_-1+32*O]+w[_+O-32];Sf(I>>5,w,_)}function _a(w,_){var O,I=8;for(O=0;16>O;++O)I+=w[_-1+32*O];Sf(I>>4,w,_)}function yw(w,_){var O,I=8;for(O=0;16>O;++O)I+=w[_+O-32];Sf(I>>4,w,_)}function w0(w,_){Sf(128,w,_)}function Ct(w,_,O){return w+2*_+O+2>>2}function bw(w,_){var O,I=_-32;for(I=new Uint8Array([Ct(w[I-1],w[I+0],w[I+1]),Ct(w[I+0],w[I+1],w[I+2]),Ct(w[I+1],w[I+2],w[I+3]),Ct(w[I+2],w[I+3],w[I+4])]),O=0;4>O;++O)r(w,_+32*O,I,0,I.length)}function xw(w,_){var O=w[_-1],I=w[_-1+32],V=w[_-1+64],Q=w[_-1+96];X(w,_+0,16843009*Ct(w[_-1-32],O,I)),X(w,_+32,16843009*Ct(O,I,V)),X(w,_+64,16843009*Ct(I,V,Q)),X(w,_+96,16843009*Ct(V,Q,Q))}function ks(w,_){var O,I=4;for(O=0;4>O;++O)I+=w[_+O-32]+w[_-1+32*O];for(I>>=3,O=0;4>O;++O)a(w,_+32*O,I,4)}function N0(w,_){var O=w[_-1+0],I=w[_-1+32],V=w[_-1+64],Q=w[_-1-32],Z=w[_+0-32],ne=w[_+1-32],re=w[_+2-32],se=w[_+3-32];w[_+0+96]=Ct(I,V,w[_-1+96]),w[_+1+96]=w[_+0+64]=Ct(O,I,V),w[_+2+96]=w[_+1+64]=w[_+0+32]=Ct(Q,O,I),w[_+3+96]=w[_+2+64]=w[_+1+32]=w[_+0+0]=Ct(Z,Q,O),w[_+3+64]=w[_+2+32]=w[_+1+0]=Ct(ne,Z,Q),w[_+3+32]=w[_+2+0]=Ct(re,ne,Z),w[_+3+0]=Ct(se,re,ne)}function S0(w,_){var O=w[_+1-32],I=w[_+2-32],V=w[_+3-32],Q=w[_+4-32],Z=w[_+5-32],ne=w[_+6-32],re=w[_+7-32];w[_+0+0]=Ct(w[_+0-32],O,I),w[_+1+0]=w[_+0+32]=Ct(O,I,V),w[_+2+0]=w[_+1+32]=w[_+0+64]=Ct(I,V,Q),w[_+3+0]=w[_+2+32]=w[_+1+64]=w[_+0+96]=Ct(V,Q,Z),w[_+3+32]=w[_+2+64]=w[_+1+96]=Ct(Q,Z,ne),w[_+3+64]=w[_+2+96]=Ct(Z,ne,re),w[_+3+96]=Ct(ne,re,re)}function kf(w,_){var O=w[_-1+0],I=w[_-1+32],V=w[_-1+64],Q=w[_-1-32],Z=w[_+0-32],ne=w[_+1-32],re=w[_+2-32],se=w[_+3-32];w[_+0+0]=w[_+1+64]=Q+Z+1>>1,w[_+1+0]=w[_+2+64]=Z+ne+1>>1,w[_+2+0]=w[_+3+64]=ne+re+1>>1,w[_+3+0]=re+se+1>>1,w[_+0+96]=Ct(V,I,O),w[_+0+64]=Ct(I,O,Q),w[_+0+32]=w[_+1+96]=Ct(O,Q,Z),w[_+1+32]=w[_+2+96]=Ct(Q,Z,ne),w[_+2+32]=w[_+3+96]=Ct(Z,ne,re),w[_+3+32]=Ct(ne,re,se)}function Jp(w,_){var O=w[_+0-32],I=w[_+1-32],V=w[_+2-32],Q=w[_+3-32],Z=w[_+4-32],ne=w[_+5-32],re=w[_+6-32],se=w[_+7-32];w[_+0+0]=O+I+1>>1,w[_+1+0]=w[_+0+64]=I+V+1>>1,w[_+2+0]=w[_+1+64]=V+Q+1>>1,w[_+3+0]=w[_+2+64]=Q+Z+1>>1,w[_+0+32]=Ct(O,I,V),w[_+1+32]=w[_+0+96]=Ct(I,V,Q),w[_+2+32]=w[_+1+96]=Ct(V,Q,Z),w[_+3+32]=w[_+2+96]=Ct(Q,Z,ne),w[_+3+64]=Ct(Z,ne,re),w[_+3+96]=Ct(ne,re,se)}function ww(w,_){var O=w[_-1+0],I=w[_-1+32],V=w[_-1+64],Q=w[_-1+96];w[_+0+0]=O+I+1>>1,w[_+2+0]=w[_+0+32]=I+V+1>>1,w[_+2+32]=w[_+0+64]=V+Q+1>>1,w[_+1+0]=Ct(O,I,V),w[_+3+0]=w[_+1+32]=Ct(I,V,Q),w[_+3+32]=w[_+1+64]=Ct(V,Q,Q),w[_+3+64]=w[_+2+64]=w[_+0+96]=w[_+1+96]=w[_+2+96]=w[_+3+96]=Q}function Nw(w,_){var O=w[_-1+0],I=w[_-1+32],V=w[_-1+64],Q=w[_-1+96],Z=w[_-1-32],ne=w[_+0-32],re=w[_+1-32],se=w[_+2-32];w[_+0+0]=w[_+2+32]=O+Z+1>>1,w[_+0+32]=w[_+2+64]=I+O+1>>1,w[_+0+64]=w[_+2+96]=V+I+1>>1,w[_+0+96]=Q+V+1>>1,w[_+3+0]=Ct(ne,re,se),w[_+2+0]=Ct(Z,ne,re),w[_+1+0]=w[_+3+32]=Ct(O,Z,ne),w[_+1+32]=w[_+3+64]=Ct(I,O,Z),w[_+1+64]=w[_+3+96]=Ct(V,I,O),w[_+1+96]=Ct(Q,V,I)}function Sw(w,_){var O;for(O=0;8>O;++O)r(w,_+32*O,w,_-32,8)}function Qp(w,_){var O;for(O=0;8>O;++O)a(w,_,w[_-1],8),_+=32}function Fc(w,_,O){var I;for(I=0;8>I;++I)a(_,O+32*I,w,8)}function mu(w,_){var O,I=8;for(O=0;8>O;++O)I+=w[_+O-32]+w[_-1+32*O];Fc(I>>4,w,_)}function kw(w,_){var O,I=4;for(O=0;8>O;++O)I+=w[_+O-32];Fc(I>>3,w,_)}function zc(w,_){var O,I=4;for(O=0;8>O;++O)I+=w[_-1+32*O];Fc(I>>3,w,_)}function Zp(w,_){Fc(128,w,_)}function _f(w,_,O){var I=w[_-O],V=w[_+0],Q=3*(V-I)+Dw[1020+w[_-2*O]-w[_+O]],Z=I0[112+(Q+4>>3)];w[_-O]=Li[255+I+I0[112+(Q+3>>3)]],w[_+0]=Li[255+V-Z]}function k0(w,_,O,I){var V=w[_+0],Q=w[_+O];return No[255+w[_-2*O]-w[_-O]]>I||No[255+Q-V]>I}function _0(w,_,O,I){return 4*No[255+w[_-O]-w[_+0]]+No[255+w[_-2*O]-w[_+O]]<=I}function j0(w,_,O,I,V){var Q=w[_-3*O],Z=w[_-2*O],ne=w[_-O],re=w[_+0],se=w[_+O],ve=w[_+2*O],Ae=w[_+3*O];return 4*No[255+ne-re]+No[255+Z-se]>I?0:No[255+w[_-4*O]-Q]<=V&&No[255+Q-Z]<=V&&No[255+Z-ne]<=V&&No[255+Ae-ve]<=V&&No[255+ve-se]<=V&&No[255+se-re]<=V}function A0(w,_,O,I){var V=2*I+1;for(I=0;16>I;++I)_0(w,_+I,O,V)&&_f(w,_+I,O)}function _s(w,_,O,I){var V=2*I+1;for(I=0;16>I;++I)_0(w,_+I*O,1,V)&&_f(w,_+I*O,1)}function hl(w,_,O,I){var V;for(V=3;0<V;--V)A0(w,_+=4*O,O,I)}function _w(w,_,O,I){var V;for(V=3;0<V;--V)_s(w,_+=4,O,I)}function gu(w,_,O,I,V,Q,Z,ne){for(Q=2*Q+1;0<V--;){if(j0(w,_,O,Q,Z))if(k0(w,_,O,ne))_f(w,_,O);else{var re=w,se=_,ve=O,Ae=re[se-2*ve],Ce=re[se-ve],Ne=re[se+0],Ue=re[se+ve],Te=re[se+2*ve],ye=27*(Fe=Dw[1020+3*(Ne-Ce)+Dw[1020+Ae-Ue]])+63>>7,we=18*Fe+63>>7,Fe=9*Fe+63>>7;re[se-3*ve]=Li[255+re[se-3*ve]+Fe],re[se-2*ve]=Li[255+Ae+we],re[se-ve]=Li[255+Ce+ye],re[se+0]=Li[255+Ne-ye],re[se+ve]=Li[255+Ue-we],re[se+2*ve]=Li[255+Te-Fe]}_+=I}}function Jo(w,_,O,I,V,Q,Z,ne){for(Q=2*Q+1;0<V--;){if(j0(w,_,O,Q,Z))if(k0(w,_,O,ne))_f(w,_,O);else{var re=w,se=_,ve=O,Ae=re[se-ve],Ce=re[se+0],Ne=re[se+ve],Ue=I0[112+((Te=3*(Ce-Ae))+4>>3)],Te=I0[112+(Te+3>>3)],ye=Ue+1>>1;re[se-2*ve]=Li[255+re[se-2*ve]+ye],re[se-ve]=Li[255+Ae+Te],re[se+0]=Li[255+Ce-Ue],re[se+ve]=Li[255+Ne-ye]}_+=I}}function em(w,_,O,I,V,Q){gu(w,_,O,1,16,I,V,Q)}function Uc(w,_,O,I,V,Q){gu(w,_,1,O,16,I,V,Q)}function jw(w,_,O,I,V,Q){var Z;for(Z=3;0<Z;--Z)Jo(w,_+=4*O,O,1,16,I,V,Q)}function jf(w,_,O,I,V,Q){var Z;for(Z=3;0<Z;--Z)Jo(w,_+=4,1,O,16,I,V,Q)}function Aw(w,_,O,I,V,Q,Z,ne){gu(w,_,V,1,8,Q,Z,ne),gu(O,I,V,1,8,Q,Z,ne)}function tm(w,_,O,I,V,Q,Z,ne){gu(w,_,1,V,8,Q,Z,ne),gu(O,I,1,V,8,Q,Z,ne)}function nm(w,_,O,I,V,Q,Z,ne){Jo(w,_+4*V,V,1,8,Q,Z,ne),Jo(O,I+4*V,V,1,8,Q,Z,ne)}function C0(w,_,O,I,V,Q,Z,ne){Jo(w,_+4,1,V,8,Q,Z,ne),Jo(O,I+4,1,V,8,Q,Z,ne)}function Af(){this.ba=new Di,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ft,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rm(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function am(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function E0(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new F,this.yc=new D}function Cw(){this.xb=this.a=0,this.l=new xf,this.ca=new Di,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new E0,this.ab=0,this.gc=o(4,am),this.Oc=0}function Cf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xf,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wc(w,_,O,I,V,Q,Z){for(w=w==null?0:w[_+0],_=0;_<Z;++_)V[Q+_]=w+O[I+_]&255,w=V[Q+_]}function im(w,_,O,I,V,Q,Z){var ne;if(w==null)Wc(null,null,O,I,V,Q,Z);else for(ne=0;ne<Z;++ne)V[Q+ne]=w[_+ne]+O[I+ne]&255}function vu(w,_,O,I,V,Q,Z){if(w==null)Wc(null,null,O,I,V,Q,Z);else{var ne,re=w[_+0],se=re,ve=re;for(ne=0;ne<Z;++ne)se=ve+(re=w[_+ne])-se,ve=O[I+ne]+(-256&se?0>se?0:255:se)&255,se=re,V[Q+ne]=ve}}function om(w,_,O,I){var V=_.width,Q=_.o;if(t(w!=null&&_!=null),0>O||0>=I||O+I>Q)return null;if(!w.Cc){if(w.ga==null){var Z;if(w.ga=new Cf,(Z=w.ga==null)||(Z=_.width*_.o,t(w.Gb.length==0),w.Gb=i(Z),w.Uc=0,w.Gb==null?Z=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Z=1),Z=!Z),!Z){Z=w.ga;var ne=w.Fa,re=w.P,se=w.qc,ve=w.mb,Ae=w.nb,Ce=re+1,Ne=se-1,Ue=Z.l;if(t(ne!=null&&ve!=null&&_!=null),Su[0]=null,Su[1]=Wc,Su[2]=im,Su[3]=vu,Z.ca=ve,Z.tb=Ae,Z.c=_.width,Z.i=_.height,t(0<Z.c&&0<Z.i),1>=se)_=0;else if(Z.$a=ne[re+0]>>0&3,Z.Z=ne[re+0]>>2&3,Z.Lc=ne[re+0]>>4&3,re=ne[re+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||re)_=0;else if(Ue.put=vo,Ue.ac=xn,Ue.bc=ti,Ue.ma=Z,Ue.width=_.width,Ue.height=_.height,Ue.Da=_.Da,Ue.v=_.v,Ue.va=_.va,Ue.j=_.j,Ue.o=_.o,Z.$a)e:{t(Z.$a==1),_=Vt();t:for(;;){if(_==null){_=0;break e}if(t(Z!=null),Z.mc=_,_.c=Z.c,_.i=Z.i,_.l=Z.l,_.l.ma=Z,_.l.width=Z.c,_.l.height=Z.i,_.a=0,W(_.m,ne,Ce,Ne),!nn(Z.c,Z.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&Pi(_.s)?(Z.ic=1,ne=_.c*_.i,_.Ta=null,_.Ua=0,_.V=i(ne),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(Z.ic=0,_=Pr(_,Z.c)),!_))break t;_=1;break e}Z.mc=null,_=0}else _=Ne>=Z.c*Z.i;Z=!_}if(Z)return null;w.ga.Lc!=1?w.Ga=0:I=Q-O}t(w.ga!=null),t(O+I<=Q);e:{if(_=(ne=w.ga).c,Q=ne.l.o,ne.$a==0){if(Ce=w.rc,Ne=w.Vc,Ue=w.Fa,re=w.P+1+O*_,se=w.mb,ve=w.nb+O*_,t(re<=w.P+w.qc),ne.Z!=0)for(t(Su[ne.Z]!=null),Z=0;Z<I;++Z)Su[ne.Z](Ce,Ne,Ue,re,se,ve,_),Ce=se,Ne=ve,ve+=_,re+=_;else for(Z=0;Z<I;++Z)r(se,ve,Ue,re,_),Ce=se,Ne=ve,ve+=_,re+=_;w.rc=Ce,w.Vc=Ne}else{if(t(ne.mc!=null),_=O+I,t((Z=ne.mc)!=null),t(_<=Z.i),Z.C>=_)_=1;else if(ne.ic||ke(),ne.ic){ne=Z.V,Ce=Z.Ba,Ne=Z.c;var Te=Z.i,ye=(Ue=1,re=Z.$/Ne,se=Z.$%Ne,ve=Z.m,Ae=Z.s,Z.$),we=Ne*Te,Fe=Ne*_,He=Ae.wc,ze=ye<Fe?Wn(Ae,se,re):null;t(ye<=we),t(_<=Te),t(Pi(Ae));t:for(;;){for(;!ve.h&&ye<Fe;){if(se&He||(ze=Wn(Ae,se,re)),t(ze!=null),K(ve),256>(Te=Dr(ze.G[0],ze.H[0],ve)))ne[Ce+ye]=Te,++ye,++se>=Ne&&(se=0,++re<=_&&!(re%16)&&Oi(Z,re));else{if(!(280>Te)){Ue=0;break t}Te=ni(Te-256,ve);var nt,Xe=Dr(ze.G[4],ze.H[4],ve);if(K(ve),!(ye>=(Xe=ri(Ne,Xe=ni(Xe,ve)))&&we-ye>=Te)){Ue=0;break t}for(nt=0;nt<Te;++nt)ne[Ce+ye+nt]=ne[Ce+ye+nt-Xe];for(ye+=Te,se+=Te;se>=Ne;)se-=Ne,++re<=_&&!(re%16)&&Oi(Z,re);ye<Fe&&se&He&&(ze=Wn(Ae,se,re))}t(ve.h==Y(ve))}Oi(Z,re>_?_:re);break t}!Ue||ve.h&&ye<we?(Ue=0,Z.a=ve.h?5:3):Z.$=ye,_=Ue}else _=Ti(Z,Z.V,Z.Ba,Z.c,Z.i,_,Vr);if(!_){I=0;break e}}O+I>=Q&&(w.Cc=1),I=1}if(!I)return null;if(w.Cc&&((I=w.ga)!=null&&(I.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+O*V}function C(w,_,O,I,V,Q){for(;0<V--;){var Z,ne=w,re=_+(O?1:0),se=w,ve=_+(O?0:3);for(Z=0;Z<I;++Z){var Ae=se[ve+4*Z];Ae!=255&&(Ae*=32897,ne[re+4*Z+0]=ne[re+4*Z+0]*Ae>>23,ne[re+4*Z+1]=ne[re+4*Z+1]*Ae>>23,ne[re+4*Z+2]=ne[re+4*Z+2]*Ae>>23)}_+=Q}}function G(w,_,O,I,V){for(;0<I--;){var Q;for(Q=0;Q<O;++Q){var Z=w[_+2*Q+0],ne=15&(se=w[_+2*Q+1]),re=4369*ne,se=(240&se|se>>4)*re>>16;w[_+2*Q+0]=(240&Z|Z>>4)*re>>16&240|(15&Z|Z<<4)*re>>16>>4&15,w[_+2*Q+1]=240&se|ne}_+=V}}function de(w,_,O,I,V,Q,Z,ne){var re,se,ve=255;for(se=0;se<V;++se){for(re=0;re<I;++re){var Ae=w[_+re];Q[Z+4*re]=Ae,ve&=Ae}_+=O,Z+=ne}return ve!=255}function ge(w,_,O,I,V){var Q;for(Q=0;Q<V;++Q)O[I+Q]=w[_+Q]>>8}function ke(){wo=C,Dn=G,Pn=de,cr=ge}function Le(w,_,O){A[w]=function(I,V,Q,Z,ne,re,se,ve,Ae,Ce,Ne,Ue,Te,ye,we,Fe,He){var ze,nt=He-1>>1,Xe=ne[re+0]|se[ve+0]<<16,xt=Ae[Ce+0]|Ne[Ue+0]<<16;t(I!=null);var Ze=3*Xe+xt+131074>>2;for(_(I[V+0],255&Ze,Ze>>16,Te,ye),Q!=null&&(Ze=3*xt+Xe+131074>>2,_(Q[Z+0],255&Ze,Ze>>16,we,Fe)),ze=1;ze<=nt;++ze){var rn=ne[re+ze]|se[ve+ze]<<16,fn=Ae[Ce+ze]|Ne[Ue+ze]<<16,Qt=Xe+rn+xt+fn+524296,Ht=Qt+2*(rn+xt)>>3;Ze=Ht+Xe>>1,Xe=(Qt=Qt+2*(Xe+fn)>>3)+rn>>1,_(I[V+2*ze-1],255&Ze,Ze>>16,Te,ye+(2*ze-1)*O),_(I[V+2*ze-0],255&Xe,Xe>>16,Te,ye+(2*ze-0)*O),Q!=null&&(Ze=Qt+xt>>1,Xe=Ht+fn>>1,_(Q[Z+2*ze-1],255&Ze,Ze>>16,we,Fe+(2*ze-1)*O),_(Q[Z+2*ze+0],255&Xe,Xe>>16,we,Fe+(2*ze+0)*O)),Xe=rn,xt=fn}1&He||(Ze=3*Xe+xt+131074>>2,_(I[V+He-1],255&Ze,Ze>>16,Te,ye+(He-1)*O),Q!=null&&(Ze=3*xt+Xe+131074>>2,_(Q[Z+He-1],255&Ze,Ze>>16,we,Fe+(He-1)*O)))}}function $e(){So[R0]=uq,So[B0]=dC,So[oC]=cq,So[F0]=fC,So[z0]=hC,So[Pw]=pC,So[sC]=dq,So[Ow]=dC,So[Tw]=fC,So[U0]=hC,So[Mw]=pC}function tt(w){return w&~fq?0>w?0:255:w>>mC}function vt(w,_){return tt((19077*w>>8)+(26149*_>>8)-14234)}function Tt(w,_,O){return tt((19077*w>>8)-(6419*_>>8)-(13320*O>>8)+8708)}function Dt(w,_){return tt((19077*w>>8)+(33050*_>>8)-17685)}function Kt(w,_,O,I,V){I[V+0]=vt(w,O),I[V+1]=Tt(w,_,O),I[V+2]=Dt(w,_)}function Yn(w,_,O,I,V){I[V+0]=Dt(w,_),I[V+1]=Tt(w,_,O),I[V+2]=vt(w,O)}function tr(w,_,O,I,V){var Q=Tt(w,_,O);_=Q<<3&224|Dt(w,_)>>3,I[V+0]=248&vt(w,O)|Q>>5,I[V+1]=_}function wr(w,_,O,I,V){var Q=240&Dt(w,_)|15;I[V+0]=240&vt(w,O)|Tt(w,_,O)>>4,I[V+1]=Q}function ja(w,_,O,I,V){I[V+0]=255,Kt(w,_,O,I,V+1)}function Gr(w,_,O,I,V){Yn(w,_,O,I,V),I[V+3]=255}function Qo(w,_,O,I,V){Kt(w,_,O,I,V),I[V+3]=255}function Mi(w,_){return 0>w?0:w>_?_:w}function js(w,_,O){A[w]=function(I,V,Q,Z,ne,re,se,ve,Ae){for(var Ce=ve+(-2&Ae)*O;ve!=Ce;)_(I[V+0],Q[Z+0],ne[re+0],se,ve),_(I[V+1],Q[Z+0],ne[re+0],se,ve+O),V+=2,++Z,++re,ve+=2*O;1&Ae&&_(I[V+0],Q[Z+0],ne[re+0],se,ve)}}function D0(w,_,O){return O==0?w==0?_==0?6:5:_==0?4:0:O}function sm(w,_,O,I,V){switch(w>>>30){case 3:gl(_,O,I,V,0);break;case 2:ur(_,O,I,V);break;case 1:Ga(_,O,I,V)}}function lm(w,_){var O,I,V=_.M,Q=_.Nb,Z=w.oc,ne=w.pc+40,re=w.oc,se=w.pc+584,ve=w.oc,Ae=w.pc+600;for(O=0;16>O;++O)Z[ne+32*O-1]=129;for(O=0;8>O;++O)re[se+32*O-1]=129,ve[Ae+32*O-1]=129;for(0<V?Z[ne-1-32]=re[se-1-32]=ve[Ae-1-32]=129:(a(Z,ne-32-1,127,21),a(re,se-32-1,127,9),a(ve,Ae-32-1,127,9)),I=0;I<w.za;++I){var Ce=_.ya[_.aa+I];if(0<I){for(O=-1;16>O;++O)r(Z,ne+32*O-4,Z,ne+32*O+12,4);for(O=-1;8>O;++O)r(re,se+32*O-4,re,se+32*O+4,4),r(ve,Ae+32*O-4,ve,Ae+32*O+4,4)}var Ne=w.Gd,Ue=w.Hd+I,Te=Ce.ad,ye=Ce.Hc;if(0<V&&(r(Z,ne-32,Ne[Ue].y,0,16),r(re,se-32,Ne[Ue].f,0,8),r(ve,Ae-32,Ne[Ue].ea,0,8)),Ce.Za){var we=Z,Fe=ne-32+16;for(0<V&&(I>=w.za-1?a(we,Fe,Ne[Ue].y[15],4):r(we,Fe,Ne[Ue+1].y,0,4)),O=0;4>O;O++)we[Fe+128+O]=we[Fe+256+O]=we[Fe+384+O]=we[Fe+0+O];for(O=0;16>O;++O,ye<<=2)we=Z,Fe=ne+vC[O],Zo[Ce.Ob[O]](we,Fe),sm(ye,Te,16*+O,we,Fe)}else if(we=D0(I,V,Ce.Ob[0]),Nu[we](Z,ne),ye!=0)for(O=0;16>O;++O,ye<<=2)sm(ye,Te,16*+O,Z,ne+vC[O]);for(O=Ce.Gc,we=D0(I,V,Ce.Dd),yl[we](re,se),yl[we](ve,Ae),ye=Te,we=re,Fe=se,255&(Ce=O>>0)&&(170&Ce?hm(ye,256,we,Fe):bo(ye,256,we,Fe)),Ce=ve,ye=Ae,255&(O>>=8)&&(170&O?hm(Te,320,Ce,ye):bo(Te,320,Ce,ye)),V<w.Ub-1&&(r(Ne[Ue].y,0,Z,ne+480,16),r(Ne[Ue].f,0,re,se+224,8),r(Ne[Ue].ea,0,ve,Ae+224,8)),O=8*Q*w.B,Ne=w.sa,Ue=w.ta+16*I+16*Q*w.R,Te=w.qa,Ce=w.ra+8*I+O,ye=w.Ha,we=w.Ia+8*I+O,O=0;16>O;++O)r(Ne,Ue+O*w.R,Z,ne+32*O,16);for(O=0;8>O;++O)r(Te,Ce+O*w.B,re,se+32*O,8),r(ye,we+O*w.B,ve,Ae+32*O,8)}}function Ef(w,_,O,I,V,Q,Z,ne,re){var se=[0],ve=[0],Ae=0,Ce=re!=null?re.kd:0,Ne=re??new rm;if(w==null||12>O)return 7;Ne.data=w,Ne.w=_,Ne.ha=O,_=[_],O=[O],Ne.gb=[Ne.gb];e:{var Ue=_,Te=O,ye=Ne.gb;if(t(w!=null),t(Te!=null),t(ye!=null),ye[0]=0,12<=Te[0]&&!n(w,Ue[0],"RIFF")){if(n(w,Ue[0]+8,"WEBP")){ye=3;break e}var we=Se(w,Ue[0]+4);if(12>we||4294967286<we){ye=3;break e}if(Ce&&we>Te[0]-8){ye=7;break e}ye[0]=we,Ue[0]+=12,Te[0]-=12}ye=0}if(ye!=0)return ye;for(we=0<Ne.gb[0],O=O[0];;){e:{var Fe=w;Te=_,ye=O;var He=se,ze=ve,nt=Ue=[0];if((Ze=Ae=[Ae])[0]=0,8>ye[0])ye=7;else{if(!n(Fe,Te[0],"VP8X")){if(Se(Fe,Te[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var Xe=Se(Fe,Te[0]+8),xt=1+le(Fe,Te[0]+12);if(2147483648<=xt*(Fe=1+le(Fe,Te[0]+15))){ye=3;break e}nt!=null&&(nt[0]=Xe),He!=null&&(He[0]=xt),ze!=null&&(ze[0]=Fe),Te[0]+=18,ye[0]-=18,Ze[0]=1}ye=0}}if(Ae=Ae[0],Ue=Ue[0],ye!=0)return ye;if(Te=!!(2&Ue),!we&&Ae)return 3;if(Q!=null&&(Q[0]=!!(16&Ue)),Z!=null&&(Z[0]=Te),ne!=null&&(ne[0]=0),Z=se[0],Ue=ve[0],Ae&&Te&&re==null){ye=0;break}if(4>O){ye=7;break}if(we&&Ae||!we&&!Ae&&!n(w,_[0],"ALPH")){O=[O],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{Xe=w,ye=_,we=O;var Ze=Ne.gb;He=Ne.na,ze=Ne.P,nt=Ne.Sa,xt=22,t(Xe!=null),t(we!=null),Fe=ye[0];var rn=we[0];for(t(He!=null),t(nt!=null),He[0]=null,ze[0]=null,nt[0]=0;;){if(ye[0]=Fe,we[0]=rn,8>rn){ye=7;break e}var fn=Se(Xe,Fe+4);if(4294967286<fn){ye=3;break e}var Qt=8+fn+1&-2;if(xt+=Qt,0<Ze&&xt>Ze){ye=3;break e}if(!n(Xe,Fe,"VP8 ")||!n(Xe,Fe,"VP8L")){ye=0;break e}if(rn[0]<Qt){ye=7;break e}n(Xe,Fe,"ALPH")||(He[0]=Xe,ze[0]=Fe+8,nt[0]=fn),Fe+=Qt,rn-=Qt}}if(O=O[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],ye!=0)break}O=[O],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(Ze=w,ye=_,we=O,He=Ne.gb[0],ze=Ne.Ja,nt=Ne.xa,Xe=ye[0],Fe=!n(Ze,Xe,"VP8 "),xt=!n(Ze,Xe,"VP8L"),t(Ze!=null),t(we!=null),t(ze!=null),t(nt!=null),8>we[0])ye=7;else{if(Fe||xt){if(Ze=Se(Ze,Xe+4),12<=He&&Ze>He-12){ye=3;break e}if(Ce&&Ze>we[0]-8){ye=7;break e}ze[0]=Ze,ye[0]+=8,we[0]-=8,nt[0]=xt}else nt[0]=5<=we[0]&&Ze[Xe+0]==47&&!(Ze[Xe+4]>>5),ze[0]=we[0];ye=0}if(O=O[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],_=_[0],ye!=0)break;if(4294967286<Ne.Ja)return 3;if(ne==null||Te||(ne[0]=Ne.xa?2:1),Z=[Z],Ue=[Ue],Ne.xa){if(5>O){ye=7;break}ne=Z,Ce=Ue,Te=Q,w==null||5>O?w=0:5<=O&&w[_+0]==47&&!(w[_+4]>>5)?(we=[0],Ze=[0],He=[0],W(ze=new L,w,_,O),bt(ze,we,Ze,He)?(ne!=null&&(ne[0]=we[0]),Ce!=null&&(Ce[0]=Ze[0]),Te!=null&&(Te[0]=He[0]),w=1):w=0):w=0}else{if(10>O){ye=7;break}ne=Ue,w==null||10>O||!p0(w,_+3,O-3)?w=0:(Ce=w[_+0]|w[_+1]<<8|w[_+2]<<16,Te=16383&(w[_+7]<<8|w[_+6]),w=16383&(w[_+9]<<8|w[_+8]),1&Ce||3<(Ce>>1&7)||!(Ce>>4&1)||Ce>>5>=Ne.Ja||!Te||!w?w=0:(Z&&(Z[0]=Te),ne&&(ne[0]=w),w=1))}if(!w||(Z=Z[0],Ue=Ue[0],Ae&&(se[0]!=Z||ve[0]!=Ue)))return 3;re!=null&&(re[0]=Ne,re.offset=_-re.w,t(4294967286>_-re.w),t(re.offset==re.ha-O));break}return ye==0||ye==7&&Ae&&re==null?(Q!=null&&(Q[0]|=Ne.na!=null&&0<Ne.na.length),I!=null&&(I[0]=Z),V!=null&&(V[0]=Ue),0):ye}function um(w,_,O){var I=_.width,V=_.height,Q=0,Z=0,ne=I,re=V;if(_.Da=w!=null&&0<w.Da,_.Da&&(ne=w.cd,re=w.bd,Q=w.v,Z=w.j,11>O||(Q&=-2,Z&=-2),0>Q||0>Z||0>=ne||0>=re||Q+ne>I||Z+re>V))return 0;if(_.v=Q,_.j=Z,_.va=Q+ne,_.o=Z+re,_.U=ne,_.T=re,_.da=w!=null&&0<w.da,_.da){if(!Ve(ne,re,O=[w.ib],Q=[w.hb]))return 0;_.ib=O[0],_.hb=Q[0]}return _.ob=w!=null&&w.ob,_.Kb=w==null||!w.Sd,_.da&&(_.ob=_.ib<3*I/4&&_.hb<3*V/4,_.Kb=0),1}function cm(w){if(w==null)return 2;if(11>w.S){var _=w.f.RGBA;_.fb+=(w.height-1)*_.A,_.A=-_.A}else _=w.f.kb,w=w.height,_.O+=(w-1)*_.fa,_.fa=-_.fa,_.N+=(w-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(w-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(w-1)*_.lb,_.lb=-_.lb);return 0}function Df(w,_,O,I){if(I==null||0>=w||0>=_)return 2;if(O!=null){if(O.Da){var V=O.cd,Q=O.bd,Z=-2&O.v,ne=-2&O.j;if(0>Z||0>ne||0>=V||0>=Q||Z+V>w||ne+Q>_)return 2;w=V,_=Q}if(O.da){if(!Ve(w,_,V=[O.ib],Q=[O.hb]))return 2;w=V[0],_=Q[0]}}I.width=w,I.height=_;e:{var re=I.width,se=I.height;if(w=I.S,0>=re||0>=se||!(w>=R0&&13>w))w=2;else{if(0>=I.Rd&&I.sd==null){Z=Q=V=_=0;var ve=(ne=re*yC[w])*se;if(11>w||(Q=(se+1)/2*(_=(re+1)/2),w==12&&(Z=(V=re)*se)),(se=i(ve+2*Q+Z))==null){w=1;break e}I.sd=se,11>w?((re=I.f.RGBA).eb=se,re.fb=0,re.A=ne,re.size=ve):((re=I.f.kb).y=se,re.O=0,re.fa=ne,re.Fd=ve,re.f=se,re.N=0+ve,re.Ab=_,re.Cd=Q,re.ea=se,re.W=0+ve+Q,re.Db=_,re.Ed=Q,w==12&&(re.F=se,re.J=0+ve+2*Q),re.Tc=Z,re.lb=V)}if(_=1,V=I.S,Q=I.width,Z=I.height,V>=R0&&13>V)if(11>V)w=I.f.RGBA,_&=(ne=Math.abs(w.A))*(Z-1)+Q<=w.size,_&=ne>=Q*yC[V],_&=w.eb!=null;else{w=I.f.kb,ne=(Q+1)/2,ve=(Z+1)/2,re=Math.abs(w.fa),se=Math.abs(w.Ab);var Ae=Math.abs(w.Db),Ce=Math.abs(w.lb),Ne=Ce*(Z-1)+Q;_&=re*(Z-1)+Q<=w.Fd,_&=se*(ve-1)+ne<=w.Cd,_=(_&=Ae*(ve-1)+ne<=w.Ed)&re>=Q&se>=ne&Ae>=ne,_&=w.y!=null,_&=w.f!=null,_&=w.ea!=null,V==12&&(_&=Ce>=Q,_&=Ne<=w.Tc,_&=w.F!=null)}else _=0;w=_?0:2}}return w!=0||O!=null&&O.fd&&(w=cm(I)),w}var da=64,Pf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Of=24,Tf=32,dm=8,oi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];_e("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(w){return w},A.Predictor2=function(w,_,O){return _[O+0]},A.Predictor3=function(w,_,O){return _[O+1]},A.Predictor4=function(w,_,O){return _[O-1]},A.Predictor5=function(w,_,O){return Re(Re(w,_[O+1]),_[O+0])},A.Predictor6=function(w,_,O){return Re(w,_[O-1])},A.Predictor7=function(w,_,O){return Re(w,_[O+0])},A.Predictor8=function(w,_,O){return Re(_[O-1],_[O+0])},A.Predictor9=function(w,_,O){return Re(_[O+0],_[O+1])},A.Predictor10=function(w,_,O){return Re(Re(w,_[O-1]),Re(_[O+0],_[O+1]))},A.Predictor11=function(w,_,O){var I=_[O+0];return 0>=Ye(I>>24&255,w>>24&255,(_=_[O-1])>>24&255)+Ye(I>>16&255,w>>16&255,_>>16&255)+Ye(I>>8&255,w>>8&255,_>>8&255)+Ye(255&I,255&w,255&_)?I:w},A.Predictor12=function(w,_,O){var I=_[O+0];return(Ge((w>>24&255)+(I>>24&255)-((_=_[O-1])>>24&255))<<24|Ge((w>>16&255)+(I>>16&255)-(_>>16&255))<<16|Ge((w>>8&255)+(I>>8&255)-(_>>8&255))<<8|Ge((255&w)+(255&I)-(255&_)))>>>0},A.Predictor13=function(w,_,O){var I=_[O-1];return(Je((w=Re(w,_[O+0]))>>24&255,I>>24&255)<<24|Je(w>>16&255,I>>16&255)<<16|Je(w>>8&255,I>>8&255)<<8|Je(w>>0&255,I>>0&255))>>>0};var Ew=A.PredictorAdd0;A.PredictorAdd1=ct,_e("Predictor2","PredictorAdd2"),_e("Predictor3","PredictorAdd3"),_e("Predictor4","PredictorAdd4"),_e("Predictor5","PredictorAdd5"),_e("Predictor6","PredictorAdd6"),_e("Predictor7","PredictorAdd7"),_e("Predictor8","PredictorAdd8"),_e("Predictor9","PredictorAdd9"),_e("Predictor10","PredictorAdd10"),_e("Predictor11","PredictorAdd11"),_e("Predictor12","PredictorAdd12"),_e("Predictor13","PredictorAdd13");var fm=A.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var P0,yo=A.ColorIndexInverseTransform,Mf=A.MapARGB,O0=A.VP8LColorIndexInverseTransformAlpha,T0=A.MapAlpha,yu=A.VP8LPredictorsAdd=[];yu.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var qc,si,Va,bu,pl,ml,Lf,gl,ur,hm,Ga,bo,If,M0,pm,Hc,$c,xu,Vc,Rf,Gc,wu,mm,xo,wo,Dn,Pn,cr,Or=i(511),vl=i(2041),gm=i(225),Bf=i(767),L0=0,Dw=vl,I0=gm,Li=Bf,No=Or,R0=0,B0=1,oC=2,F0=3,z0=4,Pw=5,sC=6,Ow=7,Tw=8,U0=9,Mw=10,YW=[2,3,7],XW=[3,3,11],lC=[280,256,256,256,40],JW=[0,1,1,1,0],QW=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ZW=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],eq=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tq=8,Lw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Iw=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vm=null,nq=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rq=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uC=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],aq=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],iq=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],oq=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sq=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nu=[],Zo=[],yl=[],lq=1,cC=2,Su=[],So=[];Le("UpsampleRgbLinePair",Kt,3),Le("UpsampleBgrLinePair",Yn,3),Le("UpsampleRgbaLinePair",Qo,4),Le("UpsampleBgraLinePair",Gr,4),Le("UpsampleArgbLinePair",ja,4),Le("UpsampleRgba4444LinePair",wr,2),Le("UpsampleRgb565LinePair",tr,2);var uq=A.UpsampleRgbLinePair,cq=A.UpsampleBgrLinePair,dC=A.UpsampleRgbaLinePair,fC=A.UpsampleBgraLinePair,hC=A.UpsampleArgbLinePair,pC=A.UpsampleRgba4444LinePair,dq=A.UpsampleRgb565LinePair,W0=16,q0=1<<W0-1,ym=-227,Rw=482,mC=6,fq=(256<<mC)-1,gC=0,hq=i(256),pq=i(256),mq=i(256),gq=i(256),vq=i(Rw-ym),yq=i(Rw-ym);js("YuvToRgbRow",Kt,3),js("YuvToBgrRow",Yn,3),js("YuvToRgbaRow",Qo,4),js("YuvToBgraRow",Gr,4),js("YuvToArgbRow",ja,4),js("YuvToRgba4444Row",wr,2),js("YuvToRgb565Row",tr,2);var vC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],H0=[0,2,8],bq=[8,7,6,4,4,2,2,2,1,1,1,1],xq=1;this.WebPDecodeRGBA=function(w,_,O,I,V){var Q=B0,Z=new Af,ne=new Di;Z.ba=ne,ne.S=Q,ne.width=[ne.width],ne.height=[ne.height];var re=ne.width,se=ne.height,ve=new go;if(ve==null||w==null)var Ae=2;else t(ve!=null),Ae=Ef(w,_,O,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Ae!=0?re=0:(re!=null&&(re[0]=ve.width[0]),se!=null&&(se[0]=ve.height[0]),re=1),re){ne.width=ne.width[0],ne.height=ne.height[0],I!=null&&(I[0]=ne.width),V!=null&&(V[0]=ne.height);e:{if(I=new xf,(V=new rm).data=w,V.w=_,V.ha=O,V.kd=1,_=[0],t(V!=null),((w=Ef(V.data,V.w,V.ha,null,null,null,_,null,V))==0||w==7)&&_[0]&&(w=4),(_=w)==0){if(t(Z!=null),I.data=V.data,I.w=V.w+V.offset,I.ha=V.ha-V.offset,I.put=vo,I.ac=xn,I.bc=ti,I.ma=Z,V.xa){if((w=Vt())==null){Z=1;break e}if(function(Ce,Ne){var Ue=[0],Te=[0],ye=[0];t:for(;;){if(Ce==null)return 0;if(Ne==null)return Ce.a=2,0;if(Ce.l=Ne,Ce.a=0,W(Ce.m,Ne.data,Ne.w,Ne.ha),!bt(Ce.m,Ue,Te,ye)){Ce.a=3;break t}if(Ce.xb=cC,Ne.width=Ue[0],Ne.height=Te[0],!nn(Ue[0],Te[0],1,Ce,null))break t;return 1}return t(Ce.a!=0),0}(w,I)){if(I=(_=Df(I.width,I.height,Z.Oa,Z.ba))==0){t:{I=w;n:for(;;){if(I==null){I=0;break t}if(t(I.s.yc!=null),t(I.s.Ya!=null),t(0<I.s.Wb),t((O=I.l)!=null),t((V=O.ma)!=null),I.xb!=0){if(I.ca=V.ba,I.tb=V.tb,t(I.ca!=null),!um(V.Oa,O,F0)){I.a=2;break n}if(!Pr(I,O.width)||O.da)break n;if((O.da||Gt(I.ca.S))&&ke(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ke()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!Ee(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!Ti(I,I.V,I.Ba,I.c,I.i,O.o,fu))break n;V.Dc=I.Ma,I=1;break t}t(I.a!=0),I=0}I=!I}I&&(_=w.a)}else _=w.a}else{if((w=new cw)==null){Z=1;break e}if(w.Fa=V.na,w.P=V.P,w.qc=V.Sa,m0(w,I)){if((_=Df(I.width,I.height,Z.Oa,Z.ba))==0){if(w.Aa=0,O=Z.Oa,t((V=w)!=null),O!=null){if(0<(re=0>(re=O.Md)?0:100<re?255:255*re/100)){for(se=ve=0;4>se;++se)12>(Ae=V.pb[se]).lc&&(Ae.ia=re*bq[0>Ae.lc?0:Ae.lc]>>3),ve|=Ae.ia;ve&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=O.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}dw(w,I)||(_=w.a)}}else _=w.a}_==0&&Z.Oa!=null&&Z.Oa.fd&&(_=cm(Z.ba))}Z=_}Q=Z!=0?null:11>Q?ne.f.RGBA.eb:ne.f.kb.y}else Q=null;return Q};var yC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,P){for(var T="",E=0;E<4;E++)T+=String.fromCharCode(A[P++]);return T}function c(A,P){return(A[P+0]<<0|A[P+1]<<8|A[P+2]<<16)>>>0}function f(A,P){return(A[P+0]<<0|A[P+1]<<8|A[P+2]<<16|A[P+3]<<24)>>>0}new l;var h=[0],p=[0],m=[],v=new l,y=e,g=function(A,P){var T={},E=0,D=!1,R=0,F=0;if(T.frames=[],!function(q,Y,te,K){for(var ce=0;ce<K;ce++)if(q[Y+ce]!=te.charCodeAt(ce))return!0;return!1}(A,P,"RIFF",4)){var H,B;for(f(A,P+=4),P+=8;P<A.length;){var U=u(A,P),W=f(A,P+=4);P+=4;var z=W+(1&W);switch(U){case"VP8 ":case"VP8L":T.frames[E]===void 0&&(T.frames[E]={}),(L=T.frames[E]).src_off=D?F:P-8,L.src_size=R+W+8,E++,D&&(D=!1,R=0,F=0);break;case"VP8X":(L=T.header={}).feature_flags=A[P];var J=P+4;L.canvas_width=1+c(A,J),J+=3,L.canvas_height=1+c(A,J),J+=3;break;case"ALPH":D=!0,R=z+8,F=P-8;break;case"ANIM":(L=T.header).bgcolor=f(A,P),J=P+4,L.loop_count=(H=A)[(B=J)+0]<<0|H[B+1]<<8,J+=2;break;case"ANMF":var ee,L;(L=T.frames[E]={}).offset_x=2*c(A,P),P+=3,L.offset_y=2*c(A,P),P+=3,L.width=1+c(A,P),P+=3,L.height=1+c(A,P),P+=3,L.duration=c(A,P),P+=3,ee=A[P++],L.dispose=1&ee,L.blend=ee>>1&1}U!="ANMF"&&(P+=z)}return T}}(y,0);g.response=y,g.rgbaoutput=!0,g.dataurl=!1;var b=g.header?g.header:null,x=g.frames?g.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],p=[b.canvas_width];for(var N=0;N<x.length&&x[N].blend!=0;N++);}var k=x[0],j=v.WebPDecodeRGBA(y,k.src_off,k.src_size,p,h);k.rgba=j,k.imgwidth=p[0],k.imgheight=h[0];for(var S=0;S<p[0]*h[0]*4;S++)m[S]=j[S];return this.width=p,this.height=h,this.data=m,this}(function(e){var t=function(){return typeof D_=="function"},n=function(h,p,m,v){var y=4,g=o;switch(v){case e.image_compression.FAST:y=1,g=i;break;case e.image_compression.MEDIUM:y=6,g=s;break;case e.image_compression.SLOW:y=9,g=l}h=r(h,p,m,g);var b=D_(h,{level:y});return e.__addimage__.arrayBufferToBinaryString(b)},r=function(h,p,m,v){for(var y,g,b,x=h.length/p,N=new Uint8Array(h.length+x),k=c(),j=0;j<x;j+=1){if(b=j*p,y=h.subarray(b,b+p),v)N.set(v(y,m,g),b+j);else{for(var S,A=k.length,P=[];S<A;S+=1)P[S]=k[S](y,m,g);var T=f(P.concat());N.set(P[T],b+j)}g=y}return N},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},i=function(h,p){var m,v=[],y=h.length;v[0]=1;for(var g=0;g<y;g+=1)m=h[g-p]||0,v[g+1]=h[g]-m+256&255;return v},o=function(h,p,m){var v,y=[],g=h.length;y[0]=2;for(var b=0;b<g;b+=1)v=m&&m[b]||0,y[b+1]=h[b]-v+256&255;return y},s=function(h,p,m){var v,y,g=[],b=h.length;g[0]=3;for(var x=0;x<b;x+=1)v=h[x-p]||0,y=m&&m[x]||0,g[x+1]=h[x]+256-(v+y>>>1)&255;return g},l=function(h,p,m){var v,y,g,b,x=[],N=h.length;x[0]=4;for(var k=0;k<N;k+=1)v=h[k-p]||0,y=m&&m[k]||0,g=m&&m[k-p]||0,b=u(v,y,g),x[k+1]=h[k]-b+256&255;return x},u=function(h,p,m){if(h===p&&p===m)return h;var v=Math.abs(p-m),y=Math.abs(h-m),g=Math.abs(h+p-m-m);return v<=y&&v<=g?h:y<=g?p:m},c=function(){return[a,i,o,s,l]},f=function(h){var p=h.map(function(m){return m.reduce(function(v,y){return v+Math.abs(y)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,m,v){var y,g,b,x,N,k,j,S,A,P,T,E,D,R,F,H=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new ewe(h)).imgData,g=b.bits,y=b.colorSpace,N=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){A=(S=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,T=new Uint8Array(A*b.colors),P=new Uint8Array(A);var U,W=b.pixelBitlength-b.bits;for(R=0,F=0;R<A;R++){for(D=S[R],U=0;U<W;)T[F++]=D>>>U&255,U+=b.bits;P[R]=D>>>U&255}}if(b.bits===16){A=(S=new Uint32Array(b.decodePixels().buffer)).length,T=new Uint8Array(A*(32/b.pixelBitlength)*b.colors),P=new Uint8Array(A*(32/b.pixelBitlength)),E=b.colors>1,R=0,F=0;for(var z=0;R<A;)D=S[R++],T[F++]=D>>>0&255,E&&(T[F++]=D>>>16&255,D=S[R++],T[F++]=D>>>0&255),P[z++]=D>>>16&255;g=8}v!==e.image_compression.NONE&&t()?(h=n(T,b.width*b.colors,b.colors,v),j=n(P,b.width,1,v)):(h=T,j=P,H=void 0)}if(b.colorType===3&&(y=this.color_spaces.INDEXED,k=b.palette,b.transparency.indexed)){var J=b.transparency.indexed,ee=0;for(R=0,A=J.length;R<A;++R)ee+=J[R];if((ee/=255)===A-1&&J.indexOf(0)!==-1)x=[J.indexOf(0)];else if(ee!==A){for(S=b.decodePixels(),P=new Uint8Array(S.length),R=0,A=S.length;R<A;R++)P[R]=J[S[R]];j=n(P,b.width,1)}}var L=function(q){var Y;switch(q){case e.image_compression.FAST:Y=11;break;case e.image_compression.MEDIUM:Y=13;break;case e.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(v);return H===this.decode.FLATE_DECODE&&(B="/Predictor "+L+" "),B+="/Colors "+N+" /BitsPerComponent "+g+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(j&&this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),{alias:m,data:h,index:p,filter:H,decodeParameters:B,transparency:x,palette:k,sMask:j,predictor:L,width:b.width,height:b.height,bitsPerComponent:g,colorSpace:y}}}})(wt.API),function(e){e.processGIF89A=function(t,n,r,a){var i=new twe(t),o=i.width,s=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:s},c=new qN(100).encode(u,100);return e.processJPEG.call(this,c,n,r,a)},e.processGIF87A=e.processGIF89A}(wt.API),rs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},rs.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){jn.log("bit decode error:"+n)}},rs.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*a*4,s=0;s<8&&8*a+s<this.width;s++){var l=this.palette[i>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}n!==0&&(this.pos+=4-n)}},rs.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*a*4,s=i>>4,l=15&i,u=this.palette[s];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},rs.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},rs.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,s=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,u=i>>15?255:0,c=r*this.width*4+4*a;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=o,this.data[c+3]=u}this.pos+=e}},rs.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/t*255|0,c=a*this.width*4+4*i;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=e}},rs.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},rs.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=r,this.data[s+3]=o}},rs.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var i=new rs(t,!1),o=i.width,s=i.height,l={data:i.getData(),width:o,height:s},u=new qN(100).encode(l,100);return e.processJPEG.call(this,u,n,r,a)}}(wt.API),FT.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var i=new FT(t),o=i.width,s=i.height,l={data:i.getData(),width:o,height:s},u=new qN(100).encode(l,100);return e.processJPEG.call(this,u,n,r,a)}}(wt.API),wt.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),s=0,l=0,u=0;u<a;u+=4){var c=r[u],f=r[u+1],h=r[u+2],p=r[u+3];i[s++]=c,i[s++]=f,i[s++]=h,o[l++]=p}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},wt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},th=wt.API,Qy=th.getCharWidthsArray=function(e,t){var n,r,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:a.metadata.Unicode.widths,l=s.fof?s.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,c=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,m=0,v=s[0]||l,y=[];for(n=0;n<p;n++)r=e.charCodeAt(n),typeof a.metadata.widthOfString=="function"?y.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(h=f&&yn(u[r])==="object"&&!isNaN(parseInt(u[r][m],10))?u[r][m]/c:0,y.push((s[r]||v)/l+h)),m=r;return y},LT=th.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return th.processArabic&&(e=th.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,a)/n:Qy.apply(this,arguments).reduce(function(i,o){return i+o},0)},IT=function(e,t,n,r){for(var a=[],i=0,o=e.length,s=0;i!==o&&s+t[i]<n;)s+=t[i],i++;a.push(e.slice(0,i));var l=i;for(s=0;i!==o;)s+t[i]>r&&(a.push(e.slice(l,i)),s=0,l=i),s+=t[i],i++;return l!==i&&a.push(e.slice(l,i)),a},RT=function(e,t,n){n||(n={});var r,a,i,o,s,l,u,c=[],f=[c],h=n.textIndent||0,p=0,m=0,v=e.split(" "),y=Qy.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?v[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),b=[];v.map(function(N){(N=N.split(/\s*\n/)).length>1?b=b.concat(N.map(function(k,j){return(j&&k.length?`
`:"")+k})):b.push(N[0])}),v=b,l=LT.apply(this,[g,n])}for(i=0,o=v.length;i<o;i++){var x=0;if(r=v[i],l&&r[0]==`
`&&(r=r.substr(1),x=1),h+p+(m=(a=Qy.apply(this,[r,n])).reduce(function(N,k){return N+k},0))>t||x){if(m>t){for(s=IT.apply(this,[r,a,t-(h+p),t]),c.push(s.shift()),c=[s.pop()];s.length;)f.push([s.shift()]);m=a.slice(r.length-(c[0]?c[0].length:0)).reduce(function(N,k){return N+k},0)}else c=[r];f.push(c),h=m+l,p=y}else c.push(r),h+=p+m,p=y}return u=l?function(N,k){return(k?g:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(u)},th.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var f=this.internal.getFont(c.fontName,c.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=n.lineIndent;var s,l,u=[];for(s=0,l=r.length;s<l;s++)u=u.concat(RT.apply(this,[r[s],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},a=0;a<t.length;a++)n[t[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=t[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,p,m,v,y=["{"];for(var g in f){if(h=f[g],isNaN(parseInt(g,10))?p="'"+g+"'":(g=parseInt(g,10),p=(p=i(g).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof h=="number")h<0?(m=i(h).slice(3),v="-"):(m=i(h).slice(2),v=""),m=v+m.slice(0,-1)+r[m.slice(-1)];else{if(yn(h)!=="object")throw new Error("Don't know what to do with value type "+yn(h)+".");m=o(h)}y.push(p+m)}return y.push("}"),y.join("")},s=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,m,v,y={},g=1,b=y,x=[],N="",k="",j=f.length-1,S=1;S<j;S+=1)(v=f[S])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(x.push([b,m]),b={},m=void 0):v=="}"?((p=x.pop())[0][p[1]]=b,m=void 0,b=p[0]):v=="-"?g=-1:m===void 0?n.hasOwnProperty(v)?(N+=n[v],m=parseInt(N,16)*g,g=1,N=""):N+=v:n.hasOwnProperty(v)?(k+=n[v],b[m]=parseInt(k,16)*g,g=1,m=void 0,k=""):k+=v;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var m=u.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(wt.API),function(e){var t=function(n){for(var r=n.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=n.charCodeAt(i);return a};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,i=n.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(Ng(s)),o.metadata=e.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,r)}}])}(wt),function(e){function t(){return(St.canvg?Promise.resolve(St.canvg):HN(()=>import("./index.es-BDhZalkK.js"),__vite__mapDeps([0,1,2,3,4]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}wt.API.addSvgAsImage=function(n,r,a,i,o,s,l,u){if(isNaN(r)||isNaN(a))throw jn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw jn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=o;var f=c.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(m){return m.fromString(f,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(h)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),r,a,i,o,l,u)})}}(),wt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},wt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],u=0,c=0,f=0;function h(m,v){var y,g=!1;for(y=0;y<m.length;y+=1)m[y]===v&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=s.length;for(f=0;f<p;f+=1)n[s[f]].value=n[s[f]].defaultValue,n[s[f]].explicitSet=!1}if(yn(e)==="object"){for(a in e)if(i=e[a],h(s,a)&&i!==void 0){if(n[a].type==="boolean"&&typeof i=="boolean")n[a].value=i;else if(n[a].type==="name"&&h(n[a].valueSet,i))n[a].value=i;else if(n[a].type==="integer"&&Number.isInteger(i))n[a].value=i;else if(n[a].type==="array"){for(u=0;u<i.length;u+=1)if(r=!0,i[u].length===1&&typeof i[u][0]=="number")l.push(String(i[u]-1));else if(i[u].length>1){for(c=0;c<i[u].length;c+=1)typeof i[u][c]!="number"&&(r=!1);r===!0&&l.push([i[u][0]-1,i[u][1]-1].join(" "))}n[a].value="["+l.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?v.push("/"+m+" /"+n[m].value):v.push("/"+m+" "+n[m].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+s.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(wt.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var s,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],f=0,h=i.length;f<h;++f){if(s=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=i.charCodeAt(f),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return c.join("");s=s.toString(16),c.push(u[4-s.length],s)}return c.join("")},r=function(i){var o,s,l,u,c,f,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(s=Object.keys(i).sort(function(p,m){return p-m})).length;f<h;f++)o=s[f],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var s=o.font,l=o.out,u=o.newObject,c=o.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var f=s.metadata.Unicode.widths,h=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),p="",m=0;m<h.length;m++)p+=String.fromCharCode(h[m]);var v=u();c({data:p,addLength1:!0,objectId:v}),l("endobj");var y=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var g=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ch(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+ch(s.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+ch(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var s=o.font,l=o.out,u=o.newObject,c=o.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var f=s.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var m=u();c({data:h,addLength1:!0,objectId:m}),l("endobj");var v=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+ch(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var g=0;g<s.metadata.hmtx.widths.length;g++)s.metadata.hmtx.widths[g]=parseInt(s.metadata.hmtx.widths[g]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+ch(s.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,s=i.text||"",l=i.x,u=i.y,c=i.options||{},f=i.mutex||{},h=f.pdfEscape,p=f.activeFontKey,m=f.fonts,v=p,y="",g=0,b="",x=m[v].encoding;if(m[v].encoding!=="Identity-H")return{text:s,x:l,y:u,options:c,mutex:f};for(b=s,v=p,Array.isArray(s)&&(b=s[0]),g=0;g<b.length;g+=1)m[v].metadata.hasOwnProperty("cmap")&&(o=m[v].metadata.cmap.unicode.codeMap[b[g].charCodeAt(0)]),o||b[g].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?y+=b[g]:y+="";var N="";return parseInt(v.slice(1))<14||x==="WinAnsiEncoding"?N=h(y,v).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(N=n(y,m[v])),f.isHex=!0,{text:N,x:l,y:u,options:c,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",s=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?s.push([a(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):s.push(a(Object.assign({},l,{text:o[u]})).text);i.text=s}else i.text=a(Object.assign({},l,{text:o})).text}])}(wt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var a,i,o,s,l,u,c,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,x=0;this.__bidiEngine__={};var N=function(E){var D=E.charCodeAt(),R=D>>8,F=v[R];return F!==void 0?f[256*F+(255&D)]:R===252||R===253?"AL":g.test(R)?"L":R===8?"R":"N"},k=function(E){for(var D,R=0;R<E.length;R++){if((D=N(E.charAt(R)))==="L")return!1;if(D==="R")return!0}return!1},j=function(E,D,R,F){var H,B,U,W,z=D[F];switch(z){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(z="AN");break;case"AL":b=!0,z="R";break;case"WS":z="N";break;case"CS":F<1||F+1>=D.length||(H=R[F-1])!=="EN"&&H!=="AN"||(B=D[F+1])!=="EN"&&B!=="AN"?z="N":b&&(B="AN"),z=B===H?B:"N";break;case"ES":z=(H=F>0?R[F-1]:"B")==="EN"&&F+1<D.length&&D[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&R[F-1]==="EN"){z="EN";break}if(b){z="N";break}for(U=F+1,W=D.length;U<W&&D[U]==="ET";)U++;z=U<W&&D[U]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(W=D.length,U=F+1;U<W&&D[U]==="NSM";)U++;if(U<W){var J=E[F],ee=J>=1425&&J<=2303||J===64286;if(H=D[U],ee&&(H==="R"||H==="AL")){z="R";break}}}z=F<1||(H=D[F-1])==="B"?"N":R[F-1];break;case"B":b=!1,a=!0,z=x;break;case"S":i=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":z="N"}return z},S=function(E,D,R){var F=E.split("");return R&&A(F,R,{hiLevel:x}),F.reverse(),D&&D.reverse(),F.join("")},A=function(E,D,R){var F,H,B,U,W,z=-1,J=E.length,ee=0,L=[],q=x?p:h,Y=[];for(b=!1,a=!1,i=!1,H=0;H<J;H++)Y[H]=N(E[H]);for(B=0;B<J;B++){if(W=ee,L[B]=j(E,Y,L,B),F=240&(ee=q[W][m[L[B]]]),ee&=15,D[B]=U=q[ee][5],F>0)if(F===16){for(H=z;H<B;H++)D[H]=1;z=-1}else z=-1;if(q[ee][6])z===-1&&(z=B);else if(z>-1){for(H=z;H<B;H++)D[H]=U;z=-1}Y[B]==="B"&&(D[B]=0),R.hiLevel|=U}i&&function(te,K,ce){for(var he=0;he<ce;he++)if(te[he]==="S"){K[he]=x;for(var $=he-1;$>=0&&te[$]==="WS";$--)K[$]=x}}(Y,D,J)},P=function(E,D,R,F,H){if(!(H.hiLevel<E)){if(E===1&&x===1&&!a)return D.reverse(),void(R&&R.reverse());for(var B,U,W,z,J=D.length,ee=0;ee<J;){if(F[ee]>=E){for(W=ee+1;W<J&&F[W]>=E;)W++;for(z=ee,U=W-1;z<U;z++,U--)B=D[z],D[z]=D[U],D[U]=B,R&&(B=R[z],R[z]=R[U],R[U]=B);ee=W}ee++}}},T=function(E,D,R){var F=E.split(""),H={hiLevel:x};return R||(R=[]),A(F,R,H),function(B,U,W){if(W.hiLevel!==0&&c)for(var z,J=0;J<B.length;J++)U[J]===1&&(z=y.indexOf(B[J]))>=0&&(B[J]=y[z+1])}(F,R,H),P(2,F,D,R,H),P(1,F,D,R,H),F.join("")};return this.__bidiEngine__.doBidiReorder=function(E,D,R){if(function(H,B){if(B)for(var U=0;U<H.length;U++)B[U]=U;s===void 0&&(s=k(H)),u===void 0&&(u=k(H))}(E,D),o||!l||u)if(o&&l&&s^u)x=s?1:0,E=S(E,D,R);else if(!o&&l&&u)x=s?1:0,E=T(E,D,R),E=S(E,D);else if(!o||s||l||u){if(o&&!l&&s^u)E=S(E,D),s?(x=0,E=T(E,D,R)):(x=1,E=T(E,D,R),E=S(E,D));else if(o&&s&&!l&&u)x=1,E=T(E,D,R),E=S(E,D);else if(!o&&!l&&s^u){var F=c;s?(x=1,E=T(E,D,R),x=0,c=!1,E=T(E,D,R),c=F):(x=0,E=T(E,D,R),E=S(E,D),x=1,c=!1,E=T(E,D,R),c=F,E=S(E,D))}}else x=0,E=T(E,D,R);else x=s?1:0,E=T(E,D,R);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,l=E.isOutputVisual,s=E.isInputRtl,u=E.isOutputRtl,c=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var a=r.text,i=(r.x,r.y,r.options||{}),o=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var s=0;for(o=[],s=0;s<a.length;s+=1)Object.prototype.toString.call(a[s])==="[object Array]"?o.push([n.doBidiReorder(a[s][0]),a[s][1],a[s][2]]):o.push([n.doBidiReorder(a[s])]);r.text=o}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])}(wt),wt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new _c(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new gwe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new nwe(this.contents),this.head=new awe(this),this.name=new uwe(this),this.cmap=new GW(this),this.toUnicode={},this.hhea=new iwe(this),this.maxp=new cwe(this),this.hmtx=new dwe(this),this.post=new swe(this),this.os2=new owe(this),this.loca=new mwe(this),this.glyf=new fwe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,u;for(u=[],o=0,s=(l=this.bbox).length;o<s;o++)t=l[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var a,i,o,s;for(o=0,i=0,s=(t=""+t).length;0<=s?i<s:i>s;i=0<=s?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ns,_c=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,a;for(a=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(t.charCodeAt(n)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,a,i,o,s,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*a+16777216*i+65536*o+256*s+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,a,i;for(i=[],r=0,a=t.length;r<a;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),nwe=function(){var e;function t(n){var r,a,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,a,i,o,s,l,u,c,f,h,p,m,v;for(v in p=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),o=Math.floor(f/l),c=16*p-f,(a=new _c).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(o),a.writeShort(c),i=16*p,u=a.pos+i,s=null,m=[],n)for(h=n[v],a.writeString(v),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),v==="head"&&(s=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),r=2981146554-e(a.data),a.pos=s+8,a.writeUInt32(r),a.data},e=function(n){var r,a,i,o;for(n=KW.call(n);n.length%4;)n.push(0);for(i=new _c(n),a=0,r=0,o=n.length;r<o;r=r+=4)a+=i.readUInt32();return 4294967295&a},t}(),rwe={}.hasOwnProperty,cl=function(e,t){for(var n in t)rwe.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ns=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var awe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new _c).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),zT=function(){function e(t,n){var r,a,i,o,s,l,u,c,f,h,p,m,v,y,g,b,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,i=function(){var N,k;for(k=[],l=N=0;0<=h?N<h:N>h;l=0<=h?++N:--N)k.push(t.readUInt16());return k}(),t.pos+=2,v=function(){var N,k;for(k=[],l=N=0;0<=h?N<h:N>h;l=0<=h?++N:--N)k.push(t.readUInt16());return k}(),u=function(){var N,k;for(k=[],l=N=0;0<=h?N<h:N>h;l=0<=h?++N:--N)k.push(t.readUInt16());return k}(),c=function(){var N,k;for(k=[],l=N=0;0<=h?N<h:N>h;l=0<=h?++N:--N)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,s=function(){var N,k;for(k=[],l=N=0;0<=a?N<a:N>a;l=0<=a?++N:--N)k.push(t.readUInt16());return k}(),l=g=0,x=i.length;g<x;l=++g)for(y=i[l],r=b=m=v[l];m<=y?b<=y:b>=y;r=m<=y?++b:--b)c[l]===0?o=r+u[l]:(o=s[c[l]/2+(r-m)-(h-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}t.pos=f}return e.encode=function(t,n){var r,a,i,o,s,l,u,c,f,h,p,m,v,y,g,b,x,N,k,j,S,A,P,T,E,D,R,F,H,B,U,W,z,J,ee,L,q,Y,te,K,ce,he,$,X,ae,le;switch(F=new _c,o=Object.keys(t).sort(function(Se,Ee){return Se-Ee}),n){case"macroman":for(v=0,y=function(){var Se=[];for(m=0;m<256;++m)Se.push(0);return Se}(),b={0:0},i={},H=0,z=o.length;H<z;H++)b[$=t[a=o[H]]]==null&&(b[$]=++v),i[a]={old:t[a],new:b[t[a]]},y[a]=b[t[a]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(y),{charMap:i,subtable:F.data,maxGlyphID:v+1};case"unicode":for(D=[],f=[],x=0,b={},r={},g=u=null,B=0,J=o.length;B<J;B++)b[k=t[a=o[B]]]==null&&(b[k]=++x),r[a]={old:k,new:b[k]},s=b[k]-a,g!=null&&s===u||(g&&f.push(g),D.push(a),u=s),g=a;for(g&&f.push(g),f.push(65535),D.push(65535),T=2*(P=D.length),A=2*Math.pow(Math.log(P)/Math.LN2,2),h=Math.log(A/2)/Math.LN2,S=2*P-A,l=[],j=[],p=[],m=U=0,ee=D.length;U<ee;m=++U){if(E=D[m],c=f[m],E===65535){l.push(0),j.push(0);break}if(E-(R=r[E].new)>=32768)for(l.push(0),j.push(2*(p.length+P-m)),a=W=E;E<=c?W<=c:W>=c;a=E<=c?++W:--W)p.push(r[a].new);else l.push(R-E),j.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*P+2*p.length),F.writeUInt16(0),F.writeUInt16(T),F.writeUInt16(A),F.writeUInt16(h),F.writeUInt16(S),ce=0,L=f.length;ce<L;ce++)a=f[ce],F.writeUInt16(a);for(F.writeUInt16(0),he=0,q=D.length;he<q;he++)a=D[he],F.writeUInt16(a);for(X=0,Y=l.length;X<Y;X++)s=l[X],F.writeUInt16(s);for(ae=0,te=j.length;ae<te;ae++)N=j[ae],F.writeUInt16(N);for(le=0,K=p.length;le<K;le++)v=p[le],F.writeUInt16(v);return{charMap:r,subtable:F.data,maxGlyphID:x+1}}},e}(),GW=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,a,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)r=new zT(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var a,i;return r==null&&(r="macroman"),a=zT.encode(n,r),(i=new _c).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),iwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),owe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(n.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(n.readInt());return a}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(n.readInt());return a}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),swe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="post",t.prototype.parse=function(n){var r,a,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(a=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var s,l,u;for(u=[],o=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;o=0<=l?++s:--s)u.push(n.readUInt32());return u}).call(this)}},t}(),lwe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},uwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="name",t.prototype.parse=function(n){var r,a,i,o,s,l,u,c,f,h,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),a=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=f=0,h=a.length;f<h;o=++f)i=a[o],n.pos=i.offset,c=n.readString(i.length),s=new lwe(c,i),u[p=i.nameID]==null&&(u[p]=[]),u[i.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),cwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),dwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,a,i,o,s,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,f;for(f=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)f.push(n.readInt16());return f}(),this.widths=(function(){var c,f,h,p;for(p=[],c=0,f=(h=this.metrics).length;c<f;c++)o=h[c],p.push(o.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),KW=[].slice,fwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,a,i,o,s,l,u,c,f,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,a=o.indexOf(n),(i=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+a,s=(l=new _c(r.read(i))).readShort(),c=l.readShort(),h=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[n]=s===-1?new pwe(l,c,h,u,f):new hwe(l,s,c,h,u,f),this.cache[n]))},t.prototype.encode=function(n,r,a){var i,o,s,l,u;for(s=[],o=[],l=0,u=r.length;l<u;l++)i=n[r[l]],o.push(s.length),i&&(s=s.concat(i.encode(a)));return o.push(s.length),{table:s,offsets:o}},t}(),hwe=function(){function e(t,n,r,a,i,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),pwe=function(){function e(t,n,r,a,i){var o,s;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new _c(KW.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),mwe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return cl(t,Ns),t.prototype.tag="loca",t.prototype.parse=function(n){var r,a;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<a.length;++s)if(a[s]=i,o<r.length&&r[o]==s){++o,a[s]=i;var l=this.offsets[s],u=this.offsets[s+1]-l;u>0&&(i+=u)}for(var c=new Array(4*a.length),f=0;f<a.length;++f)c[4*f+3]=255&a[f],c[4*f+2]=(65280&a[f])>>8,c[4*f+1]=(16711680&a[f])>>16,c[4*f]=(4278190080&a[f])>>24;return c},t}(),gwe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,a,i;for(n in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=a[r];return t},e.prototype.glyphsFor=function(t){var n,r,a,i,o,s,l;for(a={},o=0,s=t.length;o<s;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],a)(r=a[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],a[i]=r;return a},e.prototype.encode=function(t,n){var r,a,i,o,s,l,u,c,f,h,p,m,v,y,g;for(a in r=GW.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},g=r.charMap)p[(l=g[a]).old]=l.new;for(m in h=r.maxGlyphID,o)m in p||(p[m]=h++);return c=function(b){var x,N;for(x in N={},b)N[b[x]]=x;return N}(p),f=Object.keys(c).sort(function(b,x){return b-x}),v=function(){var b,x,N;for(N=[],b=0,x=f.length;b<x;b++)s=f[b],N.push(c[s]);return N}(),i=this.font.glyf.encode(o,v,p),u=this.font.loca.encode(i.offsets,v),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();wt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,a,i,o;if(Array.isArray(n))return"["+function(){var s,l,u;for(u=[],s=0,l=n.length;s<l;s++)r=n[s],u.push(t.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in i=["<<"],n)o=n[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();const vwe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:K2e,AcroFormAppearance:ot,AcroFormButton:Lr,AcroFormCheckBox:_g,AcroFormChoiceField:Td,AcroFormComboBox:Ld,AcroFormEditBox:Sg,AcroFormListBox:Md,AcroFormPasswordField:jg,AcroFormPushButton:kg,AcroFormRadioButton:Id,AcroFormTextField:mc,GState:pv,ShadingPattern:Vu,TilingPattern:gd,default:wt,jsPDF:wt},Symbol.toStringTag,{value:"Module"}));var ywe={exports:{}};const bwe=Mq(vwe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(r,a){e.exports=a(function(){try{return bwe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Kw<"u"?Kw:typeof window<"u"?window:typeof self<"u"?self:Kw,function(n){return function(){var r={172:function(s,l){var u=this&&this.__extends||function(){var h=function(p,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(v[g]=y[g])},h(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var c=function(){function h(p,m,v){this.table=m,this.pageNumber=m.pageNumber,this.pageCount=this.pageNumber,this.settings=m.settings,this.cursor=v,this.doc=p.getDocument()}return h}();l.HookData=c;var f=function(h){u(p,h);function p(m,v,y,g,b,x){var N=h.call(this,m,v,x)||this;return N.cell=y,N.row=g,N.column=b,N.section=g.section,N}return p}(c);l.CellHookData=f},340:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0});var c=u(4),f=u(136),h=u(744),p=u(776),m=u(664),v=u(972);function y(g){g.API.autoTable=function(){for(var b=[],x=0;x<arguments.length;x++)b[x]=arguments[x];var N;b.length===1?N=b[0]:(console.error("Use of deprecated autoTable initiation"),N=b[2]||{},N.columns=b[0],N.body=b[1]);var k=(0,p.parseInput)(this,N),j=(0,v.createTable)(this,k);return(0,m.drawTable)(this,j),this},g.API.lastAutoTable=!1,g.API.previousAutoTable=!1,g.API.autoTable.previous=!1,g.API.autoTableText=function(b,x,N,k){(0,f.default)(b,x,N,k,this)},g.API.autoTableSetDefaults=function(b){return h.DocHandler.setDefaults(b,this),this},g.autoTableSetDefaults=function(b,x){h.DocHandler.setDefaults(b,x)},g.API.autoTableHtmlToJson=function(b,x){var N;if(x===void 0&&(x=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var k=new h.DocHandler(this),j=(0,c.parseHtml)(k,b,window,x,!1),S=j.head,A=j.body,P=((N=S[0])===null||N===void 0?void 0:N.map(function(T){return T.content}))||[];return{columns:P,rows:A,data:A}},g.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var b=this.lastAutoTable;return b&&b.finalY?b.finalY:0},g.API.autoTableAddPageContent=function(b){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),g.API.autoTable.globalDefaults||(g.API.autoTable.globalDefaults={}),g.API.autoTable.globalDefaults.addPageContent=b,this},g.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=y},136:function(s,l){Object.defineProperty(l,"__esModule",{value:!0});function u(c,f,h,p,m){p=p||{};var v=1.15,y=m.internal.scaleFactor,g=m.internal.getFontSize()/y,b=m.getLineHeightFactor?m.getLineHeightFactor():v,x=g*b,N=/\r\n|\r|\n/g,k="",j=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(k=typeof c=="string"?c.split(N):c,j=k.length||1),h+=g*(2-v),p.valign==="middle"?h-=j/2*x:p.valign==="bottom"&&(h-=j*x),p.halign==="center"||p.halign==="right"){var S=g;if(p.halign==="center"&&(S*=.5),k&&j>=1){for(var A=0;A<k.length;A++)m.text(k[A],f-m.getStringUnitWidth(k[A])*S,h),h+=x;return m}f-=m.getStringUnitWidth(c)*S}return p.halign==="justify"?m.text(c,f,h,{maxWidth:p.maxWidth||100,align:"justify"}):m.text(c,f,h),m}l.default=u},420:function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function u(m,v,y){y.applyStyles(v,!0);var g=Array.isArray(m)?m:[m],b=g.map(function(x){return y.getTextWidth(x)}).reduce(function(x,N){return Math.max(x,N)},0);return b}l.getStringWidth=u;function c(m,v,y,g){var b=v.settings.tableLineWidth,x=v.settings.tableLineColor;m.applyStyles({lineWidth:b,lineColor:x});var N=f(b,!1);N&&m.rect(y.x,y.y,v.getWidth(m.pageSize().width),g.y-y.y,N)}l.addTableBorder=c;function f(m,v){var y=m>0,g=v||v===0;return y&&g?"DF":y?"S":g?"F":null}l.getFillStyle=f;function h(m,v){var y,g,b,x;if(m=m||v,Array.isArray(m)){if(m.length>=4)return{top:m[0],right:m[1],bottom:m[2],left:m[3]};if(m.length===3)return{top:m[0],right:m[1],bottom:m[2],left:m[1]};if(m.length===2)return{top:m[0],right:m[1],bottom:m[0],left:m[1]};m.length===1?m=m[0]:m=v}return typeof m=="object"?(typeof m.vertical=="number"&&(m.top=m.vertical,m.bottom=m.vertical),typeof m.horizontal=="number"&&(m.right=m.horizontal,m.left=m.horizontal),{left:(y=m.left)!==null&&y!==void 0?y:v,top:(g=m.top)!==null&&g!==void 0?g:v,right:(b=m.right)!==null&&b!==void 0?b:v,bottom:(x=m.bottom)!==null&&x!==void 0?x:v}):(typeof m!="number"&&(m=v),{top:m,right:m,bottom:m,left:m})}l.parseSpacing=h;function p(m,v){var y=h(v.settings.margin,0);return m.pageSize().width-(y.left+y.right)}l.getPageAvailableWidth=p},796:function(s,l){var u=this&&this.__extends||function(){var p=function(m,v){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(y[b]=g[b])},p(m,v)};return function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");p(m,v);function y(){this.constructor=m}m.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var c=function(p){u(m,p);function m(v){var y=p.call(this)||this;return y._element=v,y}return m}(Array);l.HtmlRowInput=c;function f(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=f;function h(p){var m={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return m[p]}l.getTheme=h},903:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var c=u(420);function f(y,g,b,x,N){var k={},j=1.3333333333333333,S=p(g,function(z){return N.getComputedStyle(z).backgroundColor});S!=null&&(k.fillColor=S);var A=p(g,function(z){return N.getComputedStyle(z).color});A!=null&&(k.textColor=A);var P=v(x,b);P&&(k.cellPadding=P);var T="borderTopColor",E=j*b,D=x.borderTopWidth;if(x.borderBottomWidth===D&&x.borderRightWidth===D&&x.borderLeftWidth===D){var R=(parseFloat(D)||0)/E;R&&(k.lineWidth=R)}else k.lineWidth={top:(parseFloat(x.borderTopWidth)||0)/E,right:(parseFloat(x.borderRightWidth)||0)/E,bottom:(parseFloat(x.borderBottomWidth)||0)/E,left:(parseFloat(x.borderLeftWidth)||0)/E},k.lineWidth.top||(k.lineWidth.right?T="borderRightColor":k.lineWidth.bottom?T="borderBottomColor":k.lineWidth.left&&(T="borderLeftColor"));var F=p(g,function(z){return N.getComputedStyle(z)[T]});F!=null&&(k.lineColor=F);var H=["left","right","center","justify"];H.indexOf(x.textAlign)!==-1&&(k.halign=x.textAlign),H=["middle","bottom","top"],H.indexOf(x.verticalAlign)!==-1&&(k.valign=x.verticalAlign);var B=parseInt(x.fontSize||"");isNaN(B)||(k.fontSize=B/j);var U=h(x);U&&(k.fontStyle=U);var W=(x.fontFamily||"").toLowerCase();return y.indexOf(W)!==-1&&(k.font=W),k}l.parseCss=f;function h(y){var g="";return(y.fontWeight==="bold"||y.fontWeight==="bolder"||parseInt(y.fontWeight)>=700)&&(g="bold"),(y.fontStyle==="italic"||y.fontStyle==="oblique")&&(g+="italic"),g}function p(y,g){var b=m(y,g);if(!b)return null;var x=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!x||!Array.isArray(x))return null;var N=[parseInt(x[1]),parseInt(x[2]),parseInt(x[3])],k=parseInt(x[4]);return k===0||isNaN(N[0])||isNaN(N[1])||isNaN(N[2])?null:N}function m(y,g){var b=g(y);return b==="rgba(0, 0, 0, 0)"||b==="transparent"||b==="initial"||b==="inherit"?y.parentElement==null?null:m(y.parentElement,g):b}function v(y,g){var b=[y.paddingTop,y.paddingRight,y.paddingBottom,y.paddingLeft],x=96/(72/g),N=(parseInt(y.lineHeight)-parseInt(y.fontSize))/g/2,k=b.map(function(S){return parseInt(S||"0")/x}),j=(0,c.parseSpacing)(k,0);return N>j.top&&(j.top=N),N>j.bottom&&(j.bottom=N),j}},744:function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var u={},c=function(){function f(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return f.setDefaults=function(h,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=h:u=h},f.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},f.prototype.applyStyles=function(h,p){var m,v,y;p===void 0&&(p=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var g=this.jsPDFDocument.internal.getFont(),b=g.fontStyle,x=g.fontName;if(h.font&&(x=h.font),h.fontStyle){b=h.fontStyle;var N=this.getFontList()[x];N&&N.indexOf(b)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(N[0]),b=N[0])}if(this.jsPDFDocument.setFont(x,b),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!p){var k=f.unifyColor(h.fillColor);k&&(m=this.jsPDFDocument).setFillColor.apply(m,k),k=f.unifyColor(h.textColor),k&&(v=this.jsPDFDocument).setTextColor.apply(v,k),k=f.unifyColor(h.lineColor),k&&(y=this.jsPDFDocument).setDrawColor.apply(y,k),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},f.prototype.splitTextToSize=function(h,p,m){return this.jsPDFDocument.splitTextToSize(h,p,m)},f.prototype.rect=function(h,p,m,v,y){return this.jsPDFDocument.rect(h,p,m,v,y)},f.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},f.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},f.prototype.getDocument=function(){return this.jsPDFDocument},f.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},f.prototype.addPage=function(){return this.jsPDFDocument.addPage()},f.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},f.prototype.getGlobalOptions=function(){return u||{}},f.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},f.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},f.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},f.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},f.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},f.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},f}();l.DocHandler=c},4:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var c=u(903),f=u(796);function h(v,y,g,b,x){var N,k;b===void 0&&(b=!1),x===void 0&&(x=!1);var j;typeof y=="string"?j=g.document.querySelector(y):j=y;var S=Object.keys(v.getFontList()),A=v.scaleFactor(),P=[],T=[],E=[];if(!j)return console.error("Html table could not be found with input: ",y),{head:P,body:T,foot:E};for(var D=0;D<j.rows.length;D++){var R=j.rows[D],F=(k=(N=R==null?void 0:R.parentElement)===null||N===void 0?void 0:N.tagName)===null||k===void 0?void 0:k.toLowerCase(),H=p(S,A,g,R,b,x);H&&(F==="thead"?P.push(H):F==="tfoot"?E.push(H):T.push(H))}return{head:P,body:T,foot:E}}l.parseHtml=h;function p(v,y,g,b,x,N){for(var k=new f.HtmlRowInput(b),j=0;j<b.cells.length;j++){var S=b.cells[j],A=g.getComputedStyle(S);if(x||A.display!=="none"){var P=void 0;N&&(P=(0,c.parseCss)(v,S,y,A,g)),k.push({rowSpan:S.rowSpan,colSpan:S.colSpan,styles:P,_element:S,content:m(S)})}}var T=g.getComputedStyle(b);if(k.length>0&&(x||T.display!=="none"))return k}function m(v){var y=v.cloneNode(!0);return y.innerHTML=y.innerHTML.replace(/\n/g,"").replace(/ +/g," "),y.innerHTML=y.innerHTML.split(/<br.*?>/).map(function(g){return g.trim()}).join(`
`),y.innerText||y.textContent||""}},776:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var c=u(4),f=u(356),h=u(420),p=u(744),m=u(792);function v(j,S){var A=new p.DocHandler(j),P=A.getDocumentOptions(),T=A.getGlobalOptions();(0,m.default)(A,T,P,S);var E=(0,f.assign)({},T,P,S),D;typeof window<"u"&&(D=window);var R=y(T,P,S),F=g(T,P,S),H=b(A,E),B=N(A,E,D);return{id:S.tableId,content:B,hooks:F,styles:R,settings:H}}l.parseInput=v;function y(j,S,A){for(var P={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},T=function(F){if(F==="columnStyles"){var H=j[F],B=S[F],U=A[F];P.columnStyles=(0,f.assign)({},H,B,U)}else{var W=[j,S,A],z=W.map(function(J){return J[F]||{}});P[F]=(0,f.assign)({},z[0],z[1],z[2])}},E=0,D=Object.keys(P);E<D.length;E++){var R=D[E];T(R)}return P}function g(j,S,A){for(var P=[j,S,A],T={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},E=0,D=P;E<D.length;E++){var R=D[E];R.didParseCell&&T.didParseCell.push(R.didParseCell),R.willDrawCell&&T.willDrawCell.push(R.willDrawCell),R.didDrawCell&&T.didDrawCell.push(R.didDrawCell),R.willDrawPage&&T.willDrawPage.push(R.willDrawPage),R.didDrawPage&&T.didDrawPage.push(R.didDrawPage)}return T}function b(j,S){var A,P,T,E,D,R,F,H,B,U,W,z,J=(0,h.parseSpacing)(S.margin,40/j.scaleFactor()),ee=(A=x(j,S.startY))!==null&&A!==void 0?A:J.top,L;S.showFoot===!0?L="everyPage":S.showFoot===!1?L="never":L=(P=S.showFoot)!==null&&P!==void 0?P:"everyPage";var q;S.showHead===!0?q="everyPage":S.showHead===!1?q="never":q=(T=S.showHead)!==null&&T!==void 0?T:"everyPage";var Y=(E=S.useCss)!==null&&E!==void 0?E:!1,te=S.theme||(Y?"plain":"striped"),K=!!S.horizontalPageBreak,ce=(D=S.horizontalPageBreakRepeat)!==null&&D!==void 0?D:null;return{includeHiddenHtml:(R=S.includeHiddenHtml)!==null&&R!==void 0?R:!1,useCss:Y,theme:te,startY:ee,margin:J,pageBreak:(F=S.pageBreak)!==null&&F!==void 0?F:"auto",rowPageBreak:(H=S.rowPageBreak)!==null&&H!==void 0?H:"auto",tableWidth:(B=S.tableWidth)!==null&&B!==void 0?B:"auto",showHead:q,showFoot:L,tableLineWidth:(U=S.tableLineWidth)!==null&&U!==void 0?U:0,tableLineColor:(W=S.tableLineColor)!==null&&W!==void 0?W:200,horizontalPageBreak:K,horizontalPageBreakRepeat:ce,horizontalPageBreakBehaviour:(z=S.horizontalPageBreakBehaviour)!==null&&z!==void 0?z:"afterAllRows"}}function x(j,S){var A=j.getLastAutoTable(),P=j.scaleFactor(),T=j.pageNumber(),E=!1;if(A&&A.startPageNumber){var D=A.startPageNumber+A.pageNumber-1;E=D===T}return typeof S=="number"?S:(S==null||S===!1)&&E&&(A==null?void 0:A.finalY)!=null?A.finalY+20/P:null}function N(j,S,A){var P=S.head||[],T=S.body||[],E=S.foot||[];if(S.html){var D=S.includeHiddenHtml;if(A){var R=(0,c.parseHtml)(j,S.html,A,D,S.useCss)||{};P=R.head||P,T=R.body||P,E=R.foot||P}else console.error("Cannot parse html in non browser environment")}var F=S.columns||k(P,T,E);return{columns:F,head:P,body:T,foot:E}}function k(j,S,A){var P=j[0]||S[0]||A[0]||[],T=[];return Object.keys(P).filter(function(E){return E!=="_element"}).forEach(function(E){var D=1,R;Array.isArray(P)?R=P[parseInt(E)]:R=P[E],typeof R=="object"&&!Array.isArray(R)&&(D=(R==null?void 0:R.colSpan)||1);for(var F=0;F<D;F++){var H=void 0;Array.isArray(P)?H=T.length:H=E+(F>0?"_".concat(F):"");var B={dataKey:H};T.push(B)}}),T}},792:function(s,l){Object.defineProperty(l,"__esModule",{value:!0});function u(f,h,p,m){for(var v=function(x){x&&typeof x!="object"&&console.error("The options parameter should be of type object, is: "+typeof x),typeof x.extendWidth<"u"&&(x.tableWidth=x.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof x.margins<"u"&&(typeof x.margin>"u"&&(x.margin=x.margins),console.error("Use of deprecated option: margins, use margin instead.")),x.startY&&typeof x.startY!="number"&&(console.error("Invalid value for startY option",x.startY),delete x.startY),!x.didDrawPage&&(x.afterPageContent||x.beforePageContent||x.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),x.didDrawPage=function(E){f.applyStyles(f.userStyles),x.beforePageContent&&x.beforePageContent(E),f.applyStyles(f.userStyles),x.afterPageContent&&x.afterPageContent(E),f.applyStyles(f.userStyles),x.afterPageAdd&&E.pageNumber>1&&E.afterPageAdd(E),f.applyStyles(f.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(E){x[E]&&console.error('The "'.concat(E,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(E){var D=E[0],R=E[1];x[R]&&(console.error("Use of deprecated option ".concat(R,". Use ").concat(D," instead")),x[D]=x[R])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(E){var D=typeof E=="string"?E:E[0],R=typeof E=="string"?E:E[1];typeof x[D]<"u"&&(typeof x.styles[R]>"u"&&(x.styles[R]=x[D]),console.error("Use of deprecated option: "+D+", use the style "+R+" instead."))});for(var N=0,k=["styles","bodyStyles","headStyles","footStyles"];N<k.length;N++){var j=k[N];c(x[j]||{})}for(var S=x.columnStyles||{},A=0,P=Object.keys(S);A<P.length;A++){var T=P[A];c(S[T]||{})}},y=0,g=[h,p,m];y<g.length;y++){var b=g[y];v(b)}}l.default=u;function c(f){f.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),f.minCellHeight||(f.minCellHeight=f.rowHeight)):f.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),f.cellWidth||(f.cellWidth=f.columnWidth))}},260:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var c=u(796),f=u(172),h=u(420),p=function(){function g(b,x){this.pageNumber=1,this.pageCount=1,this.id=b.id,this.settings=b.settings,this.styles=b.styles,this.hooks=b.hooks,this.columns=x.columns,this.head=x.head,this.body=x.body,this.foot=x.foot}return g.prototype.getHeadHeight=function(b){return this.head.reduce(function(x,N){return x+N.getMaxCellHeight(b)},0)},g.prototype.getFootHeight=function(b){return this.foot.reduce(function(x,N){return x+N.getMaxCellHeight(b)},0)},g.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},g.prototype.callCellHooks=function(b,x,N,k,j,S){for(var A=0,P=x;A<P.length;A++){var T=P[A],E=new f.CellHookData(b,this,N,k,j,S),D=T(E)===!1;if(N.text=Array.isArray(N.text)?N.text:[N.text],D)return!1}return!0},g.prototype.callEndPageHooks=function(b,x){b.applyStyles(b.userStyles);for(var N=0,k=this.hooks.didDrawPage;N<k.length;N++){var j=k[N];j(new f.HookData(b,this,x))}},g.prototype.callWillDrawPageHooks=function(b,x){for(var N=0,k=this.hooks.willDrawPage;N<k.length;N++){var j=k[N];j(new f.HookData(b,this,x))}},g.prototype.getWidth=function(b){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var x=this.columns.reduce(function(k,j){return k+j.wrappedWidth},0);return x}else{var N=this.settings.margin;return b-N.left-N.right}},g}();l.Table=p;var m=function(){function g(b,x,N,k,j){j===void 0&&(j=!1),this.height=0,this.raw=b,b instanceof c.HtmlRowInput&&(this.raw=b._element,this.element=b._element),this.index=x,this.section=N,this.cells=k,this.spansMultiplePages=j}return g.prototype.getMaxCellHeight=function(b){var x=this;return b.reduce(function(N,k){var j;return Math.max(N,((j=x.cells[k.index])===null||j===void 0?void 0:j.height)||0)},0)},g.prototype.hasRowSpan=function(b){var x=this;return b.filter(function(N){var k=x.cells[N.index];return k?k.rowSpan>1:!1}).length>0},g.prototype.canEntireRowFit=function(b,x){return this.getMaxCellHeight(x)<=b},g.prototype.getMinimumRowHeight=function(b,x){var N=this;return b.reduce(function(k,j){var S=N.cells[j.index];if(!S)return 0;var A=x.getLineHeight(S.styles.fontSize),P=S.padding("vertical"),T=P+A;return T>k?T:k},0)},g}();l.Row=m;var v=function(){function g(b,x,N){var k,j;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=x,this.section=N,this.raw=b;var S=b;b!=null&&typeof b=="object"&&!Array.isArray(b)?(this.rowSpan=b.rowSpan||1,this.colSpan=b.colSpan||1,S=(j=(k=b.content)!==null&&k!==void 0?k:b.title)!==null&&j!==void 0?j:b,b._element&&(this.raw=b._element)):(this.rowSpan=1,this.colSpan=1);var A=S!=null?""+S:"",P=/\r\n|\r|\n/g;this.text=A.split(P)}return g.prototype.getTextPos=function(){var b;if(this.styles.valign==="top")b=this.y+this.padding("top");else if(this.styles.valign==="bottom")b=this.y+this.height-this.padding("bottom");else{var x=this.height-this.padding("vertical");b=this.y+x/2+this.padding("top")}var N;if(this.styles.halign==="right")N=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var k=this.width-this.padding("horizontal");N=this.x+k/2+this.padding("left")}else N=this.x+this.padding("left");return{x:N,y:b}},g.prototype.getContentHeight=function(b,x){x===void 0&&(x=1.15);var N=Array.isArray(this.text)?this.text.length:1,k=this.styles.fontSize/b*x,j=N*k+this.padding("vertical");return Math.max(j,this.styles.minCellHeight)},g.prototype.padding=function(b){var x=(0,h.parseSpacing)(this.styles.cellPadding,0);return b==="vertical"?x.top+x.bottom:b==="horizontal"?x.left+x.right:x[b]},g}();l.Cell=v;var y=function(){function g(b,x,N){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=b,this.raw=x,this.index=N}return g.prototype.getMaxCustomCellWidth=function(b){for(var x=0,N=0,k=b.allRows();N<k.length;N++){var j=k[N],S=j.cells[this.index];S&&typeof S.styles.cellWidth=="number"&&(x=Math.max(x,S.styles.cellWidth))}return x},g}();l.Column=y},356:function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function u(c,f,h,p,m){if(c==null)throw new TypeError("Cannot convert undefined or null to object");for(var v=Object(c),y=1;y<arguments.length;y++){var g=arguments[y];if(g!=null)for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(v[b]=g[b])}return v}l.assign=u},972:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var c=u(744),f=u(260),h=u(324),p=u(796),m=u(356);function v(j,S){var A=new c.DocHandler(j),P=y(S,A.scaleFactor()),T=new f.Table(S,P);return(0,h.calculateWidths)(A,T),A.applyStyles(A.userStyles),T}l.createTable=v;function y(j,S){var A=j.content,P=N(A.columns);if(A.head.length===0){var T=b(P,"head");T&&A.head.push(T)}if(A.foot.length===0){var T=b(P,"foot");T&&A.foot.push(T)}var E=j.settings.theme,D=j.styles;return{columns:P,head:g("head",A.head,P,D,E,S),body:g("body",A.body,P,D,E,S),foot:g("foot",A.foot,P,D,E,S)}}function g(j,S,A,P,T,E){var D={},R=S.map(function(F,H){for(var B=0,U={},W=0,z=0,J=0,ee=A;J<ee.length;J++){var L=ee[J];if(D[L.index]==null||D[L.index].left===0)if(z===0){var q=void 0;Array.isArray(F)?q=F[L.index-W-B]:q=F[L.dataKey];var Y={};typeof q=="object"&&!Array.isArray(q)&&(Y=(q==null?void 0:q.styles)||{});var te=k(j,L,H,T,P,E,Y),K=new f.Cell(q,te,j);U[L.dataKey]=K,U[L.index]=K,z=K.colSpan-1,D[L.index]={left:K.rowSpan-1,times:z}}else z--,W++;else D[L.index].left--,z=D[L.index].times,B++}return new f.Row(F,H,j,U)});return R}function b(j,S){var A={};return j.forEach(function(P){if(P.raw!=null){var T=x(S,P.raw);T!=null&&(A[P.dataKey]=T)}}),Object.keys(A).length>0?A:null}function x(j,S){if(j==="head"){if(typeof S=="object")return S.header||S.title||null;if(typeof S=="string"||typeof S=="number")return S}else if(j==="foot"&&typeof S=="object")return S.footer;return null}function N(j){return j.map(function(S,A){var P,T,E;return typeof S=="object"?E=(T=(P=S.dataKey)!==null&&P!==void 0?P:S.key)!==null&&T!==void 0?T:A:E=A,new f.Column(E,S,A)})}function k(j,S,A,P,T,E,D){var R=(0,p.getTheme)(P),F;j==="head"?F=T.headStyles:j==="body"?F=T.bodyStyles:j==="foot"&&(F=T.footStyles);var H=(0,m.assign)({},R.table,R[j],T.styles,F),B=T.columnStyles[S.dataKey]||T.columnStyles[S.index]||{},U=j==="body"?B:{},W=j==="body"&&A%2===0?(0,m.assign)({},R.alternateRow,T.alternateRowStyles):{},z=(0,p.defaultStyles)(E),J=(0,m.assign)({},z,H,W,U);return(0,m.assign)(J,D)}},664:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var c=u(420),f=u(260),h=u(744),p=u(356),m=u(136),v=u(224);function y(B,U){var W=U.settings,z=W.startY,J=W.margin,ee={x:J.left,y:z},L=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns),q=z+J.bottom+L;if(W.pageBreak==="avoid"){var Y=U.body,te=Y.reduce(function(he,$){return he+$.height},0);q+=te}var K=new h.DocHandler(B);(W.pageBreak==="always"||W.startY!=null&&q>K.pageSize().height)&&(H(K),ee.y=J.top),U.callWillDrawPageHooks(K,ee);var ce=(0,p.assign)({},ee);U.startPageNumber=K.pageNumber(),W.horizontalPageBreak?g(K,U,ce,ee):(K.applyStyles(K.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&U.head.forEach(function(he){return T(K,U,he,ee,U.columns)}),K.applyStyles(K.userStyles),U.body.forEach(function(he,$){var X=$===U.body.length-1;P(K,U,he,X,ce,ee,U.columns)}),K.applyStyles(K.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&U.foot.forEach(function(he){return T(K,U,he,ee,U.columns)})),(0,c.addTableBorder)(K,U,ce,ee),U.callEndPageHooks(K,ee),U.finalY=ee.y,B.lastAutoTable=U,B.previousAutoTable=U,B.autoTable&&(B.autoTable.previous=U),K.applyStyles(K.userStyles)}l.drawTable=y;function g(B,U,W,z){var J=(0,v.calculateAllColumnsCanFitInPage)(B,U),ee=U.settings;if(ee.horizontalPageBreakBehaviour==="afterAllRows")J.forEach(function(te,K){B.applyStyles(B.userStyles),K>0?F(B,U,W,z,te.columns,!0):b(B,U,z,te.columns),x(B,U,W,z,te.columns),k(B,U,z,te.columns)});else for(var L=-1,q=J[0],Y=function(){var te=L;if(q){B.applyStyles(B.userStyles);var K=q.columns;L>=0?F(B,U,W,z,K,!0):b(B,U,z,K),te=N(B,U,L+1,z,K),k(B,U,z,K)}var ce=te-L;J.slice(1).forEach(function(he){B.applyStyles(B.userStyles),F(B,U,W,z,he.columns,!0),N(B,U,L+1,z,he.columns,ce),k(B,U,z,he.columns)}),L=te};L<U.body.length-1;)Y()}function b(B,U,W,z){var J=U.settings;B.applyStyles(B.userStyles),(J.showHead==="firstPage"||J.showHead==="everyPage")&&U.head.forEach(function(ee){return T(B,U,ee,W,z)})}function x(B,U,W,z,J){B.applyStyles(B.userStyles),U.body.forEach(function(ee,L){var q=L===U.body.length-1;P(B,U,ee,q,W,z,J)})}function N(B,U,W,z,J,ee){B.applyStyles(B.userStyles),ee=ee??U.body.length;var L=Math.min(W+ee,U.body.length),q=-1;return U.body.slice(W,L).forEach(function(Y,te){var K=W+te===U.body.length-1,ce=R(B,U,K,z);Y.canEntireRowFit(ce,J)&&(T(B,U,Y,z,J),q=W+te)}),q}function k(B,U,W,z){var J=U.settings;B.applyStyles(B.userStyles),(J.showFoot==="lastPage"||J.showFoot==="everyPage")&&U.foot.forEach(function(ee){return T(B,U,ee,W,z)})}function j(B,U,W){var z=W.getLineHeight(B.styles.fontSize),J=B.padding("vertical"),ee=Math.floor((U-J)/z);return Math.max(0,ee)}function S(B,U,W,z){var J={};B.spansMultiplePages=!0,B.height=0;for(var ee=0,L=0,q=W.columns;L<q.length;L++){var Y=q[L],te=B.cells[Y.index];if(te){Array.isArray(te.text)||(te.text=[te.text]);var K=new f.Cell(te.raw,te.styles,te.section);K=(0,p.assign)(K,te),K.text=[];var ce=j(te,U,z);te.text.length>ce&&(K.text=te.text.splice(ce,te.text.length));var he=z.scaleFactor(),$=z.getLineHeightFactor();te.contentHeight=te.getContentHeight(he,$),te.contentHeight>=U&&(te.contentHeight=U,K.styles.minCellHeight-=U),te.contentHeight>B.height&&(B.height=te.contentHeight),K.contentHeight=K.getContentHeight(he,$),K.contentHeight>ee&&(ee=K.contentHeight),J[Y.index]=K}}var X=new f.Row(B.raw,-1,B.section,J,!0);X.height=ee;for(var ae=0,le=W.columns;ae<le.length;ae++){var Y=le[ae],K=X.cells[Y.index];K&&(K.height=X.height);var te=B.cells[Y.index];te&&(te.height=B.height)}return X}function A(B,U,W,z){var J=B.pageSize().height,ee=z.settings.margin,L=ee.top+ee.bottom,q=J-L;U.section==="body"&&(q-=z.getHeadHeight(z.columns)+z.getFootHeight(z.columns));var Y=U.getMinimumRowHeight(z.columns,B),te=Y<W;if(Y>q)return console.error("Will not be able to print row ".concat(U.index," correctly since it's minimum height is larger than page height")),!0;if(!te)return!1;var K=U.hasRowSpan(z.columns),ce=U.getMaxCellHeight(z.columns)>q;return ce?(K&&console.error("The content of row ".concat(U.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(K||z.settings.rowPageBreak==="avoid")}function P(B,U,W,z,J,ee,L){var q=R(B,U,z,ee);if(W.canEntireRowFit(q,L))T(B,U,W,ee,L);else if(A(B,W,q,U)){var Y=S(W,q,U,B);T(B,U,W,ee,L),F(B,U,J,ee,L),P(B,U,Y,z,J,ee,L)}else F(B,U,J,ee,L),P(B,U,W,z,J,ee,L)}function T(B,U,W,z,J){z.x=U.settings.margin.left;for(var ee=0,L=J;ee<L.length;ee++){var q=L[ee],Y=W.cells[q.index];if(!Y){z.x+=q.width;continue}B.applyStyles(Y.styles),Y.x=z.x,Y.y=z.y;var te=U.callCellHooks(B,U.hooks.willDrawCell,Y,W,q,z);if(te===!1){z.x+=q.width;continue}E(B,Y,z);var K=Y.getTextPos();(0,m.default)(Y.text,K.x,K.y,{halign:Y.styles.halign,valign:Y.styles.valign,maxWidth:Math.ceil(Y.width-Y.padding("left")-Y.padding("right"))},B.getDocument()),U.callCellHooks(B,U.hooks.didDrawCell,Y,W,q,z),z.x+=q.width}z.y+=W.height}function E(B,U,W){var z=U.styles;if(B.getDocument().setFillColor(B.getDocument().getFillColor()),typeof z.lineWidth=="number"){var J=(0,c.getFillStyle)(z.lineWidth,z.fillColor);J&&B.rect(U.x,W.y,U.width,U.height,J)}else typeof z.lineWidth=="object"&&(z.fillColor&&B.rect(U.x,W.y,U.width,U.height,"F"),D(B,U,W,z.lineWidth))}function D(B,U,W,z){var J,ee,L,q;z.top&&(J=W.x,ee=W.y,L=W.x+U.width,q=W.y,z.right&&(L+=.5*z.right),z.left&&(J-=.5*z.left),Y(z.top,J,ee,L,q)),z.bottom&&(J=W.x,ee=W.y+U.height,L=W.x+U.width,q=W.y+U.height,z.right&&(L+=.5*z.right),z.left&&(J-=.5*z.left),Y(z.bottom,J,ee,L,q)),z.left&&(J=W.x,ee=W.y,L=W.x,q=W.y+U.height,z.top&&(ee-=.5*z.top),z.bottom&&(q+=.5*z.bottom),Y(z.left,J,ee,L,q)),z.right&&(J=W.x+U.width,ee=W.y,L=W.x+U.width,q=W.y+U.height,z.top&&(ee-=.5*z.top),z.bottom&&(q+=.5*z.bottom),Y(z.right,J,ee,L,q));function Y(te,K,ce,he,$){B.getDocument().setLineWidth(te),B.getDocument().line(K,ce,he,$,"S")}}function R(B,U,W,z){var J=U.settings.margin.bottom,ee=U.settings.showFoot;return(ee==="everyPage"||ee==="lastPage"&&W)&&(J+=U.getFootHeight(U.columns)),B.pageSize().height-z.y-J}function F(B,U,W,z,J,ee){J===void 0&&(J=[]),ee===void 0&&(ee=!1),B.applyStyles(B.userStyles),U.settings.showFoot==="everyPage"&&!ee&&U.foot.forEach(function(q){return T(B,U,q,z,J)}),U.callEndPageHooks(B,z);var L=U.settings.margin;(0,c.addTableBorder)(B,U,W,z),H(B),U.pageNumber++,U.pageCount++,z.x=L.left,z.y=L.top,W.y=L.top,U.callWillDrawPageHooks(B,z),U.settings.showHead==="everyPage"&&(U.head.forEach(function(q){return T(B,U,q,z,J)}),B.applyStyles(B.userStyles))}l.addPage=F;function H(B){var U=B.pageNumber();B.setPage(U+1);var W=B.pageNumber();return W===U?(B.addPage(),!0):!1}},224:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var c=u(420);function f(p,m,v){var y;v===void 0&&(v={});var g=(0,c.getPageAvailableWidth)(p,m),b=new Map,x=[],N=[],k=[];m.settings.horizontalPageBreakRepeat,Array.isArray(m.settings.horizontalPageBreakRepeat)?k=m.settings.horizontalPageBreakRepeat:(typeof m.settings.horizontalPageBreakRepeat=="string"||typeof m.settings.horizontalPageBreakRepeat=="number")&&(k=[m.settings.horizontalPageBreakRepeat]),k.forEach(function(P){var T=m.columns.find(function(E){return E.dataKey===P||E.index===P});T&&!b.has(T.index)&&(b.set(T.index,!0),x.push(T.index),N.push(m.columns[T.index]),g-=T.wrappedWidth)});for(var j=!0,S=(y=v==null?void 0:v.start)!==null&&y!==void 0?y:0;S<m.columns.length;){if(b.has(S)){S++;continue}var A=m.columns[S].wrappedWidth;if(j||g>=A)j=!1,x.push(S),N.push(m.columns[S]),g-=A;else break;S++}return{colIndexes:x,columns:N,lastIndex:S-1}}function h(p,m){for(var v=[],y=0;y<m.columns.length;y++){var g=f(p,m,{start:y});g.columns.length&&(v.push(g),y=g.lastIndex)}return v}l.calculateAllColumnsCanFitInPage=h},324:function(s,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var c=u(420);function f(x,N){h(x,N);var k=[],j=0;N.columns.forEach(function(A){var P=A.getMaxCustomCellWidth(N);P?A.width=P:(A.width=A.wrappedWidth,k.push(A)),j+=A.width});var S=N.getWidth(x.pageSize().width)-j;S&&(S=p(k,S,function(A){return Math.max(A.minReadableWidth,A.minWidth)})),S&&(S=p(k,S,function(A){return A.minWidth})),S=Math.abs(S),!N.settings.horizontalPageBreak&&S>.1/x.scaleFactor()&&(S=S<1?S:Math.round(S),console.warn("Of the table content, ".concat(S," units width could not fit page"))),v(N),y(N,x),m(N)}l.calculateWidths=f;function h(x,N){var k=x.scaleFactor(),j=N.settings.horizontalPageBreak,S=(0,c.getPageAvailableWidth)(x,N);N.allRows().forEach(function(A){for(var P=0,T=N.columns;P<T.length;P++){var E=T[P],D=A.cells[E.index];if(D){var R=N.hooks.didParseCell;N.callCellHooks(x,R,D,A,E,null);var F=D.padding("horizontal");D.contentWidth=(0,c.getStringWidth)(D.text,D.styles,x)+F;var H=(0,c.getStringWidth)(D.text.join(" ").split(/[^\S\u00A0]+/),D.styles,x);if(D.minReadableWidth=H+D.padding("horizontal"),typeof D.styles.cellWidth=="number")D.minWidth=D.styles.cellWidth,D.wrappedWidth=D.styles.cellWidth;else if(D.styles.cellWidth==="wrap"||j===!0)D.contentWidth>S?(D.minWidth=S,D.wrappedWidth=S):(D.minWidth=D.contentWidth,D.wrappedWidth=D.contentWidth);else{var B=10/k;D.minWidth=D.styles.minCellWidth||B,D.wrappedWidth=D.contentWidth,D.minWidth>D.wrappedWidth&&(D.wrappedWidth=D.minWidth)}}}}),N.allRows().forEach(function(A){for(var P=0,T=N.columns;P<T.length;P++){var E=T[P],D=A.cells[E.index];if(D&&D.colSpan===1)E.wrappedWidth=Math.max(E.wrappedWidth,D.wrappedWidth),E.minWidth=Math.max(E.minWidth,D.minWidth),E.minReadableWidth=Math.max(E.minReadableWidth,D.minReadableWidth);else{var R=N.styles.columnStyles[E.dataKey]||N.styles.columnStyles[E.index]||{},F=R.cellWidth||R.minCellWidth;F&&typeof F=="number"&&(E.minWidth=F,E.wrappedWidth=F)}D&&(D.colSpan>1&&!E.minWidth&&(E.minWidth=D.minWidth),D.colSpan>1&&!E.wrappedWidth&&(E.wrappedWidth=D.minWidth))}})}function p(x,N,k){for(var j=N,S=x.reduce(function(B,U){return B+U.wrappedWidth},0),A=0;A<x.length;A++){var P=x[A],T=P.wrappedWidth/S,E=j*T,D=P.width+E,R=k(P),F=D<R?R:D;N-=F-P.width,P.width=F}if(N=Math.round(N*1e10)/1e10,N){var H=x.filter(function(B){return N<0?B.width>k(B):!0});H.length&&(N=p(H,N,k))}return N}l.resizeColumns=p;function m(x){for(var N={},k=1,j=x.allRows(),S=0;S<j.length;S++)for(var A=j[S],P=0,T=x.columns;P<T.length;P++){var E=T[P],D=N[E.index];if(k>1)k--,delete A.cells[E.index];else if(D)D.cell.height+=A.height,k=D.cell.colSpan,delete A.cells[E.index],D.left--,D.left<=1&&delete N[E.index];else{var R=A.cells[E.index];if(!R)continue;if(R.height=A.height,R.rowSpan>1){var F=j.length-S,H=R.rowSpan>F?F:R.rowSpan;N[E.index]={cell:R,left:H,row:A}}}}}function v(x){for(var N=x.allRows(),k=0;k<N.length;k++)for(var j=N[k],S=null,A=0,P=0,T=0;T<x.columns.length;T++){var E=x.columns[T];if(P-=1,P>1&&x.columns[T+1])A+=E.width,delete j.cells[E.index];else if(S){var D=S;delete j.cells[E.index],S=null,D.width=E.width+A}else{var D=j.cells[E.index];if(!D)continue;if(P=D.colSpan,A=0,D.colSpan>1){S=D,A+=E.width;continue}D.width=E.width+A}}}function y(x,N){for(var k={count:0,height:0},j=0,S=x.allRows();j<S.length;j++){for(var A=S[j],P=0,T=x.columns;P<T.length;P++){var E=T[P],D=A.cells[E.index];if(D){N.applyStyles(D.styles,!0);var R=D.width-D.padding("horizontal");if(D.styles.overflow==="linebreak")D.text=N.splitTextToSize(D.text,R+1/N.scaleFactor(),{fontSize:D.styles.fontSize});else if(D.styles.overflow==="ellipsize")D.text=g(D.text,R,D.styles,N,"...");else if(D.styles.overflow==="hidden")D.text=g(D.text,R,D.styles,N,"");else if(typeof D.styles.overflow=="function"){var F=D.styles.overflow(D.text,R);typeof F=="string"?D.text=[F]:D.text=F}D.contentHeight=D.getContentHeight(N.scaleFactor(),N.getLineHeightFactor());var H=D.contentHeight/D.rowSpan;D.rowSpan>1&&k.count*k.height<H*D.rowSpan?k={height:H,count:D.rowSpan}:k&&k.count>0&&k.height>H&&(H=k.height),H>A.height&&(A.height=H)}}k.count--}}function g(x,N,k,j,S){return x.map(function(A){return b(A,N,k,j,S)})}l.ellipsize=g;function b(x,N,k,j,S){var A=1e4*j.scaleFactor();if(N=Math.ceil(N*A)/A,N>=(0,c.getStringWidth)(x,k,j))return x;for(;N<(0,c.getStringWidth)(x+S,k,j)&&!(x.length<=1);)x=x.substring(0,x.length-1);return x.trim()+S}},964:function(s){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}s.exports=n}},a={};function i(s){var l=a[s];if(l!==void 0)return l.exports;var u=a[s]={exports:{}};return r[s].call(u.exports,u,u.exports,i),u.exports}var o={};return function(){var s=o;Object.defineProperty(s,"__esModule",{value:!0}),s.Cell=s.Column=s.Row=s.Table=s.CellHookData=s.__drawTable=s.__createTable=s.applyPlugin=void 0;var l=i(340),u=i(776),c=i(664),f=i(972),h=i(260);Object.defineProperty(s,"Table",{enumerable:!0,get:function(){return h.Table}});var p=i(172);Object.defineProperty(s,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var m=i(260);Object.defineProperty(s,"Cell",{enumerable:!0,get:function(){return m.Cell}}),Object.defineProperty(s,"Column",{enumerable:!0,get:function(){return m.Column}}),Object.defineProperty(s,"Row",{enumerable:!0,get:function(){return m.Row}});function v(N){(0,l.default)(N)}s.applyPlugin=v;function y(N,k){var j=(0,u.parseInput)(N,k),S=(0,f.createTable)(N,j);(0,c.drawTable)(N,S)}function g(N,k){var j=(0,u.parseInput)(N,k);return(0,f.createTable)(N,j)}s.__createTable=g;function b(N,k){(0,c.drawTable)(N,k)}s.__drawTable=b;try{var x=i(964);x.jsPDF&&(x=x.jsPDF),v(x)}catch{}s.default=y}(),o}()})})(ywe);const xwe=({employee:e,onClose:t,onGenerated:n,issuedByUserId:r})=>{const[a,i]=M.useState("SP1"),[o,s]=M.useState(""),[l,u]=M.useState(""),[c,f]=M.useState(!1),[h,p]=M.useState(null),[m,v]=M.useState(!1),y=[{value:"SP1",label:"Surat Peringatan 1",color:"yellow"},{value:"SP2",label:"Surat Peringatan 2",color:"orange"},{value:"SP3",label:"Surat Peringatan 3",color:"red"},{value:"termination",label:"Surat Pemberhentian",color:"red"}],g=["Keterlambatan berulang","Tidak hadir tanpa keterangan","Melanggar peraturan perusahaan","Kinerja tidak memuaskan","Tidak mengikuti prosedur kerja","Pelanggaran disiplin kerja"],b=async()=>{if(!o.trim()){alert("Alasan peringatan harus diisi");return}if(!r){alert("Tidak dapat menentukan pengguna yang mengeluarkan surat");return}f(!0);try{const{data:S,error:A}=await Pe.rpc("generate_warning_letter",{p_user_id:e.id,p_warning_type:a,p_reason:o,p_description:l,p_issued_by:r});if(A)throw A;const{data:P,error:T}=await Pe.from("warning_letters").select("*").eq("id",S).single();if(T)throw T;p(P),n&&n(P),v(!0)}catch(S){console.error("Error generating warning letter:",S),alert("Gagal membuat surat peringatan: "+S.message)}finally{f(!1)}},x=()=>{if(h)try{const S=new wt;S.setFontSize(16),S.setFont("helvetica","bold"),S.text("PT. COMPANY NAME",105,20,{align:"center"}),S.setFontSize(12),S.setFont("helvetica","normal"),S.text("Jl. Contoh Alamat No. 123, Jakarta Selatan",105,28,{align:"center"}),S.text("Telp: (021) 1234-5678 | Email: info@company.com",105,34,{align:"center"}),S.setLineWidth(.5),S.line(20,38,190,38),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(`SURAT PERINGATAN ${h.warning_type}`,105,50,{align:"center"}),S.setFontSize(12),S.text(`Nomor: ${h.letter_number}`,105,58,{align:"center"}),S.setFontSize(12),S.setFont("helvetica","normal"),S.text("Kepada Yth:",20,70),S.text(`Nama: ${e.name}`,20,78),S.text(`Jabatan: ${e.title||"Karyawan"}`,20,86),S.text(`Departemen: ${e.department||"-"}`,20,94),S.text(`Tanggal: ${new Date(h.issue_date).toLocaleDateString("id-ID")}`,20,102),S.text("Dengan ini kami memberikan surat peringatan dengan alasan:",20,116);const A=S.splitTextToSize(h.reason,150);S.setFont("helvetica","bold"),S.text(A,30,124);let P=124+A.length*8;if(h.description){S.setFont("helvetica","normal");const D=S.splitTextToSize(h.description,150);S.text(D,20,P),P+=D.length*8+8}else P+=16;S.setFont("helvetica","normal");const E=S.splitTextToSize("Harap untuk lebih memperhatikan kedisiplinan kerja dan tidak mengulangi pelanggaran yang sama. Apabila pelanggaran ini terulang kembali, maka perusahaan akan mengambil tindakan lebih lanjut sesuai dengan peraturan perusahaan yang berlaku.",170);S.text(E,20,P),P+=E.length*8+16,S.text("Demikian surat peringatan ini dibuat untuk dapat diperhatikan dan dilaksanakan dengan sebaik-baiknya.",20,P),P+=24,S.text("Hormat kami,",20,P),S.text("Manajemen Perusahaan",20,P+8),P+=40,S.text("_____________________",20,P),S.text("Tanda Tangan & Stempel",20,P+8),S.text("Diterima oleh,",140,P-40),S.text("Karyawan",140,P-32),S.text("_____________________",140,P),S.text(`(${e.name})`,140,P+8),S.save(`SP_${h.warning_type}_${e.name}_${h.letter_number.replace(/\//g,"_")}.pdf`)}catch(S){console.error("Error generating PDF:",S),alert("Gagal membuat file PDF: "+S.message)}},N=()=>{if(!h)return;const S=`
SURAT PERINGATAN ${h.warning_type}
Nomor: ${h.letter_number}

Kepada: ${e.name}
Jabatan: ${e.title||"Karyawan"}
Tanggal: ${new Date(h.issue_date).toLocaleDateString("id-ID")}

Dengan ini kami memberikan surat peringatan ${h.warning_type} atas:
${h.reason}

${h.description}

Harap untuk lebih memperhatikan kedisiplinan kerja dan tidak mengulangi pelanggaran yang sama.

Apabila pelanggaran ini terulang kembali, maka perusahaan akan mengambil tindakan lebih lanjut sesuai dengan peraturan perusahaan yang berlaku.

Demikian surat peringatan ini dibuat untuk dapat diperhatikan dan dilaksanakan dengan sebaik-baiknya.

Hormat kami,
Manajemen Perusahaan


_____________________
Tanda Tangan & Stempel
    `,A=new Blob([S],{type:"text/plain"}),P=URL.createObjectURL(A),T=document.createElement("a");T.href=P,T.download=`SP_${h.warning_type}_${e.name}_${h.letter_number.replace(/\//g,"_")}.txt`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(P)},k=S=>{const A=y.find(P=>P.value===S);return(A==null?void 0:A.color)||"gray"},j=()=>{if(!h)return;const S=window.open("","_blank");S.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Surat Peringatan ${h.warning_type}</title>
        <style>
          body {
            font-family: Arial, sans-serif;
            margin: 40px;
            line-height: 1.5;
          }
          .header {
            text-align: center;
            margin-bottom: 30px;
          }
          .company-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
          }
          .company-address {
            font-size: 14px;
            margin-bottom: 5px;
          }
          .divider {
            border-top: 2px solid #000;
            margin: 20px 0;
          }
          .letter-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
          }
          .letter-number {
            text-align: center;
            font-size: 14px;
            margin-bottom: 30px;
          }
          .recipient {
            margin-bottom: 20px;
          }
          .content {
            margin-bottom: 30px;
          }
          .reason {
            margin-left: 20px;
            font-weight: bold;
            margin-bottom: 20px;
          }
          .description {
            margin-bottom: 20px;
          }
          .warning {
            margin-bottom: 30px;
          }
          .closing {
            margin-bottom: 30px;
          }
          .signature {
            display: flex;
            justify-content: space-between;
          }
          .signature-block {
            width: 45%;
          }
          .signature-line {
            border-top: 1px solid #000;
            margin-top: 50px;
            width: 80%;
          }
          @media print {
            .no-print {
              display: none;
            }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">PT. COMPANY NAME</div>
          <div class="company-address">Jl. Contoh Alamat No. 123, Jakarta Selatan</div>
          <div class="company-address">Telp: (021) 1234-5678 | Email: info@company.com</div>
        </div>
        
        <div class="divider"></div>
        
        <div class="letter-title">SURAT PERINGATAN ${h.warning_type}</div>
        <div class="letter-number">Nomor: ${h.letter_number}</div>
        
        <div class="recipient">
          <div>Kepada Yth:</div>
          <div>Nama: ${e.name}</div>
          <div>Jabatan: ${e.title||"Karyawan"}</div>
          <div>Departemen: ${e.department||"-"}</div>
          <div>Tanggal: ${new Date(h.issue_date).toLocaleDateString("id-ID")}</div>
        </div>
        
        <div class="content">
          <div>Dengan ini kami memberikan surat peringatan dengan alasan:</div>
          <div class="reason">${h.reason}</div>
          
          ${h.description?`<div class="description">${h.description}</div>`:""}
          
          <div class="warning">
            Harap untuk lebih memperhatikan kedisiplinan kerja dan tidak mengulangi pelanggaran yang sama. 
            Apabila pelanggaran ini terulang kembali, maka perusahaan akan mengambil tindakan lebih lanjut 
            sesuai dengan peraturan perusahaan yang berlaku.
          </div>
          
          <div class="closing">
            Demikian surat peringatan ini dibuat untuk dapat diperhatikan dan dilaksanakan dengan sebaik-baiknya.
          </div>
        </div>
        
        <div class="signature">
          <div class="signature-block">
            <div>Hormat kami,</div>
            <div>Manajemen Perusahaan</div>
            <div class="signature-line"></div>
            <div>Tanda Tangan & Stempel</div>
          </div>
          
          <div class="signature-block">
            <div>Diterima oleh,</div>
            <div>Karyawan</div>
            <div class="signature-line"></div>
            <div>(${e.name})</div>
          </div>
        </div>
        
        <div class="no-print" style="text-align: center; margin-top: 30px;">
          <button onclick="window.print()" style="padding: 10px 20px; background: #4F46E5; color: white; border: none; border-radius: 5px; cursor: pointer;">
            Print Surat Peringatan
          </button>
        </div>
      </body>
      </html>
    `),S.document.close(),S.onload=function(){S.focus(),setTimeout(()=>{S.print()},500)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(vc,{className:"h-6 w-6 text-red-600"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Buat Surat Peringatan"})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),m?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(vc,{className:"h-6 w-6 text-green-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-green-800 font-medium",children:"Surat Peringatan Berhasil Dibuat"}),d.jsxs("p",{className:"text-green-700 text-sm",children:["Nomor: ",h.letter_number]})]})]})}),d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["SURAT PERINGATAN ",h.warning_type]}),d.jsxs("p",{className:"text-gray-600",children:["Nomor: ",h.letter_number]})]}),d.jsxs("div",{className:"space-y-4 text-sm",children:[d.jsxs("div",{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Kepada:"})," ",e.name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Jabatan:"})," ",e.title||"Karyawan"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tanggal:"})," ",new Date(h.issue_date).toLocaleDateString("id-ID")]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("p",{className:"mb-2",children:["Dengan ini kami memberikan surat peringatan ",h.warning_type," atas:"]}),d.jsx("p",{className:"font-medium",children:h.reason})]}),h.description&&d.jsx("div",{className:"border-t pt-4",children:d.jsx("p",{children:h.description})}),d.jsx("div",{className:"border-t pt-4",children:d.jsx("p",{children:"Harap untuk lebih memperhatikan kedisiplinan kerja dan tidak mengulangi pelanggaran yang sama."})})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsx("button",{onClick:t,className:"px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Tutup"}),d.jsx("button",{onClick:N,className:"px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(mv,{className:"h-4 w-4"}),d.jsx("span",{children:"Download TXT"})]})}),d.jsx("button",{onClick:x,className:"px-4 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Download PDF"})]})}),d.jsx("button",{onClick:j,className:"px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Vq,{className:"h-4 w-4"}),d.jsx("span",{children:"Print Surat"})]})}),d.jsx("button",{onClick:()=>alert("Fitur kirim email akan segera tersedia"),className:"px-4 py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(u1,{className:"h-4 w-4"}),d.jsx("span",{children:"Kirim Email"})]})})]})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Informasi Karyawan"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Nama:"}),d.jsx("span",{className:"ml-2 font-medium",children:e.name})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Jabatan:"}),d.jsx("span",{className:"ml-2 font-medium",children:e.title||"Karyawan"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Departemen:"}),d.jsx("span",{className:"ml-2 font-medium",children:e.department||"-"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"ID:"}),d.jsx("span",{className:"ml-2 font-medium",children:e.employee_id||"-"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Jenis Peringatan"}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(S=>d.jsx("button",{type:"button",onClick:()=>i(S.value),className:`p-3 rounded-lg border-2 transition-all text-left ${a===S.value?`border-${S.color}-500 bg-${S.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Qn,{className:`h-4 w-4 text-${S.color}-500`}),d.jsx("span",{className:"font-medium",children:S.label})]})},S.value))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alasan Peringatan *"}),d.jsxs("select",{value:o,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-2",children:[d.jsx("option",{value:"",children:"Pilih alasan..."}),g.map(S=>d.jsx("option",{value:S,children:S},S)),d.jsx("option",{value:"custom",children:"Alasan lainnya..."})]}),(o==="custom"||!g.includes(o))&&d.jsx("input",{type:"text",value:o==="custom"?"":o,onChange:S=>s(S.target.value),placeholder:"Masukkan alasan peringatan...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi Tambahan"}),d.jsx("textarea",{value:l,onChange:S=>u(S.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jelaskan detail pelanggaran atau tindakan yang diharapkan..."})]}),d.jsx("div",{className:`p-4 rounded-lg border-l-4 border-${k(a)}-500 bg-${k(a)}-50`,children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Qn,{className:`h-5 w-5 text-${k(a)}-600 flex-shrink-0 mt-0.5`}),d.jsxs("div",{children:[d.jsx("p",{className:`text-${k(a)}-800 font-medium`,children:"Peringatan Penting"}),d.jsx("p",{className:`text-${k(a)}-700 text-sm mt-1`,children:"Surat peringatan akan dikirim ke karyawan dan tersimpan dalam sistem. Pastikan informasi yang dimasukkan sudah benar."})]})]})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{type:"button",onClick:b,disabled:!o.trim()||c,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d.jsx("span",{children:"Membuat Surat..."})]}):d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(z_,{className:"h-4 w-4"}),d.jsx("span",{children:"Buat & Kirim Surat"})]})})]})]})]})})})},Bc=({user:e,profile:t})=>{const n=Za(),r=B_(),[a,i]=M.useState(!1),[o,s]=M.useState(!1),l=async()=>{try{await Pe.auth.signOut(),await window.Swal.fire({icon:"success",title:"Logout Berhasil",text:"Anda telah berhasil logout."}),n("/login")}catch(p){console.error("Failed to log out:",p)}},u=[{title:"Dashboard",icon:d.jsx(Zm,{className:"h-5 w-5"}),path:"/admin",active:r.pathname==="/admin"},{title:"Master Data",icon:d.jsx(eg,{className:"h-5 w-5"}),submenu:[{title:"Kelola Pengguna",icon:d.jsx(WT,{className:"h-5 w-5"}),path:"/admin/users",active:r.pathname==="/admin/users"},{title:"Kelola Departemen",icon:d.jsx(ba,{className:"h-5 w-5"}),path:"/admin/departments",active:r.pathname==="/admin/departments"},{title:"Kelola Jabatan",icon:d.jsx(tg,{className:"h-5 w-5"}),path:"/admin/positions",active:r.pathname==="/admin/positions"},{title:"Kelola Bank",icon:d.jsx(eg,{className:"h-5 w-5"}),path:"/admin/bank",active:r.pathname==="/admin/bank"}]},{title:"Kelola Absensi",icon:d.jsx(Fd,{className:"h-5 w-5"}),path:"/admin/attendance",active:r.pathname==="/admin/attendance"},{title:"Kelola Pembayaran",icon:d.jsx(Gh,{className:"h-5 w-5"}),path:"/admin/salary-payment",active:r.pathname==="/admin/salary-payment"},{title:"Lokasi Kantor",icon:d.jsx(Uo,{className:"h-5 w-5"}),path:"/admin/location",active:r.pathname==="/admin/location"}],[c,f]=M.useState(["Master Data"]),h=p=>{f(m=>m.includes(p)?m.filter(v=>v!==p):[...m,p])};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"lg:hidden fixed top-3 left-4 z-50 print:hidden",children:d.jsx("button",{onClick:()=>s(!o),className:"p-2 rounded-lg bg-white shadow-md text-gray-700 hover:bg-gray-100",children:o?d.jsx(al,{className:"h-5 w-5"}):d.jsx(Gq,{className:"h-5 w-5"})})}),d.jsx("div",{className:`lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300 ${o?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>s(!1)}),d.jsx("div",{className:`fixed inset-y-0 left-0 z-40 bg-white shadow-lg transition-all duration-300 ease-in-out
          ${a?"w-20":"w-64"}
          ${o?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          print:hidden
          w-11/12 max-w-xs lg:w-64
        `,style:{maxWidth:a?"5rem":void 0},children:d.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[d.jsx("div",{className:"flex items-center justify-center h-16 bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:d.jsxs("div",{className:`flex items-center ${a?"justify-center":"justify-start px-4"}`,children:[d.jsx(ba,{className:"h-8 w-8 flex-shrink-0"}),!a&&d.jsx("span",{className:"ml-2 text-xl font-bold",children:"Admin Panel"})]})}),d.jsxs("div",{className:`flex items-center ${a?"justify-center py-4":"px-4 py-4"} border-b border-gray-200`,children:[d.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:t!=null&&t.avatar_url?d.jsx("img",{src:t.avatar_url,alt:t.name,className:"w-10 h-10 rounded-full object-cover"}):d.jsx(gc,{className:"h-5 w-5 text-blue-600"})}),!a&&d.jsxs("div",{className:"ml-3 overflow-hidden",children:[d.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(t==null?void 0:t.name)||"Admin"}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:(t==null?void 0:t.email)||(e==null?void 0:e.email)})]})]}),d.jsx("nav",{className:"flex-1 overflow-y-auto py-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:d.jsx("ul",{className:"space-y-1",children:u.map(p=>d.jsx("li",{children:p.submenu?d.jsxs("div",{children:[d.jsxs("button",{onClick:()=>h(p.title),className:`w-full flex items-center ${a?"justify-center":"justify-between px-4"} py-3 text-sm font-medium transition-colors text-gray-700 hover:bg-gray-100`,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"text-gray-500",children:p.icon}),!a&&d.jsx("span",{className:"ml-3",children:p.title})]}),!a&&d.jsx("span",{className:`transform transition-transform ${c.includes(p.title)?"rotate-90":""}`,children:""})]}),!a&&c.includes(p.title)&&d.jsx("ul",{className:"ml-2 md:ml-4 space-y-1",children:p.submenu.map(m=>d.jsx("li",{children:d.jsxs("button",{onClick:()=>{n(m.path),window.innerWidth<1024&&s(!1)},className:`w-full flex items-center justify-start px-3 md:px-4 py-2 text-sm font-medium transition-colors
                                  ${m.active?"text-blue-700 bg-blue-50 border-r-4 border-blue-500":"text-gray-600 hover:bg-gray-100"}`,children:[d.jsx("span",{className:`${m.active?"text-blue-600":"text-gray-400"}`,children:m.icon}),d.jsx("span",{className:"ml-3",children:m.title})]})},m.path))})]}):d.jsxs("button",{onClick:()=>{n(p.path),window.innerWidth<1024&&s(!1)},className:`w-full flex items-center ${a?"justify-center":"justify-start px-4"} py-3 text-sm font-medium transition-colors
                        ${p.active?"text-blue-700 bg-blue-50 border-r-4 border-blue-500":"text-gray-700 hover:bg-gray-100"}`,children:[d.jsx("span",{className:`${p.active?"text-blue-600":"text-gray-500"}`,children:p.icon}),!a&&d.jsx("span",{className:"ml-3",children:p.title})]})},p.title))})}),d.jsx("div",{className:"p-4 border-t border-gray-200",children:d.jsxs("button",{onClick:l,className:`w-full flex items-center ${a?"justify-center":"justify-start"} py-2 px-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors`,children:[d.jsx(HT,{className:"h-5 w-5"}),!a&&d.jsx("span",{className:"ml-3",children:"Logout"})]})})]})})]})},wwe=()=>{var he;const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState(!0),[s,l]=M.useState({totalUsers:0,totalAttendance:0,todayAttendance:0,activeUsers:0,totalSalaryPaid:0,avgDailySalary:0,lateEmployees:0,activeWarnings:0,totalPositions:0,activeDepartments:0,absentToday:0}),[u,c]=M.useState([]),[f,h]=M.useState([]),[p,m]=M.useState([]),[v,y]=M.useState({});M.useState(null),M.useState(null);const[g,b]=M.useState(!1),[x,N]=M.useState(null),[k,j]=M.useState(!1),[S,A]=M.useState(!1),[P,T]=M.useState(!1),[E,D]=M.useState({enabled:!0,required_for_admin:!1}),[R,F]=M.useState([]);M.useEffect(()=>{H()},[]);const H=async()=>{try{const{data:{user:$}}=await Pe.auth.getUser();if(!$){e("/login");return}const{data:X}=await Pe.from("profiles").select("*").eq("id",$.id).single();if(!X||X.role!=="admin"){e("/dashboard");return}n($),a(X),await B()}catch($){console.error("Error checking access:",$),e("/login")}finally{o(!1)}},B=async()=>{var $,X;try{const ae=new Date().toISOString().split("T")[0],[le,Se,Ee,me]=await Promise.all([Pe.from("profiles").select("id, role, status",{count:"exact"}),Pe.from("attendance").select("id",{count:"exact"}),Pe.from("attendance").select("*").gte("timestamp",`${ae}T00:00:00`).lte("timestamp",`${ae}T23:59:59`),Pe.from("positions").select("id, department",{count:"exact"})]),{data:ie}=await Pe.from("profiles").select("id, name, email, avatar_url, employee_id, department, role, status").eq("role","karyawan").eq("status","active"),{data:Ve}=await Pe.from("attendance").select(`
          *,
          profiles!inner(id, name, email, avatar_url, employee_id, department, role)
        `).gte("timestamp",`${ae}T00:00:00`).lte("timestamp",`${ae}T23:59:59`).eq("status","berhasil"),be=(Ve==null?void 0:Ve.filter(rt=>rt.type==="masuk").map(rt=>rt.user_id))||[],fe=(ie==null?void 0:ie.filter(rt=>!be.includes(rt.id)&&rt.role!=="admin"))||[];if(fe.length>0){const rt=fe.map(Ke=>({user_id:Ke.id,type:"absent",timestamp:new Date().toISOString(),status:"tidak_hadir",notes:"Tidak hadir - tidak melakukan absensi masuk",is_late:!1,late_minutes:0,work_hours:0}));await Pe.from("attendance").upsert(rt,{onConflict:"user_id,timestamp",ignoreDuplicates:!0})}const _e=(Ve==null?void 0:Ve.filter(rt=>rt.type==="masuk"&&rt.is_late))||[],{data:je}=await Pe.from("employee_salaries").select("daily_salary").eq("is_active",!0),Re=(je==null?void 0:je.reduce((rt,Ke)=>rt+Ke.daily_salary*22,0))||0,Ge=(je==null?void 0:je.length)>0?je.reduce((rt,Ke)=>rt+Ke.daily_salary,0)/je.length:0,{data:Je}=await Pe.from("attendance_warnings").select("id").eq("is_resolved",!1),Ye=[...new Set(($=me.data)==null?void 0:$.map(rt=>rt.department).filter(Boolean))];l({totalUsers:le.count||0,totalAttendance:Se.count||0,todayAttendance:be.length,activeUsers:((X=le.data)==null?void 0:X.filter(rt=>rt.status==="active").length)||0,totalSalaryPaid:Re,avgDailySalary:Ge,lateEmployees:_e.length,activeWarnings:(Je==null?void 0:Je.length)||0,totalPositions:me.count||0,activeDepartments:Ye.length,absentToday:fe.length}),h(_e),m(fe);const{data:ct}=await Pe.from("attendance").select(`
          *,
          profiles!inner(name, role, department, avatar_url, employee_id)
        `).order("timestamp",{ascending:!1}).limit(15);c(ct||[]);const{data:dt}=await Pe.from("system_settings").select("*"),At={};dt==null||dt.forEach(rt=>{At[rt.setting_key]=rt.setting_value}),y(At);const Qe=dt==null?void 0:dt.find(rt=>rt.setting_key==="camera_verification");Qe!=null&&Qe.setting_value&&D(Qe.setting_value)}catch(ae){console.error("Error fetching dashboard data:",ae)}finally{try{const ae=new Date;ae.setDate(ae.getDate()-7);const{data:le,error:Se}=await Pe.from("attendance").select("timestamp, status, is_late, type").gte("timestamp",ae.toISOString());if(Se)console.error("Error fetching weekly attendance:",Se);else{const Ee=U(le);F(Ee)}}catch(ae){console.error("Error processing chart data",ae)}}},U=$=>{const X={};for(let ae=6;ae>=0;ae--){const le=new Date;le.setDate(le.getDate()-ae);const Se=le.toISOString().split("T")[0];X[Se]={name:le.toLocaleDateString("id-ID",{weekday:"short"}),Hadir:0,Terlambat:0,"Tidak Hadir":0}}return $.forEach(ae=>{const le=ae.timestamp.split("T")[0];X[le]&&((ae.type==="masuk"||ae.type==="keluar")&&ae.status==="berhasil"?ae.type==="masuk"&&(X[le].Hadir+=1,ae.is_late&&(X[le].Terlambat+=1)):ae.status==="tidak_hadir"&&(X[le]["Tidak Hadir"]+=1))}),Object.values(X)},W=async()=>{try{const{error:$}=await Pe.from("system_settings").upsert({setting_key:"camera_verification",setting_value:{...E,updated_by:t.id,updated_at:new Date().toISOString()},description:"Controls whether face verification is required for attendance",is_enabled:!0,updated_at:new Date().toISOString()},{onConflict:"setting_key"});if($)throw $;await Wt.fire({icon:"success",title:"Berhasil",text:"Pengaturan verifikasi kamera berhasil disimpan!"}),T(!1)}catch($){console.error("Error saving camera settings:",$),await Wt.fire({icon:"error",title:"Gagal",text:"Gagal menyimpan pengaturan verifikasi kamera"})}},z=$=>{N($),b(!0)},J=async $=>{b(!1),await Wt.fire({icon:"success",title:"Surat Peringatan",text:`Surat peringatan ${$.warning_type} berhasil dibuat dan dikirim ke ${x.name}`}),B()},ee=async $=>{$?(N($),j(!0)):(console.error("Attempted to view details for a null/undefined employee."),await Wt.fire({icon:"error",title:"Gagal",text:"Gagal menampilkan detail: data karyawan tidak ditemukan."}))},L=async($,X,ae,le)=>{try{await Pe.from("notifications").insert([{user_id:$,admin_id:t.id,type:X,title:ae,message:le,data:{timestamp:new Date().toISOString(),sent_by:r.name},is_read:!1}])}catch(Se){console.error("Error sending notification:",Se)}},q=async $=>{var X;try{await L($.user_id||$.id,"late_warning","Peringatan Keterlambatan",`Anda terlambat ${$.late_minutes} menit hari ini. Harap lebih memperhatikan kedisiplinan waktu.`),await Wt.fire({icon:"success",title:"Notifikasi Dikirim",text:`Notifikasi peringatan telah dikirim ke ${((X=$.profiles)==null?void 0:X.name)||$.name}`})}catch{await Wt.fire({icon:"error",title:"Gagal",text:"Gagal mengirim notifikasi"})}},Y=async $=>{try{await L($.id,"absence_warning","Peringatan Ketidakhadiran","Anda tidak hadir hari ini tanpa keterangan. Harap segera menghubungi atasan atau HR."),await Wt.fire({icon:"success",title:"Notifikasi Dikirim",text:`Notifikasi peringatan telah dikirim ke ${$.name}`})}catch{await Wt.fire({icon:"error",title:"Gagal",text:"Gagal mengirim notifikasi"})}},te=$=>{switch($){case"berhasil":return"text-green-600 bg-green-100";case"tidak_hadir":return"text-red-600 bg-red-100";case"wajah_tidak_valid":return"text-red-600 bg-red-100";case"lokasi_tidak_valid":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},K=$=>{switch($){case"berhasil":return d.jsx(ln,{className:"h-4 w-4"});case"tidak_hadir":return d.jsx(zn,{className:"h-4 w-4"});case"wajah_tidak_valid":case"lokasi_tidak_valid":return d.jsx(zn,{className:"h-4 w-4"});default:return d.jsx(Qn,{className:"h-4 w-4"})}},ce=$=>new Date($).toLocaleString("id-ID",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"});return i?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat dashboard admin..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:t,profile:r}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 pt-16 lg:pt-0",children:[d.jsx("div",{className:"bg-white shadow-sm border-b fixed top-0 left-0 right-0 lg:relative z-30",children:d.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-3 lg:py-4",children:[d.jsx("div",{className:"lg:hidden"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"Dashboard Admin"}),d.jsx("p",{className:"hidden md:block text-sm text-gray-600",children:"Ringkasan aktivitas dan statistik sistem"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("button",{onClick:()=>T(!0),className:"p-2 lg:px-3 lg:py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[d.jsx($T,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden lg:inline ml-2",children:"Pengaturan"})]}),d.jsxs("button",{onClick:()=>A(!0),className:"p-2 lg:px-3 lg:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(mv,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden lg:inline ml-2",children:"Export"})]}),d.jsx(oB,{userId:t==null?void 0:t.id,userRole:r==null?void 0:r.role})]})]})})}),d.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-8",children:[d.jsx(Zy,{icon:gc,title:"Karyawan",value:s.totalUsers,footer:`${s.activeUsers} aktif`,color:"blue"}),d.jsx(Zy,{icon:ln,title:"Hadir",value:s.todayAttendance,footer:`${s.absentToday} absen`,color:"green"}),d.jsx(Zy,{icon:Qn,title:"Terlambat",value:s.lateEmployees,footer:"Hari ini",color:"orange"}),d.jsx(Zy,{icon:Ol,title:"Peringatan",value:s.activeWarnings,footer:"Aktif",color:"red"})]}),(f.length>0||p.length>0)&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[f.length>0&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-orange-50",children:d.jsxs("h2",{className:"text-lg font-medium text-orange-900",children:["Karyawan Terlambat Hari Ini (",f.length,")"]})}),d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"space-y-3",children:f.slice(0,5).map($=>{var X;return d.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:d.jsx(qa,{className:"h-4 w-4 text-orange-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:(X=$.profiles)==null?void 0:X.name}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Terlambat ",$.late_minutes," menit"]})]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>ee($.profiles),className:"text-blue-600 hover:text-blue-800 p-1",title:"Lihat Detail",children:d.jsx($N,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>q($),className:"text-orange-600 hover:text-orange-800 p-1",title:"Kirim Peringatan",children:d.jsx(Ol,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>z($.profiles),className:"text-red-600 hover:text-red-800 p-1",title:"Buat SP",children:d.jsx(vc,{className:"h-4 w-4"})})]})]},$.id)})})})]}),p.length>0&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-red-50",children:d.jsxs("h2",{className:"text-lg font-medium text-red-900",children:["Karyawan Tidak Hadir Hari Ini (",p.length,")"]})}),d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"space-y-3",children:p.slice(0,5).map($=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:d.jsx(qa,{className:"h-4 w-4 text-red-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:$.name}),d.jsx("p",{className:"text-sm text-gray-600",children:$.department||"Tidak ada departemen"})]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>ee($),className:"text-blue-600 hover:text-blue-800 p-1",title:"Lihat Detail",children:d.jsx($N,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>Y($),className:"text-red-600 hover:text-red-800 p-1",title:"Kirim Peringatan",children:d.jsx(Ol,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>z($),className:"text-red-600 hover:text-red-800 p-1",title:"Buat SP",children:d.jsx(vc,{className:"h-4 w-4"})})]})]},$.id))})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[d.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(MC,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Aktivitas Terbaru"})]})}),d.jsx("div",{className:"p-6 max-h-[450px] overflow-y-auto",children:u.length>0?d.jsx("div",{className:"space-y-4",children:u.map($=>{var X,ae,le;return d.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50 transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("div",{className:`flex items-center space-x-2 px-2 py-1 rounded-full text-xs font-medium ${te($.status)}`,children:[K($.status),d.jsx("span",{className:"capitalize",children:$.type==="masuk"?"Masuk":$.type==="keluar"?"Keluar":"Tidak Hadir"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[(X=$.profiles)!=null&&X.avatar_url?d.jsx("img",{src:$.profiles.avatar_url,alt:$.profiles.name,className:"w-7 h-7 rounded-full object-cover"}):d.jsx("div",{className:"w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center",children:d.jsx(qa,{className:"h-4 w-4 text-gray-500"})}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-sm text-gray-900",children:((ae=$.profiles)==null?void 0:ae.name)||"Unknown User"}),d.jsxs("p",{className:"text-xs text-gray-600",children:[ce($.timestamp),$.is_late&&d.jsxs("span",{className:"ml-2 text-red-600",children:[" Terlambat ",$.late_minutes," menit"]})]})]})]})]}),d.jsx("div",{className:"flex items-center space-x-2",children:($.is_late||$.status==="tidak_hadir")&&((le=$.profiles)==null?void 0:le.role)!=="admin"&&d.jsx("button",{onClick:()=>z($.profiles),className:"text-xs text-red-600 hover:text-red-800 underline",children:"Buat SP"})})]},$.id)})}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(MC,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500",children:"Belum ada aktivitas terbaru"})]})})]}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(Nwe,{data:R})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(eg,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Informasi Sistem"})]})}),d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(eg,{className:"h-8 w-8 text-blue-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Database"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Supabase PostgreSQL"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(hs,{className:"h-8 w-8 text-green-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Jam Kerja"}),d.jsx("p",{className:"text-sm text-gray-600",children:"08:00 - 17:00"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Uo,{className:"h-8 w-8 text-purple-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Radius Kantor"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[((he=v.office_location)==null?void 0:he.radius)||100," meter"]})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Bd,{className:"h-8 w-8 text-orange-600"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Verifikasi Wajah"}),d.jsx("p",{className:"text-sm text-gray-600",children:E.enabled?"Aktif":"Nonaktif"})]})]})]})})]})]})]}),g&&x&&d.jsx(xwe,{employee:x,onClose:()=>b(!1),onGenerated:J,issuedByUserId:t.id}),S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Export Database"}),d.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(zn,{className:"h-6 w-6"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"bg-blue-50 p-6 rounded-lg",children:d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx(eg,{className:"h-8 w-8 text-blue-600 flex-shrink-0 mt-1"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Export Database Supabase"}),d.jsx("p",{className:"text-blue-700 mb-4",children:"Untuk mengekspor seluruh database Supabase termasuk skema, data, dan storage, ikuti langkah-langkah berikut:"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[d.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"1. Akses Dashboard Supabase"}),d.jsxs("p",{className:"text-sm text-blue-700",children:["Login ke dashboard Supabase project Anda di ",d.jsx("a",{href:"https://app.supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"app.supabase.com"})]})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[d.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"2. Buka Menu Database"}),d.jsx("p",{className:"text-sm text-blue-700",children:'Pilih menu "Database"  "Backups" dari sidebar'})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[d.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"3. Generate Backup"}),d.jsx("p",{className:"text-sm text-blue-700",children:'Klik tombol "Generate backup" untuk membuat backup terbaru dari database Anda'})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[d.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"4. Download Backup"}),d.jsx("p",{className:"text-sm text-blue-700",children:'Setelah backup selesai dibuat, klik tombol "Download" untuk mengunduh file SQL'})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:[d.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"5. Export Storage (Opsional)"}),d.jsx("p",{className:"text-sm text-blue-700",children:'Untuk mengekspor file storage (seperti foto wajah), gunakan menu "Storage" dan download setiap bucket secara terpisah'})]})]})]})]})}),d.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-yellow-800 font-medium",children:"Catatan Penting"}),d.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Backup database berisi semua data sensitif. Pastikan untuk menyimpannya dengan aman dan tidak membagikannya kepada pihak yang tidak berwenang."})]})]})}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tutup"})})]})]})})}),P&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pengaturan Sistem"}),d.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(zn,{className:"h-6 w-6"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"Verifikasi Kamera"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"camera-enabled",checked:E.enabled,onChange:$=>D(X=>({...X,enabled:$.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"camera-enabled",className:"ml-2 block text-sm text-gray-900",children:"Aktifkan verifikasi wajah untuk absensi"})]}),d.jsx("div",{className:"p-3 bg-white rounded-lg",children:d.jsx("p",{className:"text-sm text-gray-600",children:E.enabled?"Karyawan harus melakukan verifikasi wajah saat absensi":"Karyawan dapat absensi tanpa verifikasi wajah"})}),d.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:d.jsxs("div",{className:"flex items-start space-x-2",children:[d.jsx(Qn,{className:"h-4 w-4 text-yellow-600 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-sm text-yellow-700",children:"Menonaktifkan verifikasi wajah akan mengurangi keamanan sistem absensi, tetapi dapat berguna jika terjadi masalah dengan kamera atau perangkat."})]})})]})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{onClick:W,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Simpan Pengaturan"})]})})]})]})]})})})]})},Zy=({icon:e,title:t,value:n,footer:r,color:a})=>{const i={blue:{bg:"bg-blue-100",text:"text-blue-600"},green:{bg:"bg-green-100",text:"text-green-600"},orange:{bg:"bg-orange-100",text:"text-orange-600"},red:{bg:"bg-red-100",text:"text-red-600"}},o=i[a]||i.blue;return d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-12 h-12 ${o.bg} rounded-full flex items-center justify-center`,children:d.jsx(e,{className:`h-6 w-6 ${o.text}`})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n}),d.jsx("p",{className:`text-xs ${o.text}`,children:r})]})]})})},Nwe=({data:e})=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 h-full",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx(Zm,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Absensi 7 Hari Terakhir"})]}),d.jsx("div",{style:{height:"300px"},children:d.jsx(u0e,{width:"100%",height:"100%",children:d.jsxs(y2e,{data:e,margin:{top:5,right:20,left:-10,bottom:5},children:[d.jsx(pW,{strokeDasharray:"3 3",vertical:!1}),d.jsx(QA,{dataKey:"name",fontSize:12,tickLine:!1,axisLine:!1}),d.jsx(ZA,{allowDecimals:!1,fontSize:12,tickLine:!1,axisLine:!1}),d.jsx(r0e,{contentStyle:{borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",border:"1px solid #e5e7eb"}}),d.jsx(R2,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:"12px"}}),d.jsx(wg,{dataKey:"Hadir",stackId:"a",fill:"#22c55e",radius:[4,4,0,0]}),d.jsx(wg,{dataKey:"Terlambat",stackId:"a",fill:"#f97316",radius:[4,4,0,0]}),d.jsx(wg,{dataKey:"Tidak Hadir",stackId:"a",fill:"#ef4444",radius:[4,4,0,0]})]})})})]}),Swe=()=>{const e=Za(),[t,n]=M.useState([]),[r,a]=M.useState([]),[i,o]=M.useState([]),[s,l]=M.useState(!0),[u,c]=M.useState(!1),[f,h]=M.useState(!1),[p,m]=M.useState(""),[v,y]=M.useState(""),[g,b]=M.useState(""),[x,N]=M.useState(null),[k,j]=M.useState(null),[S,A]=M.useState({name:"",email:"",password:"",phone:"",location:"",title:"",bio:"",role:"karyawan",position_id:"",employee_id:"",department:"",salary:0,bank_id:"",bank_account_number:"",bank_account_name:""}),[P,T]=M.useState(null),[E,D]=M.useState(null),[R,F]=M.useState(1),[H,B]=M.useState(!1),[U,W]=M.useState(null),[z,J]=M.useState(null);M.useEffect(()=>{ee()},[]);const ee=async()=>{try{const{data:{user:be}}=await Pe.auth.getUser();if(!be){e("/login");return}const{data:fe}=await Pe.from("profiles").select("role").eq("id",be.id).single();if(!fe||fe.role!=="admin"){e("/dashboard");return}N(be),j(fe),await Promise.all([L(),q(),Y()])}catch(be){console.error("Error checking access:",be),e("/login")}finally{l(!1)}},L=async()=>{c(!0);try{const{data:be,error:fe}=await Pe.from("profiles").select(`
          *,
          positions(name_id, department, base_salary),
          bank_info(bank_name, bank_logo)
        `).order("created_at",{ascending:!1});if(fe)throw fe;n(be||[])}catch(be){console.error("Error fetching users:",be)}finally{c(!1)}},q=async()=>{try{const{data:be,error:fe}=await Pe.from("positions").select("*").eq("is_active",!0).order("name_id");if(fe)throw fe;a(be||[])}catch(be){console.error("Error fetching positions:",be)}},Y=async()=>{try{const{data:be,error:fe}=await Pe.from("bank_info").select("*").eq("is_active",!0).order("bank_name");if(fe)throw fe;o(be||[])}catch(be){console.error("Error fetching banks:",be)}},te=be=>{const{name:fe,value:_e}=be.target;if(fe==="position_id"){const je=r.find(Re=>Re.id===_e);if(je){const Re=je.name_id.substring(0,3).toUpperCase(),Ge=Date.now().toString().slice(-4),Je=`${Re}${Ge}`;A(Ye=>({...Ye,position_id:_e,title:je.name_id,department:je.department||"",salary:je.base_salary||0,employee_id:Je}))}else A(Re=>({...Re,position_id:_e,title:"",department:"",salary:0,employee_id:""}))}else A(fe==="name"||fe==="full_name"?je=>({...je,[fe]:_e,bank_account_name:_e}):je=>({...je,[fe]:_e}))},K=(be,fe)=>{T(be),D(fe),console.log(" Face captured",{photoBlob:be,fingerprint:fe})},ce=be=>{if(be.preventDefault(),S.password.length<6){Wt.fire({icon:"error",title:"Gagal",text:"Password minimal 6 karakter"});return}if(!S.position_id){Wt.fire({icon:"error",title:"Gagal",text:"Silakan pilih jabatan"});return}S.role==="admin"?he():F(2)},he=async()=>{if(console.log("DEBUG createUser:",{facePhoto:P,faceFingerprint:E}),S.role!=="admin"){if(!P){Wt.fire({icon:"error",title:"Gagal",text:"Silakan ambil foto wajah terlebih dahulu"});return}if(!E){Wt.fire({icon:"error",title:"Gagal",text:"Fingerprint wajah tidak terdeteksi, silakan ulangi pengambilan foto."});return}}B(!0);try{const{data:be,error:fe}=await Pe.auth.signUp({email:S.email,password:S.password,options:{data:{name:S.name,role:S.role}}});if(fe)throw fe;if(!be.user)throw new Error("Pendaftaran gagal");const _e=be.user.id;let je=null;if(S.role!=="admin"&&P){const ct=`${_e}-face-${Date.now()}.jpg`;await L3(P,"face-photos",ct),je=I3("face-photos",ct)}await new Promise(ct=>setTimeout(ct,1e3));const Re={id:_e,name:S.name,full_name:S.name,email:S.email,phone:S.phone,location:S.location,title:S.title,bio:S.bio||`${ae(S.role)} di sistem absensi`,avatar_url:je,role:S.role,position_id:S.position_id,employee_id:S.employee_id,department:S.department,salary:S.salary,bank_id:S.bank_id||null,bank_account_number:S.bank_account_number||null,bank_account_name:S.bank_account_name||S.name,is_face_registered:S.role==="admin"?!0:!!je,status:"active",join_date:new Date().toISOString().split("T")[0],contract_start_date:new Date().toISOString().split("T")[0],contract_type:"permanent",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:Ge}=await Pe.from("profiles").insert([Re]);if(Ge){const{error:ct}=await Pe.from("profiles").update(Re).eq("id",_e);if(ct)throw new Error("Gagal membuat profil user")}const Je={user_id:_e,daily_salary:S.salary/22,overtime_rate:1.5,bonus:0,deduction:0,effective_date:new Date().toISOString().split("T")[0],is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:Ye}=await Pe.from("employee_salaries").insert([Je]);Wt.fire({icon:"success",title:"Berhasil",html:`<b>${S.name}</b> (${ae(S.role)}) berhasil ditambahkan dengan jabatan <b>${S.title}</b> dan gaji <b>${me(S.salary)}</b>!`,showConfirmButton:!0}),$(),await L()}catch(be){Wt.fire({icon:"error",title:"Gagal",text:be.message||"Terjadi kesalahan saat membuat user"})}finally{B(!1)}},$=()=>{A({name:"",email:"",password:"",phone:"",location:"",title:"",bio:"",role:"karyawan",position_id:"",employee_id:"",department:"",salary:0,bank_id:"",bank_account_number:"",bank_account_name:""}),T(null),D(null),F(1),h(!1),W(null),J(null)},X=async(be,fe)=>{if((await Wt.fire({title:"Hapus User?",text:"Apakah Anda yakin ingin menghapus user ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed){c(!0);try{const{error:je}=await Pe.from("profiles").delete().eq("id",be);if(je)throw je;await L(),Wt.fire({icon:"success",title:"Berhasil",text:"User berhasil dihapus"})}catch{Wt.fire({icon:"error",title:"Gagal",text:"Gagal menghapus user"})}finally{c(!1)}}},ae=be=>{switch(be){case"admin":return"Administrator";case"karyawan":return"Karyawan";default:return"Karyawan"}},le=be=>{switch(be){case"admin":return d.jsx(Qm,{className:"h-4 w-4"});default:return d.jsx(qa,{className:"h-4 w-4"})}},Se=be=>{switch(be){case"admin":return"bg-blue-100 text-blue-800";default:return"bg-green-100 text-green-800"}},Ee=be=>(x==null?void 0:x.id)!==be,me=be=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(be),ie=()=>[...new Set(t.map(fe=>{var _e;return fe.department||((_e=fe.positions)==null?void 0:_e.department)}).filter(Boolean))],Ve=t.filter(be=>{var Re,Ge,Je;const fe=((Re=be.name)==null?void 0:Re.toLowerCase().includes(p.toLowerCase()))||((Ge=be.email)==null?void 0:Ge.toLowerCase().includes(p.toLowerCase()))||be.employee_id&&be.employee_id.toLowerCase().includes(p.toLowerCase()),_e=v===""||be.department===v||((Je=be.positions)==null?void 0:Je.department)===v,je=g===""||be.role===g;return fe&&_e&&je});return s?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data pengguna..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:x,profile:k}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Pengguna"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Tambah dan kelola semua pengguna sistem (Admin tanpa verifikasi wajah)"})]}),d.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(c1,{className:"h-4 w-4"}),d.jsx("span",{children:"Tambah User"})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari berdasarkan nama, email, atau ID karyawan...",value:p,onChange:be=>m(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),d.jsx("div",{className:"sm:w-48",children:d.jsxs("select",{value:v,onChange:be=>y(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Departemen"}),ie().map(be=>d.jsx("option",{value:be,children:be},be))]})}),d.jsx("div",{className:"sm:w-48",children:d.jsxs("select",{value:g,onChange:be=>b(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Role"}),d.jsx("option",{value:"karyawan",children:"Karyawan"}),d.jsx("option",{value:"admin",children:"Administrator"})]})})]})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(gc,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Daftar Pengguna (",Ve.length,")"]})]})}),u?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):Ve.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pengguna"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan & Departemen"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gaji"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontak"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ve.map(be=>{var fe,_e,je;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:be.avatar_url?d.jsx("img",{src:be.avatar_url,alt:be.name,className:"w-10 h-10 rounded-full object-cover"}):d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${be.role==="admin"?"bg-blue-100":"bg-green-100"}`,children:le(be.role)})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:be.name}),d.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",be.employee_id||"Belum diatur"]})]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:((fe=be.positions)==null?void 0:fe.name_id)||be.title||ae(be.role)}),d.jsx("div",{className:"text-sm text-gray-500",children:((_e=be.positions)==null?void 0:_e.department)||be.department||"Belum diatur"})]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:me(((je=be.positions)==null?void 0:je.base_salary)||be.salary||0)}),d.jsx("div",{className:"text-sm text-gray-500",children:"per bulan"})]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[d.jsx(u1,{className:"h-4 w-4 mr-2 text-gray-400"}),be.email]}),be.phone&&d.jsxs("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[d.jsx(VT,{className:"h-4 w-4 mr-2 text-gray-400"}),be.phone]})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"space-y-1",children:[d.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Se(be.role)}`,children:[be.role==="admin"&&d.jsx(Qm,{className:"h-3 w-3 mr-1"}),ae(be.role)]}),d.jsx("div",{className:"text-xs text-gray-500",children:be.role==="admin"?d.jsx("span",{className:"text-blue-600",children:"Tanpa verifikasi wajah"}):be.is_face_registered?d.jsx("span",{className:"text-green-600",children:"Wajah terdaftar"}):d.jsx("span",{className:"text-yellow-600",children:"Wajah belum terdaftar"})}),be.bank_info&&d.jsx("div",{className:"text-xs text-gray-500",children:d.jsxs("span",{className:"text-blue-600",children:["Bank: ",be.bank_info.bank_name]})})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsx("div",{className:"flex space-x-2",children:Ee(be.id)?d.jsx("button",{onClick:()=>X(be.id,be.role),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Hapus User",children:d.jsx(d1,{className:"h-4 w-4"})}):d.jsx("span",{className:"text-gray-400 text-xs",children:"Akun Anda"})})})]},be.id)})})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(qa,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada pengguna ditemukan"}),d.jsx("p",{className:"text-gray-400",children:"Coba sesuaikan pencarian atau filter Anda"})]})]})]})]}),f&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:R===1?"Tambah Pengguna Baru":"Setup Foto Wajah"}),d.jsx("button",{onClick:$,className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),d.jsx("div",{className:"flex items-center justify-center mb-6",children:[1,2].map(be=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${R>=be?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:be<R?d.jsx(ln,{className:"h-4 w-4"}):be}),be<2&&d.jsx("div",{className:`w-12 h-1 mx-2 ${R>be?"bg-blue-600":"bg-gray-200"}`})]},be))}),R===1?d.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"Pilih Jabatan"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jabatan *"}),d.jsxs("select",{name:"position_id",value:S.position_id,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Pilih Jabatan..."}),r.map(be=>d.jsxs("option",{value:be.id,children:[be.name_id," - ",be.department," (",me(be.base_salary||0),")"]},be.id))]})]}),S.position_id&&d.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Karyawan (Auto)"}),d.jsx("input",{type:"text",value:S.employee_id,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gaji Bulanan (Auto)"}),d.jsx("input",{type:"text",value:me(S.salary),readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap *"}),d.jsx("input",{type:"text",name:"name",value:S.name,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan nama lengkap"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),d.jsx("input",{type:"email",name:"email",value:S.email,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan email"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),d.jsx("input",{type:"password",name:"password",value:S.password,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Minimal 6 karakter"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),d.jsxs("select",{name:"role",value:S.role,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"karyawan",children:"Karyawan"}),d.jsx("option",{value:"admin",children:"Administrator"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"No. Telepon"}),d.jsx("input",{type:"tel",name:"phone",value:S.phone,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: +62-21-1234567"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lokasi"}),d.jsx("input",{type:"text",name:"location",value:S.location,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: Jakarta, Indonesia"})]})]}),d.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-green-900 mb-3",children:"Informasi Bank (Opsional)"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Bank"}),d.jsxs("select",{name:"bank_id",value:S.bank_id,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Pilih Bank..."}),i.map(be=>d.jsx("option",{value:be.id,children:be.bank_name},be.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Rekening"}),d.jsx("input",{type:"text",name:"bank_account_number",value:S.bank_account_number,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nomor rekening"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Pemilik Rekening (Auto)"}),d.jsx("input",{type:"text",value:S.bank_account_name,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"Otomatis sesuai nama lengkap"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),d.jsx("textarea",{name:"bio",value:S.bio,onChange:te,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Deskripsi singkat tentang pengguna"})]}),S.role==="admin"&&d.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Qm,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-blue-800 font-medium",children:"Administrator"}),d.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Administrator tidak memerlukan verifikasi wajah dan dapat langsung mengakses semua fitur sistem."})]})]})}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:S.role==="admin"?"Buat Administrator":"Lanjut ke Foto Wajah"})]})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx(Bd,{className:"h-12 w-12 text-blue-600 mx-auto mb-3"}),d.jsx("p",{className:"text-gray-600",children:"Ambil foto wajah yang jelas untuk verifikasi absensi. Sistem kami menggunakan teknologi pengenalan wajah yang aman dan cepat."})]}),d.jsx(l2,{onFaceCapture:K,isCapturing:H}),P&&E&&d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"inline-flex items-center space-x-2 text-green-600 mb-4",children:[d.jsx(ln,{className:"h-5 w-5"}),d.jsx("span",{children:"Foto wajah berhasil diambil dan diverifikasi!"})]})}),P&&!E&&d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"inline-flex items-center space-x-2 text-yellow-600 mb-4",children:[d.jsx(Qn,{className:"h-5 w-5"}),d.jsx("span",{children:"Fingerprint wajah tidak terdeteksi, silakan ulangi pengambilan foto."})]})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>F(1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Kembali"}),d.jsx("button",{onClick:he,disabled:!P||!E||H,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:H?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsxs("div",{className:"inline-flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("span",{children:"Membuat Akun..."})]}):"Buat Pengguna"})]})]})]})})})]})},kwe=({employee:e,onClose:t,onPaymentProcessed:n})=>{var k;const[r,a]=M.useState(!1),[i,o]=M.useState(null),[s,l]=M.useState(null),[u,c]=M.useState([]),[f,h]=M.useState(!1),[p,m]=M.useState({amount:0,payment_method:"bank_transfer",payment_reference:"",payment_period_start:new Date().toISOString().split("T")[0],payment_period_end:new Date().toISOString().split("T")[0],notes:""});M.useEffect(()=>{var j;if(e){let S=0;(j=e.positions)!=null&&j.base_salary?S=e.positions.base_salary:e.employee_salaries&&e.employee_salaries.length>0?S=e.employee_salaries[0].daily_salary*22||0:S=e.salary||0,m(A=>({...A,amount:S,notes:`Gaji bulan ${new Date().toLocaleString("id-ID",{month:"long",year:"numeric"})} untuk ${e.name}`})),v()}},[e]);const v=async()=>{if(e)try{const{data:j,error:S}=await Pe.from("salary_payments").select("*").eq("user_id",e.id).order("payment_date",{ascending:!1}).limit(5);if(S)throw S;c(j||[])}catch(j){console.error("Error fetching payment history:",j)}},y=j=>{const{name:S,value:A}=j.target;m({...p,[S]:A})},g=async j=>{var S,A,P,T,E;j.preventDefault(),a(!0),o(null),l(null);try{if(!e)throw new Error("Karyawan tidak ditemukan");if(!p.amount||p.amount<=0)throw new Error("Jumlah pembayaran harus lebih dari 0");if(p.payment_method==="bank_transfer"&&(!e.bank_info||!e.bank_account_number))throw new Error("Karyawan belum mengatur rekening bank. Gunakan metode pembayaran lain atau minta karyawan untuk mengatur rekening bank.");const{data:D,error:R}=await Pe.from("salary_payments").insert([{user_id:e.id,salary_id:(A=(S=e.employee_salaries)==null?void 0:S[0])==null?void 0:A.id,payment_date:new Date().toISOString().split("T")[0],payment_amount:parseFloat(p.amount),payment_method:p.payment_method,payment_status:"completed",payment_reference:p.payment_reference,payment_period_start:p.payment_period_start,payment_period_end:p.payment_period_end,notes:p.notes,created_by:(P=(await Pe.auth.getUser()).data.user)==null?void 0:P.id,payment_details:{processed_at:new Date().toISOString(),payment_method_details:p.payment_method==="bank_transfer"?{bank_name:(T=e.bank_info)==null?void 0:T.bank_name,account_number:e.bank_account_number}:{method:p.payment_method}}}]).select();if(R)throw R;if(e.employee_salaries&&e.employee_salaries.length>0){const{error:F}=await Pe.from("employee_salaries").update({payment_status:"paid",last_payment_date:new Date().toISOString().split("T")[0],payment_notes:p.notes,updated_at:new Date().toISOString()}).eq("id",e.employee_salaries[0].id);F&&console.error("Error updating salary status:",F)}else{const F=N()/22,{error:H}=await Pe.from("employee_salaries").insert([{user_id:e.id,daily_salary:F,overtime_rate:1.5,effective_date:new Date().toISOString().split("T")[0],payment_status:"paid",last_payment_date:new Date().toISOString().split("T")[0],payment_notes:p.notes,is_active:!0}]);H&&console.error("Error creating salary record:",H)}try{await Pe.from("notifications").insert([{user_id:e.id,admin_id:(E=(await Pe.auth.getUser()).data.user)==null?void 0:E.id,type:"salary_info",title:"Pembayaran Gaji",message:`Gaji Anda sebesar ${b(p.amount)} telah dibayarkan melalui ${p.payment_method==="bank_transfer"?"transfer bank":p.payment_method==="cash"?"tunai":"metode lainnya"}.`,data:{payment_id:D[0].id,amount:p.amount,payment_date:new Date().toISOString().split("T")[0],payment_method:p.payment_method},is_read:!1}])}catch(F){console.error("Error sending notification:",F)}l(`Pembayaran gaji sebesar ${b(p.amount)} untuk ${e.name} berhasil diproses!`),await v(),n&&n({employeeId:e.id,amount:p.amount,paymentMethod:p.payment_method,paymentDate:new Date().toISOString()}),setTimeout(()=>{l(null),m({amount:0,payment_method:"bank_transfer",payment_reference:"",payment_period_start:new Date().toISOString().split("T")[0],payment_period_end:new Date().toISOString().split("T")[0],notes:""})},3e3)}catch(D){console.error("Error processing payment:",D),o(D.message||"Gagal memproses pembayaran")}finally{a(!1)}},b=j=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(j),x=j=>new Date(j).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),N=()=>{var j;return(j=e.positions)!=null&&j.base_salary?e.positions.base_salary:e.employee_salaries&&e.employee_salaries.length>0?(e.employee_salaries[0].daily_salary||0)*22:e.salary||0};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-lg max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Proses Pembayaran Gaji"}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),s&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-green-700 font-medium",children:"Pembayaran Berhasil!"}),d.jsx("p",{className:"text-green-600 text-sm mt-1",children:s})]})]}),i&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-red-700 font-medium",children:"Pembayaran Gagal"}),d.jsx("p",{className:"text-red-600 text-sm mt-1",children:i})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"Informasi Karyawan"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(qa,{className:"h-5 w-5 text-blue-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-blue-700",children:"Nama"}),d.jsx("p",{className:"font-medium text-blue-900",children:e.name})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(tg,{className:"h-5 w-5 text-blue-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-blue-700",children:"Jabatan"}),d.jsx("p",{className:"font-medium text-blue-900",children:((k=e.positions)==null?void 0:k.name_id)||e.title||"Karyawan"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(ba,{className:"h-5 w-5 text-blue-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-blue-700",children:"Departemen"}),d.jsx("p",{className:"font-medium text-blue-900",children:e.department||"-"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Cg,{className:"h-5 w-5 text-blue-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-blue-700",children:"Gaji Bulanan"}),d.jsx("p",{className:"font-medium text-blue-900",children:b(N())})]})]})]})]}),d.jsxs("div",{className:`p-4 rounded-lg ${e.bank_info?"bg-green-50":"bg-yellow-50"}`,children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Informasi Rekening"}),e.bank_info?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(ba,{className:"h-5 w-5 text-gray-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Bank"}),d.jsx("p",{className:"font-medium text-gray-900",children:e.bank_info.bank_name})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Gh,{className:"h-5 w-5 text-gray-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Nomor Rekening"}),d.jsx("p",{className:"font-medium text-gray-900",children:e.bank_account_number})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(qa,{className:"h-5 w-5 text-gray-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Atas Nama"}),d.jsx("p",{className:"font-medium text-gray-900",children:e.bank_account_name||e.name})]})]})]}):d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-yellow-500"}),d.jsx("p",{className:"text-yellow-700",children:"Karyawan belum mengatur informasi rekening bank"})]})]}),d.jsxs("form",{onSubmit:g,children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Detail Pembayaran"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jumlah Pembayaran (IDR) *"}),d.jsxs("div",{className:"relative",children:[d.jsx(Cg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"number",name:"amount",value:p.amount,onChange:y,required:!0,min:"1",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 5000000"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metode Pembayaran *"}),d.jsxs("select",{name:"payment_method",value:p.payment_method,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"bank_transfer",children:"Transfer Bank"}),d.jsx("option",{value:"cash",children:"Tunai"}),d.jsx("option",{value:"other",children:"Lainnya"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referensi Pembayaran"}),d.jsx("input",{type:"text",name:"payment_reference",value:p.payment_reference,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: TRF/2025/06/001"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Pembayaran"}),d.jsxs("div",{className:"relative",children:[d.jsx(Fd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"date",name:"payment_date",value:new Date().toISOString().split("T")[0],readOnly:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]}),d.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periode Awal"}),d.jsx("input",{type:"date",name:"payment_period_start",value:p.payment_period_start,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periode Akhir"}),d.jsx("input",{type:"date",name:"payment_period_end",value:p.payment_period_end,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catatan"}),d.jsx("textarea",{name:"notes",value:p.notes,onChange:y,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Catatan tambahan tentang pembayaran ini..."})]})]}),d.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[d.jsx("h3",{className:"font-medium text-green-900 mb-3",children:"Ringkasan Pembayaran"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Total Pembayaran:"}),d.jsx("span",{className:"font-bold text-green-900",children:b(p.amount)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Metode Pembayaran:"}),d.jsx("span",{className:"font-medium text-green-900",children:p.payment_method==="bank_transfer"?"Transfer Bank":p.payment_method==="cash"?"Tunai":"Lainnya"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Penerima:"}),d.jsx("span",{className:"font-medium text-green-900",children:e.name})]}),p.payment_method==="bank_transfer"&&e.bank_info&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-green-700",children:"Rekening Tujuan:"}),d.jsxs("span",{className:"font-medium text-green-900",children:[e.bank_info.bank_name," - ",e.bank_account_number]})]})]})]}),d.jsxs("div",{className:"flex space-x-3 mt-6",children:[d.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsxs("div",{className:"inline-flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("span",{children:"Memproses..."})]}):d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(z_,{className:"h-4 w-4"}),d.jsx("span",{children:"Proses Pembayaran"})]})})]})]}),d.jsx("div",{className:"mt-6",children:d.jsxs("button",{onClick:()=>h(!f),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 transition-colors",children:[d.jsx(hs,{className:"h-4 w-4"}),d.jsx("span",{children:f?"Sembunyikan Riwayat":"Lihat Riwayat Pembayaran"})]})}),f&&d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Riwayat Pembayaran"}),u.length>0?d.jsx("div",{className:"space-y-3",children:u.map(j=>d.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Fd,{className:"h-4 w-4 text-gray-500"}),d.jsx("span",{className:"font-medium text-gray-900",children:x(j.payment_date)})]}),d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.payment_status==="completed"?"bg-green-100 text-green-800":j.payment_status==="pending"?"bg-yellow-100 text-yellow-800":j.payment_status==="processing"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:j.payment_status==="completed"?"Selesai":j.payment_status==="pending"?"Tertunda":j.payment_status==="processing"?"Diproses":"Gagal"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm text-gray-600",children:[j.payment_method==="bank_transfer"?"Transfer Bank":j.payment_method==="cash"?"Tunai":"Lainnya",j.payment_reference&&` (${j.payment_reference})`]}),j.notes&&d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.notes})]}),d.jsx("p",{className:"font-bold text-gray-900",children:b(j.payment_amount)})]})]},j.id))}):d.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[d.jsx(vc,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),d.jsx("p",{className:"text-gray-500",children:"Belum ada riwayat pembayaran"})]})]})]})]})})}):null},_we=()=>{const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState(!0),[s,l]=M.useState(!1),[u,c]=M.useState([]),[f,h]=M.useState([]),[p,m]=M.useState(""),[v,y]=M.useState(""),[g,b]=M.useState(""),[x,N]=M.useState(null),[k,j]=M.useState(!1),[S,A]=M.useState(null),[P,T]=M.useState(null),[E,D]=M.useState({totalPaid:0,pendingPayments:0,totalEmployees:0,paidEmployees:0});M.useEffect(()=>{R()},[]);const R=async()=>{try{const{data:{user:K}}=await Pe.auth.getUser();if(!K){e("/login");return}const{data:ce}=await Pe.from("profiles").select("role").eq("id",K.id).single();if(!ce||ce.role!=="admin"){e("/dashboard");return}n(K),a(ce),await Promise.all([F(),H()])}catch(K){console.error("Error checking access:",K),e("/login")}finally{o(!1)}},F=async()=>{l(!0);try{const{data:K,error:ce}=await Pe.from("profiles").select(`
          *,
          employee_salaries(*),
          positions(*),
          bank_info(*)
        `).order("name");if(ce)throw ce;c(K||[]);const he=(K==null?void 0:K.length)||0,$=(K==null?void 0:K.filter(X=>{var ae,le;return((le=(ae=X.employee_salaries)==null?void 0:ae[0])==null?void 0:le.payment_status)==="paid"}).length)||0;D(X=>({...X,totalEmployees:he,paidEmployees:$}))}catch(K){console.error("Error fetching employees:",K),A("Gagal memuat data karyawan")}finally{l(!1)}},H=async()=>{l(!0);try{const{data:K,error:ce}=await Pe.from("salary_payments").select(`
          *,
          profiles:user_id(name, email, department, title, employee_id)
        `).order("payment_date",{ascending:!1}).limit(100);if(ce)throw ce;h(K||[]);const he=(K==null?void 0:K.reduce((X,ae)=>X+(ae.payment_amount||0),0))||0,$=(K==null?void 0:K.filter(X=>X.payment_status==="pending"||X.payment_status==="processing").length)||0;D(X=>({...X,totalPaid:he,pendingPayments:$}))}catch(K){console.error("Error fetching payments:",K),A("Gagal memuat data pembayaran")}finally{l(!1)}},B=async K=>{T(`Pembayaran gaji untuk ${x.name} berhasil diproses!`),j(!1),await Promise.all([F(),H()]),setTimeout(()=>{T(null)},3e3)},U=K=>{N(K),j(!0)},W=K=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(K),z=K=>new Date(K).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),J=K=>{switch(K){case"paid":return"bg-green-100 text-green-800";case"unpaid":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},ee=K=>{switch(K){case"paid":return"Dibayar";case"unpaid":return"Belum Dibayar";case"processing":return"Diproses";case"failed":return"Gagal";default:return"Tidak Diketahui"}},L=K=>{var ce;return(ce=K.positions)!=null&&ce.base_salary?K.positions.base_salary:K.employee_salaries&&K.employee_salaries.length>0?(K.employee_salaries[0].daily_salary||0)*22:K.salary||0},q=u.filter(K=>{var X,ae,le,Se,Ee;const ce=((X=K.name)==null?void 0:X.toLowerCase().includes(p.toLowerCase()))||((ae=K.email)==null?void 0:ae.toLowerCase().includes(p.toLowerCase()))||((le=K.employee_id)==null?void 0:le.toLowerCase().includes(p.toLowerCase())),he=!v||K.department===v,$=!g||((Ee=(Se=K.employee_salaries)==null?void 0:Se[0])==null?void 0:Ee.payment_status)===g;return ce&&he&&$}),Y=()=>[...new Set(u.map(ce=>ce.department).filter(Boolean))],te=()=>{if(f.length===0)return;const ce=[["Tanggal","Karyawan","Departemen","Jumlah","Metode","Status","Referensi","Catatan"],...f.map(ae=>{var le,Se;return[z(ae.payment_date),((le=ae.profiles)==null?void 0:le.name)||"Unknown",((Se=ae.profiles)==null?void 0:Se.department)||"-",ae.payment_amount,ae.payment_method==="bank_transfer"?"Transfer Bank":ae.payment_method==="cash"?"Tunai":"Lainnya",ae.payment_status,ae.payment_reference||"-",ae.notes||"-"]})].map(ae=>ae.join(",")).join(`
`),he=new Blob([ce],{type:"text/csv;charset=utf-8;"}),$=document.createElement("a"),X=URL.createObjectURL(he);$.setAttribute("href",X),$.setAttribute("download",`salary_payments_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(X)};return i?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data pembayaran..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:t,profile:r}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Pembayaran Gaji"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Proses pembayaran gaji karyawan dan lihat riwayat transaksi"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("button",{onClick:()=>{l(!0),Promise.all([F(),H()]).finally(()=>l(!1))},className:"flex items-center space-x-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",title:"Refresh Data",children:[d.jsx(F_,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),d.jsxs("button",{onClick:te,disabled:f.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[d.jsx(mv,{className:"h-4 w-4"}),d.jsx("span",{children:"Export CSV"})]})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[P&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:P}),d.jsx("button",{onClick:()=>T(null),className:"ml-auto text-green-500 hover:text-green-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),S&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:S}),d.jsx("button",{onClick:()=>A(null),className:"ml-auto text-red-500 hover:text-red-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:d.jsx(Cg,{className:"h-6 w-6 text-green-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Dibayarkan"}),d.jsx("p",{className:"text-xl font-bold text-gray-900",children:W(E.totalPaid)})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(qa,{className:"h-6 w-6 text-blue-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Karyawan Dibayar"}),d.jsx("p",{className:"text-xl font-bold text-gray-900",children:E.paidEmployees}),d.jsxs("p",{className:"text-xs text-blue-600",children:["dari ",E.totalEmployees," karyawan"]})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:d.jsx(hs,{className:"h-6 w-6 text-yellow-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pembayaran Tertunda"}),d.jsx("p",{className:"text-xl font-bold text-gray-900",children:E.pendingPayments})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:d.jsx(Gh,{className:"h-6 w-6 text-red-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Belum Dibayar"}),d.jsx("p",{className:"text-xl font-bold text-gray-900",children:E.totalEmployees-E.paidEmployees}),d.jsx("p",{className:"text-xs text-red-600",children:"karyawan"})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsx("div",{className:"md:col-span-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari nama, email, atau ID karyawan...",value:p,onChange:K=>m(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),d.jsx("div",{children:d.jsxs("select",{value:v,onChange:K=>y(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Departemen"}),Y().map(K=>d.jsx("option",{value:K,children:K},K))]})}),d.jsx("div",{children:d.jsxs("select",{value:g,onChange:K=>b(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Status"}),d.jsx("option",{value:"paid",children:"Sudah Dibayar"}),d.jsx("option",{value:"unpaid",children:"Belum Dibayar"}),d.jsx("option",{value:"processing",children:"Sedang Diproses"})]})})]})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Gh,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Daftar Gaji Karyawan (",q.length,")"]})]})}),s?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):q.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Karyawan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rekening Bank"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Pembayaran"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(K=>{var he,$;const ce=(he=K.employee_salaries)==null?void 0:he[0];return L(K),d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-blue-600 font-medium",children:K.name.charAt(0).toUpperCase()})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.name}),d.jsx("div",{className:"text-sm text-gray-500",children:K.email}),K.employee_id&&d.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",K.employee_id]})]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm text-gray-900",children:(($=K.positions)==null?void 0:$.name_id)||K.title||"Karyawan"}),d.jsx("div",{className:"text-sm text-gray-500",children:K.department||"Belum diatur"})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:K.bank_info?d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.bank_info.bank_name}),d.jsx("div",{className:"text-sm text-gray-500",children:K.bank_account_number})]}):d.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"Belum diatur"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J((ce==null?void 0:ce.payment_status)||"unpaid")}`,children:ee((ce==null?void 0:ce.payment_status)||"unpaid")}),(ce==null?void 0:ce.last_payment_date)&&d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Terakhir: ",z(ce.last_payment_date)]})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("button",{onClick:()=>U(K),className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:[d.jsx(z_,{className:"h-3.5 w-3.5 mr-1"}),d.jsx("span",{children:"Bayar"})]})})]},K.id)})})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(qa,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada karyawan ditemukan"}),d.jsx("p",{className:"text-gray-400",children:"Coba sesuaikan pencarian atau filter Anda"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(hs,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Riwayat Pembayaran Terbaru"})]})}),s?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):f.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Karyawan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jumlah"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metode"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referensi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.slice(0,10).map(K=>{var ce,he;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:z(K.payment_date)}),d.jsx("div",{className:"text-xs text-gray-500",children:new Date(K.created_at).toLocaleTimeString("id-ID")})]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:((ce=K.profiles)==null?void 0:ce.name)||"Unknown"}),d.jsx("div",{className:"text-xs text-gray-500",children:((he=K.profiles)==null?void 0:he.department)||"-"})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:W(K.payment_amount)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"text-sm text-gray-900",children:K.payment_method==="bank_transfer"?"Transfer Bank":K.payment_method==="cash"?"Tunai":"Lainnya"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K.payment_status==="completed"?"bg-green-100 text-green-800":K.payment_status==="pending"?"bg-yellow-100 text-yellow-800":K.payment_status==="processing"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:K.payment_status==="completed"?"Selesai":K.payment_status==="pending"?"Tertunda":K.payment_status==="processing"?"Diproses":"Gagal"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm text-gray-900",children:K.payment_reference||"-"}),K.notes&&d.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:K.notes})]})]},K.id)})})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(vc,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Belum ada riwayat pembayaran"}),d.jsx("p",{className:"text-gray-400",children:"Pembayaran yang diproses akan muncul di sini"})]})]})]})]}),k&&x&&d.jsx(kwe,{employee:x,onClose:()=>j(!1),onPaymentProcessed:B})]})},jwe=()=>{const e=Za(),[t,n]=M.useState([]),[r,a]=M.useState(!0),[i,o]=M.useState(!1),[s,l]=M.useState(""),[u,c]=M.useState(!1),[f,h]=M.useState(null),[p,m]=M.useState(null),[v,y]=M.useState(null),[g,b]=M.useState(null),[x,N]=M.useState(null),[k,j]=M.useState({name:"",description:"",head_name:"",is_active:!0});M.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:{user:H}}=await Pe.auth.getUser();if(!H){e("/login");return}const{data:B}=await Pe.from("profiles").select("role").eq("id",H.id).single();if(!B||B.role!=="admin"){e("/dashboard");return}b(H),N(B),await A()}catch(H){console.error("Error checking access:",H),e("/login")}finally{a(!1)}},A=async()=>{o(!0);try{const{data:H,error:B}=await Pe.from("departments").select("*").order("name");if(B)throw B;n(H||[])}catch(H){console.error("Error fetching departments:",H),m("Gagal memuat data departemen")}finally{o(!1)}},P=H=>{const{name:B,value:U,type:W,checked:z}=H.target;j(J=>({...J,[B]:W==="checkbox"?z:U}))},T=()=>{j({name:"",description:"",head_name:"",is_active:!0}),h(null),c(!1),m(null)},E=async H=>{if(H.preventDefault(),m(null),!k.name.trim()){m("Nama departemen harus diisi");return}o(!0);try{const B={...k,updated_at:new Date().toISOString()};if(f){const{error:U}=await Pe.from("departments").update(B).eq("id",f.id);if(U)throw U;y("Departemen berhasil diperbarui!")}else{B.created_at=new Date().toISOString();const{error:U}=await Pe.from("departments").insert([B]);if(U)throw U;y("Departemen berhasil ditambahkan!")}T(),await A(),setTimeout(()=>y(null),3e3)}catch(B){console.error("Error saving department:",B),m("Gagal menyimpan departemen: "+B.message)}finally{o(!1)}},D=H=>{j({name:H.name,description:H.description||"",head_name:H.head_name||"",is_active:H.is_active}),h(H),c(!0)},R=async H=>{var B;if(confirm("Apakah Anda yakin ingin menghapus departemen ini?")){o(!0);try{const{data:U,error:W}=await Pe.from("positions").select("id").eq("department",(B=t.find(J=>J.id===H))==null?void 0:B.name).limit(1);if(W)throw W;if(U&&U.length>0){m("Departemen tidak dapat dihapus karena masih digunakan oleh jabatan");return}const{error:z}=await Pe.from("departments").delete().eq("id",H);if(z)throw z;y("Departemen berhasil dihapus!"),await A(),setTimeout(()=>y(null),3e3)}catch(U){console.error("Error deleting department:",U),m("Gagal menghapus departemen: "+U.message)}finally{o(!1)}}},F=t.filter(H=>H.name.toLowerCase().includes(s.toLowerCase())||H.description&&H.description.toLowerCase().includes(s.toLowerCase())||H.head_name&&H.head_name.toLowerCase().includes(s.toLowerCase()));return r?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data departemen..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:g,profile:x}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Departemen"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Tambah, edit, dan kelola departemen perusahaan"})]}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(c1,{className:"h-4 w-4"}),d.jsx("span",{children:"Tambah Departemen"})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:v}),d.jsx("button",{onClick:()=>y(null),className:"ml-auto text-green-500 hover:text-green-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),p&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:p}),d.jsx("button",{onClick:()=>m(null),className:"ml-auto text-red-500 hover:text-red-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(ba,{className:"h-6 w-6 text-blue-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Departemen"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:d.jsx(ln,{className:"h-6 w-6 text-green-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Departemen Aktif"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(H=>H.is_active).length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:d.jsx(gc,{className:"h-6 w-6 text-purple-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dengan Kepala"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(H=>H.head_name).length})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari departemen...",value:s,onChange:H=>l(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(ba,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Daftar Departemen (",F.length,")"]})]})}),i?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):F.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Departemen"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kepala Departemen"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(H=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(ba,{className:"h-5 w-5 text-blue-600"})}),d.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.name})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"text-sm text-gray-900",children:H.description||"-"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(gc,{className:"h-4 w-4 text-gray-500"}),d.jsx("span",{className:"text-sm text-gray-900",children:H.head_name||"Belum diatur"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.is_active?"Aktif":"Tidak Aktif"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>D(H),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Edit Departemen",children:d.jsx(Jd,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>R(H.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Hapus Departemen",children:d.jsx(d1,{className:"h-4 w-4"})})]})})]},H.id))})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(ba,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada departemen ditemukan"}),d.jsx("p",{className:"text-gray-400",children:"Coba sesuaikan pencarian atau tambah departemen baru"})]})]})]})]}),u&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f?"Edit Departemen":"Tambah Departemen Baru"}),d.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:E,className:"space-y-6",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Informasi Departemen"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Departemen *"}),d.jsx("input",{type:"text",name:"name",value:k.name,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: IT, HR, Finance"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),d.jsx("textarea",{name:"description",value:k.description,onChange:P,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Deskripsi singkat tentang departemen..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kepala Departemen"}),d.jsx("input",{type:"text",name:"head_name",value:k.head_name,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nama kepala departemen"})]})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",name:"is_active",checked:k.is_active,onChange:P,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Departemen aktif (dapat dipilih saat menambah jabatan)"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:T,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:f?"Perbarui Departemen":"Simpan Departemen"})]})})]})]})]})})})]})},Awe=()=>{const e=Za(),[t,n]=M.useState([]),[r,a]=M.useState([]),[i,o]=M.useState(!0),[s,l]=M.useState(!1),[u,c]=M.useState(""),[f,h]=M.useState(""),[p,m]=M.useState(!1),[v,y]=M.useState(null),[g,b]=M.useState(null),[x,N]=M.useState(null),[k,j]=M.useState(null),[S,A]=M.useState(null),[P,T]=M.useState({name_id:"",name_en:"",description_id:"",description_en:"",base_salary:0,min_salary:0,max_salary:0,department:"",is_active:!0});M.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:{user:ee}}=await Pe.auth.getUser();if(!ee){e("/login");return}const{data:L}=await Pe.from("profiles").select("role").eq("id",ee.id).single();if(!L||L.role!=="admin"){e("/dashboard");return}j(ee),A(L),await Promise.all([D(),R()])}catch(ee){console.error("Error checking access:",ee),e("/login")}finally{o(!1)}},D=async()=>{l(!0);try{const{data:ee,error:L}=await Pe.from("positions").select("*").order("created_at",{ascending:!1});if(L)throw L;n(ee||[])}catch(ee){console.error("Error fetching positions:",ee),b("Gagal memuat data jabatan")}finally{l(!1)}},R=async()=>{try{const{data:ee,error:L}=await Pe.from("departments").select("*").eq("is_active",!0).order("name");if(L)throw L;a(ee||[])}catch(ee){console.error("Error fetching departments:",ee)}},F=ee=>{const{name:L,value:q,type:Y,checked:te}=ee.target;T(K=>({...K,[L]:Y==="checkbox"?te:q}))},H=()=>{T({name_id:"",name_en:"",description_id:"",description_en:"",base_salary:0,min_salary:0,max_salary:0,department:"",is_active:!0}),y(null),m(!1),b(null)},B=async ee=>{if(ee.preventDefault(),b(null),!P.name_id.trim()||!P.name_en.trim()){b("Nama jabatan (Indonesia dan English) harus diisi");return}if(!P.department){b("Departemen harus dipilih");return}if(P.min_salary>P.max_salary){b("Gaji minimum tidak boleh lebih besar dari gaji maksimum");return}l(!0);try{const L={name_id:P.name_id,name_en:P.name_en,description_id:P.description_id||null,description_en:P.description_en||null,base_salary:parseFloat(P.base_salary)||0,min_salary:parseFloat(P.min_salary)||0,max_salary:parseFloat(P.max_salary)||0,department:P.department,is_active:P.is_active,updated_at:new Date().toISOString()};if(v){const{error:q}=await Pe.from("positions").update(L).eq("id",v.id);if(q)throw q;N("Jabatan berhasil diperbarui!")}else{L.created_at=new Date().toISOString();const{error:q}=await Pe.from("positions").insert([L]);if(q)throw q;N("Jabatan berhasil ditambahkan!")}H(),await D(),setTimeout(()=>N(null),3e3)}catch(L){console.error("Error saving position:",L),b("Gagal menyimpan jabatan: "+L.message)}finally{l(!1)}},U=ee=>{T({name_id:ee.name_id,name_en:ee.name_en,description_id:ee.description_id||"",description_en:ee.description_en||"",base_salary:ee.base_salary||0,min_salary:ee.min_salary||0,max_salary:ee.max_salary||0,department:ee.department||"",is_active:ee.is_active}),y(ee),m(!0)},W=async ee=>{if(confirm("Apakah Anda yakin ingin menghapus jabatan ini?")){l(!0);try{const{data:L,error:q}=await Pe.from("profiles").select("id").eq("position_id",ee).limit(1);if(q)throw q;if(L&&L.length>0){b("Jabatan tidak dapat dihapus karena masih digunakan oleh karyawan");return}const{error:Y}=await Pe.from("positions").delete().eq("id",ee);if(Y)throw Y;N("Jabatan berhasil dihapus!"),await D(),setTimeout(()=>N(null),3e3)}catch(L){console.error("Error deleting position:",L),b("Gagal menghapus jabatan: "+L.message)}finally{l(!1)}}},z=ee=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(ee),J=t.filter(ee=>{var Y;const L=ee.name_id.toLowerCase().includes(u.toLowerCase())||ee.name_en.toLowerCase().includes(u.toLowerCase())||ee.department&&ee.department.toLowerCase().includes(u.toLowerCase()),q=f===""||ee.department===((Y=r.find(te=>te.id===f))==null?void 0:Y.name);return L&&q});return i?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data jabatan..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:k,profile:S}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Jabatan"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Tambah, edit, dan kelola jabatan beserta struktur gaji"})]}),d.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(c1,{className:"h-4 w-4"}),d.jsx("span",{children:"Tambah Jabatan"})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:x}),d.jsx("button",{onClick:()=>N(null),className:"ml-auto text-green-500 hover:text-green-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),g&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:g}),d.jsx("button",{onClick:()=>b(null),className:"ml-auto text-red-500 hover:text-red-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(tg,{className:"h-6 w-6 text-blue-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Jabatan"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:d.jsx(gc,{className:"h-6 w-6 text-green-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Jabatan Aktif"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(ee=>ee.is_active).length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:d.jsx(Cg,{className:"h-6 w-6 text-purple-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rata-rata Gaji"}),d.jsx("p",{className:"text-lg font-bold text-gray-900",children:t.length>0?z(t.reduce((ee,L)=>ee+(L.base_salary||0),0)/t.length):z(0)})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari jabatan atau departemen...",value:u,onChange:ee=>c(ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),d.jsx("div",{className:"sm:w-48",children:d.jsxs("select",{value:f,onChange:ee=>h(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Departemen"}),r.map(ee=>d.jsx("option",{value:ee.id,children:ee.name},ee.id))]})})]})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(tg,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Daftar Jabatan (",J.length,")"]})]})}),s?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):J.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jabatan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Departemen"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gaji Pokok"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rentang Gaji"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(ee=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee.name_id}),d.jsx("div",{className:"text-sm text-gray-500",children:ee.name_en}),ee.description_id&&d.jsx("div",{className:"text-xs text-gray-400 mt-1",children:ee.description_id})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:ee.department||"Tidak ada"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"text-sm font-medium text-gray-900",children:z(ee.base_salary||0)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"text-sm text-gray-900",children:[z(ee.min_salary||0)," - ",z(ee.max_salary||0)]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ee.is_active?"Aktif":"Tidak Aktif"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>U(ee),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Edit Jabatan",children:d.jsx(Jd,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>W(ee.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Hapus Jabatan",children:d.jsx(d1,{className:"h-4 w-4"})})]})})]},ee.id))})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(tg,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada jabatan ditemukan"}),d.jsx("p",{className:"text-gray-400",children:"Coba sesuaikan pencarian atau tambah jabatan baru"})]})]})]})]}),p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v?"Edit Jabatan":"Tambah Jabatan Baru"}),d.jsx("button",{onClick:H,className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:B,className:"space-y-6",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Informasi Dasar"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Jabatan (Indonesia) *"}),d.jsx("input",{type:"text",name:"name_id",value:P.name_id,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: Manager IT"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Jabatan (English) *"}),d.jsx("input",{type:"text",name:"name_en",value:P.name_en,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Example: IT Manager"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Departemen *"}),d.jsxs("select",{name:"department",value:P.department,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Pilih Departemen..."}),r.map(ee=>d.jsx("option",{value:ee.name,children:ee.name},ee.id))]})]})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Deskripsi Jabatan"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi (Indonesia)"}),d.jsx("textarea",{name:"description_id",value:P.description_id,onChange:F,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Deskripsi tugas dan tanggung jawab..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi (English)"}),d.jsx("textarea",{name:"description_en",value:P.description_en,onChange:F,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Job description and responsibilities..."})]})]})]}),d.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Informasi Gaji"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gaji Pokok (IDR)"}),d.jsx("input",{type:"number",name:"base_salary",value:P.base_salary,onChange:F,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5000000"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gaji Minimum (IDR)"}),d.jsx("input",{type:"number",name:"min_salary",value:P.min_salary,onChange:F,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"4000000"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gaji Maksimum (IDR)"}),d.jsx("input",{type:"number",name:"max_salary",value:P.max_salary,onChange:F,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"8000000"})]})]}),d.jsx("div",{className:"mt-3 p-3 bg-white rounded border",children:d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Gaji Pokok:"})," ",z(P.base_salary||0)]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Rentang:"})," ",z(P.min_salary||0)," - ",z(P.max_salary||0)]})]})})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",name:"is_active",checked:P.is_active,onChange:F,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Jabatan aktif (dapat dipilih saat menambah karyawan)"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:H,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{type:"submit",disabled:s,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:v?"Perbarui Jabatan":"Simpan Jabatan"})]})})]})]})]})})})]})},Cwe=()=>{var ce,he,$;const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState([]),[s,l]=M.useState(!0),[u,c]=M.useState(!1),[f,h]=M.useState("face"),[p,m]=M.useState(!1),[v,y]=M.useState(null),[g,b]=M.useState(null),[x,N]=M.useState(!1),[k,j]=M.useState(null),[S,A]=M.useState(null),[P,T]=M.useState({name:"",full_name:"",phone:"",location:"",bio:""}),[E,D]=M.useState({bank_id:"",bank_account_number:"",bank_account_name:""}),[R,F]=M.useState({currentPassword:"",newPassword:"",confirmPassword:""});M.useEffect(()=>{H()},[]);const H=async()=>{try{const{data:{user:X}}=await Pe.auth.getUser();if(!X){e("/login");return}n(X),await Promise.all([B(X.id),U()])}catch(X){console.error("Error checking user:",X),e("/login")}finally{l(!1)}},B=async X=>{try{const{data:ae,error:le}=await Pe.from("profiles").select(`
          *,
          positions(name_id, department),
          bank_info(id, bank_name, bank_logo)
        `).eq("id",X).maybeSingle();if(le&&le.code!=="PGRST116")throw le;ae&&(a(ae),c(ae.role==="admin"),T({name:ae.name||"",full_name:ae.full_name||"",phone:ae.phone||"",location:ae.location||"",bio:ae.bio||""}),D({bank_id:ae.bank_id||"",bank_account_number:ae.bank_account_number||"",bank_account_name:ae.bank_account_name||ae.full_name||ae.name||""}))}catch(ae){console.error("Error fetching profile:",ae)}},U=async()=>{try{const{data:X,error:ae}=await Pe.from("bank_info").select("*").eq("is_active",!0).order("bank_name");if(ae)throw ae;o(X||[])}catch(X){console.error("Error fetching banks:",X)}},W=(X,ae)=>{y(X),b(ae),j(null),console.log(" Face captured with custom fingerprint")},z=async()=>{if(!v||!g){j("Silakan ambil foto wajah terlebih dahulu");return}N(!0),j(null);try{console.log("Starting face photo save process...");const X=Date.now(),ae=`${t.id}-face-${X}.jpg`;console.log("Uploading face photo with filename:",ae),await L3(v,"face-photos",ae);const le=I3("face-photos",ae);console.log("Photo uploaded successfully, URL:",le);const{error:Se}=await Pe.from("profiles").update({avatar_url:le,is_face_registered:!0,updated_at:new Date().toISOString()}).eq("id",t.id);if(Se)throw console.error("Profile update error:",Se),new Error(`Gagal menyimpan profil: ${Se.message}`);console.log("Profile updated successfully"),A("Foto wajah berhasil disimpan!"),await B(t.id),y(null),b(null)}catch(X){console.error("Error saving face photo:",X),j(X.message||"Gagal menyimpan foto wajah. Silakan coba lagi.")}finally{N(!1)}},J=async()=>{N(!0),j(null);try{const{error:X}=await Pe.from("profiles").update({...P,updated_at:new Date().toISOString()}).eq("id",t.id);if(X)throw X;A("Profil berhasil diperbarui!"),await B(t.id)}catch(X){console.error("Error updating profile:",X),j("Gagal memperbarui profil. Silakan coba lagi.")}finally{N(!1)}},ee=async()=>{if(!E.bank_id){j("Silakan pilih bank terlebih dahulu");return}if(!E.bank_account_number){j("Nomor rekening harus diisi");return}N(!0),j(null);try{const{error:X}=await Pe.from("profiles").update({bank_id:E.bank_id,bank_account_number:E.bank_account_number,bank_account_name:E.bank_account_name,updated_at:new Date().toISOString()}).eq("id",t.id);if(X)throw X;A("Informasi rekening berhasil diperbarui!"),await B(t.id)}catch(X){console.error("Error updating bank info:",X),j("Gagal memperbarui informasi rekening. Silakan coba lagi.")}finally{N(!1)}},L=async()=>{if(R.newPassword!==R.confirmPassword){j("Password baru dan konfirmasi password tidak cocok");return}if(R.newPassword.length<6){j("Password baru minimal 6 karakter");return}N(!0),j(null);try{const{error:X}=await Pe.auth.updateUser({password:R.newPassword});if(X)throw X;await Pe.from("password_changes").insert([{user_id:t.id,changed_by:t.id,change_type:"self_change",ip_address:"unknown",user_agent:navigator.userAgent}]),A("Password berhasil diubah!"),F({currentPassword:"",newPassword:"",confirmPassword:""})}catch(X){console.error("Error changing password:",X),j("Gagal mengubah password. Silakan coba lagi.")}finally{N(!1)}},q=X=>{const{name:ae,value:le}=X.target;T(Se=>({...Se,[ae]:le}))},Y=X=>{const{name:ae,value:le}=X.target;D(Se=>({...Se,[ae]:le}))},te=X=>{const{name:ae,value:le}=X.target;F(Se=>({...Se,[ae]:le}))},K=()=>i.find(X=>X.id===E.bank_id);return s?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat profil..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"bg-gradient-to-r from-blue-700 to-blue-500 shadow-md border-b",children:d.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsx("div",{className:"flex items-center justify-between py-6",children:d.jsxs("div",{className:"flex items-center space-x-5",children:[d.jsx("button",{onClick:()=>e("/dashboard"),className:"p-2 bg-white/30 hover:bg-white/50 rounded-full shadow transition-colors",title:"Kembali ke Dashboard",children:d.jsx(qT,{className:"h-6 w-6 text-blue-700"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-extrabold text-white tracking-tight drop-shadow",children:"Kelola Profil"}),d.jsx("p",{className:"text-base text-blue-100 mt-1",children:"Atur foto wajah, data pribadi, dan keamanan akun Anda"})]})]})})})}),d.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[S&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-green-700 font-medium",children:"Berhasil!"}),d.jsx("p",{className:"text-green-600 text-sm mt-1",children:S})]})]}),k&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-red-700 font-medium",children:"Error"}),d.jsx("p",{className:"text-red-600 text-sm mt-1",children:k})]})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8 border border-gray-100 flex flex-col md:flex-row items-center md:items-start gap-8",children:[d.jsx("div",{className:"w-28 h-28 bg-blue-100 rounded-full flex items-center justify-center overflow-hidden shadow border-4 border-white",children:r!=null&&r.avatar_url?d.jsx("img",{src:r.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):d.jsx(qa,{className:"h-12 w-12 text-blue-600"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 truncate",children:(r==null?void 0:r.full_name)||(r==null?void 0:r.name)||((ce=t==null?void 0:t.email)==null?void 0:ce.split("@")[0])||"Pengguna"}),d.jsx("button",{onClick:()=>m(!0),className:"ml-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400",title:"Edit Profil",children:"Edit"})]}),p&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg p-8 relative animate-fade-in",children:[d.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10",title:"Tutup Edit Profil",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),d.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Profil"}),d.jsxs("form",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",defaultValue:(r==null?void 0:r.full_name)||""})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",defaultValue:(r==null?void 0:r.email)||"",disabled:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No. Telepon"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",defaultValue:(r==null?void 0:r.phone)||""})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Batal"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:"Simpan"})]})]})]})}),d.jsx("p",{className:"text-base text-gray-500 mb-2 truncate",children:(r==null?void 0:r.email)||(t==null?void 0:t.email)}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[((he=r==null?void 0:r.positions)==null?void 0:he.name_id)&&d.jsx("span",{className:"text-sm text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:r.positions.name_id}),(($=r==null?void 0:r.positions)==null?void 0:$.department)&&d.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:r.positions.department}),(r==null?void 0:r.employee_id)&&d.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:["ID: ",r.employee_id]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[d.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium shadow-sm ${r!=null&&r.is_face_registered?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:[d.jsx(Bd,{className:"h-4 w-4"}),d.jsx("span",{children:r!=null&&r.is_face_registered?"Wajah Terdaftar":"Wajah Belum Terdaftar"})]}),(r==null?void 0:r.bank_info)&&d.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 font-medium shadow-sm",children:[d.jsx(ba,{className:"h-4 w-4"}),d.jsxs("span",{children:["Rekening ",r.bank_info.bank_name]})]})]})]})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"flex flex-wrap",children:[d.jsxs("button",{onClick:()=>{(u||!(r!=null&&r.is_face_registered))&&h("face")},className:`px-6 py-4 text-sm font-medium ${f==="face"?"border-b-2 border-blue-500 text-blue-600":r!=null&&r.is_face_registered&&!u?"text-gray-400 cursor-not-allowed":"text-gray-500 hover:text-gray-700"}`,children:[d.jsx(Bd,{className:"h-4 w-4 inline mr-2"}),"Foto Wajah"]}),d.jsxs("button",{onClick:()=>h("profile"),className:`px-6 py-4 text-sm font-medium ${f==="profile"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[d.jsx(Jd,{className:"h-4 w-4 inline mr-2"}),"Informasi Pribadi"]}),d.jsxs("button",{onClick:()=>h("bank"),className:`px-6 py-4 text-sm font-medium ${f==="bank"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[d.jsx(ba,{className:"h-4 w-4 inline mr-2"}),"Rekening Bank"]}),d.jsxs("button",{onClick:()=>h("password"),className:`px-6 py-4 text-sm font-medium ${f==="password"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[d.jsx(Ag,{className:"h-4 w-4 inline mr-2"}),"Ubah Password"]})]})}),d.jsxs("div",{className:"p-6",children:[f==="face"&&d.jsx("div",{children:r!=null&&r.is_face_registered&&!u?d.jsxs("div",{className:"text-center py-8",children:[d.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[r.avatar_url?d.jsx("img",{src:r.avatar_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-green-100"}):d.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(qa,{className:"h-12 w-12 text-blue-600"})}),d.jsx("div",{className:"absolute bottom-0 right-0 bg-green-500 text-white p-1 rounded-full",children:d.jsx(ln,{className:"h-5 w-5"})})]}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Wajah Terverifikasi"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Foto wajah Anda telah terdaftar dan terverifikasi dalam sistem. Anda dapat menggunakan verifikasi wajah untuk absensi."}),d.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg text-left",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-yellow-800 font-medium",children:"Perhatian"}),d.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Foto wajah yang sudah terverifikasi tidak dapat diubah oleh pengguna. Jika Anda perlu mengubah foto wajah, silakan hubungi administrator."})]})]})})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Setup Foto Wajah"}),d.jsx("p",{className:"text-gray-600",children:"Foto wajah digunakan untuk verifikasi absensi yang aman dan akurat"})]}),d.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[d.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" Keunggulan Sistem Kami"}),d.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[d.jsx("li",{children:" Teknologi pengenalan wajah yang aman dan cepat"}),d.jsx("li",{children:" Tidak memerlukan download model AI eksternal"}),d.jsx("li",{children:" Analisis pola wajah dengan algoritma custom"}),d.jsx("li",{children:" Data tersimpan aman dengan enkripsi"})]})]}),d.jsx(l2,{onFaceCapture:W,isCapturing:x}),v&&d.jsxs("div",{className:"mt-6 text-center",children:[d.jsxs("div",{className:"inline-flex items-center space-x-2 text-green-600 mb-4",children:[d.jsx(ln,{className:"h-5 w-5"}),d.jsx("span",{children:"Foto wajah berhasil diambil dan diverifikasi!"})]}),d.jsx("button",{onClick:z,disabled:x,className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"inline-flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("span",{children:"Menyimpan..."})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Simpan Foto Wajah"})]})})]})]})}),f==="profile"&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informasi Pribadi"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Panggilan"}),d.jsx("input",{type:"text",name:"name",value:P.name,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nama panggilan"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),d.jsx("input",{type:"text",name:"full_name",value:P.full_name,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nama lengkap"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d.jsx(VT,{className:"h-4 w-4 inline mr-1"}),"Nomor Telepon"]}),d.jsx("input",{type:"tel",name:"phone",value:P.phone,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+62-21-1234567"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d.jsx(Uo,{className:"h-4 w-4 inline mr-1"}),"Lokasi"]}),d.jsx("input",{type:"text",name:"location",value:P.location,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jakarta, Indonesia"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),d.jsx("textarea",{name:"bio",value:P.bio,onChange:q,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ceritakan sedikit tentang diri Anda..."})]}),d.jsx("button",{onClick:J,disabled:x,className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"inline-flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("span",{children:"Menyimpan..."})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Simpan Perubahan"})]})})]})]}),f==="bank"&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informasi Rekening Bank"}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100 mb-6",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(ba,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-blue-800 font-medium",children:"Informasi Rekening untuk Gaji"}),d.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Informasi rekening bank Anda digunakan untuk pembayaran gaji dan tunjangan. Pastikan data yang dimasukkan sudah benar."})]})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d.jsx(ba,{className:"h-4 w-4 inline mr-1"}),"Pilih Bank *"]}),d.jsx("div",{className:"relative",children:d.jsxs("select",{name:"bank_id",value:E.bank_id,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Pilih Bank..."}),i.map(X=>d.jsx("option",{value:X.id,children:X.bank_name},X.id))]})}),K()&&d.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-sm text-gray-600",children:[K().bank_logo&&d.jsx("img",{src:K().bank_logo,alt:K().bank_name,className:"w-6 h-6 object-contain",onError:X=>{X.target.onerror=null,X.target.src="",X.target.parentElement.innerHTML=`
                                  <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600">
                                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    </svg>
                                  </div>
                                `}}),K()&&d.jsxs("span",{children:["Bank ",K().bank_name]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d.jsx(Gh,{className:"h-4 w-4 inline mr-1"}),"Nomor Rekening *"]}),d.jsx("input",{type:"text",name:"bank_account_number",value:E.bank_account_number,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan nomor rekening tanpa spasi"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[d.jsx(qa,{className:"h-4 w-4 inline mr-1"}),"Nama Pemilik Rekening"]}),d.jsx("input",{type:"text",name:"bank_account_name",value:E.bank_account_name,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50",placeholder:"Nama sesuai saat pendaftaran",readOnly:!0}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nama pemilik rekening otomatis menggunakan nama lengkap dari profil Anda"})]}),d.jsx("button",{onClick:ee,disabled:x,className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"inline-flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("span",{children:"Menyimpan..."})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Simpan Informasi Rekening"})]})}),d.jsxs("div",{className:"mt-8",children:[d.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Bank Tersedia"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:i.map(X=>d.jsx("div",{className:`p-4 rounded-xl border transition-all cursor-pointer ${E.bank_id===X.id?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,onClick:()=>D(ae=>({...ae,bank_id:X.id})),children:d.jsxs("div",{className:"flex flex-col items-center text-center",children:[X.bank_logo?d.jsx("img",{src:X.bank_logo,alt:X.bank_name,className:"w-12 h-12 object-contain mb-3"}):d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:d.jsx(ba,{className:"h-5 w-5 text-blue-600"})}),d.jsx("span",{className:"text-sm font-medium text-gray-800",children:X.bank_name}),E.bank_id===X.id&&d.jsxs("div",{className:"mt-2 text-xs text-blue-600 flex items-center",children:[d.jsx(ln,{className:"h-3 w-3 mr-1"}),"Dipilih"]})]})},X.id))})]})]})]}),f==="password"&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Ubah Password"}),d.jsxs("div",{className:"space-y-6 max-w-md",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Saat Ini"}),d.jsx("input",{type:"password",name:"currentPassword",value:R.currentPassword,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan password saat ini"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Baru"}),d.jsx("input",{type:"password",name:"newPassword",value:R.newPassword,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan password baru (min. 6 karakter)"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Konfirmasi Password Baru"}),d.jsx("input",{type:"password",name:"confirmPassword",value:R.confirmPassword,onChange:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Konfirmasi password baru"})]}),d.jsx("button",{onClick:L,disabled:x||!R.newPassword||!R.confirmPassword,className:"bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"inline-flex space-x-1",children:[d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("span",{children:"Mengubah..."})]}):d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ag,{className:"h-4 w-4"}),d.jsx("span",{children:"Ubah Password"})]})})]}),d.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[d.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:" Tips Keamanan Password"}),d.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[d.jsx("p",{children:" Gunakan minimal 6 karakter"}),d.jsx("p",{children:" Kombinasikan huruf besar, kecil, dan angka"}),d.jsx("p",{children:" Jangan gunakan informasi pribadi yang mudah ditebak"}),d.jsx("p",{children:" Ubah password secara berkala"})]})]})]})]})]}),d.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:" Keamanan & Privasi"}),d.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[d.jsx("p",{children:" Foto wajah dienkripsi dan disimpan dengan aman"}),d.jsx("p",{children:" Menggunakan algoritma fingerprinting custom yang aman"}),d.jsx("p",{children:" Hanya digunakan untuk verifikasi absensi"}),d.jsx("p",{children:" Data rekening bank hanya digunakan untuk pembayaran gaji"}),d.jsx("p",{children:" Data tidak dibagikan kepada pihak ketiga"}),d.jsx("p",{children:" Anda dapat mengubah informasi kapan saja"})]})]})]})]})},Ewe=({initialLocation:e,onLocationSelect:t,onCancel:n,radius:r=100})=>{const[a,i]=M.useState(e||{lat:-6.2,lng:106.816666}),[o,s]=M.useState(""),[l,u]=M.useState(!1),[c,f]=M.useState(null),[h,p]=M.useState(null);M.useEffect(()=>{e&&(i(e),s(e.address||""))},[e]);const m=()=>{if(!navigator.geolocation){f("Geolokasi tidak didukung oleh browser ini.");return}u(!0),f(null),navigator.geolocation.getCurrentPosition(N=>{const k={lat:N.coords.latitude,lng:N.coords.longitude};i(k),s(`${k.lat.toFixed(6)}, ${k.lng.toFixed(6)}`),p("Lokasi saat ini berhasil didapatkan!"),u(!1)},N=>{console.error("Geolocation error:",N);let k="Gagal mendapatkan lokasi saat ini.";switch(N.code){case N.PERMISSION_DENIED:k="Akses lokasi ditolak. Silakan izinkan akses lokasi.";break;case N.POSITION_UNAVAILABLE:k="Informasi lokasi tidak tersedia.";break;case N.TIMEOUT:k="Permintaan lokasi timeout.";break}f(k),u(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},v=(N,k)=>{const j=parseFloat(k);isNaN(j)||(i(S=>({...S,[N]:j})),f(null))},y=()=>!a.lat||!a.lng?(f("Koordinat latitude dan longitude harus diisi."),!1):a.lat<-90||a.lat>90?(f("Latitude harus antara -90 dan 90."),!1):a.lng<-180||a.lng>180?(f("Longitude harus antara -180 dan 180."),!1):o.trim()?!0:(f("Alamat kantor harus diisi."),!1),g=()=>{y()&&t&&t({latitude:a.lat,longitude:a.lng,address:o.trim(),radius:r})},b=[{name:"Jakarta Pusat",lat:-6.2,lng:106.816666,address:"Jakarta Pusat, DKI Jakarta, Indonesia"},{name:"Surabaya",lat:-7.257472,lng:112.75209,address:"Surabaya, Jawa Timur, Indonesia"},{name:"Bandung",lat:-6.917464,lng:107.619123,address:"Bandung, Jawa Barat, Indonesia"},{name:"Medan",lat:3.595196,lng:98.672226,address:"Medan, Sumatera Utara, Indonesia"},{name:"Yogyakarta",lat:-7.797068,lng:110.370529,address:"Yogyakarta, DI Yogyakarta, Indonesia"}],x=N=>{i({lat:N.lat,lng:N.lng}),s(N.address),p(`Lokasi ${N.name} dipilih!`),f(null)};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx(Uo,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Atur Lokasi Kantor"}),d.jsx("p",{className:"text-gray-600",children:"Tentukan koordinat dan alamat lokasi kantor untuk sistem absensi"})]}),h&&d.jsxs("div",{className:"p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:h})]}),c&&d.jsxs("div",{className:"p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Rd,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:c})]}),d.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-blue-900",children:"Gunakan Lokasi Saat Ini"}),d.jsx("p",{className:"text-sm text-blue-700",children:"Otomatis mengisi koordinat berdasarkan GPS"})]}),d.jsxs("button",{onClick:m,disabled:l,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[d.jsx(GT,{className:`h-4 w-4 ${l?"animate-spin":""}`}),d.jsx("span",{children:l?"Mencari...":"Gunakan GPS"})]})]})}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Lokasi Populer"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:b.map(N=>d.jsxs("button",{onClick:()=>x(N),className:"p-3 text-left bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 transition-colors",children:[d.jsx("div",{className:"font-medium text-gray-900",children:N.name}),d.jsxs("div",{className:"text-xs text-gray-500",children:[N.lat.toFixed(4),", ",N.lng.toFixed(4)]})]},N.name))})]}),d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Input Manual Koordinat"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alamat Kantor *"}),d.jsx("input",{type:"text",value:o,onChange:N=>s(N.target.value),placeholder:"Contoh: Jl. Sudirman No. 1, Jakarta Pusat",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude *"}),d.jsx("input",{type:"number",step:"any",value:a.lat||"",onChange:N=>v("lat",N.target.value),placeholder:"-6.200000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Rentang: -90 hingga 90"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude *"}),d.jsx("input",{type:"number",step:"any",value:a.lng||"",onChange:N=>v("lng",N.target.value),placeholder:"106.816666",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Rentang: -180 hingga 180"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Radius Absensi (meter)"}),d.jsx("input",{type:"number",value:r,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Karyawan harus berada dalam radius ini untuk dapat absen"})]})]})]}),a.lat&&a.lng&&d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Preview Lokasi"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex items-start space-x-2",children:[d.jsx(Uo,{className:"h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"}),d.jsx("span",{className:"text-gray-700",children:o||"Alamat belum diisi"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-gray-600",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Latitude:"})," ",a.lat.toFixed(6)]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Longitude:"})," ",a.lng.toFixed(6)]})]}),d.jsxs("div",{className:"text-gray-600",children:[d.jsx("span",{className:"font-medium",children:"Radius Absensi:"})," ",r," meter"]})]})]}),d.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[d.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:" Tips Mencari Koordinat"}),d.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[d.jsx("p",{children:" Buka Google Maps di browser"}),d.jsx("p",{children:" Cari alamat kantor Anda"}),d.jsx("p",{children:" Klik kanan pada lokasi yang tepat"}),d.jsx("p",{children:" Pilih koordinat yang muncul (contoh: -6.200000, 106.816666)"}),d.jsx("p",{children:" Copy dan paste ke form di atas"})]})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(al,{className:"h-4 w-4"}),d.jsx("span",{children:"Batal"})]})}),d.jsx("button",{onClick:g,disabled:!a.lat||!a.lng||!o.trim(),className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Simpan Lokasi"})]})})]})]})},Dwe=()=>{const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState(!0),[s,l]=M.useState(null),[u,c]=M.useState(!1),[f,h]=M.useState(100),[p,m]=M.useState(null),[v,y]=M.useState(null),[g,b]=M.useState(!1);M.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:{user:A}}=await Pe.auth.getUser();if(!A){e("/login");return}const{data:P}=await Pe.from("profiles").select("role").eq("id",A.id).single();if(!P||P.role!=="admin"){e("/dashboard");return}n(A),a(P),await N()}catch(A){console.error("Error checking access:",A),e("/login")}finally{o(!1)}},N=async()=>{try{const{data:A,error:P}=await Pe.from("system_settings").select("setting_value").eq("setting_key","office_location").maybeSingle();if(P&&P.code!=="PGRST116")throw P;A!=null&&A.setting_value?(l(A.setting_value),h(A.setting_value.radius||100)):l({latitude:-6.2,longitude:106.816666,address:"Jakarta, Indonesia",radius:100})}catch(A){console.error("Error fetching office location:",A),m("Gagal memuat pengaturan lokasi kantor")}},k=async A=>{b(!0),m(null);try{const P={latitude:A.latitude,longitude:A.longitude,address:A.address,radius:f},{error:T}=await Pe.from("system_settings").upsert({setting_key:"office_location",setting_value:P,description:"Lokasi kantor utama dan radius absensi",is_enabled:!0,updated_at:new Date().toISOString()},{onConflict:"setting_key"});if(T)throw T;l(P),c(!1),y("Lokasi kantor berhasil diperbarui!"),setTimeout(()=>y(null),3e3)}catch(P){console.error("Error saving office location:",P),m("Gagal menyimpan lokasi kantor")}finally{b(!1)}},j=async A=>{if(s){b(!0),m(null);try{const P={...s,radius:parseInt(A)},{error:T}=await Pe.from("system_settings").upsert({setting_key:"office_location",setting_value:P,description:"Lokasi kantor utama dan radius absensi",is_enabled:!0,updated_at:new Date().toISOString()},{onConflict:"setting_key"});if(T)throw T;l(P),h(parseInt(A)),y("Radius absensi berhasil diperbarui!"),setTimeout(()=>y(null),3e3)}catch(P){console.error("Error updating radius:",P),m("Gagal memperbarui radius absensi")}finally{b(!1)}}},S=()=>{if(s){const A=`https://www.google.com/maps?q=${s.latitude},${s.longitude}`;window.open(A,"_blank")}};return i?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat pengaturan lokasi..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:t,profile:r}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsx("div",{className:"flex items-center justify-between py-4",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pengaturan Lokasi Kantor"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Kelola lokasi kantor dan radius absensi tanpa Google Maps"})]})})})}),d.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:v})]}),p&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Rd,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:p})]}),u?d.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:d.jsx(Ewe,{initialLocation:s?{lat:s.latitude,lng:s.longitude,address:s.address}:null,radius:f,onLocationSelect:k,onCancel:()=>c(!1)})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lokasi Kantor Saat Ini"}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(Jd,{className:"h-4 w-4"}),d.jsx("span",{children:"Edit Lokasi"})]})]}),s?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Uo,{className:"h-5 w-5 text-blue-600 mt-1 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:"Alamat"}),d.jsx("p",{className:"text-gray-600",children:s.address})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Koordinat"}),d.jsxs("p",{className:"text-gray-600",children:[s.latitude.toFixed(6),", ",s.longitude.toFixed(6)]})]}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Radius Absensi"}),d.jsxs("p",{className:"text-gray-600",children:[s.radius," meter"]})]})]}),d.jsx("div",{className:"flex space-x-3",children:d.jsxs("button",{onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[d.jsx(GT,{className:"h-4 w-4"}),d.jsx("span",{children:"Lihat di Google Maps"})]})})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Uo,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500",children:"Lokasi kantor belum diatur"}),d.jsx("button",{onClick:()=>c(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Atur Lokasi Sekarang"})]})]}),s&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Pengaturan Radius Absensi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Radius Absensi (meter)"}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("input",{type:"range",min:"50",max:"500",step:"10",value:f,onChange:A=>h(parseInt(A.target.value)),className:"flex-1"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"number",min:"50",max:"500",value:f,onChange:A=>h(parseInt(A.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.jsx("span",{className:"text-gray-600",children:"m"})]})]}),d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Karyawan harus berada dalam radius ini untuk dapat melakukan absensi"})]}),d.jsxs("button",{onClick:()=>j(f),disabled:g||f===s.radius,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:g?"Menyimpan...":"Simpan Radius"})]})]})]}),d.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:" Keunggulan Sistem Tanpa Google Maps"}),d.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[d.jsx("p",{children:" Tidak memerlukan API key Google Maps yang berbayar"}),d.jsx("p",{children:" Sistem tetap akurat menggunakan koordinat GPS"}),d.jsx("p",{children:" Mudah digunakan dengan preset lokasi populer"}),d.jsx("p",{children:" Dapat menggunakan GPS untuk mendapatkan lokasi saat ini"}),d.jsx("p",{children:" Koordinat dapat dicari manual dari Google Maps"}),d.jsx("p",{children:" Sistem validasi radius tetap berfungsi dengan sempurna"})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:" Cara Menggunakan"}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"1. Gunakan GPS:"}),' Klik "Gunakan GPS" untuk otomatis mengisi koordinat lokasi saat ini']}),d.jsxs("p",{children:[d.jsx("strong",{children:"2. Pilih Preset:"})," Pilih dari lokasi populer yang sudah tersedia"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"3. Input Manual:"})," Cari koordinat di Google Maps dan input manual"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"4. Atur Radius:"})," Sesuaikan radius absensi sesuai kebutuhan (50-500 meter)"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"5. Simpan:"})," Klik simpan untuk menerapkan pengaturan"]})]})]})]})]})]})]})},Pwe=()=>{const e=Za(),[t,n]=M.useState([]),[r,a]=M.useState(!0),[i,o]=M.useState(""),[s,l]=M.useState(!1),[u,c]=M.useState(null),[f,h]=M.useState(null),[p,m]=M.useState(null),[v,y]=M.useState(null),[g,b]=M.useState(null),[x,N]=M.useState({bank_name:"",bank_code:"",bank_logo:"",description:"",is_active:!0});M.useEffect(()=>{k()},[]);const k=async()=>{try{const{data:{user:R}}=await Pe.auth.getUser();if(!R){e("/login");return}const{data:F}=await Pe.from("profiles").select("role").eq("id",R.id).single();if(!F||F.role!=="admin"){e("/dashboard");return}y(R),b(F),await j()}catch(R){console.error("Error checking access:",R),e("/login")}finally{a(!1)}},j=async()=>{try{const{data:R,error:F}=await Pe.from("bank_info").select("*").order("bank_name");if(F)throw F;n(R||[])}catch(R){console.error("Error fetching banks:",R),h("Gagal memuat data bank")}},S=R=>{const{name:F,value:H,type:B,checked:U}=R.target;N(W=>({...W,[F]:B==="checkbox"?U:H}))},A=()=>{N({bank_name:"",bank_code:"",bank_logo:"",description:"",is_active:!0}),c(null),l(!1),h(null)},P=async R=>{if(R.preventDefault(),h(null),!x.bank_name.trim()){h("Nama bank harus diisi");return}try{const F={...x,updated_at:new Date().toISOString()};if(u){const{error:H}=await Pe.from("bank_info").update(F).eq("id",u.id);if(H)throw H;m("Bank berhasil diperbarui!")}else{F.created_at=new Date().toISOString();const{error:H}=await Pe.from("bank_info").insert([F]);if(H)throw H;m("Bank berhasil ditambahkan!")}A(),await j(),setTimeout(()=>m(null),3e3)}catch(F){console.error("Error saving bank:",F),h("Gagal menyimpan bank: "+F.message)}},T=R=>{N({bank_name:R.bank_name,bank_code:R.bank_code||"",bank_logo:R.bank_logo||"",description:R.description||"",is_active:R.is_active}),c(R),l(!0)},E=async R=>{if(confirm("Apakah Anda yakin ingin menghapus bank ini?"))try{const{data:F,error:H}=await Pe.from("profiles").select("id").eq("bank_id",R).limit(1);if(H)throw H;if(F&&F.length>0){h("Bank tidak dapat dihapus karena masih digunakan oleh karyawan");return}const{error:B}=await Pe.from("bank_info").delete().eq("id",R);if(B)throw B;m("Bank berhasil dihapus!"),await j(),setTimeout(()=>m(null),3e3)}catch(F){console.error("Error deleting bank:",F),h("Gagal menghapus bank: "+F.message)}},D=t.filter(R=>R.bank_name.toLowerCase().includes(i.toLowerCase())||R.bank_code&&R.bank_code.toLowerCase().includes(i.toLowerCase())||R.description&&R.description.toLowerCase().includes(i.toLowerCase()));return r?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data bank..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:v,profile:g}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Bank"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Tambah, edit, dan kelola daftar bank untuk pembayaran gaji"})]}),d.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[d.jsx(c1,{className:"h-4 w-4"}),d.jsx("span",{children:"Tambah Bank"})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:p}),d.jsx("button",{onClick:()=>m(null),className:"ml-auto text-green-500 hover:text-green-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),f&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:f}),d.jsx("button",{onClick:()=>h(null),className:"ml-auto text-red-500 hover:text-red-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(ba,{className:"h-6 w-6 text-blue-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bank"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:d.jsx(ln,{className:"h-6 w-6 text-green-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bank Aktif"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(R=>R.is_active).length})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:d.jsx(Gh,{className:"h-6 w-6 text-purple-600"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pembayaran"}),d.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Transfer Bank"})]})]})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"relative",children:[d.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari bank...",value:i,onChange:R=>o(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(ba,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Daftar Bank (",D.length,")"]})]})}),D.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Bank"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kode Bank"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(R=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx(ba,{className:"h-5 w-5 text-blue-600"})}),d.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.bank_name})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Kq,{className:"h-4 w-4 text-gray-500"}),d.jsx("span",{className:"text-sm text-gray-900",children:R.bank_code||"-"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"text-sm text-gray-900",children:R.description||"-"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.is_active?"Aktif":"Tidak Aktif"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>T(R),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Edit Bank",children:d.jsx(Jd,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>E(R.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Hapus Bank",children:d.jsx(d1,{className:"h-4 w-4"})})]})})]},R.id))})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(ba,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada bank ditemukan"}),d.jsx("p",{className:"text-gray-400",children:"Coba sesuaikan pencarian atau tambah bank baru"})]})]})]})]}),s&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:u?"Edit Bank":"Tambah Bank Baru"}),d.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:P,className:"space-y-6",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Informasi Bank"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Bank *"}),d.jsx("input",{type:"text",name:"bank_name",value:x.bank_name,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: BCA, Mandiri, BNI"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kode Bank"}),d.jsx("input",{type:"text",name:"bank_code",value:x.bank_code,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 014, 008, 009"})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Logo Bank"}),d.jsx("input",{type:"text",name:"bank_logo",value:x.bank_logo,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/logo.png"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Masukkan URL gambar logo bank (opsional)"})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),d.jsx("textarea",{name:"description",value:x.description,onChange:S,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Deskripsi singkat tentang bank..."})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",name:"is_active",checked:x.is_active,onChange:S,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),d.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Bank aktif (dapat dipilih saat menambah rekening karyawan)"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:A,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:u?"Perbarui Bank":"Simpan Bank"})]})})]})]})]})})})]})},Owe=()=>{const e=Za(),[t,n]=M.useState(null),[r,a]=M.useState(null),[i,o]=M.useState(!0),[s,l]=M.useState(!1),[u,c]=M.useState([]),[f,h]=M.useState([]),[p,m]=M.useState(""),[v,y]=M.useState(""),[g,b]=M.useState(""),[x,N]=M.useState(""),[k,j]=M.useState(new Date),[S,A]=M.useState(null),[P,T]=M.useState(null),[E,D]=M.useState(!1),[R,F]=M.useState({startTime:"08:00",endTime:"17:00",lateThreshold:15,earlyLeaveThreshold:15,breakDuration:60});M.useEffect(()=>{H()},[]),M.useEffect(()=>{t&&B()},[t]),M.useEffect(()=>{k&&t&&z(k)},[k,t]);const H=async()=>{try{const{data:{user:X}}=await Pe.auth.getUser();if(!X){e("/login");return}const{data:ae}=await Pe.from("profiles").select("role").eq("id",X.id).single();if(!ae||ae.role!=="admin"){e("/dashboard");return}n(X),a(ae),await Promise.all([W(),z(new Date)])}catch(X){console.error("Error checking access:",X),e("/login")}finally{o(!1)}},B=async()=>{try{const{data:X,error:ae}=await Pe.from("system_settings").select("setting_value").eq("setting_key","work_hours").single();if(ae&&ae.code!=="PGRST116")throw ae;X!=null&&X.setting_value&&F(le=>({...le,...X.setting_value}))}catch(X){console.error("Error fetching work hours settings:",X)}},U=async()=>{try{const{error:X}=await Pe.from("system_settings").upsert({setting_key:"work_hours",setting_value:R,description:"Standard working hours configuration",is_enabled:!0,updated_at:new Date().toISOString()},{onConflict:"setting_key"});if(X)throw X;T("Pengaturan jam kerja berhasil disimpan!"),D(!1),setTimeout(()=>T(null),3e3)}catch(X){console.error("Error saving work hours settings:",X),A("Gagal menyimpan pengaturan jam kerja")}},W=async()=>{try{const{data:X,error:ae}=await Pe.from("profiles").select("id, name, email, employee_id, department, role, status").order("name");if(ae)throw ae;h(X||[])}catch(X){console.error("Error fetching employees:",X)}},z=async X=>{l(!0);try{const ae=X.toISOString().split("T")[0],le=`${ae}T00:00:00`,Se=`${ae}T23:59:59`,{data:Ee,error:me}=await Pe.from("attendance").select(`
          *,
          profiles:user_id(id, name, email, employee_id, department, role, status)
        `).gte("timestamp",le).lte("timestamp",Se).order("timestamp",{ascending:!1});if(me)throw me;const{data:ie,error:Ve}=await Pe.from("profiles").select("id, name, email, employee_id, department, role, status").eq("status","active").neq("role","admin");if(Ve)throw Ve;const be=new Set(Ee.filter(Ye=>Ye.type==="masuk"&&Ye.status==="berhasil").map(Ye=>Ye.user_id)),fe=new Date,_e=ae===fe.toISOString().split("T")[0],je=X<fe,Re=fe.getHours(),Ge=R.endTime?parseInt(R.endTime.split(":")[0]):17,Je=!_e||_e&&Re>=Ge;if(_e&&Je||je){const ct=ie.filter(dt=>!be.has(dt.id)&&dt.role!=="admin").map(dt=>({id:`absent-${dt.id}-${ae}`,user_id:dt.id,type:"absent",timestamp:`${ae}T${R.endTime||"17:00"}:00`,status:"tidak_hadir",is_late:!1,late_minutes:0,work_hours:0,overtime_hours:0,profiles:dt,notes:"Tidak hadir - tidak melakukan absensi masuk"}));c([...Ee,...ct])}else c(Ee||[])}catch(ae){console.error("Error fetching attendance by date:",ae),A("Gagal memuat data absensi")}finally{l(!1)}},J=X=>{j(new Date(X.target.value))},ee=()=>{if(u.length===0)return;const ae=[["Tanggal","Waktu","Karyawan","ID Karyawan","Departemen","Jenis","Status","Terlambat","Menit Terlambat","Jam Kerja","Lembur","Latitude","Longitude"],...u.map(me=>{var fe,_e,je;const ie=new Date(me.timestamp),Ve=ie.toLocaleDateString("id-ID"),be=ie.toLocaleTimeString("id-ID");return[Ve,be,((fe=me.profiles)==null?void 0:fe.name)||"Unknown",((_e=me.profiles)==null?void 0:_e.employee_id)||"-",((je=me.profiles)==null?void 0:je.department)||"-",me.type==="masuk"?"Masuk":me.type==="keluar"?"Keluar":"Tidak Hadir",me.status,me.is_late?"Ya":"Tidak",me.late_minutes||"0",me.work_hours||"0",me.overtime_hours||"0",me.latitude||"",me.longitude||""]})].map(me=>me.join(",")).join(`
`),le=new Blob([ae],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a"),Ee=URL.createObjectURL(le);Se.setAttribute("href",Ee),Se.setAttribute("download",`attendance_${k.toISOString().split("T")[0]}.csv`),document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),URL.revokeObjectURL(Ee)},L=X=>{switch(X){case"berhasil":return"text-green-600 bg-green-100";case"wajah_tidak_valid":return"text-red-600 bg-red-100";case"lokasi_tidak_valid":return"text-yellow-600 bg-yellow-100";case"tidak_hadir":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},q=X=>{switch(X){case"berhasil":return d.jsx(ln,{className:"h-4 w-4"});case"wajah_tidak_valid":case"lokasi_tidak_valid":return d.jsx(zn,{className:"h-4 w-4"});case"tidak_hadir":return d.jsx(zn,{className:"h-4 w-4"});default:return d.jsx(Qn,{className:"h-4 w-4"})}},Y=X=>{switch(X){case"berhasil":return"Berhasil";case"wajah_tidak_valid":return"Wajah Invalid";case"lokasi_tidak_valid":return"Lokasi Invalid";case"tidak_hadir":return"Tidak Hadir";default:return"Gagal"}},te=X=>new Date(X).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),K=X=>X.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),ce=X=>{const{name:ae,value:le}=X.target;F(Se=>({...Se,[ae]:le}))},he=u.filter(X=>{var me,ie,Ve,be;const ae=((me=X.profiles)==null?void 0:me.name)&&X.profiles.name.toLowerCase().includes(p.toLowerCase())||((ie=X.profiles)==null?void 0:ie.email)&&X.profiles.email.toLowerCase().includes(p.toLowerCase())||((Ve=X.profiles)==null?void 0:Ve.employee_id)&&X.profiles.employee_id.toLowerCase().includes(p.toLowerCase()),le=!v||((be=X.profiles)==null?void 0:be.department)===v,Se=!g||X.status===g,Ee=!x||X.type===x;return ae&&le&&Se&&Ee}),$=()=>[...new Set(f.map(ae=>ae.department).filter(Boolean))];return i?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat data absensi..."})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[d.jsx(Bc,{user:t,profile:r}),d.jsxs("div",{className:"flex-1 lg:ml-64 transition-all duration-300 ease-in-out",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Absensi"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Lihat dan kelola absensi karyawan berdasarkan tanggal"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsxs("button",{onClick:()=>D(!0),className:"flex items-center space-x-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[d.jsx($T,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Jam Kerja"})]}),d.jsxs("button",{onClick:()=>{l(!0),z(k).finally(()=>l(!1))},className:"flex items-center space-x-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",title:"Refresh Data",children:[d.jsx(F_,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),d.jsxs("button",{onClick:ee,disabled:u.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[d.jsx(mv,{className:"h-4 w-4"}),d.jsx("span",{children:"Export CSV"})]})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[S&&d.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-lg flex items-start space-x-3",children:[d.jsx(Qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-red-700",children:S}),d.jsx("button",{onClick:()=>A(null),className:"ml-auto text-red-500 hover:text-red-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),P&&d.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg flex items-start space-x-3",children:[d.jsx(ln,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-green-700",children:P}),d.jsx("button",{onClick:()=>T(null),className:"ml-auto text-green-500 hover:text-green-700",children:d.jsx(zn,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-4 w-full sm:w-auto",children:[d.jsx(hs,{className:"h-5 w-5 text-blue-600"}),d.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Pilih Tanggal"})]}),d.jsx("div",{className:"w-full sm:w-auto",children:d.jsx("input",{type:"date",value:k.toISOString().split("T")[0],onChange:J,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-blue-50",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(hs,{className:"h-5 w-5 text-blue-600"}),d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Absensi Tanggal: ",K(k)]})]}),d.jsxs("div",{className:"text-sm text-gray-600",children:[he.length," data"]})]})}),d.jsx("div",{className:"p-4 border-b border-gray-200",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsx("div",{children:d.jsxs("div",{className:"relative",children:[d.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari nama, email, ID...",value:p,onChange:X=>m(X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),d.jsx("div",{children:d.jsxs("select",{value:v,onChange:X=>y(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Departemen"}),$().map(X=>d.jsx("option",{value:X,children:X},X))]})}),d.jsx("div",{children:d.jsxs("select",{value:g,onChange:X=>b(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Status"}),d.jsx("option",{value:"berhasil",children:"Berhasil"}),d.jsx("option",{value:"wajah_tidak_valid",children:"Wajah Invalid"}),d.jsx("option",{value:"lokasi_tidak_valid",children:"Lokasi Invalid"}),d.jsx("option",{value:"tidak_hadir",children:"Tidak Hadir"})]})}),d.jsx("div",{children:d.jsxs("select",{value:x,onChange:X=>N(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Semua Jenis"}),d.jsx("option",{value:"masuk",children:"Masuk"}),d.jsx("option",{value:"keluar",children:"Keluar"}),d.jsx("option",{value:"absent",children:"Tidak Hadir"})]})})]})}),s?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):he.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Karyawan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Waktu"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Keterlambatan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lokasi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:he.map(X=>{var ae,le,Se,Ee;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-blue-600 font-medium",children:((le=(ae=X.profiles)==null?void 0:ae.name)==null?void 0:le.charAt(0).toUpperCase())||"?"})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:((Se=X.profiles)==null?void 0:Se.name)||"Unknown"}),d.jsx("div",{className:"text-xs text-gray-500",children:((Ee=X.profiles)==null?void 0:Ee.department)||"-"})]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm text-gray-900",children:te(X.timestamp)}),d.jsx("div",{className:"text-xs text-gray-500",children:K(new Date(X.timestamp))})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:X.type==="masuk"?"Masuk":X.type==="keluar"?"Keluar":"Tidak Hadir"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${L(X.status)}`,children:[q(X.status),d.jsx("span",{children:Y(X.status)})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.is_late?d.jsx("div",{className:"text-sm text-red-600",children:d.jsxs("span",{className:"font-medium",children:[X.late_minutes," menit"]})}):X.type==="absent"?d.jsx("div",{className:"text-sm text-red-600",children:d.jsx("span",{className:"font-medium",children:"-"})}):d.jsx("div",{className:"text-sm text-green-600",children:d.jsx("span",{className:"font-medium",children:"Tepat Waktu"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.latitude&&X.longitude?d.jsxs("div",{className:"flex items-center",children:[d.jsx(Uo,{className:"h-4 w-4 mr-1 text-gray-400"}),d.jsxs("span",{children:[X.latitude.toFixed(4),", ",X.longitude.toFixed(4)]})]}):d.jsx("span",{className:"text-gray-400",children:"Tidak ada lokasi"})})]},X.id)})})]})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(vc,{className:"h-8 w-8 text-gray-400"})}),d.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Tidak ada data absensi untuk tanggal ini"}),d.jsx("p",{className:"text-gray-400",children:"Pilih tanggal lain atau sesuaikan filter"})]})]})]})]}),E&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pengaturan Jam Kerja"}),d.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(al,{className:"h-6 w-6"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jam Masuk"}),d.jsx("input",{type:"time",name:"startTime",value:R.startTime,onChange:ce,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jam Keluar"}),d.jsx("input",{type:"time",name:"endTime",value:R.endTime,onChange:ce,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Toleransi Keterlambatan (menit)"}),d.jsx("input",{type:"number",name:"lateThreshold",value:R.lateThreshold,onChange:ce,min:"0",max:"60",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Karyawan dianggap terlambat jika masuk setelah jam masuk + toleransi"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Toleransi Pulang Cepat (menit)"}),d.jsx("input",{type:"number",name:"earlyLeaveThreshold",value:R.earlyLeaveThreshold,onChange:ce,min:"0",max:"60",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Karyawan dianggap pulang cepat jika keluar sebelum jam keluar - toleransi"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durasi Istirahat (menit)"}),d.jsx("input",{type:"number",name:"breakDuration",value:R.breakDuration,onChange:ce,min:"0",max:"120",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(Ol,{className:"h-4 w-4 text-blue-600"}),d.jsx("h3",{className:"font-medium text-blue-900",children:"Pengaturan Absensi Otomatis"})]}),d.jsx("p",{className:"text-sm text-blue-700",children:'Sistem akan otomatis menandai karyawan sebagai "Tidak Hadir" jika:'}),d.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1 pl-6 list-disc",children:[d.jsx("li",{children:"Sudah melewati jam keluar kerja"}),d.jsx("li",{children:"Tidak ada catatan absensi masuk pada hari tersebut"}),d.jsx("li",{children:"Karyawan berstatus aktif (bukan admin)"})]})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>D(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),d.jsx("button",{onClick:U,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(cs,{className:"h-4 w-4"}),d.jsx("span",{children:"Simpan Pengaturan"})]})})]})]})]})})})]})},Twe=M.createContext(),Mwe={id:{loading:"Memuat...",save:"Simpan",cancel:"Batal",edit:"Edit",delete:"Hapus",add:"Tambah",search:"Cari",filter:"Filter",back:"Kembali",next:"Selanjutnya",previous:"Sebelumnya",submit:"Kirim",close:"Tutup",confirm:"Konfirmasi",success:"Berhasil",error:"Error",warning:"Peringatan",info:"Informasi",note:"Catatan",notSet:"Belum diatur",from:"dari",days:"hari",minutes:"menit",hours:"jam",office:"Kantor",login:"Masuk",logout:"Keluar",register:"Daftar",email:"Email",password:"Password",confirmPassword:"Konfirmasi Password",forgotPassword:"Lupa Password",rememberMe:"Ingat Saya",loginTitle:"Portal Karyawan",loginSubtitle:"Masuk untuk mengakses sistem absensi",registerTitle:"Daftar Akun Baru",welcomeBack:"Selamat Datang Kembali",createAccount:"Buat Akun Baru",emailPlaceholder:"Masukkan email Anda",passwordPlaceholder:"Masukkan password Anda",loggingIn:"Sedang Masuk...",registerSuccess:"Pendaftaran Berhasil!",noAccount:"Belum punya akun?",registerHere:"Daftar di sini",demoInfo:"Info",demoDescription:"Pilih role sesuai akses yang diinginkan saat mendaftar",dashboard:"Dashboard",welcome:"Selamat Datang",todayAttendance:"Absensi Hari Ini",monthlyStats:"Statistik Bulanan",recentActivity:"Aktivitas Terbaru",quickActions:"Aksi Cepat",quickAccess:"Akses Manajemen",monthlyAttendance:"Hadir Bulan Ini",onTime:"Tepat Waktu",late:"Terlambat",monthlySalary:"Gaji Bulan Ini",dailySalary:"Gaji Harian",perWorkDay:"per hari kerja",noAttendanceToday:"Belum ada absensi hari ini",attendNow:"Absen Sekarang",noActivity:"Belum ada aktivitas",moreWarnings:"peringatan lainnya",activeWarnings:"Peringatan Aktif",attendance:"Absensi",checkIn:"Masuk",checkOut:"Keluar",attendanceHistory:"Riwayat Absensi",attendanceReport:"Laporan Absensi",lateArrival:"Terlambat",absent:"Tidak Hadir",present:"Hadir",workHours:"Jam Kerja",overtime:"Lembur",faceVerification:"Verifikasi Wajah",locationVerification:"Verifikasi Lokasi",attendanceSummary:"Ringkasan Kehadiran",employees:"Karyawan",employee:"Karyawan",employeeManagement:"Kelola Karyawan",addEmployee:"Tambah Karyawan",editEmployee:"Edit Karyawan",employeeDetails:"Detail Karyawan",personalInfo:"Informasi Pribadi",employmentInfo:"Informasi Pekerjaan",bankingInfo:"Informasi Bank",fullName:"Nama Lengkap",phoneNumber:"Nomor Telepon",address:"Alamat",birthDate:"Tanggal Lahir",gender:"Jenis Kelamin",male:"Laki-laki",female:"Perempuan",position:"Jabatan",department:"Departemen",salary:"Gaji",joinDate:"Tanggal Bergabung",status:"Status",active:"Aktif",inactive:"Tidak Aktif",terminated:"Diberhentikan",bankName:"Nama Bank",bankAccountNumber:"Nomor Rekening",bankAccountName:"Nama Pemegang Rekening",salaryManagement:"Kelola Gaji",positionManagement:"Kelola Jabatan",positions:"Jabatan",addPosition:"Tambah Jabatan",editPosition:"Edit Jabatan",baseSalary:"Gaji Pokok",minSalary:"Gaji Minimum",maxSalary:"Gaji Maksimum",salaryRange:"Rentang Gaji",bonus:"Bonus",deduction:"Potongan",netSalary:"Gaji Bersih",salaryInfo:"Informasi Gaji",settings:"Pengaturan",systemSettings:"Pengaturan Sistem",attendanceSettings:"Pengaturan Absensi",locationSettings:"Pengaturan Lokasi",workingHours:"Jam Kerja",workStartTime:"Jam Masuk",workEndTime:"Jam Keluar",lateThreshold:"Batas Terlambat",earlyLeaveThreshold:"Batas Pulang Cepat",breakDuration:"Durasi Istirahat",officeLocation:"Lokasi Kantor",allowedRadius:"Radius Diizinkan",language:"Bahasa",indonesian:"Bahasa Indonesia",english:"English",systemSettingsDesc:"Kelola lokasi kantor dan radius",reports:"Laporan",salaryReport:"Laporan Gaji",employeeReport:"Laporan Karyawan",exportReport:"Export Laporan",dateRange:"Rentang Tanggal",startDate:"Tanggal Mulai",endDate:"Tanggal Selesai",reportsDesc:"Lihat dan export laporan kehadiran",profile:"Profil",myProfile:"Profil Saya",editProfile:"Edit Profil",changePassword:"Ubah Password",currentPassword:"Password Saat Ini",newPassword:"Password Baru",profilePicture:"Foto Profil",uploadPhoto:"Upload Foto",adminPanel:"Panel Admin",adminRole:"Administrator",employeeRole:"Karyawan",adminDescription:"Kelola semua pengguna dan sistem",employeeDescription:"Absensi pribadi dan riwayat",userManagement:"Kelola Karyawan",userManagementDesc:"Tambah, edit, dan kelola data karyawan",systemLogs:"Log Sistem",activityLogs:"Log Aktivitas",passwordChanges:"Perubahan Password",systemHealth:"Kesehatan Sistem",backupRestore:"Backup & Restore",faceRegistration:"Lengkapi Profil",faceCapture:"Ambil Foto Wajah",faceDetected:"Wajah Terdeteksi",faceNotDetected:"Wajah Tidak Terdeteksi",faceQuality:"Kualitas Wajah",retakePhoto:"Ambil Ulang Foto",faceRegistered:"Wajah Terdaftar",faceNotRegistered:"Profil Belum Lengkap",faceRegistrationRequired:"Anda perlu menambahkan foto wajah untuk dapat melakukan absensi dengan verifikasi wajah.",faceRegistrationDesc:"Untuk dapat melakukan absensi dengan verifikasi wajah, Anda perlu menambahkan foto wajah ke profil.",faceRegistrationNote:"Tanpa foto wajah, Anda tidak dapat melakukan absensi dengan verifikasi keamanan.",registerFace:"Setup Foto Wajah",currentLocation:"Lokasi Saat Ini",officeRadius:"Radius Kantor",insideOfficeArea:"Dalam Area Kantor",outsideOfficeArea:"Di Luar Area Kantor",locationAccuracy:"Akurasi Lokasi",gpsEnabled:"GPS Aktif",gpsDisabled:"GPS Tidak Aktif"},en:{loading:"Loading...",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",search:"Search",filter:"Filter",back:"Back",next:"Next",previous:"Previous",submit:"Submit",close:"Close",confirm:"Confirm",success:"Success",error:"Error",warning:"Warning",info:"Information",note:"Note",notSet:"Not Set",from:"from",days:"days",minutes:"minutes",hours:"hours",office:"Office",login:"Login",logout:"Logout",register:"Register",email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password",rememberMe:"Remember Me",loginTitle:"Employee Portal",loginSubtitle:"Login to access attendance system",registerTitle:"Create New Account",welcomeBack:"Welcome Back",createAccount:"Create New Account",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter your password",loggingIn:"Logging in...",registerSuccess:"Registration Successful!",noAccount:"Don't have an account?",registerHere:"Register here",demoInfo:"Info",demoDescription:"Choose role according to desired access when registering",dashboard:"Dashboard",welcome:"Welcome",todayAttendance:"Today's Attendance",monthlyStats:"Monthly Statistics",recentActivity:"Recent Activity",quickActions:"Quick Actions",quickAccess:"Management Access",monthlyAttendance:"Monthly Attendance",onTime:"On Time",late:"Late",monthlySalary:"Monthly Salary",dailySalary:"Daily Salary",perWorkDay:"per work day",noAttendanceToday:"No attendance today",attendNow:"Attend Now",noActivity:"No activity",moreWarnings:"more warnings",activeWarnings:"Active Warnings",attendance:"Attendance",checkIn:"Check In",checkOut:"Check Out",attendanceHistory:"Attendance History",attendanceReport:"Attendance Report",lateArrival:"Late",absent:"Absent",present:"Present",workHours:"Work Hours",overtime:"Overtime",faceVerification:"Face Verification",locationVerification:"Location Verification",attendanceSummary:"Attendance Summary",employees:"Employees",employee:"Employee",employeeManagement:"Employee Management",addEmployee:"Add Employee",editEmployee:"Edit Employee",employeeDetails:"Employee Details",personalInfo:"Personal Information",employmentInfo:"Employment Information",bankingInfo:"Banking Information",fullName:"Full Name",phoneNumber:"Phone Number",address:"Address",birthDate:"Birth Date",gender:"Gender",male:"Male",female:"Female",position:"Position",department:"Department",salary:"Salary",joinDate:"Join Date",status:"Status",active:"Active",inactive:"Inactive",terminated:"Terminated",bankName:"Bank Name",bankAccountNumber:"Account Number",bankAccountName:"Account Holder Name",salaryManagement:"Salary Management",positionManagement:"Position Management",positions:"Positions",addPosition:"Add Position",editPosition:"Edit Position",baseSalary:"Base Salary",minSalary:"Minimum Salary",maxSalary:"Maximum Salary",salaryRange:"Salary Range",bonus:"Bonus",deduction:"Deduction",netSalary:"Net Salary",salaryInfo:"Salary Information",settings:"Settings",systemSettings:"System Settings",attendanceSettings:"Attendance Settings",locationSettings:"Location Settings",workingHours:"Working Hours",workStartTime:"Work Start Time",workEndTime:"Work End Time",lateThreshold:"Late Threshold",earlyLeaveThreshold:"Early Leave Threshold",breakDuration:"Break Duration",officeLocation:"Office Location",allowedRadius:"Allowed Radius",language:"Language",indonesian:"Bahasa Indonesia",english:"English",systemSettingsDesc:"Manage office location and radius",reports:"Reports",salaryReport:"Salary Report",employeeReport:"Employee Report",exportReport:"Export Report",dateRange:"Date Range",startDate:"Start Date",endDate:"End Date",reportsDesc:"View and export attendance reports",profile:"Profile",myProfile:"My Profile",editProfile:"Edit Profile",changePassword:"Change Password",currentPassword:"Current Password",newPassword:"New Password",profilePicture:"Profile Picture",uploadPhoto:"Upload Photo",adminPanel:"Admin Panel",adminRole:"Administrator",employeeRole:"Employee",adminDescription:"Manage all users and system",employeeDescription:"Personal attendance and history",userManagement:"User Management",userManagementDesc:"Add, edit, and manage employee data",systemLogs:"System Logs",activityLogs:"Activity Logs",passwordChanges:"Password Changes",systemHealth:"System Health",backupRestore:"Backup & Restore",faceRegistration:"Complete Profile",faceCapture:"Capture Face",faceDetected:"Face Detected",faceNotDetected:"Face Not Detected",faceQuality:"Face Quality",retakePhoto:"Retake Photo",faceRegistered:"Face Registered",faceNotRegistered:"Profile Incomplete",faceRegistrationRequired:"You need to add a face photo to perform attendance with face verification.",faceRegistrationDesc:"To perform attendance with face verification, you need to add a face photo to your profile.",faceRegistrationNote:"Without a face photo, you cannot perform attendance with security verification.",registerFace:"Setup Face Photo",currentLocation:"Current Location",officeRadius:"Office Radius",insideOfficeArea:"Inside Office Area",outsideOfficeArea:"Outside Office Area",locationAccuracy:"Location Accuracy",gpsEnabled:"GPS Enabled",gpsDisabled:"GPS Disabled"}},Lwe=({children:e})=>{const[t,n]=M.useState("id");M.useEffect(()=>{const o=localStorage.getItem("language");o&&["id","en"].includes(o)&&n(o)},[]);const r=o=>{["id","en"].includes(o)&&(n(o),localStorage.setItem("language",o))},a=gb.useCallback(o=>{var s;return((s=Mwe[t])==null?void 0:s[o])||o},[t]),i=gb.useMemo(()=>({language:t,changeLanguage:r,t:a,isIndonesian:t==="id",isEnglish:t==="en"}),[t,a]);return d.jsx(Twe.Provider,{value:i,children:e})};function Iwe(){return d.jsx(Lwe,{children:d.jsx("div",{className:"flex flex-col min-h-screen",children:d.jsx(Iq,{children:d.jsx(Rwe,{})})})})}function Rwe(){const[e,t]=M.useState(null),[n,r]=M.useState(!0),[a,i]=M.useState(null),o=B_(),s=Za();M.useEffect(()=>{Pe.auth.getSession().then(({data:{session:c},error:f})=>{f?(console.error("Session error:",f),Pe.auth.signOut(),t(null)):(t(c),c&&l(c.user.id)),r(!1)}).catch(c=>{console.error("Unexpected session error:",c),Pe.auth.signOut(),t(null),r(!1)});const{data:{subscription:u}}=Pe.auth.onAuthStateChange((c,f)=>{t(f),f?l(f.user.id):i(null)});return()=>u.unsubscribe()},[]),M.useEffect(()=>{!["/login","/register","/dashboard","/profile-setup","/history","/admin","/admin/users","/admin/departments","/admin/positions","/admin/salary-payment","/admin/location","/admin/bank","/admin/attendance","/"].some(f=>o.pathname===f||f!=="/"&&o.pathname.startsWith(f+"/"))&&!n&&s(e?a==="admin"?"/admin":"/dashboard":"/login")},[o.pathname,n,e,a,s]);const l=async u=>{try{const{data:c,error:f}=await Pe.from("profiles").select("role").eq("id",u).single();if(f)throw f;i(c.role)}catch(c){console.error("Error fetching user role:",c),i(null)}};return n?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"inline-flex space-x-1 text-blue-600",children:[d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),d.jsx("p",{className:"text-gray-600 mt-4",children:"Memuat aplikasi..."})]})}):d.jsx("div",{className:"flex flex-col flex-1",children:d.jsxs(Rq,{children:[d.jsx(Ya,{path:"/login",element:e?a==="admin"?d.jsx(rr,{to:"/admin",replace:!0}):d.jsx(rr,{to:"/dashboard",replace:!0}):d.jsx($Y,{})}),d.jsx(Ya,{path:"/register",element:e?a==="admin"?d.jsx(rr,{to:"/admin",replace:!0}):d.jsx(rr,{to:"/dashboard",replace:!0}):d.jsx(gae,{})}),d.jsx(Ya,{path:"/dashboard",element:e?a==="admin"?d.jsx(rr,{to:"/admin",replace:!0}):d.jsx(Ise,{}):d.jsx(rr,{to:"/login",replace:!0})}),d.jsx(Ya,{path:"/profile-setup",element:e?d.jsx(Cwe,{}):d.jsx(rr,{to:"/login",replace:!0})}),d.jsx(Ya,{path:"/history",element:e?d.jsx(FB,{}):d.jsx(rr,{to:"/login",replace:!0})}),d.jsx(Ya,{path:"/admin",element:e&&a==="admin"?d.jsx(wwe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/users",element:e&&a==="admin"?d.jsx(Swe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/departments",element:e&&a==="admin"?d.jsx(jwe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/positions",element:e&&a==="admin"?d.jsx(Awe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/salary-payment",element:e&&a==="admin"?d.jsx(_we,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/location",element:e&&a==="admin"?d.jsx(Dwe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/bank",element:e&&a==="admin"?d.jsx(Pwe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/admin/attendance",element:e&&a==="admin"?d.jsx(Owe,{}):d.jsx(rr,{to:e?"/dashboard":"/login",replace:!0})}),d.jsx(Ya,{path:"/",element:e?a==="admin"?d.jsx(rr,{to:"/admin",replace:!0}):d.jsx(rr,{to:"/dashboard",replace:!0}):d.jsx(rr,{to:"/login",replace:!0})}),d.jsx(Ya,{path:"*",element:e?a==="admin"?d.jsx(rr,{to:"/admin",replace:!0}):d.jsx(rr,{to:"/dashboard",replace:!0}):d.jsx(rr,{to:"/login",replace:!0})})]})})}_V.createRoot(document.getElementById("root")).render(d.jsx(M.StrictMode,{children:d.jsx(Iwe,{})}));export{yn as _};
